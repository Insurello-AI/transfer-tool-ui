var n4=Object.defineProperty;var f_=i=>{throw TypeError(i)};var i4=(i,e,t)=>e in i?n4(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var O=(i,e,t)=>i4(i,typeof e!="symbol"?e+"":e,t),L1=(i,e,t)=>e.has(i)||f_("Cannot "+t);var a=(i,e,t)=>(L1(i,e,"read from private field"),t?t.call(i):e.get(i)),x=(i,e,t)=>e.has(i)?f_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),p=(i,e,t,n)=>(L1(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),_=(i,e,t)=>(L1(i,e,"access private method"),t);var Ot=(i,e,t,n)=>({set _(s){p(i,e,s,t)},get _(){return a(i,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function s4(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var r3={exports:{}},n1={},a3={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm=Symbol.for("react.element"),r4=Symbol.for("react.portal"),a4=Symbol.for("react.fragment"),o4=Symbol.for("react.strict_mode"),l4=Symbol.for("react.profiler"),d4=Symbol.for("react.provider"),c4=Symbol.for("react.context"),h4=Symbol.for("react.forward_ref"),u4=Symbol.for("react.suspense"),f4=Symbol.for("react.memo"),p4=Symbol.for("react.lazy"),p_=Symbol.iterator;function m4(i){return i===null||typeof i!="object"?null:(i=p_&&i[p_]||i["@@iterator"],typeof i=="function"?i:null)}var o3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},l3=Object.assign,d3={};function iu(i,e,t){this.props=i,this.context=e,this.refs=d3,this.updater=t||o3}iu.prototype.isReactComponent={};iu.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};iu.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function c3(){}c3.prototype=iu.prototype;function Rv(i,e,t){this.props=i,this.context=e,this.refs=d3,this.updater=t||o3}var Dv=Rv.prototype=new c3;Dv.constructor=Rv;l3(Dv,iu.prototype);Dv.isPureReactComponent=!0;var m_=Array.isArray,h3=Object.prototype.hasOwnProperty,Nv={current:null},u3={key:!0,ref:!0,__self:!0,__source:!0};function f3(i,e,t){var n,s={},r=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)h3.call(e,n)&&!u3.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=t;else if(1<l){for(var d=Array(l),c=0;c<l;c++)d[c]=arguments[c+2];s.children=d}if(i&&i.defaultProps)for(n in l=i.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:mm,type:i,key:r,ref:o,props:s,_owner:Nv.current}}function g4(i,e){return{$$typeof:mm,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function Hv(i){return typeof i=="object"&&i!==null&&i.$$typeof===mm}function x4(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(t){return e[t]})}var g_=/\/+/g;function M1(i,e){return typeof i=="object"&&i!==null&&i.key!=null?x4(""+i.key):e.toString(36)}function dg(i,e,t,n,s){var r=typeof i;(r==="undefined"||r==="boolean")&&(i=null);var o=!1;if(i===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(i.$$typeof){case mm:case r4:o=!0}}if(o)return o=i,s=s(o),i=n===""?"."+M1(o,0):n,m_(s)?(t="",i!=null&&(t=i.replace(g_,"$&/")+"/"),dg(s,e,t,"",function(c){return c})):s!=null&&(Hv(s)&&(s=g4(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(g_,"$&/")+"/")+i)),e.push(s)),1;if(o=0,n=n===""?".":n+":",m_(i))for(var l=0;l<i.length;l++){r=i[l];var d=n+M1(r,l);o+=dg(r,e,t,d,s)}else if(d=m4(i),typeof d=="function")for(i=d.call(i),l=0;!(r=i.next()).done;)r=r.value,d=n+M1(r,l++),o+=dg(r,e,t,d,s);else if(r==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Dm(i,e,t){if(i==null)return i;var n=[],s=0;return dg(i,n,"","",function(r){return e.call(t,r,s++)}),n}function v4(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(t){(i._status===0||i._status===-1)&&(i._status=1,i._result=t)},function(t){(i._status===0||i._status===-1)&&(i._status=2,i._result=t)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var zn={current:null},cg={transition:null},y4={ReactCurrentDispatcher:zn,ReactCurrentBatchConfig:cg,ReactCurrentOwner:Nv};function p3(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:Dm,forEach:function(i,e,t){Dm(i,function(){e.apply(this,arguments)},t)},count:function(i){var e=0;return Dm(i,function(){e++}),e},toArray:function(i){return Dm(i,function(e){return e})||[]},only:function(i){if(!Hv(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};ke.Component=iu;ke.Fragment=a4;ke.Profiler=l4;ke.PureComponent=Rv;ke.StrictMode=o4;ke.Suspense=u4;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y4;ke.act=p3;ke.cloneElement=function(i,e,t){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var n=l3({},i.props),s=i.key,r=i.ref,o=i._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=Nv.current),e.key!==void 0&&(s=""+e.key),i.type&&i.type.defaultProps)var l=i.type.defaultProps;for(d in e)h3.call(e,d)&&!u3.hasOwnProperty(d)&&(n[d]=e[d]===void 0&&l!==void 0?l[d]:e[d])}var d=arguments.length-2;if(d===1)n.children=t;else if(1<d){l=Array(d);for(var c=0;c<d;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:mm,type:i.type,key:s,ref:r,props:n,_owner:o}};ke.createContext=function(i){return i={$$typeof:c4,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:d4,_context:i},i.Consumer=i};ke.createElement=f3;ke.createFactory=function(i){var e=f3.bind(null,i);return e.type=i,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(i){return{$$typeof:h4,render:i}};ke.isValidElement=Hv;ke.lazy=function(i){return{$$typeof:p4,_payload:{_status:-1,_result:i},_init:v4}};ke.memo=function(i,e){return{$$typeof:f4,type:i,compare:e===void 0?null:e}};ke.startTransition=function(i){var e=cg.transition;cg.transition={};try{i()}finally{cg.transition=e}};ke.unstable_act=p3;ke.useCallback=function(i,e){return zn.current.useCallback(i,e)};ke.useContext=function(i){return zn.current.useContext(i)};ke.useDebugValue=function(){};ke.useDeferredValue=function(i){return zn.current.useDeferredValue(i)};ke.useEffect=function(i,e){return zn.current.useEffect(i,e)};ke.useId=function(){return zn.current.useId()};ke.useImperativeHandle=function(i,e,t){return zn.current.useImperativeHandle(i,e,t)};ke.useInsertionEffect=function(i,e){return zn.current.useInsertionEffect(i,e)};ke.useLayoutEffect=function(i,e){return zn.current.useLayoutEffect(i,e)};ke.useMemo=function(i,e){return zn.current.useMemo(i,e)};ke.useReducer=function(i,e,t){return zn.current.useReducer(i,e,t)};ke.useRef=function(i){return zn.current.useRef(i)};ke.useState=function(i){return zn.current.useState(i)};ke.useSyncExternalStore=function(i,e,t){return zn.current.useSyncExternalStore(i,e,t)};ke.useTransition=function(){return zn.current.useTransition()};ke.version="18.3.1";a3.exports=ke;var M=a3.exports;const m3=s4(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _4=M,b4=Symbol.for("react.element"),k4=Symbol.for("react.fragment"),w4=Object.prototype.hasOwnProperty,S4=_4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A4={key:!0,ref:!0,__self:!0,__source:!0};function g3(i,e,t){var n,s={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)w4.call(e,n)&&!A4.hasOwnProperty(n)&&(s[n]=e[n]);if(i&&i.defaultProps)for(n in e=i.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:b4,type:i,key:r,ref:o,props:s,_owner:S4.current}}n1.Fragment=k4;n1.jsx=g3;n1.jsxs=g3;r3.exports=n1;var y=r3.exports,xx={},x3={exports:{}},Di={},v3={exports:{}},y3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(H,W){var se=H.length;H.push(W);e:for(;0<se;){var J=se-1>>>1,ae=H[J];if(0<s(ae,W))H[J]=W,H[se]=ae,se=J;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var W=H[0],se=H.pop();if(se!==W){H[0]=se;e:for(var J=0,ae=H.length,de=ae>>>1;J<de;){var st=2*(J+1)-1,Ue=H[st],vt=st+1,Re=H[vt];if(0>s(Ue,se))vt<ae&&0>s(Re,Ue)?(H[J]=Re,H[vt]=se,J=vt):(H[J]=Ue,H[st]=se,J=st);else if(vt<ae&&0>s(Re,se))H[J]=Re,H[vt]=se,J=vt;else break e}}return W}function s(H,W){var se=H.sortIndex-W.sortIndex;return se!==0?se:H.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();i.unstable_now=function(){return o.now()-l}}var d=[],c=[],h=1,u=null,f=3,m=!1,b=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(H){for(var W=t(c);W!==null;){if(W.callback===null)n(c);else if(W.startTime<=H)n(c),W.sortIndex=W.expirationTime,e(d,W);else break;W=t(c)}}function A(H){if(v=!1,w(H),!b)if(t(d)!==null)b=!0,q(T);else{var W=t(c);W!==null&&G(A,W.startTime-H)}}function T(H,W){b=!1,v&&(v=!1,g(L),L=-1),m=!0;var se=f;try{for(w(W),u=t(d);u!==null&&(!(u.expirationTime>W)||H&&!j());){var J=u.callback;if(typeof J=="function"){u.callback=null,f=u.priorityLevel;var ae=J(u.expirationTime<=W);W=i.unstable_now(),typeof ae=="function"?u.callback=ae:u===t(d)&&n(d),w(W)}else n(d);u=t(d)}if(u!==null)var de=!0;else{var st=t(c);st!==null&&G(A,st.startTime-W),de=!1}return de}finally{u=null,f=se,m=!1}}var I=!1,C=null,L=-1,F=5,D=-1;function j(){return!(i.unstable_now()-D<F)}function N(){if(C!==null){var H=i.unstable_now();D=H;var W=!0;try{W=C(!0,H)}finally{W?ie():(I=!1,C=null)}}else I=!1}var ie;if(typeof k=="function")ie=function(){k(N)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,X=R.port2;R.port1.onmessage=N,ie=function(){X.postMessage(null)}}else ie=function(){S(N,0)};function q(H){C=H,I||(I=!0,ie())}function G(H,W){L=S(function(){H(i.unstable_now())},W)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_continueExecution=function(){b||m||(b=!0,q(T))},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return f},i.unstable_getFirstCallbackNode=function(){return t(d)},i.unstable_next=function(H){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var se=f;f=W;try{return H()}finally{f=se}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var se=f;f=H;try{return W()}finally{f=se}},i.unstable_scheduleCallback=function(H,W,se){var J=i.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?J+se:J):se=J,H){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=se+ae,H={id:h++,callback:W,priorityLevel:H,startTime:se,expirationTime:ae,sortIndex:-1},se>J?(H.sortIndex=se,e(c,H),t(d)===null&&H===t(c)&&(v?(g(L),L=-1):v=!0,G(A,se-J))):(H.sortIndex=ae,e(d,H),b||m||(b=!0,q(T))),H},i.unstable_shouldYield=j,i.unstable_wrapCallback=function(H){var W=f;return function(){var se=f;f=W;try{return H.apply(this,arguments)}finally{f=se}}}})(y3);v3.exports=y3;var P4=v3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T4=M,Fi=P4;function B(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _3=new Set,hf={};function Pd(i,e){$h(i,e),$h(i+"Capture",e)}function $h(i,e){for(hf[i]=e,i=0;i<e.length;i++)_3.add(e[i])}var fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vx=Object.prototype.hasOwnProperty,I4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x_={},v_={};function C4(i){return vx.call(v_,i)?!0:vx.call(x_,i)?!1:I4.test(i)?v_[i]=!0:(x_[i]=!0,!1)}function E4(i,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function L4(i,e,t,n){if(e===null||typeof e>"u"||E4(i,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bn(i,e,t,n,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){gn[i]=new Bn(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];gn[e]=new Bn(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){gn[i]=new Bn(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){gn[i]=new Bn(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){gn[i]=new Bn(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){gn[i]=new Bn(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){gn[i]=new Bn(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){gn[i]=new Bn(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){gn[i]=new Bn(i,5,!1,i.toLowerCase(),null,!1,!1)});var jv=/[\-:]([a-z])/g;function Ov(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(jv,Ov);gn[e]=new Bn(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(jv,Ov);gn[e]=new Bn(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(jv,Ov);gn[e]=new Bn(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){gn[i]=new Bn(i,1,!1,i.toLowerCase(),null,!1,!1)});gn.xlinkHref=new Bn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){gn[i]=new Bn(i,1,!1,i.toLowerCase(),null,!0,!0)});function zv(i,e,t,n){var s=gn.hasOwnProperty(e)?gn[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(L4(e,t,s,n)&&(t=null),n||s===null?C4(e)&&(t===null?i.removeAttribute(e):i.setAttribute(e,""+t)):s.mustUseProperty?i[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,n=s.attributeNamespace,t===null?i.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,n?i.setAttributeNS(n,e,t):i.setAttribute(e,t))))}var ba=T4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nm=Symbol.for("react.element"),Jd=Symbol.for("react.portal"),Zd=Symbol.for("react.fragment"),Bv=Symbol.for("react.strict_mode"),yx=Symbol.for("react.profiler"),b3=Symbol.for("react.provider"),k3=Symbol.for("react.context"),qv=Symbol.for("react.forward_ref"),_x=Symbol.for("react.suspense"),bx=Symbol.for("react.suspense_list"),Xv=Symbol.for("react.memo"),Ta=Symbol.for("react.lazy"),w3=Symbol.for("react.offscreen"),y_=Symbol.iterator;function pu(i){return i===null||typeof i!="object"?null:(i=y_&&i[y_]||i["@@iterator"],typeof i=="function"?i:null)}var xt=Object.assign,F1;function Iu(i){if(F1===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);F1=e&&e[1]||""}return`
`+F1+i}var R1=!1;function D1(i,e){if(!i||R1)return"";R1=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(i,[],e)}else{try{e.call()}catch(c){n=c}i.call(e.prototype)}else{try{throw Error()}catch(c){n=c}i()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=n.stack.split(`
`),o=s.length-1,l=r.length-1;1<=o&&0<=l&&s[o]!==r[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==r[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==r[l]){var d=`
`+s[o].replace(" at new "," at ");return i.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",i.displayName)),d}while(1<=o&&0<=l);break}}}finally{R1=!1,Error.prepareStackTrace=t}return(i=i?i.displayName||i.name:"")?Iu(i):""}function M4(i){switch(i.tag){case 5:return Iu(i.type);case 16:return Iu("Lazy");case 13:return Iu("Suspense");case 19:return Iu("SuspenseList");case 0:case 2:case 15:return i=D1(i.type,!1),i;case 11:return i=D1(i.type.render,!1),i;case 1:return i=D1(i.type,!0),i;default:return""}}function kx(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Zd:return"Fragment";case Jd:return"Portal";case yx:return"Profiler";case Bv:return"StrictMode";case _x:return"Suspense";case bx:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case k3:return(i.displayName||"Context")+".Consumer";case b3:return(i._context.displayName||"Context")+".Provider";case qv:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Xv:return e=i.displayName||null,e!==null?e:kx(i.type)||"Memo";case Ta:e=i._payload,i=i._init;try{return kx(i(e))}catch{}}return null}function F4(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kx(e);case 8:return e===Bv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function No(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function S3(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function R4(i){var e=S3(i)?"checked":"value",t=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),n=""+i[e];if(!i.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,r.call(this,o)}}),Object.defineProperty(i,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function Hm(i){i._valueTracker||(i._valueTracker=R4(i))}function A3(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return i&&(n=S3(i)?i.checked?"true":"false":i.value),i=n,i!==t?(e.setValue(i),!0):!1}function Zg(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function wx(i,e){var t=e.checked;return xt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??i._wrapperState.initialChecked})}function __(i,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=No(e.value!=null?e.value:t),i._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function P3(i,e){e=e.checked,e!=null&&zv(i,"checked",e,!1)}function Sx(i,e){P3(i,e);var t=No(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&i.value===""||i.value!=t)&&(i.value=""+t):i.value!==""+t&&(i.value=""+t);else if(n==="submit"||n==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?Ax(i,e.type,t):e.hasOwnProperty("defaultValue")&&Ax(i,e.type,No(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function b_(i,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,t||e===i.value||(i.value=e),i.defaultValue=e}t=i.name,t!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,t!==""&&(i.name=t)}function Ax(i,e,t){(e!=="number"||Zg(i.ownerDocument)!==i)&&(t==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+t&&(i.defaultValue=""+t))}var Cu=Array.isArray;function mc(i,e,t,n){if(i=i.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<i.length;t++)s=e.hasOwnProperty("$"+i[t].value),i[t].selected!==s&&(i[t].selected=s),s&&n&&(i[t].defaultSelected=!0)}else{for(t=""+No(t),e=null,s=0;s<i.length;s++){if(i[s].value===t){i[s].selected=!0,n&&(i[s].defaultSelected=!0);return}e!==null||i[s].disabled||(e=i[s])}e!==null&&(e.selected=!0)}}function Px(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return xt({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function k_(i,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(B(92));if(Cu(t)){if(1<t.length)throw Error(B(93));t=t[0]}e=t}e==null&&(e=""),t=e}i._wrapperState={initialValue:No(t)}}function T3(i,e){var t=No(e.value),n=No(e.defaultValue);t!=null&&(t=""+t,t!==i.value&&(i.value=t),e.defaultValue==null&&i.defaultValue!==t&&(i.defaultValue=t)),n!=null&&(i.defaultValue=""+n)}function w_(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function I3(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tx(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?I3(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var jm,C3=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,s){MSApp.execUnsafeLocalFunction(function(){return i(e,t,n,s)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(jm=jm||document.createElement("div"),jm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jm.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function uf(i,e){if(e){var t=i.firstChild;if(t&&t===i.lastChild&&t.nodeType===3){t.nodeValue=e;return}}i.textContent=e}var ef={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D4=["Webkit","ms","Moz","O"];Object.keys(ef).forEach(function(i){D4.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),ef[e]=ef[i]})});function E3(i,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ef.hasOwnProperty(i)&&ef[i]?(""+e).trim():e+"px"}function L3(i,e){i=i.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,s=E3(t,e[t],n);t==="float"&&(t="cssFloat"),n?i.setProperty(t,s):i[t]=s}}var N4=xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ix(i,e){if(e){if(N4[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Cx(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ex=null;function Yv(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Lx=null,gc=null,xc=null;function S_(i){if(i=vm(i)){if(typeof Lx!="function")throw Error(B(280));var e=i.stateNode;e&&(e=o1(e),Lx(i.stateNode,i.type,e))}}function M3(i){gc?xc?xc.push(i):xc=[i]:gc=i}function F3(){if(gc){var i=gc,e=xc;if(xc=gc=null,S_(i),e)for(i=0;i<e.length;i++)S_(e[i])}}function R3(i,e){return i(e)}function D3(){}var N1=!1;function N3(i,e,t){if(N1)return i(e,t);N1=!0;try{return R3(i,e,t)}finally{N1=!1,(gc!==null||xc!==null)&&(D3(),F3())}}function ff(i,e){var t=i.stateNode;if(t===null)return null;var n=o1(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(i=i.type,n=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!n;break e;default:i=!1}if(i)return null;if(t&&typeof t!="function")throw Error(B(231,e,typeof t));return t}var Mx=!1;if(fa)try{var mu={};Object.defineProperty(mu,"passive",{get:function(){Mx=!0}}),window.addEventListener("test",mu,mu),window.removeEventListener("test",mu,mu)}catch{Mx=!1}function H4(i,e,t,n,s,r,o,l,d){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(h){this.onError(h)}}var tf=!1,e0=null,t0=!1,Fx=null,j4={onError:function(i){tf=!0,e0=i}};function O4(i,e,t,n,s,r,o,l,d){tf=!1,e0=null,H4.apply(j4,arguments)}function z4(i,e,t,n,s,r,o,l,d){if(O4.apply(this,arguments),tf){if(tf){var c=e0;tf=!1,e0=null}else throw Error(B(198));t0||(t0=!0,Fx=c)}}function Td(i){var e=i,t=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(t=e.return),i=e.return;while(i)}return e.tag===3?t:null}function H3(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function A_(i){if(Td(i)!==i)throw Error(B(188))}function B4(i){var e=i.alternate;if(!e){if(e=Td(i),e===null)throw Error(B(188));return e!==i?null:i}for(var t=i,n=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(n=s.return,n!==null){t=n;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return A_(s),i;if(r===n)return A_(s),e;r=r.sibling}throw Error(B(188))}if(t.return!==n.return)t=s,n=r;else{for(var o=!1,l=s.child;l;){if(l===t){o=!0,t=s,n=r;break}if(l===n){o=!0,n=s,t=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===t){o=!0,t=r,n=s;break}if(l===n){o=!0,n=r,t=s;break}l=l.sibling}if(!o)throw Error(B(189))}}if(t.alternate!==n)throw Error(B(190))}if(t.tag!==3)throw Error(B(188));return t.stateNode.current===t?i:e}function j3(i){return i=B4(i),i!==null?O3(i):null}function O3(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=O3(i);if(e!==null)return e;i=i.sibling}return null}var z3=Fi.unstable_scheduleCallback,P_=Fi.unstable_cancelCallback,q4=Fi.unstable_shouldYield,X4=Fi.unstable_requestPaint,Lt=Fi.unstable_now,Y4=Fi.unstable_getCurrentPriorityLevel,Uv=Fi.unstable_ImmediatePriority,B3=Fi.unstable_UserBlockingPriority,n0=Fi.unstable_NormalPriority,U4=Fi.unstable_LowPriority,q3=Fi.unstable_IdlePriority,i1=null,cr=null;function V4(i){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(i1,i,void 0,(i.current.flags&128)===128)}catch{}}var As=Math.clz32?Math.clz32:W4,$4=Math.log,G4=Math.LN2;function W4(i){return i>>>=0,i===0?32:31-($4(i)/G4|0)|0}var Om=64,zm=4194304;function Eu(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function i0(i,e){var t=i.pendingLanes;if(t===0)return 0;var n=0,s=i.suspendedLanes,r=i.pingedLanes,o=t&268435455;if(o!==0){var l=o&~s;l!==0?n=Eu(l):(r&=o,r!==0&&(n=Eu(r)))}else o=t&~s,o!==0?n=Eu(o):r!==0&&(n=Eu(r));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(n&4&&(n|=t&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=n;0<e;)t=31-As(e),s=1<<t,n|=i[t],e&=~s;return n}function K4(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Q4(i,e){for(var t=i.suspendedLanes,n=i.pingedLanes,s=i.expirationTimes,r=i.pendingLanes;0<r;){var o=31-As(r),l=1<<o,d=s[o];d===-1?(!(l&t)||l&n)&&(s[o]=K4(l,e)):d<=e&&(i.expiredLanes|=l),r&=~l}}function Rx(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function X3(){var i=Om;return Om<<=1,!(Om&4194240)&&(Om=64),i}function H1(i){for(var e=[],t=0;31>t;t++)e.push(i);return e}function gm(i,e,t){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-As(e),i[e]=t}function J4(i,e){var t=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var n=i.eventTimes;for(i=i.expirationTimes;0<t;){var s=31-As(t),r=1<<s;e[s]=0,n[s]=-1,i[s]=-1,t&=~r}}function Vv(i,e){var t=i.entangledLanes|=e;for(i=i.entanglements;t;){var n=31-As(t),s=1<<n;s&e|i[n]&e&&(i[n]|=e),t&=~s}}var je=0;function Y3(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var U3,$v,V3,$3,G3,Dx=!1,Bm=[],Io=null,Co=null,Eo=null,pf=new Map,mf=new Map,Ca=[],Z4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function T_(i,e){switch(i){case"focusin":case"focusout":Io=null;break;case"dragenter":case"dragleave":Co=null;break;case"mouseover":case"mouseout":Eo=null;break;case"pointerover":case"pointerout":pf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mf.delete(e.pointerId)}}function gu(i,e,t,n,s,r){return i===null||i.nativeEvent!==r?(i={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:r,targetContainers:[s]},e!==null&&(e=vm(e),e!==null&&$v(e)),i):(i.eventSystemFlags|=n,e=i.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),i)}function eS(i,e,t,n,s){switch(e){case"focusin":return Io=gu(Io,i,e,t,n,s),!0;case"dragenter":return Co=gu(Co,i,e,t,n,s),!0;case"mouseover":return Eo=gu(Eo,i,e,t,n,s),!0;case"pointerover":var r=s.pointerId;return pf.set(r,gu(pf.get(r)||null,i,e,t,n,s)),!0;case"gotpointercapture":return r=s.pointerId,mf.set(r,gu(mf.get(r)||null,i,e,t,n,s)),!0}return!1}function W3(i){var e=il(i.target);if(e!==null){var t=Td(e);if(t!==null){if(e=t.tag,e===13){if(e=H3(t),e!==null){i.blockedOn=e,G3(i.priority,function(){V3(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){i.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}i.blockedOn=null}function hg(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var t=Nx(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(t===null){t=i.nativeEvent;var n=new t.constructor(t.type,t);Ex=n,t.target.dispatchEvent(n),Ex=null}else return e=vm(t),e!==null&&$v(e),i.blockedOn=t,!1;e.shift()}return!0}function I_(i,e,t){hg(i)&&t.delete(e)}function tS(){Dx=!1,Io!==null&&hg(Io)&&(Io=null),Co!==null&&hg(Co)&&(Co=null),Eo!==null&&hg(Eo)&&(Eo=null),pf.forEach(I_),mf.forEach(I_)}function xu(i,e){i.blockedOn===e&&(i.blockedOn=null,Dx||(Dx=!0,Fi.unstable_scheduleCallback(Fi.unstable_NormalPriority,tS)))}function gf(i){function e(s){return xu(s,i)}if(0<Bm.length){xu(Bm[0],i);for(var t=1;t<Bm.length;t++){var n=Bm[t];n.blockedOn===i&&(n.blockedOn=null)}}for(Io!==null&&xu(Io,i),Co!==null&&xu(Co,i),Eo!==null&&xu(Eo,i),pf.forEach(e),mf.forEach(e),t=0;t<Ca.length;t++)n=Ca[t],n.blockedOn===i&&(n.blockedOn=null);for(;0<Ca.length&&(t=Ca[0],t.blockedOn===null);)W3(t),t.blockedOn===null&&Ca.shift()}var vc=ba.ReactCurrentBatchConfig,s0=!0;function nS(i,e,t,n){var s=je,r=vc.transition;vc.transition=null;try{je=1,Gv(i,e,t,n)}finally{je=s,vc.transition=r}}function iS(i,e,t,n){var s=je,r=vc.transition;vc.transition=null;try{je=4,Gv(i,e,t,n)}finally{je=s,vc.transition=r}}function Gv(i,e,t,n){if(s0){var s=Nx(i,e,t,n);if(s===null)$1(i,e,n,r0,t),T_(i,n);else if(eS(s,i,e,t,n))n.stopPropagation();else if(T_(i,n),e&4&&-1<Z4.indexOf(i)){for(;s!==null;){var r=vm(s);if(r!==null&&U3(r),r=Nx(i,e,t,n),r===null&&$1(i,e,n,r0,t),r===s)break;s=r}s!==null&&n.stopPropagation()}else $1(i,e,n,null,t)}}var r0=null;function Nx(i,e,t,n){if(r0=null,i=Yv(n),i=il(i),i!==null)if(e=Td(i),e===null)i=null;else if(t=e.tag,t===13){if(i=H3(e),i!==null)return i;i=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return r0=i,null}function K3(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Y4()){case Uv:return 1;case B3:return 4;case n0:case U4:return 16;case q3:return 536870912;default:return 16}default:return 16}}var Po=null,Wv=null,ug=null;function Q3(){if(ug)return ug;var i,e=Wv,t=e.length,n,s="value"in Po?Po.value:Po.textContent,r=s.length;for(i=0;i<t&&e[i]===s[i];i++);var o=t-i;for(n=1;n<=o&&e[t-n]===s[r-n];n++);return ug=s.slice(i,1<n?1-n:void 0)}function fg(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function qm(){return!0}function C_(){return!1}function Ni(i){function e(t,n,s,r,o){this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in i)i.hasOwnProperty(l)&&(t=i[l],this[l]=t?t(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?qm:C_,this.isPropagationStopped=C_,this}return xt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=qm)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=qm)},persist:function(){},isPersistent:qm}),e}var su={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kv=Ni(su),xm=xt({},su,{view:0,detail:0}),sS=Ni(xm),j1,O1,vu,s1=xt({},xm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qv,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==vu&&(vu&&i.type==="mousemove"?(j1=i.screenX-vu.screenX,O1=i.screenY-vu.screenY):O1=j1=0,vu=i),j1)},movementY:function(i){return"movementY"in i?i.movementY:O1}}),E_=Ni(s1),rS=xt({},s1,{dataTransfer:0}),aS=Ni(rS),oS=xt({},xm,{relatedTarget:0}),z1=Ni(oS),lS=xt({},su,{animationName:0,elapsedTime:0,pseudoElement:0}),dS=Ni(lS),cS=xt({},su,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),hS=Ni(cS),uS=xt({},su,{data:0}),L_=Ni(uS),fS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gS(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=mS[i])?!!e[i]:!1}function Qv(){return gS}var xS=xt({},xm,{key:function(i){if(i.key){var e=fS[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=fg(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?pS[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qv,charCode:function(i){return i.type==="keypress"?fg(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?fg(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),vS=Ni(xS),yS=xt({},s1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M_=Ni(yS),_S=xt({},xm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qv}),bS=Ni(_S),kS=xt({},su,{propertyName:0,elapsedTime:0,pseudoElement:0}),wS=Ni(kS),SS=xt({},s1,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),AS=Ni(SS),PS=[9,13,27,32],Jv=fa&&"CompositionEvent"in window,nf=null;fa&&"documentMode"in document&&(nf=document.documentMode);var TS=fa&&"TextEvent"in window&&!nf,J3=fa&&(!Jv||nf&&8<nf&&11>=nf),F_=" ",R_=!1;function Z3(i,e){switch(i){case"keyup":return PS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function e5(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ec=!1;function IS(i,e){switch(i){case"compositionend":return e5(e);case"keypress":return e.which!==32?null:(R_=!0,F_);case"textInput":return i=e.data,i===F_&&R_?null:i;default:return null}}function CS(i,e){if(ec)return i==="compositionend"||!Jv&&Z3(i,e)?(i=Q3(),ug=Wv=Po=null,ec=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return J3&&e.locale!=="ko"?null:e.data;default:return null}}var ES={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D_(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!ES[i.type]:e==="textarea"}function t5(i,e,t,n){M3(n),e=a0(e,"onChange"),0<e.length&&(t=new Kv("onChange","change",null,t,n),i.push({event:t,listeners:e}))}var sf=null,xf=null;function LS(i){u5(i,0)}function r1(i){var e=ic(i);if(A3(e))return i}function MS(i,e){if(i==="change")return e}var n5=!1;if(fa){var B1;if(fa){var q1="oninput"in document;if(!q1){var N_=document.createElement("div");N_.setAttribute("oninput","return;"),q1=typeof N_.oninput=="function"}B1=q1}else B1=!1;n5=B1&&(!document.documentMode||9<document.documentMode)}function H_(){sf&&(sf.detachEvent("onpropertychange",i5),xf=sf=null)}function i5(i){if(i.propertyName==="value"&&r1(xf)){var e=[];t5(e,xf,i,Yv(i)),N3(LS,e)}}function FS(i,e,t){i==="focusin"?(H_(),sf=e,xf=t,sf.attachEvent("onpropertychange",i5)):i==="focusout"&&H_()}function RS(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return r1(xf)}function DS(i,e){if(i==="click")return r1(e)}function NS(i,e){if(i==="input"||i==="change")return r1(e)}function HS(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var Ts=typeof Object.is=="function"?Object.is:HS;function vf(i,e){if(Ts(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var s=t[n];if(!vx.call(e,s)||!Ts(i[s],e[s]))return!1}return!0}function j_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function O_(i,e){var t=j_(i);i=0;for(var n;t;){if(t.nodeType===3){if(n=i+t.textContent.length,i<=e&&n>=e)return{node:t,offset:e-i};i=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=j_(t)}}function s5(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?s5(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function r5(){for(var i=window,e=Zg();e instanceof i.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)i=e.contentWindow;else break;e=Zg(i.document)}return e}function Zv(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function jS(i){var e=r5(),t=i.focusedElem,n=i.selectionRange;if(e!==t&&t&&t.ownerDocument&&s5(t.ownerDocument.documentElement,t)){if(n!==null&&Zv(t)){if(e=n.start,i=n.end,i===void 0&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if(i=(e=t.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var s=t.textContent.length,r=Math.min(n.start,s);n=n.end===void 0?r:Math.min(n.end,s),!i.extend&&r>n&&(s=n,n=r,r=s),s=O_(t,r);var o=O_(t,n);s&&o&&(i.rangeCount!==1||i.anchorNode!==s.node||i.anchorOffset!==s.offset||i.focusNode!==o.node||i.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),i.removeAllRanges(),r>n?(i.addRange(e),i.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),i.addRange(e)))}}for(e=[],i=t;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)i=e[t],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var OS=fa&&"documentMode"in document&&11>=document.documentMode,tc=null,Hx=null,rf=null,jx=!1;function z_(i,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;jx||tc==null||tc!==Zg(n)||(n=tc,"selectionStart"in n&&Zv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),rf&&vf(rf,n)||(rf=n,n=a0(Hx,"onSelect"),0<n.length&&(e=new Kv("onSelect","select",null,e,t),i.push({event:e,listeners:n}),e.target=tc)))}function Xm(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit"+i]="webkit"+e,t["Moz"+i]="moz"+e,t}var nc={animationend:Xm("Animation","AnimationEnd"),animationiteration:Xm("Animation","AnimationIteration"),animationstart:Xm("Animation","AnimationStart"),transitionend:Xm("Transition","TransitionEnd")},X1={},a5={};fa&&(a5=document.createElement("div").style,"AnimationEvent"in window||(delete nc.animationend.animation,delete nc.animationiteration.animation,delete nc.animationstart.animation),"TransitionEvent"in window||delete nc.transitionend.transition);function a1(i){if(X1[i])return X1[i];if(!nc[i])return i;var e=nc[i],t;for(t in e)if(e.hasOwnProperty(t)&&t in a5)return X1[i]=e[t];return i}var o5=a1("animationend"),l5=a1("animationiteration"),d5=a1("animationstart"),c5=a1("transitionend"),h5=new Map,B_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qo(i,e){h5.set(i,e),Pd(e,[i])}for(var Y1=0;Y1<B_.length;Y1++){var U1=B_[Y1],zS=U1.toLowerCase(),BS=U1[0].toUpperCase()+U1.slice(1);qo(zS,"on"+BS)}qo(o5,"onAnimationEnd");qo(l5,"onAnimationIteration");qo(d5,"onAnimationStart");qo("dblclick","onDoubleClick");qo("focusin","onFocus");qo("focusout","onBlur");qo(c5,"onTransitionEnd");$h("onMouseEnter",["mouseout","mouseover"]);$h("onMouseLeave",["mouseout","mouseover"]);$h("onPointerEnter",["pointerout","pointerover"]);$h("onPointerLeave",["pointerout","pointerover"]);Pd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lu));function q_(i,e,t){var n=i.type||"unknown-event";i.currentTarget=t,z4(n,e,void 0,i),i.currentTarget=null}function u5(i,e){e=(e&4)!==0;for(var t=0;t<i.length;t++){var n=i[t],s=n.event;n=n.listeners;e:{var r=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],d=l.instance,c=l.currentTarget;if(l=l.listener,d!==r&&s.isPropagationStopped())break e;q_(s,l,c),r=d}else for(o=0;o<n.length;o++){if(l=n[o],d=l.instance,c=l.currentTarget,l=l.listener,d!==r&&s.isPropagationStopped())break e;q_(s,l,c),r=d}}}if(t0)throw i=Fx,t0=!1,Fx=null,i}function tt(i,e){var t=e[Xx];t===void 0&&(t=e[Xx]=new Set);var n=i+"__bubble";t.has(n)||(f5(e,i,2,!1),t.add(n))}function V1(i,e,t){var n=0;e&&(n|=4),f5(t,i,n,e)}var Ym="_reactListening"+Math.random().toString(36).slice(2);function yf(i){if(!i[Ym]){i[Ym]=!0,_3.forEach(function(t){t!=="selectionchange"&&(qS.has(t)||V1(t,!1,i),V1(t,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[Ym]||(e[Ym]=!0,V1("selectionchange",!1,e))}}function f5(i,e,t,n){switch(K3(e)){case 1:var s=nS;break;case 4:s=iS;break;default:s=Gv}t=s.bind(null,e,t,i),s=void 0,!Mx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?i.addEventListener(e,t,{capture:!0,passive:s}):i.addEventListener(e,t,!0):s!==void 0?i.addEventListener(e,t,{passive:s}):i.addEventListener(e,t,!1)}function $1(i,e,t,n,s){var r=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;o=o.return}for(;l!==null;){if(o=il(l),o===null)return;if(d=o.tag,d===5||d===6){n=r=o;continue e}l=l.parentNode}}n=n.return}N3(function(){var c=r,h=Yv(t),u=[];e:{var f=h5.get(i);if(f!==void 0){var m=Kv,b=i;switch(i){case"keypress":if(fg(t)===0)break e;case"keydown":case"keyup":m=vS;break;case"focusin":b="focus",m=z1;break;case"focusout":b="blur",m=z1;break;case"beforeblur":case"afterblur":m=z1;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=E_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=aS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=bS;break;case o5:case l5:case d5:m=dS;break;case c5:m=wS;break;case"scroll":m=sS;break;case"wheel":m=AS;break;case"copy":case"cut":case"paste":m=hS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=M_}var v=(e&4)!==0,S=!v&&i==="scroll",g=v?f!==null?f+"Capture":null:f;v=[];for(var k=c,w;k!==null;){w=k;var A=w.stateNode;if(w.tag===5&&A!==null&&(w=A,g!==null&&(A=ff(k,g),A!=null&&v.push(_f(k,A,w)))),S)break;k=k.return}0<v.length&&(f=new m(f,b,null,t,h),u.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=i==="mouseover"||i==="pointerover",m=i==="mouseout"||i==="pointerout",f&&t!==Ex&&(b=t.relatedTarget||t.fromElement)&&(il(b)||b[pa]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(b=t.relatedTarget||t.toElement,m=c,b=b?il(b):null,b!==null&&(S=Td(b),b!==S||b.tag!==5&&b.tag!==6)&&(b=null)):(m=null,b=c),m!==b)){if(v=E_,A="onMouseLeave",g="onMouseEnter",k="mouse",(i==="pointerout"||i==="pointerover")&&(v=M_,A="onPointerLeave",g="onPointerEnter",k="pointer"),S=m==null?f:ic(m),w=b==null?f:ic(b),f=new v(A,k+"leave",m,t,h),f.target=S,f.relatedTarget=w,A=null,il(h)===c&&(v=new v(g,k+"enter",b,t,h),v.target=w,v.relatedTarget=S,A=v),S=A,m&&b)t:{for(v=m,g=b,k=0,w=v;w;w=Bd(w))k++;for(w=0,A=g;A;A=Bd(A))w++;for(;0<k-w;)v=Bd(v),k--;for(;0<w-k;)g=Bd(g),w--;for(;k--;){if(v===g||g!==null&&v===g.alternate)break t;v=Bd(v),g=Bd(g)}v=null}else v=null;m!==null&&X_(u,f,m,v,!1),b!==null&&S!==null&&X_(u,S,b,v,!0)}}e:{if(f=c?ic(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var T=MS;else if(D_(f))if(n5)T=NS;else{T=RS;var I=FS}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=DS);if(T&&(T=T(i,c))){t5(u,T,t,h);break e}I&&I(i,f,c),i==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&Ax(f,"number",f.value)}switch(I=c?ic(c):window,i){case"focusin":(D_(I)||I.contentEditable==="true")&&(tc=I,Hx=c,rf=null);break;case"focusout":rf=Hx=tc=null;break;case"mousedown":jx=!0;break;case"contextmenu":case"mouseup":case"dragend":jx=!1,z_(u,t,h);break;case"selectionchange":if(OS)break;case"keydown":case"keyup":z_(u,t,h)}var C;if(Jv)e:{switch(i){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else ec?Z3(i,t)&&(L="onCompositionEnd"):i==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(J3&&t.locale!=="ko"&&(ec||L!=="onCompositionStart"?L==="onCompositionEnd"&&ec&&(C=Q3()):(Po=h,Wv="value"in Po?Po.value:Po.textContent,ec=!0)),I=a0(c,L),0<I.length&&(L=new L_(L,i,null,t,h),u.push({event:L,listeners:I}),C?L.data=C:(C=e5(t),C!==null&&(L.data=C)))),(C=TS?IS(i,t):CS(i,t))&&(c=a0(c,"onBeforeInput"),0<c.length&&(h=new L_("onBeforeInput","beforeinput",null,t,h),u.push({event:h,listeners:c}),h.data=C))}u5(u,e)})}function _f(i,e,t){return{instance:i,listener:e,currentTarget:t}}function a0(i,e){for(var t=e+"Capture",n=[];i!==null;){var s=i,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=ff(i,t),r!=null&&n.unshift(_f(i,r,s)),r=ff(i,e),r!=null&&n.push(_f(i,r,s))),i=i.return}return n}function Bd(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function X_(i,e,t,n,s){for(var r=e._reactName,o=[];t!==null&&t!==n;){var l=t,d=l.alternate,c=l.stateNode;if(d!==null&&d===n)break;l.tag===5&&c!==null&&(l=c,s?(d=ff(t,r),d!=null&&o.unshift(_f(t,d,l))):s||(d=ff(t,r),d!=null&&o.push(_f(t,d,l)))),t=t.return}o.length!==0&&i.push({event:e,listeners:o})}var XS=/\r\n?/g,YS=/\u0000|\uFFFD/g;function Y_(i){return(typeof i=="string"?i:""+i).replace(XS,`
`).replace(YS,"")}function Um(i,e,t){if(e=Y_(e),Y_(i)!==e&&t)throw Error(B(425))}function o0(){}var Ox=null,zx=null;function Bx(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qx=typeof setTimeout=="function"?setTimeout:void 0,US=typeof clearTimeout=="function"?clearTimeout:void 0,U_=typeof Promise=="function"?Promise:void 0,VS=typeof queueMicrotask=="function"?queueMicrotask:typeof U_<"u"?function(i){return U_.resolve(null).then(i).catch($S)}:qx;function $S(i){setTimeout(function(){throw i})}function G1(i,e){var t=e,n=0;do{var s=t.nextSibling;if(i.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(n===0){i.removeChild(s),gf(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=s}while(t);gf(e)}function Lo(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function V_(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return i;e--}else t==="/$"&&e++}i=i.previousSibling}return null}var ru=Math.random().toString(36).slice(2),lr="__reactFiber$"+ru,bf="__reactProps$"+ru,pa="__reactContainer$"+ru,Xx="__reactEvents$"+ru,GS="__reactListeners$"+ru,WS="__reactHandles$"+ru;function il(i){var e=i[lr];if(e)return e;for(var t=i.parentNode;t;){if(e=t[pa]||t[lr]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(i=V_(i);i!==null;){if(t=i[lr])return t;i=V_(i)}return e}i=t,t=i.parentNode}return null}function vm(i){return i=i[lr]||i[pa],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ic(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(B(33))}function o1(i){return i[bf]||null}var Yx=[],sc=-1;function Xo(i){return{current:i}}function it(i){0>sc||(i.current=Yx[sc],Yx[sc]=null,sc--)}function Je(i,e){sc++,Yx[sc]=i.current,i.current=e}var Ho={},In=Xo(Ho),ti=Xo(!1),_d=Ho;function Gh(i,e){var t=i.type.contextTypes;if(!t)return Ho;var n=i.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=s),s}function ni(i){return i=i.childContextTypes,i!=null}function l0(){it(ti),it(In)}function $_(i,e,t){if(In.current!==Ho)throw Error(B(168));Je(In,e),Je(ti,t)}function p5(i,e,t){var n=i.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(B(108,F4(i)||"Unknown",s));return xt({},t,n)}function d0(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Ho,_d=In.current,Je(In,i),Je(ti,ti.current),!0}function G_(i,e,t){var n=i.stateNode;if(!n)throw Error(B(169));t?(i=p5(i,e,_d),n.__reactInternalMemoizedMergedChildContext=i,it(ti),it(In),Je(In,i)):it(ti),Je(ti,t)}var Sr=null,l1=!1,W1=!1;function m5(i){Sr===null?Sr=[i]:Sr.push(i)}function KS(i){l1=!0,m5(i)}function Yo(){if(!W1&&Sr!==null){W1=!0;var i=0,e=je;try{var t=Sr;for(je=1;i<t.length;i++){var n=t[i];do n=n(!0);while(n!==null)}Sr=null,l1=!1}catch(s){throw Sr!==null&&(Sr=Sr.slice(i+1)),z3(Uv,Yo),s}finally{je=e,W1=!1}}return null}var rc=[],ac=0,c0=null,h0=0,Qi=[],Ji=0,bd=null,oa=1,la="";function Go(i,e){rc[ac++]=h0,rc[ac++]=c0,c0=i,h0=e}function g5(i,e,t){Qi[Ji++]=oa,Qi[Ji++]=la,Qi[Ji++]=bd,bd=i;var n=oa;i=la;var s=32-As(n)-1;n&=~(1<<s),t+=1;var r=32-As(e)+s;if(30<r){var o=s-s%5;r=(n&(1<<o)-1).toString(32),n>>=o,s-=o,oa=1<<32-As(e)+s|t<<s|n,la=r+i}else oa=1<<r|t<<s|n,la=i}function ey(i){i.return!==null&&(Go(i,1),g5(i,1,0))}function ty(i){for(;i===c0;)c0=rc[--ac],rc[ac]=null,h0=rc[--ac],rc[ac]=null;for(;i===bd;)bd=Qi[--Ji],Qi[Ji]=null,la=Qi[--Ji],Qi[Ji]=null,oa=Qi[--Ji],Qi[Ji]=null}var Li=null,Ei=null,dt=!1,ks=null;function x5(i,e){var t=es(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=i,e=i.deletions,e===null?(i.deletions=[t],i.flags|=16):e.push(t)}function W_(i,e){switch(i.tag){case 5:var t=i.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,Li=i,Ei=Lo(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,Li=i,Ei=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=bd!==null?{id:oa,overflow:la}:null,i.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=es(18,null,null,0),t.stateNode=e,t.return=i,i.child=t,Li=i,Ei=null,!0):!1;default:return!1}}function Ux(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Vx(i){if(dt){var e=Ei;if(e){var t=e;if(!W_(i,e)){if(Ux(i))throw Error(B(418));e=Lo(t.nextSibling);var n=Li;e&&W_(i,e)?x5(n,t):(i.flags=i.flags&-4097|2,dt=!1,Li=i)}}else{if(Ux(i))throw Error(B(418));i.flags=i.flags&-4097|2,dt=!1,Li=i}}}function K_(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Li=i}function Vm(i){if(i!==Li)return!1;if(!dt)return K_(i),dt=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!Bx(i.type,i.memoizedProps)),e&&(e=Ei)){if(Ux(i))throw v5(),Error(B(418));for(;e;)x5(i,e),e=Lo(e.nextSibling)}if(K_(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="/$"){if(e===0){Ei=Lo(i.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}i=i.nextSibling}Ei=null}}else Ei=Li?Lo(i.stateNode.nextSibling):null;return!0}function v5(){for(var i=Ei;i;)i=Lo(i.nextSibling)}function Wh(){Ei=Li=null,dt=!1}function ny(i){ks===null?ks=[i]:ks.push(i)}var QS=ba.ReactCurrentBatchConfig;function yu(i,e,t){if(i=t.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(B(309));var n=t.stateNode}if(!n)throw Error(B(147,i));var s=n,r=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var l=s.refs;o===null?delete l[r]:l[r]=o},e._stringRef=r,e)}if(typeof i!="string")throw Error(B(284));if(!t._owner)throw Error(B(290,i))}return i}function $m(i,e){throw i=Object.prototype.toString.call(e),Error(B(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function Q_(i){var e=i._init;return e(i._payload)}function y5(i){function e(g,k){if(i){var w=g.deletions;w===null?(g.deletions=[k],g.flags|=16):w.push(k)}}function t(g,k){if(!i)return null;for(;k!==null;)e(g,k),k=k.sibling;return null}function n(g,k){for(g=new Map;k!==null;)k.key!==null?g.set(k.key,k):g.set(k.index,k),k=k.sibling;return g}function s(g,k){return g=Do(g,k),g.index=0,g.sibling=null,g}function r(g,k,w){return g.index=w,i?(w=g.alternate,w!==null?(w=w.index,w<k?(g.flags|=2,k):w):(g.flags|=2,k)):(g.flags|=1048576,k)}function o(g){return i&&g.alternate===null&&(g.flags|=2),g}function l(g,k,w,A){return k===null||k.tag!==6?(k=nx(w,g.mode,A),k.return=g,k):(k=s(k,w),k.return=g,k)}function d(g,k,w,A){var T=w.type;return T===Zd?h(g,k,w.props.children,A,w.key):k!==null&&(k.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ta&&Q_(T)===k.type)?(A=s(k,w.props),A.ref=yu(g,k,w),A.return=g,A):(A=_g(w.type,w.key,w.props,null,g.mode,A),A.ref=yu(g,k,w),A.return=g,A)}function c(g,k,w,A){return k===null||k.tag!==4||k.stateNode.containerInfo!==w.containerInfo||k.stateNode.implementation!==w.implementation?(k=ix(w,g.mode,A),k.return=g,k):(k=s(k,w.children||[]),k.return=g,k)}function h(g,k,w,A,T){return k===null||k.tag!==7?(k=yd(w,g.mode,A,T),k.return=g,k):(k=s(k,w),k.return=g,k)}function u(g,k,w){if(typeof k=="string"&&k!==""||typeof k=="number")return k=nx(""+k,g.mode,w),k.return=g,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Nm:return w=_g(k.type,k.key,k.props,null,g.mode,w),w.ref=yu(g,null,k),w.return=g,w;case Jd:return k=ix(k,g.mode,w),k.return=g,k;case Ta:var A=k._init;return u(g,A(k._payload),w)}if(Cu(k)||pu(k))return k=yd(k,g.mode,w,null),k.return=g,k;$m(g,k)}return null}function f(g,k,w,A){var T=k!==null?k.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return T!==null?null:l(g,k,""+w,A);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Nm:return w.key===T?d(g,k,w,A):null;case Jd:return w.key===T?c(g,k,w,A):null;case Ta:return T=w._init,f(g,k,T(w._payload),A)}if(Cu(w)||pu(w))return T!==null?null:h(g,k,w,A,null);$m(g,w)}return null}function m(g,k,w,A,T){if(typeof A=="string"&&A!==""||typeof A=="number")return g=g.get(w)||null,l(k,g,""+A,T);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Nm:return g=g.get(A.key===null?w:A.key)||null,d(k,g,A,T);case Jd:return g=g.get(A.key===null?w:A.key)||null,c(k,g,A,T);case Ta:var I=A._init;return m(g,k,w,I(A._payload),T)}if(Cu(A)||pu(A))return g=g.get(w)||null,h(k,g,A,T,null);$m(k,A)}return null}function b(g,k,w,A){for(var T=null,I=null,C=k,L=k=0,F=null;C!==null&&L<w.length;L++){C.index>L?(F=C,C=null):F=C.sibling;var D=f(g,C,w[L],A);if(D===null){C===null&&(C=F);break}i&&C&&D.alternate===null&&e(g,C),k=r(D,k,L),I===null?T=D:I.sibling=D,I=D,C=F}if(L===w.length)return t(g,C),dt&&Go(g,L),T;if(C===null){for(;L<w.length;L++)C=u(g,w[L],A),C!==null&&(k=r(C,k,L),I===null?T=C:I.sibling=C,I=C);return dt&&Go(g,L),T}for(C=n(g,C);L<w.length;L++)F=m(C,g,L,w[L],A),F!==null&&(i&&F.alternate!==null&&C.delete(F.key===null?L:F.key),k=r(F,k,L),I===null?T=F:I.sibling=F,I=F);return i&&C.forEach(function(j){return e(g,j)}),dt&&Go(g,L),T}function v(g,k,w,A){var T=pu(w);if(typeof T!="function")throw Error(B(150));if(w=T.call(w),w==null)throw Error(B(151));for(var I=T=null,C=k,L=k=0,F=null,D=w.next();C!==null&&!D.done;L++,D=w.next()){C.index>L?(F=C,C=null):F=C.sibling;var j=f(g,C,D.value,A);if(j===null){C===null&&(C=F);break}i&&C&&j.alternate===null&&e(g,C),k=r(j,k,L),I===null?T=j:I.sibling=j,I=j,C=F}if(D.done)return t(g,C),dt&&Go(g,L),T;if(C===null){for(;!D.done;L++,D=w.next())D=u(g,D.value,A),D!==null&&(k=r(D,k,L),I===null?T=D:I.sibling=D,I=D);return dt&&Go(g,L),T}for(C=n(g,C);!D.done;L++,D=w.next())D=m(C,g,L,D.value,A),D!==null&&(i&&D.alternate!==null&&C.delete(D.key===null?L:D.key),k=r(D,k,L),I===null?T=D:I.sibling=D,I=D);return i&&C.forEach(function(N){return e(g,N)}),dt&&Go(g,L),T}function S(g,k,w,A){if(typeof w=="object"&&w!==null&&w.type===Zd&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Nm:e:{for(var T=w.key,I=k;I!==null;){if(I.key===T){if(T=w.type,T===Zd){if(I.tag===7){t(g,I.sibling),k=s(I,w.props.children),k.return=g,g=k;break e}}else if(I.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ta&&Q_(T)===I.type){t(g,I.sibling),k=s(I,w.props),k.ref=yu(g,I,w),k.return=g,g=k;break e}t(g,I);break}else e(g,I);I=I.sibling}w.type===Zd?(k=yd(w.props.children,g.mode,A,w.key),k.return=g,g=k):(A=_g(w.type,w.key,w.props,null,g.mode,A),A.ref=yu(g,k,w),A.return=g,g=A)}return o(g);case Jd:e:{for(I=w.key;k!==null;){if(k.key===I)if(k.tag===4&&k.stateNode.containerInfo===w.containerInfo&&k.stateNode.implementation===w.implementation){t(g,k.sibling),k=s(k,w.children||[]),k.return=g,g=k;break e}else{t(g,k);break}else e(g,k);k=k.sibling}k=ix(w,g.mode,A),k.return=g,g=k}return o(g);case Ta:return I=w._init,S(g,k,I(w._payload),A)}if(Cu(w))return b(g,k,w,A);if(pu(w))return v(g,k,w,A);$m(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,k!==null&&k.tag===6?(t(g,k.sibling),k=s(k,w),k.return=g,g=k):(t(g,k),k=nx(w,g.mode,A),k.return=g,g=k),o(g)):t(g,k)}return S}var Kh=y5(!0),_5=y5(!1),u0=Xo(null),f0=null,oc=null,iy=null;function sy(){iy=oc=f0=null}function ry(i){var e=u0.current;it(u0),i._currentValue=e}function $x(i,e,t){for(;i!==null;){var n=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),i===t)break;i=i.return}}function yc(i,e){f0=i,iy=oc=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(ei=!0),i.firstContext=null)}function is(i){var e=i._currentValue;if(iy!==i)if(i={context:i,memoizedValue:e,next:null},oc===null){if(f0===null)throw Error(B(308));oc=i,f0.dependencies={lanes:0,firstContext:i}}else oc=oc.next=i;return e}var sl=null;function ay(i){sl===null?sl=[i]:sl.push(i)}function b5(i,e,t,n){var s=e.interleaved;return s===null?(t.next=t,ay(e)):(t.next=s.next,s.next=t),e.interleaved=t,ma(i,n)}function ma(i,e){i.lanes|=e;var t=i.alternate;for(t!==null&&(t.lanes|=e),t=i,i=i.return;i!==null;)i.childLanes|=e,t=i.alternate,t!==null&&(t.childLanes|=e),t=i,i=i.return;return t.tag===3?t.stateNode:null}var Ia=!1;function oy(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k5(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ca(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function Mo(i,e,t){var n=i.updateQueue;if(n===null)return null;if(n=n.shared,Ie&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,ma(i,t)}return s=n.interleaved,s===null?(e.next=e,ay(n)):(e.next=s.next,s.next=e),n.interleaved=e,ma(i,t)}function pg(i,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,Vv(i,t)}}function J_(i,e){var t=i.updateQueue,n=i.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:n.shared,effects:n.effects},i.updateQueue=t;return}i=t.lastBaseUpdate,i===null?t.firstBaseUpdate=e:i.next=e,t.lastBaseUpdate=e}function p0(i,e,t,n){var s=i.updateQueue;Ia=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var d=l,c=d.next;d.next=null,o===null?r=c:o.next=c,o=d;var h=i.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=d))}if(r!==null){var u=s.baseState;o=0,h=c=d=null,l=r;do{var f=l.lane,m=l.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=i,v=l;switch(f=e,m=t,v.tag){case 1:if(b=v.payload,typeof b=="function"){u=b.call(m,u,f);break e}u=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,f=typeof b=="function"?b.call(m,u,f):b,f==null)break e;u=xt({},u,f);break e;case 2:Ia=!0}}l.callback!==null&&l.lane!==0&&(i.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=m,d=u):h=h.next=m,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(d=u),s.baseState=d,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);wd|=o,i.lanes=o,i.memoizedState=u}}function Z_(i,e,t){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var n=i[e],s=n.callback;if(s!==null){if(n.callback=null,n=t,typeof s!="function")throw Error(B(191,s));s.call(n)}}}var ym={},hr=Xo(ym),kf=Xo(ym),wf=Xo(ym);function rl(i){if(i===ym)throw Error(B(174));return i}function ly(i,e){switch(Je(wf,e),Je(kf,i),Je(hr,ym),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tx(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=Tx(e,i)}it(hr),Je(hr,e)}function Qh(){it(hr),it(kf),it(wf)}function w5(i){rl(wf.current);var e=rl(hr.current),t=Tx(e,i.type);e!==t&&(Je(kf,i),Je(hr,t))}function dy(i){kf.current===i&&(it(hr),it(kf))}var ft=Xo(0);function m0(i){for(var e=i;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var K1=[];function cy(){for(var i=0;i<K1.length;i++)K1[i]._workInProgressVersionPrimary=null;K1.length=0}var mg=ba.ReactCurrentDispatcher,Q1=ba.ReactCurrentBatchConfig,kd=0,mt=null,Yt=null,tn=null,g0=!1,af=!1,Sf=0,JS=0;function xn(){throw Error(B(321))}function hy(i,e){if(e===null)return!1;for(var t=0;t<e.length&&t<i.length;t++)if(!Ts(i[t],e[t]))return!1;return!0}function uy(i,e,t,n,s,r){if(kd=r,mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,mg.current=i===null||i.memoizedState===null?n8:i8,i=t(n,s),af){r=0;do{if(af=!1,Sf=0,25<=r)throw Error(B(301));r+=1,tn=Yt=null,e.updateQueue=null,mg.current=s8,i=t(n,s)}while(af)}if(mg.current=x0,e=Yt!==null&&Yt.next!==null,kd=0,tn=Yt=mt=null,g0=!1,e)throw Error(B(300));return i}function fy(){var i=Sf!==0;return Sf=0,i}function js(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?mt.memoizedState=tn=i:tn=tn.next=i,tn}function ss(){if(Yt===null){var i=mt.alternate;i=i!==null?i.memoizedState:null}else i=Yt.next;var e=tn===null?mt.memoizedState:tn.next;if(e!==null)tn=e,Yt=i;else{if(i===null)throw Error(B(310));Yt=i,i={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},tn===null?mt.memoizedState=tn=i:tn=tn.next=i}return tn}function Af(i,e){return typeof e=="function"?e(i):e}function J1(i){var e=ss(),t=e.queue;if(t===null)throw Error(B(311));t.lastRenderedReducer=i;var n=Yt,s=n.baseQueue,r=t.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}n.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,n=n.baseState;var l=o=null,d=null,c=r;do{var h=c.lane;if((kd&h)===h)d!==null&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:i(n,c.action);else{var u={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};d===null?(l=d=u,o=n):d=d.next=u,mt.lanes|=h,wd|=h}c=c.next}while(c!==null&&c!==r);d===null?o=n:d.next=l,Ts(n,e.memoizedState)||(ei=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=d,t.lastRenderedState=n}if(i=t.interleaved,i!==null){s=i;do r=s.lane,mt.lanes|=r,wd|=r,s=s.next;while(s!==i)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Z1(i){var e=ss(),t=e.queue;if(t===null)throw Error(B(311));t.lastRenderedReducer=i;var n=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do r=i(r,o.action),o=o.next;while(o!==s);Ts(r,e.memoizedState)||(ei=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,n]}function S5(){}function A5(i,e){var t=mt,n=ss(),s=e(),r=!Ts(n.memoizedState,s);if(r&&(n.memoizedState=s,ei=!0),n=n.queue,py(I5.bind(null,t,n,i),[i]),n.getSnapshot!==e||r||tn!==null&&tn.memoizedState.tag&1){if(t.flags|=2048,Pf(9,T5.bind(null,t,n,s,e),void 0,null),nn===null)throw Error(B(349));kd&30||P5(t,e,s)}return s}function P5(i,e,t){i.flags|=16384,i={getSnapshot:e,value:t},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.stores=[i]):(t=e.stores,t===null?e.stores=[i]:t.push(i))}function T5(i,e,t,n){e.value=t,e.getSnapshot=n,C5(e)&&E5(i)}function I5(i,e,t){return t(function(){C5(e)&&E5(i)})}function C5(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!Ts(i,t)}catch{return!0}}function E5(i){var e=ma(i,1);e!==null&&Ps(e,i,1,-1)}function eb(i){var e=js();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Af,lastRenderedState:i},e.queue=i,i=i.dispatch=t8.bind(null,mt,i),[e.memoizedState,i]}function Pf(i,e,t,n){return i={tag:i,create:e,destroy:t,deps:n,next:null},e=mt.updateQueue,e===null?(e={lastEffect:null,stores:null},mt.updateQueue=e,e.lastEffect=i.next=i):(t=e.lastEffect,t===null?e.lastEffect=i.next=i:(n=t.next,t.next=i,i.next=n,e.lastEffect=i)),i}function L5(){return ss().memoizedState}function gg(i,e,t,n){var s=js();mt.flags|=i,s.memoizedState=Pf(1|e,t,void 0,n===void 0?null:n)}function d1(i,e,t,n){var s=ss();n=n===void 0?null:n;var r=void 0;if(Yt!==null){var o=Yt.memoizedState;if(r=o.destroy,n!==null&&hy(n,o.deps)){s.memoizedState=Pf(e,t,r,n);return}}mt.flags|=i,s.memoizedState=Pf(1|e,t,r,n)}function tb(i,e){return gg(8390656,8,i,e)}function py(i,e){return d1(2048,8,i,e)}function M5(i,e){return d1(4,2,i,e)}function F5(i,e){return d1(4,4,i,e)}function R5(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function D5(i,e,t){return t=t!=null?t.concat([i]):null,d1(4,4,R5.bind(null,e,i),t)}function my(){}function N5(i,e){var t=ss();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&hy(e,n[1])?n[0]:(t.memoizedState=[i,e],i)}function H5(i,e){var t=ss();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&hy(e,n[1])?n[0]:(i=i(),t.memoizedState=[i,e],i)}function j5(i,e,t){return kd&21?(Ts(t,e)||(t=X3(),mt.lanes|=t,wd|=t,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,ei=!0),i.memoizedState=t)}function ZS(i,e){var t=je;je=t!==0&&4>t?t:4,i(!0);var n=Q1.transition;Q1.transition={};try{i(!1),e()}finally{je=t,Q1.transition=n}}function O5(){return ss().memoizedState}function e8(i,e,t){var n=Ro(i);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},z5(i))B5(e,t);else if(t=b5(i,e,t,n),t!==null){var s=jn();Ps(t,i,n,s),q5(t,e,n)}}function t8(i,e,t){var n=Ro(i),s={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(z5(i))B5(e,s);else{var r=i.alternate;if(i.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,l=r(o,t);if(s.hasEagerState=!0,s.eagerState=l,Ts(l,o)){var d=e.interleaved;d===null?(s.next=s,ay(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}t=b5(i,e,s,n),t!==null&&(s=jn(),Ps(t,i,n,s),q5(t,e,n))}}function z5(i){var e=i.alternate;return i===mt||e!==null&&e===mt}function B5(i,e){af=g0=!0;var t=i.pending;t===null?e.next=e:(e.next=t.next,t.next=e),i.pending=e}function q5(i,e,t){if(t&4194240){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,Vv(i,t)}}var x0={readContext:is,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useInsertionEffect:xn,useLayoutEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useMutableSource:xn,useSyncExternalStore:xn,useId:xn,unstable_isNewReconciler:!1},n8={readContext:is,useCallback:function(i,e){return js().memoizedState=[i,e===void 0?null:e],i},useContext:is,useEffect:tb,useImperativeHandle:function(i,e,t){return t=t!=null?t.concat([i]):null,gg(4194308,4,R5.bind(null,e,i),t)},useLayoutEffect:function(i,e){return gg(4194308,4,i,e)},useInsertionEffect:function(i,e){return gg(4,2,i,e)},useMemo:function(i,e){var t=js();return e=e===void 0?null:e,i=i(),t.memoizedState=[i,e],i},useReducer:function(i,e,t){var n=js();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},n.queue=i,i=i.dispatch=e8.bind(null,mt,i),[n.memoizedState,i]},useRef:function(i){var e=js();return i={current:i},e.memoizedState=i},useState:eb,useDebugValue:my,useDeferredValue:function(i){return js().memoizedState=i},useTransition:function(){var i=eb(!1),e=i[0];return i=ZS.bind(null,i[1]),js().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,t){var n=mt,s=js();if(dt){if(t===void 0)throw Error(B(407));t=t()}else{if(t=e(),nn===null)throw Error(B(349));kd&30||P5(n,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,tb(I5.bind(null,n,r,i),[i]),n.flags|=2048,Pf(9,T5.bind(null,n,r,t,e),void 0,null),t},useId:function(){var i=js(),e=nn.identifierPrefix;if(dt){var t=la,n=oa;t=(n&~(1<<32-As(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=Sf++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=JS++,e=":"+e+"r"+t.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},i8={readContext:is,useCallback:N5,useContext:is,useEffect:py,useImperativeHandle:D5,useInsertionEffect:M5,useLayoutEffect:F5,useMemo:H5,useReducer:J1,useRef:L5,useState:function(){return J1(Af)},useDebugValue:my,useDeferredValue:function(i){var e=ss();return j5(e,Yt.memoizedState,i)},useTransition:function(){var i=J1(Af)[0],e=ss().memoizedState;return[i,e]},useMutableSource:S5,useSyncExternalStore:A5,useId:O5,unstable_isNewReconciler:!1},s8={readContext:is,useCallback:N5,useContext:is,useEffect:py,useImperativeHandle:D5,useInsertionEffect:M5,useLayoutEffect:F5,useMemo:H5,useReducer:Z1,useRef:L5,useState:function(){return Z1(Af)},useDebugValue:my,useDeferredValue:function(i){var e=ss();return Yt===null?e.memoizedState=i:j5(e,Yt.memoizedState,i)},useTransition:function(){var i=Z1(Af)[0],e=ss().memoizedState;return[i,e]},useMutableSource:S5,useSyncExternalStore:A5,useId:O5,unstable_isNewReconciler:!1};function ls(i,e){if(i&&i.defaultProps){e=xt({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}function Gx(i,e,t,n){e=i.memoizedState,t=t(n,e),t=t==null?e:xt({},e,t),i.memoizedState=t,i.lanes===0&&(i.updateQueue.baseState=t)}var c1={isMounted:function(i){return(i=i._reactInternals)?Td(i)===i:!1},enqueueSetState:function(i,e,t){i=i._reactInternals;var n=jn(),s=Ro(i),r=ca(n,s);r.payload=e,t!=null&&(r.callback=t),e=Mo(i,r,s),e!==null&&(Ps(e,i,s,n),pg(e,i,s))},enqueueReplaceState:function(i,e,t){i=i._reactInternals;var n=jn(),s=Ro(i),r=ca(n,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=Mo(i,r,s),e!==null&&(Ps(e,i,s,n),pg(e,i,s))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var t=jn(),n=Ro(i),s=ca(t,n);s.tag=2,e!=null&&(s.callback=e),e=Mo(i,s,n),e!==null&&(Ps(e,i,n,t),pg(e,i,n))}};function nb(i,e,t,n,s,r,o){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(n,r,o):e.prototype&&e.prototype.isPureReactComponent?!vf(t,n)||!vf(s,r):!0}function X5(i,e,t){var n=!1,s=Ho,r=e.contextType;return typeof r=="object"&&r!==null?r=is(r):(s=ni(e)?_d:In.current,n=e.contextTypes,r=(n=n!=null)?Gh(i,s):Ho),e=new e(t,r),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=c1,i.stateNode=e,e._reactInternals=i,n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=r),e}function ib(i,e,t,n){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==i&&c1.enqueueReplaceState(e,e.state,null)}function Wx(i,e,t,n){var s=i.stateNode;s.props=t,s.state=i.memoizedState,s.refs={},oy(i);var r=e.contextType;typeof r=="object"&&r!==null?s.context=is(r):(r=ni(e)?_d:In.current,s.context=Gh(i,r)),s.state=i.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(Gx(i,e,r,t),s.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&c1.enqueueReplaceState(s,s.state,null),p0(i,t,s,n),s.state=i.memoizedState),typeof s.componentDidMount=="function"&&(i.flags|=4194308)}function Jh(i,e){try{var t="",n=e;do t+=M4(n),n=n.return;while(n);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:i,source:e,stack:s,digest:null}}function ex(i,e,t){return{value:i,source:null,stack:t??null,digest:e??null}}function Kx(i,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var r8=typeof WeakMap=="function"?WeakMap:Map;function Y5(i,e,t){t=ca(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){y0||(y0=!0,a2=n),Kx(i,e)},t}function U5(i,e,t){t=ca(-1,t),t.tag=3;var n=i.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;t.payload=function(){return n(s)},t.callback=function(){Kx(i,e)}}var r=i.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){Kx(i,e),typeof n!="function"&&(Fo===null?Fo=new Set([this]):Fo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function sb(i,e,t){var n=i.pingCache;if(n===null){n=i.pingCache=new r8;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(t)||(s.add(t),i=y8.bind(null,i,e,t),e.then(i,i))}function rb(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function ab(i,e,t,n,s){return i.mode&1?(i.flags|=65536,i.lanes=s,i):(i===e?i.flags|=65536:(i.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ca(-1,1),e.tag=2,Mo(t,e,1))),t.lanes|=1),i)}var a8=ba.ReactCurrentOwner,ei=!1;function Nn(i,e,t,n){e.child=i===null?_5(e,null,t,n):Kh(e,i.child,t,n)}function ob(i,e,t,n,s){t=t.render;var r=e.ref;return yc(e,s),n=uy(i,e,t,n,r,s),t=fy(),i!==null&&!ei?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~s,ga(i,e,s)):(dt&&t&&ey(e),e.flags|=1,Nn(i,e,n,s),e.child)}function lb(i,e,t,n,s){if(i===null){var r=t.type;return typeof r=="function"&&!wy(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,V5(i,e,r,n,s)):(i=_g(t.type,null,n,e,e.mode,s),i.ref=e.ref,i.return=e,e.child=i)}if(r=i.child,!(i.lanes&s)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:vf,t(o,n)&&i.ref===e.ref)return ga(i,e,s)}return e.flags|=1,i=Do(r,n),i.ref=e.ref,i.return=e,e.child=i}function V5(i,e,t,n,s){if(i!==null){var r=i.memoizedProps;if(vf(r,n)&&i.ref===e.ref)if(ei=!1,e.pendingProps=n=r,(i.lanes&s)!==0)i.flags&131072&&(ei=!0);else return e.lanes=i.lanes,ga(i,e,s)}return Qx(i,e,t,n,s)}function $5(i,e,t){var n=e.pendingProps,s=n.children,r=i!==null?i.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(dc,Ti),Ti|=t;else{if(!(t&1073741824))return i=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,Je(dc,Ti),Ti|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=r!==null?r.baseLanes:t,Je(dc,Ti),Ti|=n}else r!==null?(n=r.baseLanes|t,e.memoizedState=null):n=t,Je(dc,Ti),Ti|=n;return Nn(i,e,s,t),e.child}function G5(i,e){var t=e.ref;(i===null&&t!==null||i!==null&&i.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Qx(i,e,t,n,s){var r=ni(t)?_d:In.current;return r=Gh(e,r),yc(e,s),t=uy(i,e,t,n,r,s),n=fy(),i!==null&&!ei?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~s,ga(i,e,s)):(dt&&n&&ey(e),e.flags|=1,Nn(i,e,t,s),e.child)}function db(i,e,t,n,s){if(ni(t)){var r=!0;d0(e)}else r=!1;if(yc(e,s),e.stateNode===null)xg(i,e),X5(e,t,n),Wx(e,t,n,s),n=!0;else if(i===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var d=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=is(c):(c=ni(t)?_d:In.current,c=Gh(e,c));var h=t.getDerivedStateFromProps,u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||d!==c)&&ib(e,o,n,c),Ia=!1;var f=e.memoizedState;o.state=f,p0(e,n,o,s),d=e.memoizedState,l!==n||f!==d||ti.current||Ia?(typeof h=="function"&&(Gx(e,t,h,n),d=e.memoizedState),(l=Ia||nb(e,t,l,n,f,d,c))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=d),o.props=n,o.state=d,o.context=c,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,k5(i,e),l=e.memoizedProps,c=e.type===e.elementType?l:ls(e.type,l),o.props=c,u=e.pendingProps,f=o.context,d=t.contextType,typeof d=="object"&&d!==null?d=is(d):(d=ni(t)?_d:In.current,d=Gh(e,d));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==u||f!==d)&&ib(e,o,n,d),Ia=!1,f=e.memoizedState,o.state=f,p0(e,n,o,s);var b=e.memoizedState;l!==u||f!==b||ti.current||Ia?(typeof m=="function"&&(Gx(e,t,m,n),b=e.memoizedState),(c=Ia||nb(e,t,c,n,f,b,d)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,b,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,b,d)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===i.memoizedProps&&f===i.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===i.memoizedProps&&f===i.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=b),o.props=n,o.state=b,o.context=d,n=c):(typeof o.componentDidUpdate!="function"||l===i.memoizedProps&&f===i.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===i.memoizedProps&&f===i.memoizedState||(e.flags|=1024),n=!1)}return Jx(i,e,t,n,r,s)}function Jx(i,e,t,n,s,r){G5(i,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&G_(e,t,!1),ga(i,e,r);n=e.stateNode,a8.current=e;var l=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,i!==null&&o?(e.child=Kh(e,i.child,null,r),e.child=Kh(e,null,l,r)):Nn(i,e,l,r),e.memoizedState=n.state,s&&G_(e,t,!0),e.child}function W5(i){var e=i.stateNode;e.pendingContext?$_(i,e.pendingContext,e.pendingContext!==e.context):e.context&&$_(i,e.context,!1),ly(i,e.containerInfo)}function cb(i,e,t,n,s){return Wh(),ny(s),e.flags|=256,Nn(i,e,t,n),e.child}var Zx={dehydrated:null,treeContext:null,retryLane:0};function e2(i){return{baseLanes:i,cachePool:null,transitions:null}}function K5(i,e,t){var n=e.pendingProps,s=ft.current,r=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=i!==null&&i.memoizedState===null?!1:(s&2)!==0),l?(r=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(s|=1),Je(ft,s&1),i===null)return Vx(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,i=n.fallback,r?(n=e.mode,r=e.child,o={mode:"hidden",children:o},!(n&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=f1(o,n,0,null),i=yd(i,n,t,null),r.return=e,i.return=e,r.sibling=i,e.child=r,e.child.memoizedState=e2(t),e.memoizedState=Zx,i):gy(e,o));if(s=i.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return o8(i,e,o,n,l,s,t);if(r){r=n.fallback,o=e.mode,s=i.child,l=s.sibling;var d={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=d,e.deletions=null):(n=Do(s,d),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?r=Do(l,r):(r=yd(r,o,t,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,n=r,r=e.child,o=i.child.memoizedState,o=o===null?e2(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=i.childLanes&~t,e.memoizedState=Zx,n}return r=i.child,i=r.sibling,n=Do(r,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,i!==null&&(t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)),e.child=n,e.memoizedState=null,n}function gy(i,e){return e=f1({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function Gm(i,e,t,n){return n!==null&&ny(n),Kh(e,i.child,null,t),i=gy(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function o8(i,e,t,n,s,r,o){if(t)return e.flags&256?(e.flags&=-257,n=ex(Error(B(422))),Gm(i,e,o,n)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(r=n.fallback,s=e.mode,n=f1({mode:"visible",children:n.children},s,0,null),r=yd(r,s,o,null),r.flags|=2,n.return=e,r.return=e,n.sibling=r,e.child=n,e.mode&1&&Kh(e,i.child,null,o),e.child.memoizedState=e2(o),e.memoizedState=Zx,r);if(!(e.mode&1))return Gm(i,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,r=Error(B(419)),n=ex(r,n,void 0),Gm(i,e,o,n)}if(l=(o&i.childLanes)!==0,ei||l){if(n=nn,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,ma(i,s),Ps(n,i,s,-1))}return ky(),n=ex(Error(B(421))),Gm(i,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=i.child,e=_8.bind(null,i),s._reactRetry=e,null):(i=r.treeContext,Ei=Lo(s.nextSibling),Li=e,dt=!0,ks=null,i!==null&&(Qi[Ji++]=oa,Qi[Ji++]=la,Qi[Ji++]=bd,oa=i.id,la=i.overflow,bd=e),e=gy(e,n.children),e.flags|=4096,e)}function hb(i,e,t){i.lanes|=e;var n=i.alternate;n!==null&&(n.lanes|=e),$x(i.return,e,t)}function tx(i,e,t,n,s){var r=i.memoizedState;r===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=t,r.tailMode=s)}function Q5(i,e,t){var n=e.pendingProps,s=n.revealOrder,r=n.tail;if(Nn(i,e,n.children,t),n=ft.current,n&2)n=n&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&hb(i,t,e);else if(i.tag===19)hb(i,t,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}n&=1}if(Je(ft,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)i=t.alternate,i!==null&&m0(i)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),tx(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(i=s.alternate,i!==null&&m0(i)===null){e.child=s;break}i=s.sibling,s.sibling=t,t=s,s=i}tx(e,!0,t,null,r);break;case"together":tx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xg(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function ga(i,e,t){if(i!==null&&(e.dependencies=i.dependencies),wd|=e.lanes,!(t&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(B(153));if(e.child!==null){for(i=e.child,t=Do(i,i.pendingProps),e.child=t,t.return=e;i.sibling!==null;)i=i.sibling,t=t.sibling=Do(i,i.pendingProps),t.return=e;t.sibling=null}return e.child}function l8(i,e,t){switch(e.tag){case 3:W5(e),Wh();break;case 5:w5(e);break;case 1:ni(e.type)&&d0(e);break;case 4:ly(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Je(u0,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Je(ft,ft.current&1),e.flags|=128,null):t&e.child.childLanes?K5(i,e,t):(Je(ft,ft.current&1),i=ga(i,e,t),i!==null?i.sibling:null);Je(ft,ft.current&1);break;case 19:if(n=(t&e.childLanes)!==0,i.flags&128){if(n)return Q5(i,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Je(ft,ft.current),n)break;return null;case 22:case 23:return e.lanes=0,$5(i,e,t)}return ga(i,e,t)}var J5,t2,Z5,ek;J5=function(i,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)i.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};t2=function(){};Z5=function(i,e,t,n){var s=i.memoizedProps;if(s!==n){i=e.stateNode,rl(hr.current);var r=null;switch(t){case"input":s=wx(i,s),n=wx(i,n),r=[];break;case"select":s=xt({},s,{value:void 0}),n=xt({},n,{value:void 0}),r=[];break;case"textarea":s=Px(i,s),n=Px(i,n),r=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(i.onclick=o0)}Ix(t,n);var o;t=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(hf.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in n){var d=n[c];if(l=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&d!==l&&(d!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in d)d.hasOwnProperty(o)&&l[o]!==d[o]&&(t||(t={}),t[o]=d[o])}else t||(r||(r=[]),r.push(c,t)),t=d;else c==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(r=r||[]).push(c,d)):c==="children"?typeof d!="string"&&typeof d!="number"||(r=r||[]).push(c,""+d):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(hf.hasOwnProperty(c)?(d!=null&&c==="onScroll"&&tt("scroll",i),r||l===d||(r=[])):(r=r||[]).push(c,d))}t&&(r=r||[]).push("style",t);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};ek=function(i,e,t,n){t!==n&&(e.flags|=4)};function _u(i,e){if(!dt)switch(i.tailMode){case"hidden":e=i.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?i.tail=null:t.sibling=null;break;case"collapsed":t=i.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:n.sibling=null}}function vn(i){var e=i.alternate!==null&&i.alternate.child===i.child,t=0,n=0;if(e)for(var s=i.child;s!==null;)t|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=i,s=s.sibling;else for(s=i.child;s!==null;)t|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=i,s=s.sibling;return i.subtreeFlags|=n,i.childLanes=t,e}function d8(i,e,t){var n=e.pendingProps;switch(ty(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(e),null;case 1:return ni(e.type)&&l0(),vn(e),null;case 3:return n=e.stateNode,Qh(),it(ti),it(In),cy(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(i===null||i.child===null)&&(Vm(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ks!==null&&(d2(ks),ks=null))),t2(i,e),vn(e),null;case 5:dy(e);var s=rl(wf.current);if(t=e.type,i!==null&&e.stateNode!=null)Z5(i,e,t,n,s),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(B(166));return vn(e),null}if(i=rl(hr.current),Vm(e)){n=e.stateNode,t=e.type;var r=e.memoizedProps;switch(n[lr]=e,n[bf]=r,i=(e.mode&1)!==0,t){case"dialog":tt("cancel",n),tt("close",n);break;case"iframe":case"object":case"embed":tt("load",n);break;case"video":case"audio":for(s=0;s<Lu.length;s++)tt(Lu[s],n);break;case"source":tt("error",n);break;case"img":case"image":case"link":tt("error",n),tt("load",n);break;case"details":tt("toggle",n);break;case"input":__(n,r),tt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!r.multiple},tt("invalid",n);break;case"textarea":k_(n,r),tt("invalid",n)}Ix(t,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];o==="children"?typeof l=="string"?n.textContent!==l&&(r.suppressHydrationWarning!==!0&&Um(n.textContent,l,i),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(r.suppressHydrationWarning!==!0&&Um(n.textContent,l,i),s=["children",""+l]):hf.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&tt("scroll",n)}switch(t){case"input":Hm(n),b_(n,r,!0);break;case"textarea":Hm(n),w_(n);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(n.onclick=o0)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=I3(t)),i==="http://www.w3.org/1999/xhtml"?t==="script"?(i=o.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof n.is=="string"?i=o.createElement(t,{is:n.is}):(i=o.createElement(t),t==="select"&&(o=i,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):i=o.createElementNS(i,t),i[lr]=e,i[bf]=n,J5(i,e,!1,!1),e.stateNode=i;e:{switch(o=Cx(t,n),t){case"dialog":tt("cancel",i),tt("close",i),s=n;break;case"iframe":case"object":case"embed":tt("load",i),s=n;break;case"video":case"audio":for(s=0;s<Lu.length;s++)tt(Lu[s],i);s=n;break;case"source":tt("error",i),s=n;break;case"img":case"image":case"link":tt("error",i),tt("load",i),s=n;break;case"details":tt("toggle",i),s=n;break;case"input":__(i,n),s=wx(i,n),tt("invalid",i);break;case"option":s=n;break;case"select":i._wrapperState={wasMultiple:!!n.multiple},s=xt({},n,{value:void 0}),tt("invalid",i);break;case"textarea":k_(i,n),s=Px(i,n),tt("invalid",i);break;default:s=n}Ix(t,s),l=s;for(r in l)if(l.hasOwnProperty(r)){var d=l[r];r==="style"?L3(i,d):r==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&C3(i,d)):r==="children"?typeof d=="string"?(t!=="textarea"||d!=="")&&uf(i,d):typeof d=="number"&&uf(i,""+d):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(hf.hasOwnProperty(r)?d!=null&&r==="onScroll"&&tt("scroll",i):d!=null&&zv(i,r,d,o))}switch(t){case"input":Hm(i),b_(i,n,!1);break;case"textarea":Hm(i),w_(i);break;case"option":n.value!=null&&i.setAttribute("value",""+No(n.value));break;case"select":i.multiple=!!n.multiple,r=n.value,r!=null?mc(i,!!n.multiple,r,!1):n.defaultValue!=null&&mc(i,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(i.onclick=o0)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vn(e),null;case 6:if(i&&e.stateNode!=null)ek(i,e,i.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(B(166));if(t=rl(wf.current),rl(hr.current),Vm(e)){if(n=e.stateNode,t=e.memoizedProps,n[lr]=e,(r=n.nodeValue!==t)&&(i=Li,i!==null))switch(i.tag){case 3:Um(n.nodeValue,t,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Um(n.nodeValue,t,(i.mode&1)!==0)}r&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[lr]=e,e.stateNode=n}return vn(e),null;case 13:if(it(ft),n=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(dt&&Ei!==null&&e.mode&1&&!(e.flags&128))v5(),Wh(),e.flags|=98560,r=!1;else if(r=Vm(e),n!==null&&n.dehydrated!==null){if(i===null){if(!r)throw Error(B(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(B(317));r[lr]=e}else Wh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vn(e),r=!1}else ks!==null&&(d2(ks),ks=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(i!==null&&i.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(i===null||ft.current&1?Ut===0&&(Ut=3):ky())),e.updateQueue!==null&&(e.flags|=4),vn(e),null);case 4:return Qh(),t2(i,e),i===null&&yf(e.stateNode.containerInfo),vn(e),null;case 10:return ry(e.type._context),vn(e),null;case 17:return ni(e.type)&&l0(),vn(e),null;case 19:if(it(ft),r=e.memoizedState,r===null)return vn(e),null;if(n=(e.flags&128)!==0,o=r.rendering,o===null)if(n)_u(r,!1);else{if(Ut!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(o=m0(i),o!==null){for(e.flags|=128,_u(r,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)r=t,i=n,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t=t.sibling;return Je(ft,ft.current&1|2),e.child}i=i.sibling}r.tail!==null&&Lt()>Zh&&(e.flags|=128,n=!0,_u(r,!1),e.lanes=4194304)}else{if(!n)if(i=m0(o),i!==null){if(e.flags|=128,n=!0,t=i.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),_u(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!dt)return vn(e),null}else 2*Lt()-r.renderingStartTime>Zh&&t!==1073741824&&(e.flags|=128,n=!0,_u(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Lt(),e.sibling=null,t=ft.current,Je(ft,n?t&1|2:t&1),e):(vn(e),null);case 22:case 23:return by(),n=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ti&1073741824&&(vn(e),e.subtreeFlags&6&&(e.flags|=8192)):vn(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function c8(i,e){switch(ty(e),e.tag){case 1:return ni(e.type)&&l0(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return Qh(),it(ti),it(In),cy(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return dy(e),null;case 13:if(it(ft),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Wh()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return it(ft),null;case 4:return Qh(),null;case 10:return ry(e.type._context),null;case 22:case 23:return by(),null;case 24:return null;default:return null}}var Wm=!1,Tn=!1,h8=typeof WeakSet=="function"?WeakSet:Set,te=null;function lc(i,e){var t=i.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){At(i,e,n)}else t.current=null}function n2(i,e,t){try{t()}catch(n){At(i,e,n)}}var ub=!1;function u8(i,e){if(Ox=s0,i=r5(),Zv(i)){if("selectionStart"in i)var t={start:i.selectionStart,end:i.selectionEnd};else e:{t=(t=i.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var s=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,l=-1,d=-1,c=0,h=0,u=i,f=null;t:for(;;){for(var m;u!==t||s!==0&&u.nodeType!==3||(l=o+s),u!==r||n!==0&&u.nodeType!==3||(d=o+n),u.nodeType===3&&(o+=u.nodeValue.length),(m=u.firstChild)!==null;)f=u,u=m;for(;;){if(u===i)break t;if(f===t&&++c===s&&(l=o),f===r&&++h===n&&(d=o),(m=u.nextSibling)!==null)break;u=f,f=u.parentNode}u=m}t=l===-1||d===-1?null:{start:l,end:d}}else t=null}t=t||{start:0,end:0}}else t=null;for(zx={focusedElem:i,selectionRange:t},s0=!1,te=e;te!==null;)if(e=te,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,te=i;else for(;te!==null;){e=te;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var v=b.memoizedProps,S=b.memoizedState,g=e.stateNode,k=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:ls(e.type,v),S);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(A){At(e,e.return,A)}if(i=e.sibling,i!==null){i.return=e.return,te=i;break}te=e.return}return b=ub,ub=!1,b}function of(i,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&i)===i){var r=s.destroy;s.destroy=void 0,r!==void 0&&n2(e,t,r)}s=s.next}while(s!==n)}}function h1(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&i)===i){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function i2(i){var e=i.ref;if(e!==null){var t=i.stateNode;switch(i.tag){case 5:i=t;break;default:i=t}typeof e=="function"?e(i):e.current=i}}function tk(i){var e=i.alternate;e!==null&&(i.alternate=null,tk(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[lr],delete e[bf],delete e[Xx],delete e[GS],delete e[WS])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function nk(i){return i.tag===5||i.tag===3||i.tag===4}function fb(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||nk(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function s2(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(i,e):t.insertBefore(i,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(i,t)):(e=t,e.appendChild(i)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=o0));else if(n!==4&&(i=i.child,i!==null))for(s2(i,e,t),i=i.sibling;i!==null;)s2(i,e,t),i=i.sibling}function r2(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.insertBefore(i,e):t.appendChild(i);else if(n!==4&&(i=i.child,i!==null))for(r2(i,e,t),i=i.sibling;i!==null;)r2(i,e,t),i=i.sibling}var hn=null,bs=!1;function Sa(i,e,t){for(t=t.child;t!==null;)ik(i,e,t),t=t.sibling}function ik(i,e,t){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(i1,t)}catch{}switch(t.tag){case 5:Tn||lc(t,e);case 6:var n=hn,s=bs;hn=null,Sa(i,e,t),hn=n,bs=s,hn!==null&&(bs?(i=hn,t=t.stateNode,i.nodeType===8?i.parentNode.removeChild(t):i.removeChild(t)):hn.removeChild(t.stateNode));break;case 18:hn!==null&&(bs?(i=hn,t=t.stateNode,i.nodeType===8?G1(i.parentNode,t):i.nodeType===1&&G1(i,t),gf(i)):G1(hn,t.stateNode));break;case 4:n=hn,s=bs,hn=t.stateNode.containerInfo,bs=!0,Sa(i,e,t),hn=n,bs=s;break;case 0:case 11:case 14:case 15:if(!Tn&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&n2(t,e,o),s=s.next}while(s!==n)}Sa(i,e,t);break;case 1:if(!Tn&&(lc(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(l){At(t,e,l)}Sa(i,e,t);break;case 21:Sa(i,e,t);break;case 22:t.mode&1?(Tn=(n=Tn)||t.memoizedState!==null,Sa(i,e,t),Tn=n):Sa(i,e,t);break;default:Sa(i,e,t)}}function pb(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var t=i.stateNode;t===null&&(t=i.stateNode=new h8),e.forEach(function(n){var s=b8.bind(null,i,n);t.has(n)||(t.add(n),n.then(s,s))})}}function rs(i,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];try{var r=i,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:hn=l.stateNode,bs=!1;break e;case 3:hn=l.stateNode.containerInfo,bs=!0;break e;case 4:hn=l.stateNode.containerInfo,bs=!0;break e}l=l.return}if(hn===null)throw Error(B(160));ik(r,o,s),hn=null,bs=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(c){At(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sk(e,i),e=e.sibling}function sk(i,e){var t=i.alternate,n=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(rs(e,i),Rs(i),n&4){try{of(3,i,i.return),h1(3,i)}catch(v){At(i,i.return,v)}try{of(5,i,i.return)}catch(v){At(i,i.return,v)}}break;case 1:rs(e,i),Rs(i),n&512&&t!==null&&lc(t,t.return);break;case 5:if(rs(e,i),Rs(i),n&512&&t!==null&&lc(t,t.return),i.flags&32){var s=i.stateNode;try{uf(s,"")}catch(v){At(i,i.return,v)}}if(n&4&&(s=i.stateNode,s!=null)){var r=i.memoizedProps,o=t!==null?t.memoizedProps:r,l=i.type,d=i.updateQueue;if(i.updateQueue=null,d!==null)try{l==="input"&&r.type==="radio"&&r.name!=null&&P3(s,r),Cx(l,o);var c=Cx(l,r);for(o=0;o<d.length;o+=2){var h=d[o],u=d[o+1];h==="style"?L3(s,u):h==="dangerouslySetInnerHTML"?C3(s,u):h==="children"?uf(s,u):zv(s,h,u,c)}switch(l){case"input":Sx(s,r);break;case"textarea":T3(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var m=r.value;m!=null?mc(s,!!r.multiple,m,!1):f!==!!r.multiple&&(r.defaultValue!=null?mc(s,!!r.multiple,r.defaultValue,!0):mc(s,!!r.multiple,r.multiple?[]:"",!1))}s[bf]=r}catch(v){At(i,i.return,v)}}break;case 6:if(rs(e,i),Rs(i),n&4){if(i.stateNode===null)throw Error(B(162));s=i.stateNode,r=i.memoizedProps;try{s.nodeValue=r}catch(v){At(i,i.return,v)}}break;case 3:if(rs(e,i),Rs(i),n&4&&t!==null&&t.memoizedState.isDehydrated)try{gf(e.containerInfo)}catch(v){At(i,i.return,v)}break;case 4:rs(e,i),Rs(i);break;case 13:rs(e,i),Rs(i),s=i.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(yy=Lt())),n&4&&pb(i);break;case 22:if(h=t!==null&&t.memoizedState!==null,i.mode&1?(Tn=(c=Tn)||h,rs(e,i),Tn=c):rs(e,i),Rs(i),n&8192){if(c=i.memoizedState!==null,(i.stateNode.isHidden=c)&&!h&&i.mode&1)for(te=i,h=i.child;h!==null;){for(u=te=h;te!==null;){switch(f=te,m=f.child,f.tag){case 0:case 11:case 14:case 15:of(4,f,f.return);break;case 1:lc(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){n=f,t=f.return;try{e=n,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(v){At(n,t,v)}}break;case 5:lc(f,f.return);break;case 22:if(f.memoizedState!==null){gb(u);continue}}m!==null?(m.return=f,te=m):gb(u)}h=h.sibling}e:for(h=null,u=i;;){if(u.tag===5){if(h===null){h=u;try{s=u.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(l=u.stateNode,d=u.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,l.style.display=E3("display",o))}catch(v){At(i,i.return,v)}}}else if(u.tag===6){if(h===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(v){At(i,i.return,v)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===i)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break e;for(;u.sibling===null;){if(u.return===null||u.return===i)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:rs(e,i),Rs(i),n&4&&pb(i);break;case 21:break;default:rs(e,i),Rs(i)}}function Rs(i){var e=i.flags;if(e&2){try{e:{for(var t=i.return;t!==null;){if(nk(t)){var n=t;break e}t=t.return}throw Error(B(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(uf(s,""),n.flags&=-33);var r=fb(i);r2(i,r,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=fb(i);s2(i,l,o);break;default:throw Error(B(161))}}catch(d){At(i,i.return,d)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function f8(i,e,t){te=i,rk(i)}function rk(i,e,t){for(var n=(i.mode&1)!==0;te!==null;){var s=te,r=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Wm;if(!o){var l=s.alternate,d=l!==null&&l.memoizedState!==null||Tn;l=Wm;var c=Tn;if(Wm=o,(Tn=d)&&!c)for(te=s;te!==null;)o=te,d=o.child,o.tag===22&&o.memoizedState!==null?xb(s):d!==null?(d.return=o,te=d):xb(s);for(;r!==null;)te=r,rk(r),r=r.sibling;te=s,Wm=l,Tn=c}mb(i)}else s.subtreeFlags&8772&&r!==null?(r.return=s,te=r):mb(i)}}function mb(i){for(;te!==null;){var e=te;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tn||h1(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Tn)if(t===null)n.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:ls(e.type,t.memoizedProps);n.componentDidUpdate(s,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&Z_(e,r,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Z_(e,o,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&t.focus();break;case"img":d.src&&(t.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var u=h.dehydrated;u!==null&&gf(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Tn||e.flags&512&&i2(e)}catch(f){At(e,e.return,f)}}if(e===i){te=null;break}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}}function gb(i){for(;te!==null;){var e=te;if(e===i){te=null;break}var t=e.sibling;if(t!==null){t.return=e.return,te=t;break}te=e.return}}function xb(i){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{h1(4,e)}catch(d){At(e,t,d)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(d){At(e,s,d)}}var r=e.return;try{i2(e)}catch(d){At(e,r,d)}break;case 5:var o=e.return;try{i2(e)}catch(d){At(e,o,d)}}}catch(d){At(e,e.return,d)}if(e===i){te=null;break}var l=e.sibling;if(l!==null){l.return=e.return,te=l;break}te=e.return}}var p8=Math.ceil,v0=ba.ReactCurrentDispatcher,xy=ba.ReactCurrentOwner,ts=ba.ReactCurrentBatchConfig,Ie=0,nn=null,Ht=null,mn=0,Ti=0,dc=Xo(0),Ut=0,Tf=null,wd=0,u1=0,vy=0,lf=null,Zn=null,yy=0,Zh=1/0,br=null,y0=!1,a2=null,Fo=null,Km=!1,To=null,_0=0,df=0,o2=null,vg=-1,yg=0;function jn(){return Ie&6?Lt():vg!==-1?vg:vg=Lt()}function Ro(i){return i.mode&1?Ie&2&&mn!==0?mn&-mn:QS.transition!==null?(yg===0&&(yg=X3()),yg):(i=je,i!==0||(i=window.event,i=i===void 0?16:K3(i.type)),i):1}function Ps(i,e,t,n){if(50<df)throw df=0,o2=null,Error(B(185));gm(i,t,n),(!(Ie&2)||i!==nn)&&(i===nn&&(!(Ie&2)&&(u1|=t),Ut===4&&Ea(i,mn)),ii(i,n),t===1&&Ie===0&&!(e.mode&1)&&(Zh=Lt()+500,l1&&Yo()))}function ii(i,e){var t=i.callbackNode;Q4(i,e);var n=i0(i,i===nn?mn:0);if(n===0)t!==null&&P_(t),i.callbackNode=null,i.callbackPriority=0;else if(e=n&-n,i.callbackPriority!==e){if(t!=null&&P_(t),e===1)i.tag===0?KS(vb.bind(null,i)):m5(vb.bind(null,i)),VS(function(){!(Ie&6)&&Yo()}),t=null;else{switch(Y3(n)){case 1:t=Uv;break;case 4:t=B3;break;case 16:t=n0;break;case 536870912:t=q3;break;default:t=n0}t=fk(t,ak.bind(null,i))}i.callbackPriority=e,i.callbackNode=t}}function ak(i,e){if(vg=-1,yg=0,Ie&6)throw Error(B(327));var t=i.callbackNode;if(_c()&&i.callbackNode!==t)return null;var n=i0(i,i===nn?mn:0);if(n===0)return null;if(n&30||n&i.expiredLanes||e)e=b0(i,n);else{e=n;var s=Ie;Ie|=2;var r=lk();(nn!==i||mn!==e)&&(br=null,Zh=Lt()+500,vd(i,e));do try{x8();break}catch(l){ok(i,l)}while(!0);sy(),v0.current=r,Ie=s,Ht!==null?e=0:(nn=null,mn=0,e=Ut)}if(e!==0){if(e===2&&(s=Rx(i),s!==0&&(n=s,e=l2(i,s))),e===1)throw t=Tf,vd(i,0),Ea(i,n),ii(i,Lt()),t;if(e===6)Ea(i,n);else{if(s=i.current.alternate,!(n&30)&&!m8(s)&&(e=b0(i,n),e===2&&(r=Rx(i),r!==0&&(n=r,e=l2(i,r))),e===1))throw t=Tf,vd(i,0),Ea(i,n),ii(i,Lt()),t;switch(i.finishedWork=s,i.finishedLanes=n,e){case 0:case 1:throw Error(B(345));case 2:Wo(i,Zn,br);break;case 3:if(Ea(i,n),(n&130023424)===n&&(e=yy+500-Lt(),10<e)){if(i0(i,0)!==0)break;if(s=i.suspendedLanes,(s&n)!==n){jn(),i.pingedLanes|=i.suspendedLanes&s;break}i.timeoutHandle=qx(Wo.bind(null,i,Zn,br),e);break}Wo(i,Zn,br);break;case 4:if(Ea(i,n),(n&4194240)===n)break;for(e=i.eventTimes,s=-1;0<n;){var o=31-As(n);r=1<<o,o=e[o],o>s&&(s=o),n&=~r}if(n=s,n=Lt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*p8(n/1960))-n,10<n){i.timeoutHandle=qx(Wo.bind(null,i,Zn,br),n);break}Wo(i,Zn,br);break;case 5:Wo(i,Zn,br);break;default:throw Error(B(329))}}}return ii(i,Lt()),i.callbackNode===t?ak.bind(null,i):null}function l2(i,e){var t=lf;return i.current.memoizedState.isDehydrated&&(vd(i,e).flags|=256),i=b0(i,e),i!==2&&(e=Zn,Zn=t,e!==null&&d2(e)),i}function d2(i){Zn===null?Zn=i:Zn.push.apply(Zn,i)}function m8(i){for(var e=i;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var s=t[n],r=s.getSnapshot;s=s.value;try{if(!Ts(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ea(i,e){for(e&=~vy,e&=~u1,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var t=31-As(e),n=1<<t;i[t]=-1,e&=~n}}function vb(i){if(Ie&6)throw Error(B(327));_c();var e=i0(i,0);if(!(e&1))return ii(i,Lt()),null;var t=b0(i,e);if(i.tag!==0&&t===2){var n=Rx(i);n!==0&&(e=n,t=l2(i,n))}if(t===1)throw t=Tf,vd(i,0),Ea(i,e),ii(i,Lt()),t;if(t===6)throw Error(B(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,Wo(i,Zn,br),ii(i,Lt()),null}function _y(i,e){var t=Ie;Ie|=1;try{return i(e)}finally{Ie=t,Ie===0&&(Zh=Lt()+500,l1&&Yo())}}function Sd(i){To!==null&&To.tag===0&&!(Ie&6)&&_c();var e=Ie;Ie|=1;var t=ts.transition,n=je;try{if(ts.transition=null,je=1,i)return i()}finally{je=n,ts.transition=t,Ie=e,!(Ie&6)&&Yo()}}function by(){Ti=dc.current,it(dc)}function vd(i,e){i.finishedWork=null,i.finishedLanes=0;var t=i.timeoutHandle;if(t!==-1&&(i.timeoutHandle=-1,US(t)),Ht!==null)for(t=Ht.return;t!==null;){var n=t;switch(ty(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&l0();break;case 3:Qh(),it(ti),it(In),cy();break;case 5:dy(n);break;case 4:Qh();break;case 13:it(ft);break;case 19:it(ft);break;case 10:ry(n.type._context);break;case 22:case 23:by()}t=t.return}if(nn=i,Ht=i=Do(i.current,null),mn=Ti=e,Ut=0,Tf=null,vy=u1=wd=0,Zn=lf=null,sl!==null){for(e=0;e<sl.length;e++)if(t=sl[e],n=t.interleaved,n!==null){t.interleaved=null;var s=n.next,r=t.pending;if(r!==null){var o=r.next;r.next=s,n.next=o}t.pending=n}sl=null}return i}function ok(i,e){do{var t=Ht;try{if(sy(),mg.current=x0,g0){for(var n=mt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}g0=!1}if(kd=0,tn=Yt=mt=null,af=!1,Sf=0,xy.current=null,t===null||t.return===null){Ut=1,Tf=e,Ht=null;break}e:{var r=i,o=t.return,l=t,d=e;if(e=mn,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var c=d,h=l,u=h.tag;if(!(h.mode&1)&&(u===0||u===11||u===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=rb(o);if(m!==null){m.flags&=-257,ab(m,o,l,r,e),m.mode&1&&sb(r,c,e),e=m,d=c;var b=e.updateQueue;if(b===null){var v=new Set;v.add(d),e.updateQueue=v}else b.add(d);break e}else{if(!(e&1)){sb(r,c,e),ky();break e}d=Error(B(426))}}else if(dt&&l.mode&1){var S=rb(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),ab(S,o,l,r,e),ny(Jh(d,l));break e}}r=d=Jh(d,l),Ut!==4&&(Ut=2),lf===null?lf=[r]:lf.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var g=Y5(r,d,e);J_(r,g);break e;case 1:l=d;var k=r.type,w=r.stateNode;if(!(r.flags&128)&&(typeof k.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Fo===null||!Fo.has(w)))){r.flags|=65536,e&=-e,r.lanes|=e;var A=U5(r,l,e);J_(r,A);break e}}r=r.return}while(r!==null)}ck(t)}catch(T){e=T,Ht===t&&t!==null&&(Ht=t=t.return);continue}break}while(!0)}function lk(){var i=v0.current;return v0.current=x0,i===null?x0:i}function ky(){(Ut===0||Ut===3||Ut===2)&&(Ut=4),nn===null||!(wd&268435455)&&!(u1&268435455)||Ea(nn,mn)}function b0(i,e){var t=Ie;Ie|=2;var n=lk();(nn!==i||mn!==e)&&(br=null,vd(i,e));do try{g8();break}catch(s){ok(i,s)}while(!0);if(sy(),Ie=t,v0.current=n,Ht!==null)throw Error(B(261));return nn=null,mn=0,Ut}function g8(){for(;Ht!==null;)dk(Ht)}function x8(){for(;Ht!==null&&!q4();)dk(Ht)}function dk(i){var e=uk(i.alternate,i,Ti);i.memoizedProps=i.pendingProps,e===null?ck(i):Ht=e,xy.current=null}function ck(i){var e=i;do{var t=e.alternate;if(i=e.return,e.flags&32768){if(t=c8(t,e),t!==null){t.flags&=32767,Ht=t;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ut=6,Ht=null;return}}else if(t=d8(t,e,Ti),t!==null){Ht=t;return}if(e=e.sibling,e!==null){Ht=e;return}Ht=e=i}while(e!==null);Ut===0&&(Ut=5)}function Wo(i,e,t){var n=je,s=ts.transition;try{ts.transition=null,je=1,v8(i,e,t,n)}finally{ts.transition=s,je=n}return null}function v8(i,e,t,n){do _c();while(To!==null);if(Ie&6)throw Error(B(327));t=i.finishedWork;var s=i.finishedLanes;if(t===null)return null;if(i.finishedWork=null,i.finishedLanes=0,t===i.current)throw Error(B(177));i.callbackNode=null,i.callbackPriority=0;var r=t.lanes|t.childLanes;if(J4(i,r),i===nn&&(Ht=nn=null,mn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Km||(Km=!0,fk(n0,function(){return _c(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=ts.transition,ts.transition=null;var o=je;je=1;var l=Ie;Ie|=4,xy.current=null,u8(i,t),sk(t,i),jS(zx),s0=!!Ox,zx=Ox=null,i.current=t,f8(t),X4(),Ie=l,je=o,ts.transition=r}else i.current=t;if(Km&&(Km=!1,To=i,_0=s),r=i.pendingLanes,r===0&&(Fo=null),V4(t.stateNode),ii(i,Lt()),e!==null)for(n=i.onRecoverableError,t=0;t<e.length;t++)s=e[t],n(s.value,{componentStack:s.stack,digest:s.digest});if(y0)throw y0=!1,i=a2,a2=null,i;return _0&1&&i.tag!==0&&_c(),r=i.pendingLanes,r&1?i===o2?df++:(df=0,o2=i):df=0,Yo(),null}function _c(){if(To!==null){var i=Y3(_0),e=ts.transition,t=je;try{if(ts.transition=null,je=16>i?16:i,To===null)var n=!1;else{if(i=To,To=null,_0=0,Ie&6)throw Error(B(331));var s=Ie;for(Ie|=4,te=i.current;te!==null;){var r=te,o=r.child;if(te.flags&16){var l=r.deletions;if(l!==null){for(var d=0;d<l.length;d++){var c=l[d];for(te=c;te!==null;){var h=te;switch(h.tag){case 0:case 11:case 15:of(8,h,r)}var u=h.child;if(u!==null)u.return=h,te=u;else for(;te!==null;){h=te;var f=h.sibling,m=h.return;if(tk(h),h===c){te=null;break}if(f!==null){f.return=m,te=f;break}te=m}}}var b=r.alternate;if(b!==null){var v=b.child;if(v!==null){b.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}te=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,te=o;else e:for(;te!==null;){if(r=te,r.flags&2048)switch(r.tag){case 0:case 11:case 15:of(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,te=g;break e}te=r.return}}var k=i.current;for(te=k;te!==null;){o=te;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,te=w;else e:for(o=k;te!==null;){if(l=te,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:h1(9,l)}}catch(T){At(l,l.return,T)}if(l===o){te=null;break e}var A=l.sibling;if(A!==null){A.return=l.return,te=A;break e}te=l.return}}if(Ie=s,Yo(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(i1,i)}catch{}n=!0}return n}finally{je=t,ts.transition=e}}return!1}function yb(i,e,t){e=Jh(t,e),e=Y5(i,e,1),i=Mo(i,e,1),e=jn(),i!==null&&(gm(i,1,e),ii(i,e))}function At(i,e,t){if(i.tag===3)yb(i,i,t);else for(;e!==null;){if(e.tag===3){yb(e,i,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Fo===null||!Fo.has(n))){i=Jh(t,i),i=U5(e,i,1),e=Mo(e,i,1),i=jn(),e!==null&&(gm(e,1,i),ii(e,i));break}}e=e.return}}function y8(i,e,t){var n=i.pingCache;n!==null&&n.delete(e),e=jn(),i.pingedLanes|=i.suspendedLanes&t,nn===i&&(mn&t)===t&&(Ut===4||Ut===3&&(mn&130023424)===mn&&500>Lt()-yy?vd(i,0):vy|=t),ii(i,e)}function hk(i,e){e===0&&(i.mode&1?(e=zm,zm<<=1,!(zm&130023424)&&(zm=4194304)):e=1);var t=jn();i=ma(i,e),i!==null&&(gm(i,e,t),ii(i,t))}function _8(i){var e=i.memoizedState,t=0;e!==null&&(t=e.retryLane),hk(i,t)}function b8(i,e){var t=0;switch(i.tag){case 13:var n=i.stateNode,s=i.memoizedState;s!==null&&(t=s.retryLane);break;case 19:n=i.stateNode;break;default:throw Error(B(314))}n!==null&&n.delete(e),hk(i,t)}var uk;uk=function(i,e,t){if(i!==null)if(i.memoizedProps!==e.pendingProps||ti.current)ei=!0;else{if(!(i.lanes&t)&&!(e.flags&128))return ei=!1,l8(i,e,t);ei=!!(i.flags&131072)}else ei=!1,dt&&e.flags&1048576&&g5(e,h0,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;xg(i,e),i=e.pendingProps;var s=Gh(e,In.current);yc(e,t),s=uy(null,e,n,i,s,t);var r=fy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ni(n)?(r=!0,d0(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,oy(e),s.updater=c1,e.stateNode=s,s._reactInternals=e,Wx(e,n,i,t),e=Jx(null,e,n,!0,r,t)):(e.tag=0,dt&&r&&ey(e),Nn(null,e,s,t),e=e.child),e;case 16:n=e.elementType;e:{switch(xg(i,e),i=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=w8(n),i=ls(n,i),s){case 0:e=Qx(null,e,n,i,t);break e;case 1:e=db(null,e,n,i,t);break e;case 11:e=ob(null,e,n,i,t);break e;case 14:e=lb(null,e,n,ls(n.type,i),t);break e}throw Error(B(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ls(n,s),Qx(i,e,n,s,t);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ls(n,s),db(i,e,n,s,t);case 3:e:{if(W5(e),i===null)throw Error(B(387));n=e.pendingProps,r=e.memoizedState,s=r.element,k5(i,e),p0(e,n,null,t);var o=e.memoizedState;if(n=o.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=Jh(Error(B(423)),e),e=cb(i,e,n,t,s);break e}else if(n!==s){s=Jh(Error(B(424)),e),e=cb(i,e,n,t,s);break e}else for(Ei=Lo(e.stateNode.containerInfo.firstChild),Li=e,dt=!0,ks=null,t=_5(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Wh(),n===s){e=ga(i,e,t);break e}Nn(i,e,n,t)}e=e.child}return e;case 5:return w5(e),i===null&&Vx(e),n=e.type,s=e.pendingProps,r=i!==null?i.memoizedProps:null,o=s.children,Bx(n,s)?o=null:r!==null&&Bx(n,r)&&(e.flags|=32),G5(i,e),Nn(i,e,o,t),e.child;case 6:return i===null&&Vx(e),null;case 13:return K5(i,e,t);case 4:return ly(e,e.stateNode.containerInfo),n=e.pendingProps,i===null?e.child=Kh(e,null,n,t):Nn(i,e,n,t),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ls(n,s),ob(i,e,n,s,t);case 7:return Nn(i,e,e.pendingProps,t),e.child;case 8:return Nn(i,e,e.pendingProps.children,t),e.child;case 12:return Nn(i,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,Je(u0,n._currentValue),n._currentValue=o,r!==null)if(Ts(r.value,o)){if(r.children===s.children&&!ti.current){e=ga(i,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var l=r.dependencies;if(l!==null){o=r.child;for(var d=l.firstContext;d!==null;){if(d.context===n){if(r.tag===1){d=ca(-1,t&-t),d.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?d.next=d:(d.next=h.next,h.next=d),c.pending=d}}r.lanes|=t,d=r.alternate,d!==null&&(d.lanes|=t),$x(r.return,t,e),l.lanes|=t;break}d=d.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(B(341));o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),$x(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Nn(i,e,s.children,t),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,yc(e,t),s=is(s),n=n(s),e.flags|=1,Nn(i,e,n,t),e.child;case 14:return n=e.type,s=ls(n,e.pendingProps),s=ls(n.type,s),lb(i,e,n,s,t);case 15:return V5(i,e,e.type,e.pendingProps,t);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ls(n,s),xg(i,e),e.tag=1,ni(n)?(i=!0,d0(e)):i=!1,yc(e,t),X5(e,n,s),Wx(e,n,s,t),Jx(null,e,n,!0,i,t);case 19:return Q5(i,e,t);case 22:return $5(i,e,t)}throw Error(B(156,e.tag))};function fk(i,e){return z3(i,e)}function k8(i,e,t,n){this.tag=i,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function es(i,e,t,n){return new k8(i,e,t,n)}function wy(i){return i=i.prototype,!(!i||!i.isReactComponent)}function w8(i){if(typeof i=="function")return wy(i)?1:0;if(i!=null){if(i=i.$$typeof,i===qv)return 11;if(i===Xv)return 14}return 2}function Do(i,e){var t=i.alternate;return t===null?(t=es(i.tag,e,i.key,i.mode),t.elementType=i.elementType,t.type=i.type,t.stateNode=i.stateNode,t.alternate=i,i.alternate=t):(t.pendingProps=e,t.type=i.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=i.flags&14680064,t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=i.sibling,t.index=i.index,t.ref=i.ref,t}function _g(i,e,t,n,s,r){var o=2;if(n=i,typeof i=="function")wy(i)&&(o=1);else if(typeof i=="string")o=5;else e:switch(i){case Zd:return yd(t.children,s,r,e);case Bv:o=8,s|=8;break;case yx:return i=es(12,t,e,s|2),i.elementType=yx,i.lanes=r,i;case _x:return i=es(13,t,e,s),i.elementType=_x,i.lanes=r,i;case bx:return i=es(19,t,e,s),i.elementType=bx,i.lanes=r,i;case w3:return f1(t,s,r,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case b3:o=10;break e;case k3:o=9;break e;case qv:o=11;break e;case Xv:o=14;break e;case Ta:o=16,n=null;break e}throw Error(B(130,i==null?i:typeof i,""))}return e=es(o,t,e,s),e.elementType=i,e.type=n,e.lanes=r,e}function yd(i,e,t,n){return i=es(7,i,n,e),i.lanes=t,i}function f1(i,e,t,n){return i=es(22,i,n,e),i.elementType=w3,i.lanes=t,i.stateNode={isHidden:!1},i}function nx(i,e,t){return i=es(6,i,null,e),i.lanes=t,i}function ix(i,e,t){return e=es(4,i.children!==null?i.children:[],i.key,e),e.lanes=t,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function S8(i,e,t,n,s){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=H1(0),this.expirationTimes=H1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H1(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Sy(i,e,t,n,s,r,o,l,d){return i=new S8(i,e,t,l,d),e===1?(e=1,r===!0&&(e|=8)):e=0,r=es(3,null,null,e),i.current=r,r.stateNode=i,r.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},oy(r),i}function A8(i,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jd,key:n==null?null:""+n,children:i,containerInfo:e,implementation:t}}function pk(i){if(!i)return Ho;i=i._reactInternals;e:{if(Td(i)!==i||i.tag!==1)throw Error(B(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ni(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(i.tag===1){var t=i.type;if(ni(t))return p5(i,t,e)}return e}function mk(i,e,t,n,s,r,o,l,d){return i=Sy(t,n,!0,i,s,r,o,l,d),i.context=pk(null),t=i.current,n=jn(),s=Ro(t),r=ca(n,s),r.callback=e??null,Mo(t,r,s),i.current.lanes=s,gm(i,s,n),ii(i,n),i}function p1(i,e,t,n){var s=e.current,r=jn(),o=Ro(s);return t=pk(t),e.context===null?e.context=t:e.pendingContext=t,e=ca(r,o),e.payload={element:i},n=n===void 0?null:n,n!==null&&(e.callback=n),i=Mo(s,e,o),i!==null&&(Ps(i,s,o,r),pg(i,s,o)),o}function k0(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function _b(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var t=i.retryLane;i.retryLane=t!==0&&t<e?t:e}}function Ay(i,e){_b(i,e),(i=i.alternate)&&_b(i,e)}function P8(){return null}var gk=typeof reportError=="function"?reportError:function(i){console.error(i)};function Py(i){this._internalRoot=i}m1.prototype.render=Py.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(B(409));p1(i,e,null,null)};m1.prototype.unmount=Py.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;Sd(function(){p1(null,i,null,null)}),e[pa]=null}};function m1(i){this._internalRoot=i}m1.prototype.unstable_scheduleHydration=function(i){if(i){var e=$3();i={blockedOn:null,target:i,priority:e};for(var t=0;t<Ca.length&&e!==0&&e<Ca[t].priority;t++);Ca.splice(t,0,i),t===0&&W3(i)}};function Ty(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function g1(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function bb(){}function T8(i,e,t,n,s){if(s){if(typeof n=="function"){var r=n;n=function(){var c=k0(o);r.call(c)}}var o=mk(e,n,i,0,null,!1,!1,"",bb);return i._reactRootContainer=o,i[pa]=o.current,yf(i.nodeType===8?i.parentNode:i),Sd(),o}for(;s=i.lastChild;)i.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var c=k0(d);l.call(c)}}var d=Sy(i,0,!1,null,null,!1,!1,"",bb);return i._reactRootContainer=d,i[pa]=d.current,yf(i.nodeType===8?i.parentNode:i),Sd(function(){p1(e,d,t,n)}),d}function x1(i,e,t,n,s){var r=t._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var l=s;s=function(){var d=k0(o);l.call(d)}}p1(e,o,i,s)}else o=T8(t,e,i,s,n);return k0(o)}U3=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var t=Eu(e.pendingLanes);t!==0&&(Vv(e,t|1),ii(e,Lt()),!(Ie&6)&&(Zh=Lt()+500,Yo()))}break;case 13:Sd(function(){var n=ma(i,1);if(n!==null){var s=jn();Ps(n,i,1,s)}}),Ay(i,1)}};$v=function(i){if(i.tag===13){var e=ma(i,134217728);if(e!==null){var t=jn();Ps(e,i,134217728,t)}Ay(i,134217728)}};V3=function(i){if(i.tag===13){var e=Ro(i),t=ma(i,e);if(t!==null){var n=jn();Ps(t,i,e,n)}Ay(i,e)}};$3=function(){return je};G3=function(i,e){var t=je;try{return je=i,e()}finally{je=t}};Lx=function(i,e,t){switch(e){case"input":if(Sx(i,t),e=t.name,t.type==="radio"&&e!=null){for(t=i;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==i&&n.form===i.form){var s=o1(n);if(!s)throw Error(B(90));A3(n),Sx(n,s)}}}break;case"textarea":T3(i,t);break;case"select":e=t.value,e!=null&&mc(i,!!t.multiple,e,!1)}};R3=_y;D3=Sd;var I8={usingClientEntryPoint:!1,Events:[vm,ic,o1,M3,F3,_y]},bu={findFiberByHostInstance:il,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},C8={bundleType:bu.bundleType,version:bu.version,rendererPackageName:bu.rendererPackageName,rendererConfig:bu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ba.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=j3(i),i===null?null:i.stateNode},findFiberByHostInstance:bu.findFiberByHostInstance||P8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qm.isDisabled&&Qm.supportsFiber)try{i1=Qm.inject(C8),cr=Qm}catch{}}Di.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I8;Di.createPortal=function(i,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ty(e))throw Error(B(200));return A8(i,e,null,t)};Di.createRoot=function(i,e){if(!Ty(i))throw Error(B(299));var t=!1,n="",s=gk;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Sy(i,1,!1,null,null,t,!1,n,s),i[pa]=e.current,yf(i.nodeType===8?i.parentNode:i),new Py(e)};Di.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(B(188)):(i=Object.keys(i).join(","),Error(B(268,i)));return i=j3(e),i=i===null?null:i.stateNode,i};Di.flushSync=function(i){return Sd(i)};Di.hydrate=function(i,e,t){if(!g1(e))throw Error(B(200));return x1(null,i,e,!0,t)};Di.hydrateRoot=function(i,e,t){if(!Ty(i))throw Error(B(405));var n=t!=null&&t.hydratedSources||null,s=!1,r="",o=gk;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=mk(e,null,i,1,t??null,s,!1,r,o),i[pa]=e.current,yf(i),n)for(i=0;i<n.length;i++)t=n[i],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new m1(e)};Di.render=function(i,e,t){if(!g1(e))throw Error(B(200));return x1(null,i,e,!1,t)};Di.unmountComponentAtNode=function(i){if(!g1(i))throw Error(B(40));return i._reactRootContainer?(Sd(function(){x1(null,null,i,!1,function(){i._reactRootContainer=null,i[pa]=null})}),!0):!1};Di.unstable_batchedUpdates=_y;Di.unstable_renderSubtreeIntoContainer=function(i,e,t,n){if(!g1(t))throw Error(B(200));if(i==null||i._reactInternals===void 0)throw Error(B(38));return x1(i,e,t,!1,n)};Di.version="18.3.1-next-f1338f8080-20240426";function xk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xk)}catch(i){console.error(i)}}xk(),x3.exports=Di;var E8=x3.exports,kb=E8;xx.createRoot=kb.createRoot,xx.hydrateRoot=kb.hydrateRoot;function vk(i){if(!i)return"";const e=i.trim();if(!e)return"";const t=e.toLowerCase();return new Set(["x","ja","j","yes","true","1","y"]).has(t)?"X":""}function L8(i,e){if(i){const t=i.indexOf("");if(t!==-1){const r=i.slice(t+1).trim();if(r)return r}const n=i.indexOf("");if(n!==-1){const r=i.slice(n+1).trim();if(r)return r}const s=i.indexOf("-");if(s!==-1){const r=i.slice(s+1).trim();if(r)return r}if(i.trim())return i.trim()}return e}function M8({group:i,questions:e,onChange:t}){const n=M.useMemo(()=>{const r=new Map;return e.forEach(o=>r.set(o.questionId,o)),r},[e]),s=i.fieldIds.map(r=>{const o=n.get(r);if(!o)return null;const l=vk(o.answer??"")==="X",d=L8(o.questionLabel,r);return y.jsxs("button",{type:"button",className:`checkbox-pill ${l?"checked":""}`,onClick:()=>{if(l){t(r,"");return}i.fieldIds.forEach(c=>{t(c,c===r?"X":"")})},children:[y.jsx("span",{className:"checkbox-square",children:l?"X":""}),y.jsx("span",{className:"checkbox-label",children:d})]},r)}).filter(Boolean);return s.length===0?null:y.jsxs("div",{className:"field-card checkbox-group-card",children:[y.jsx("div",{className:"question",children:i.label}),y.jsx("div",{className:"sources",children:"Klicka fr att toggla (X eller tomt)"}),y.jsx("div",{className:"checkbox-row",children:s})]})}const F8=["none","mild","moderate","severe"],R8=[{id:"promenader",label:"Smrtor vid promenader"},{id:"gang_trappor",label:"Gng i trappor"},{id:"gang_skog_mark",label:"Gng i skog/mark"},{id:"aktivitet_springa",label:"Aktivitet/springa"},{id:"smartor_efter_aktivitet",label:"kade besvr efter aktivitet"},{id:"vark_vid_vila",label:"Vrk vid vila"},{id:"stord_nattsomn",label:"Strd nattsmn"},{id:"stelhet_domningar",label:"Stelhet/domningar"},{id:"ostadighet",label:"Ostadighet"},{id:"svullnad",label:"Svullnad"},{id:"muskelsvaghet",label:"Muskelsvaghet"},{id:"lasningar_knaled",label:"Lsningar i knled"},{id:"besvar_sta_kna_ner_huk",label:"Besvr att st p kn/g ner p huk"}],D8=[{id:"vark_i_vila",label:"Vrk i vila"},{id:"somn",label:"Smn"},{id:"anstrangning",label:"Vid anstrngning"},{id:"svaghet",label:"Svaghet"},{id:"stelhet",label:"Stelhet"}],yk=(i,e)=>F8.map(t=>`${i}${e}_${t}`),N8=[{id:"injury_side",label:"Skadan avser",fieldIds:["injury_side_left","injury_side_right"]},{id:"q1_prev_injury",label:"1. Tidigare skada/besvr i samma ben",fieldIds:["q1_prev_injury_no","q1_prev_injury_yes"]},{id:"q2_further_treatment",label:"2. Ytterligare behandling/operation",fieldIds:["q2_further_treatment_no","q2_further_treatment_yes"]},...R8.map(i=>({id:`q3_${i.id}`,label:i.label,fieldIds:yk("q3_",i.id)})),{id:"q3_medication",label:"Vrkmedicin",fieldIds:["q3_medication_never","q3_medication_sometimes","q3_medication_often","q3_medication_always"]},{id:"q5_reduced_mobility",label:"5. Frsmrad rrlighet",fieldIds:["q5_reduced_mobility_no","q5_reduced_mobility_yes"]},{id:"q6_daily_activities",label:"6. Dagliga aktiviteter (hushll)",fieldIds:["q6_daily_activities_no","q6_daily_activities_yes"]},{id:"q7_leisure",label:"7. Fritidsaktiviteter",fieldIds:["q7_leisure_no","q7_leisure_yes"]},{id:"q8_work",label:"8. Arbete",fieldIds:["q8_work_no","q8_work_yes"]}],H8=[{id:"injury_side",label:"Skadan avser",fieldIds:["injury_side_left","injury_side_right"]},...D8.map(i=>({id:`q5_${i.id}`,label:i.label,fieldIds:yk("q5_",i.id)})),{id:"q5_medication",label:"Vrkmedicin",fieldIds:["q5_medication_never","q5_medication_sometimes","q5_medication_often","q5_medication_always"]},{id:"q1_prev_injury",label:"1. Tidigare skada/besvr i samma arm",fieldIds:["q1_prev_injury_no","q1_prev_injury_yes"]},{id:"q2_neck_issue",label:"2. Tidigare besvr frn nacke/halsrygg",fieldIds:["q2_neck_issue_no","q2_neck_issue_yes"]},{id:"q3_further_treatment",label:"3. Ytterligare behandling",fieldIds:["q3_further_treatment_no","q3_further_treatment_yes"]},{id:"q4_fully_recovered",label:"4. Fullt terstlld",fieldIds:["q4_fully_recovered_no","q4_fully_recovered_yes"]},{id:"q6_daily_activities",label:"6. Hushllssysslor",fieldIds:["q6_daily_activities_no","q6_daily_activities_yes"]},{id:"q7_leisure",label:"7. Fritidsaktiviteter",fieldIds:["q7_leisure_no","q7_leisure_yes"]},{id:"q8_work",label:"8. Arbete",fieldIds:["q8_work_no","q8_work_yes"]},{id:"q9_hygiene",label:"9. Personlig hygien",fieldIds:["q9_hygiene_no","q9_hygiene_yes"]},{id:"q10_mobility",label:"10. Rrelsefrmga",fieldIds:["q10_mobility_no","q10_mobility_yes"]}],j8={lf_knaskada_v1:N8,lf_axelskada_v1:H8,trygghansa_hand_fingerskada_v1:[{id:"diff_haircare",label:"Hrvrd",fieldIds:["diff_haircare_none","diff_haircare_light","diff_haircare_hard","diff_haircare_impossible"]},{id:"diff_handwriting",label:"Skriva fr hand",fieldIds:["diff_handwriting_none","diff_handwriting_light","diff_handwriting_hard","diff_handwriting_impossible"]},{id:"diff_keyboard",label:"Skriva p tangentbord",fieldIds:["diff_keyboard_none","diff_keyboard_light","diff_keyboard_hard","diff_keyboard_impossible"]},{id:"diff_buttons",label:"Knppa knappar",fieldIds:["diff_buttons_none","diff_buttons_light","diff_buttons_hard","diff_buttons_impossible"]},{id:"diff_cutlery",label:"Hantera matbestick",fieldIds:["diff_cutlery_none","diff_cutlery_light","diff_cutlery_hard","diff_cutlery_impossible"]},{id:"diff_toilet",label:"Toalettbesk",fieldIds:["diff_toilet_none","diff_toilet_light","diff_toilet_hard","diff_toilet_impossible"]},{id:"diff_washing",label:"Tvttning",fieldIds:["diff_washing_none","diff_washing_light","diff_washing_hard","diff_washing_impossible"]},{id:"diff_toothbrushing",label:"Tandborstning",fieldIds:["diff_toothbrushing_none","diff_toothbrushing_light","diff_toothbrushing_hard","diff_toothbrushing_impossible"]},{id:"diff_fryingpan",label:"Hantera en stekpanna",fieldIds:["diff_fryingpan_none","diff_fryingpan_light","diff_fryingpan_hard","diff_fryingpan_impossible"]},{id:"diff_milkcarton",label:"Ta en full mjlkfrpackning och hlla upp i ett glas",fieldIds:["diff_milkcarton_none","diff_milkcarton_light","diff_milkcarton_hard","diff_milkcarton_impossible"]}]};function O8(i,e){if(i){const t=i.indexOf("");if(t!==-1){const r=i.slice(0,t).trim();if(r)return r}const n=i.indexOf("");if(n!==-1){const r=i.slice(0,n).trim();if(r)return r}const s=i.indexOf("-");if(s!==-1){const r=i.slice(0,s).trim();if(r)return r}if(i.trim())return i.trim()}return e}function z8(i,e){if(i.some(o=>typeof o.group=="string"&&!!o.group)){const o=[],l=new Map,d=new Map;for(const u of i){const f=u.group;f&&(u.kind&&u.kind!=="checkbox"||(l.has(f)||(o.push(f),l.set(f,[]),d.set(f,O8(u.questionLabel,f))),l.get(f).push(u.questionId)))}const h=o.map(u=>({id:u,label:d.get(u)??u,fieldIds:l.get(u)??[]})).filter(u=>u.fieldIds.length>0);if(h.length)return h}const n=j8[e??""]??[];if(!n.length||!i.length)return[];const s=new Set(i.map(o=>o.questionId));return n.map(o=>{const l=o.fieldIds.filter(d=>s.has(d));return{...o,fieldIds:l}}).filter(o=>o.fieldIds.length>=2)}const B8="https://52.57.15.242.sslip.io".trim(),sx=B8.replace(/\/+$/,"");function He(i){const e=(i??"").trim();if(!e)return sx||"";if(/^https?:\/\//i.test(e))return e;const t=e.startsWith("/")?e:`/${e}`;return sx?`${sx}${t}`:t}const Dn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),c2=[.001,0,0,.001,0,0],rx=1.35,Pi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},aa={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},If="pdfjs_internal_editor_",he={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Se={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},_k={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},rn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},cf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},It={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Xd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},_m={ERRORS:0,WARNINGS:1,INFOS:5},eu={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Jm={moveTo:0,lineTo:1,curveTo:2,closePath:3},bk={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let v1=_m.WARNINGS;function q8(i){Number.isInteger(i)&&(v1=i)}function X8(){return v1}function y1(i){v1>=_m.INFOS&&console.info(`Info: ${i}`)}function ue(i){v1>=_m.WARNINGS&&console.warn(`Warning: ${i}`)}function We(i){throw new Error(i)}function Ae(i,e){i||We(e)}function Y8(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Iy(i,e=null,t=null){if(!i)return null;if(t&&typeof i=="string"){if(t.addDefaultProtocol&&i.startsWith("www.")){const s=i.match(/\./g);(s==null?void 0:s.length)>=2&&(i=`http://${i}`)}if(t.tryConvertEncoding)try{i=W8(i)}catch{}}const n=e?URL.parse(i,e):URL.parse(i);return Y8(n)?n:null}function Cy(i,e,t=!1){const n=URL.parse(i);return n?(n.hash=e,n.href):t&&Iy(i,"http://example.com")?i.split("#",1)[0]+`${e?`#${e}`:""}`:""}function ge(i,e,t,n=!1){return Object.defineProperty(i,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Id=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class wb extends Id{constructor(e,t){super(e,"PasswordException"),this.code=t}}class ax extends Id{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class w0 extends Id{constructor(e){super(e,"InvalidPDFException")}}class Cf extends Id{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class U8 extends Id{constructor(e){super(e,"FormatError")}}class xa extends Id{constructor(e){super(e,"AbortException")}}function kk(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&We("Invalid argument for bytesToString");const e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);const n=[];for(let s=0;s<e;s+=t){const r=Math.min(s+t,e),o=i.subarray(s,r);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function bm(i){typeof i!="string"&&We("Invalid argument for stringToBytes");const e=i.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=i.charCodeAt(n)&255;return t}function V8(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function $8(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function G8(){try{return new Function(""),!0}catch{return!1}}class sn{static get isLittleEndian(){return ge(this,"isLittleEndian",$8())}static get isEvalSupported(){return ge(this,"isEvalSupported",G8())}static get isOffscreenCanvasSupported(){return ge(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ge(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return ge(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return ge(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const ox=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var ha,bg,h2;class ee{static makeHexColor(e,t,n){return`#${ox[e]}${ox[t]}${ox[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const s=e[n],r=e[n+1];e[n]=s*t[0]+r*t[2]+t[4],e[n+1]=s*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const s=t[0],r=t[1],o=t[2],l=t[3],d=t[4],c=t[5];for(let h=0;h<6;h+=2){const u=e[n+h],f=e[n+h+1];e[n+h]=u*s+f*o+d,e[n+h+1]=u*r+f*l+c}}static applyInverseTransform(e,t){const n=e[0],s=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-n*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,n){const s=t[0],r=t[1],o=t[2],l=t[3],d=t[4],c=t[5],h=e[0],u=e[1],f=e[2],m=e[3];let b=s*h+d,v=b,S=s*f+d,g=S,k=l*u+c,w=k,A=l*m+c,T=A;if(r!==0||o!==0){const I=r*h,C=r*f,L=o*u,F=o*m;b+=L,g+=L,S+=F,v+=F,k+=I,T+=I,A+=C,w+=C}n[0]=Math.min(n[0],b,S,v,g),n[1]=Math.min(n[1],k,A,w,T),n[2]=Math.max(n[2],b,S,v,g),n[3]=Math.max(n[3],k,A,w,T)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],s=e[1],r=e[2],o=e[3],l=n**2+s**2,d=n*r+s*o,c=r**2+o**2,h=(l+c)/2,u=Math.sqrt(h**2-(l*c-d**2));t[0]=Math.sqrt(h+u||1),t[1]=Math.sqrt(h-u||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>s)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>o?null:[n,r,s,o]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,s,r){r[0]=Math.min(r[0],e,n),r[1]=Math.min(r[1],t,s),r[2]=Math.max(r[2],e,n),r[3]=Math.max(r[3],t,s)}static bezierBoundingBox(e,t,n,s,r,o,l,d,c){c[0]=Math.min(c[0],e,l),c[1]=Math.min(c[1],t,d),c[2]=Math.max(c[2],e,l),c[3]=Math.max(c[3],t,d),_(this,ha,h2).call(this,e,n,r,l,t,s,o,d,3*(-e+3*(n-r)+l),6*(e-2*n+r),3*(n-e),c),_(this,ha,h2).call(this,e,n,r,l,t,s,o,d,3*(-t+3*(s-o)+d),6*(t-2*s+o),3*(s-t),c)}}ha=new WeakSet,bg=function(e,t,n,s,r,o,l,d,c,h){if(c<=0||c>=1)return;const u=1-c,f=c*c,m=f*c,b=u*(u*(u*e+3*c*t)+3*f*n)+m*s,v=u*(u*(u*r+3*c*o)+3*f*l)+m*d;h[0]=Math.min(h[0],b),h[1]=Math.min(h[1],v),h[2]=Math.max(h[2],b),h[3]=Math.max(h[3],v)},h2=function(e,t,n,s,r,o,l,d,c,h,u,f){if(Math.abs(c)<1e-12){Math.abs(h)>=1e-12&&_(this,ha,bg).call(this,e,t,n,s,r,o,l,d,-u/h,f);return}const m=h**2-4*u*c;if(m<0)return;const b=Math.sqrt(m),v=2*c;_(this,ha,bg).call(this,e,t,n,s,r,o,l,d,(-h+b)/v,f),_(this,ha,bg).call(this,e,t,n,s,r,o,l,d,(-h-b)/v,f)},x(ee,ha);function W8(i){return decodeURIComponent(escape(i))}let lx=null,Sb=null;function wk(i){return lx||(lx=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Sb=new Map([["","t"]])),i.replaceAll(lx,(e,t,n)=>t?t.normalize("NFKC"):Sb.get(n))}function Ey(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),kk(i)}const Ly="pdfjs_internal_id_";function K8(i,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,s,...r]=t;if(!i(n)&&!Number.isInteger(n)||!e(s))return!1;const o=r.length;let l=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const d of r)if(!(typeof d=="number"||l&&d===null))return!1;return!0}function Pn(i,e,t){return Math.min(Math.max(i,e),t)}function Sk(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(kk(i))}function Q8(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):bm(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...e){return new Promise(t=>{t(i(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((e,t)=>e+t,0)});class Ef{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function s(r){var d;if(!r)return;let o=null;const l=r.name;if(l==="#text")o=r.value;else if(Ef.shouldBuildText(l))(d=r==null?void 0:r.attributes)!=null&&d.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&t.push({str:o}),!!r.children)for(const c of r.children)s(c)}return s(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class My{static setupStorage(e,t,n,s,r){const o=s.getValue(t,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),r==="print")break;e.addEventListener("input",l=>{s.setValue(t,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?e.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",l=>{s.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),r==="print")break;e.addEventListener("input",l=>{s.setValue(t,{value:l.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const l of n.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const d=l.target.options,c=d.selectedIndex===-1?"":d[d.selectedIndex].value;s.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:s,linkService:r}){const{attributes:o}=t,l=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[d,c]of Object.entries(o))if(c!=null)switch(d){case"class":c.length&&e.setAttribute(d,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!l||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,c)}l&&r.addLinkAttributes(e,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(e,o.dataId,t,n)}static render(e){var u,f;const t=e.annotationStorage,n=e.linkService,s=e.xfaHtml,r=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:n});const l=r!=="richText",d=e.div;if(d.append(o),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=m}l&&d.setAttribute("class","xfaLayer xfaFont");const c=[];if(s.children.length===0){if(s.value){const m=document.createTextNode(s.value);o.append(m),l&&Ef.shouldBuildText(s.name)&&c.push(m)}return{textDivs:c}}const h=[[s,-1,o]];for(;h.length>0;){const[m,b,v]=h.at(-1);if(b+1===m.children.length){h.pop();continue}const S=m.children[++h.at(-1)[1]];if(S===null)continue;const{name:g}=S;if(g==="#text"){const w=document.createTextNode(S.value);c.push(w),v.append(w);continue}const k=(u=S==null?void 0:S.attributes)!=null&&u.xmlns?document.createElementNS(S.attributes.xmlns,g):document.createElement(g);if(v.append(k),S.attributes&&this.setAttributes({html:k,element:S,storage:t,intent:r,linkService:n}),((f=S.children)==null?void 0:f.length)>0)h.push([S,-1,k]);else if(S.value){const w=document.createTextNode(S.value);l&&Ef.shouldBuildText(g)&&c.push(w),k.append(w)}}for(const m of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const vr="http://www.w3.org/2000/svg",el=class el{};O(el,"CSS",96),O(el,"PDF",72),O(el,"PDF_TO_CSS_UNITS",el.CSS/el.PDF);let va=el;async function au(i,e="text"){if(Mu(i,document.baseURI)){const t=await fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class km{constructor({viewBox:e,userUnit:t,scale:n,rotation:s,offsetX:r=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=s,this.offsetX=r,this.offsetY=o,n*=t;const d=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let h,u,f,m;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,u=0,f=0,m=1;break;case 90:h=0,u=1,f=1,m=0;break;case 270:h=0,u=-1,f=-1,m=0;break;case 0:h=1,u=0,f=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,m=-m);let b,v,S,g;h===0?(b=Math.abs(c-e[1])*n+r,v=Math.abs(d-e[0])*n+o,S=(e[3]-e[1])*n,g=(e[2]-e[0])*n):(b=Math.abs(d-e[0])*n+r,v=Math.abs(c-e[1])*n+o,S=(e[2]-e[0])*n,g=(e[3]-e[1])*n),this.transform=[h*n,u*n,f*n,m*n,b-h*n*d-f*n*c,v-u*n*d-m*n*c],this.width=S,this.height=g}get rawDims(){const e=this.viewBox;return ge(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new km({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:r})}convertToViewportPoint(e,t){const n=[e,t];return ee.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];ee.applyTransform(t,this.transform);const n=[e[2],e[3]];return ee.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return ee.applyInverseTransform(n,this.transform),n}}class _1 extends Id{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function wm(i){const e=i.length;let t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function b1(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function Ak(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function Pk(i,e="document.pdf"){if(typeof i!="string")return e;if(wm(i))return ue('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(i);if(!n)return e;const s=l=>{try{let d=decodeURIComponent(l);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:l):d}catch{return l}},r=/\.pdf$/i,o=n.pathname.split("/").at(-1);if(r.test(o))return s(o);if(n.searchParams.size>0){const l=Array.from(n.searchParams.values()).reverse();for(const c of l)if(r.test(c))return s(c);const d=Array.from(n.searchParams.keys()).reverse();for(const c of d)if(r.test(c))return s(c)}if(n.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(d)return s(d[0])}return e}class Ab{constructor(){O(this,"started",Object.create(null));O(this,"times",[])}time(e){e in this.started&&ue(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ue(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:s,end:r}of this.times)e.push(`${n.padEnd(t)} ${r-s}ms
`);return e.join("")}}function Mu(i,e){const t=e?URL.parse(i,e):URL.parse(i);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Ri(i){i.preventDefault()}function pt(i){i.preventDefault(),i.stopPropagation()}function J8(i){console.log("Deprecated API usage: "+i)}var Df;class Lf{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;a(this,Df)||p(this,Df,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=a(this,Df).exec(e);if(!t)return null;const n=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const c=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let u=parseInt(t[9],10)||0;return u=u>=0&&u<=59?u:0,c==="-"?(o+=h,l+=u):c==="+"&&(o-=h,l-=u),new Date(Date.UTC(n,s,r,o,l,d))}}Df=new WeakMap,x(Lf,Df);function Tk(i,{scale:e=1,rotation:t=0}){const{width:n,height:s}=i.attributes.style,r=[0,0,parseInt(n),parseInt(s)];return new km({viewBox:r,userUnit:1,scale:e,rotation:t})}function ou(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ue(`Not a valid color format: "${i}"`),[0,0,0])}function Z8(i){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of i.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;i.set(t,ou(n))}e.remove()}function ut(i){const{a:e,b:t,c:n,d:s,e:r,f:o}=i.getTransform();return[e,t,n,s,r,o]}function Ds(i){const{a:e,b:t,c:n,d:s,e:r,f:o}=i.getTransform().invertSelf();return[e,t,n,s,r,o]}function jo(i,e,t=!1,n=!0){if(e instanceof km){const{pageWidth:s,pageHeight:r}=e.rawDims,{style:o}=i,l=sn.isCSSRoundSupported,d=`var(--total-scale-factor) * ${s}px`,c=`var(--total-scale-factor) * ${r}px`,h=l?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,u=l?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!t||e.rotation%180===0?(o.width=h,o.height=u):(o.width=u,o.height=h)}n&&i.setAttribute("data-main-rotation",e.rotation)}class Is{constructor(){const{pixelRatio:e}=Is;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,s,r=-1){let o=1/0,l=1/0,d=1/0;n=Is.capPixels(n,r),n>0&&(o=Math.sqrt(n/(e*t))),s!==-1&&(l=s/e,d=s/t);const c=Math.min(o,l,d);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const S0=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class e7{static get isDarkMode(){var e;return ge(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class Ik{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),ge(this,"commentForegroundColor",ou(n))}}function Ck(i,e,t,n){n=Math.min(Math.max(n??1,0),1);const s=255*(1-n);return i=Math.round(i*n+s),e=Math.round(e*n+s),t=Math.round(t*n+s),[i,e,t]}function Pb(i,e){const t=i[0]/255,n=i[1]/255,s=i[2]/255,r=Math.max(t,n,s),o=Math.min(t,n,s),l=(r+o)/2;if(r===o)e[0]=e[1]=0;else{const d=r-o;switch(e[1]=l<.5?d/(r+o):d/(2-r-o),r){case t:e[0]=((n-s)/d+(n<s?6:0))*60;break;case n:e[0]=((s-t)/d+2)*60;break;case s:e[0]=((t-n)/d+4)*60;break}}e[2]=l}function u2(i,e){const t=i[0],n=i[1],s=i[2],r=(1-Math.abs(2*s-1))*n,o=r*(1-Math.abs(t/60%2-1)),l=s-r/2;switch(Math.floor(t/60)){case 0:e[0]=r+l,e[1]=o+l,e[2]=l;break;case 1:e[0]=o+l,e[1]=r+l,e[2]=l;break;case 2:e[0]=l,e[1]=r+l,e[2]=o+l;break;case 3:e[0]=l,e[1]=o+l,e[2]=r+l;break;case 4:e[0]=o+l,e[1]=l,e[2]=r+l;break;case 5:case 6:e[0]=r+l,e[1]=l,e[2]=o+l;break}}function Tb(i){return i<=.03928?i/12.92:((i+.055)/1.055)**2.4}function Ib(i,e,t){u2(i,t),t.map(Tb);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];u2(e,t),t.map(Tb);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>s?(n+.05)/(s+.05):(s+.05)/(n+.05)}const Cb=new Map;function Ek(i,e){const t=i[0]+i[1]*256+i[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=Cb.get(t);if(n)return n;const s=new Float32Array(9),r=s.subarray(0,3),o=s.subarray(3,6);Pb(i,o);const l=s.subarray(6,9);Pb(e,l);const d=l[2]<.5,c=d?12:4.5;if(o[2]=d?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),Ib(o,l,r)<c){let h,u;d?(h=o[2],u=1):(h=0,u=o[2]);const f=.005;for(;u-h>f;){const m=o[2]=(h+u)/2;d===Ib(o,l,r)<c?h=m:u=m}o[2]=d?u:h}return u2(o,r),n=ee.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),Cb.set(t,n),n}function Fy({html:i,dir:e,className:t},n){const s=document.createDocumentFragment();if(typeof i=="string"){const r=document.createElement("p");r.dir=e||"auto";const o=i.split(/(?:\r\n?|\n)/);for(let l=0,d=o.length;l<d;++l){const c=o[l];r.append(document.createTextNode(c)),l<d-1&&r.append(document.createElement("br"))}s.append(r)}else My.render({xfaHtml:i,div:s,intent:"richText"});s.firstChild.classList.add("richText",t),n.append(s)}var La,Ma,zi,Bi,Nf,Fa,kc,wc,Hf,H0,Lk,pn,Mk,Fk,Yd,Fu;const kr=class kr{constructor(e){x(this,pn);x(this,La,null);x(this,Ma,null);x(this,zi);x(this,Bi,null);x(this,Nf,null);x(this,Fa,null);x(this,kc,null);x(this,wc,null);p(this,zi,e),a(kr,Hf)||p(kr,Hf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=p(this,La,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=a(this,zi)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Ri,{signal:t}),e.addEventListener("pointerdown",_(kr,H0,Lk),{signal:t}));const n=p(this,Bi,document.createElement("div"));n.className="buttons",e.append(n);const s=a(this,zi).toolbarPosition;if(s){const{style:r}=e,o=a(this,zi)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return a(this,La)}hide(){var e;a(this,La).classList.add("hidden"),(e=a(this,Ma))==null||e.hideDropdown()}show(){var e,t;a(this,La).classList.remove("hidden"),(e=a(this,Nf))==null||e.shown(),(t=a(this,Fa))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=a(this,zi),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",a(kr,Hf)[e]),_(this,pn,Yd).call(this,n)&&n.addEventListener("click",s=>{t.delete()},{signal:t._signal}),a(this,Bi).append(n)}async addAltText(e){const t=await e.render();_(this,pn,Yd).call(this,t),a(this,Bi).append(t,a(this,pn,Fu)),p(this,Nf,e)}addComment(e,t=null){if(a(this,Fa))return;const n=e.renderForToolbar();if(!n)return;_(this,pn,Yd).call(this,n);const s=p(this,kc,a(this,pn,Fu));t?(a(this,Bi).insertBefore(n,t),a(this,Bi).insertBefore(s,t)):a(this,Bi).append(n,s),p(this,Fa,e),e.toolbar=this}addColorPicker(e){if(a(this,Ma))return;p(this,Ma,e);const t=e.renderButton();_(this,pn,Yd).call(this,t),a(this,Bi).append(t,a(this,pn,Fu))}async addEditSignatureButton(e){const t=p(this,wc,await e.renderEditButton(a(this,zi)));_(this,pn,Yd).call(this,t),a(this,Bi).append(t,a(this,pn,Fu))}removeButton(e){var t,n;switch(e){case"comment":(t=a(this,Fa))==null||t.removeToolbarCommentButton(),p(this,Fa,null),(n=a(this,kc))==null||n.remove(),p(this,kc,null);break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,n){const s=a(this,Bi).querySelector(n);s&&e==="comment"&&this.addComment(t,s)}updateEditSignatureButton(e){a(this,wc)&&(a(this,wc).title=e)}remove(){var e;a(this,La).remove(),(e=a(this,Ma))==null||e.destroy(),p(this,Ma,null)}};La=new WeakMap,Ma=new WeakMap,zi=new WeakMap,Bi=new WeakMap,Nf=new WeakMap,Fa=new WeakMap,kc=new WeakMap,wc=new WeakMap,Hf=new WeakMap,H0=new WeakSet,Lk=function(e){e.stopPropagation()},pn=new WeakSet,Mk=function(e){a(this,zi)._focusEventsAllowed=!1,pt(e)},Fk=function(e){a(this,zi)._focusEventsAllowed=!0,pt(e)},Yd=function(e){const t=a(this,zi)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",_(this,pn,Mk).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",_(this,pn,Fk).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ri,{signal:t}),!0)},Fu=function(){const e=document.createElement("div");return e.className="divider",e},x(kr,H0),x(kr,Hf,null);let f2=kr;var jf,al,Pr,ya,Rk,Dk,p2;class t7{constructor(e){x(this,ya);x(this,jf,null);x(this,al,null);x(this,Pr);p(this,Pr,e)}show(e,t,n){const[s,r]=_(this,ya,Dk).call(this,t,n),{style:o}=a(this,al)||p(this,al,_(this,ya,Rk).call(this));e.append(a(this,al)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,al).remove()}}jf=new WeakMap,al=new WeakMap,Pr=new WeakMap,ya=new WeakSet,Rk=function(){const e=p(this,al,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=a(this,Pr)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Ri,{signal:t});const n=p(this,jf,document.createElement("div"));return n.className="buttons",e.append(n),a(this,Pr).hasCommentManager()&&_(this,ya,p2).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{a(this,Pr).commentSelection("floating_button")}),_(this,ya,p2).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{a(this,Pr).highlightSelection("floating_button")}),e},Dk=function(e,t){let n=0,s=0;for(const r of e){const o=r.y+r.height;if(o<n)continue;const l=r.x+(t?r.width:0);if(o>n){s=l,n=o;continue}t?l>s&&(s=l):l<s&&(s=l)}return[t?1-s:s,n]},p2=function(e,t,n,s){const r=document.createElement("button");r.classList.add("basic",e),r.tabIndex=0,r.setAttribute("data-l10n-id",t);const o=document.createElement("span");r.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",n);const l=a(this,Pr)._signal;l instanceof AbortSignal&&!l.aborted&&(r.addEventListener("contextmenu",Ri,{signal:l}),r.addEventListener("click",s,{signal:l})),a(this,jf).append(r)};function Nk(i,e,t){for(const n of t)e.addEventListener(n,i[n].bind(i))}var j0;class n7{constructor(){x(this,j0,0)}get id(){return`${If}${Ot(this,j0)._++}`}}j0=new WeakMap;var Sc,Of,_n,Ac,kg;const Xy=class Xy{constructor(){x(this,Ac);x(this,Sc,Ey());x(this,Of,0);x(this,_n,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const r=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return ge(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:n,size:s,type:r}=e;return _(this,Ac,kg).call(this,`${t}_${n}_${s}_${r}`,e)}async getFromUrl(e){return _(this,Ac,kg).call(this,e,e)}async getFromBlob(e,t){const n=await t;return _(this,Ac,kg).call(this,e,n)}async getFromId(e){a(this,_n)||p(this,_n,new Map);const t=a(this,_n).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){a(this,_n)||p(this,_n,new Map);let n=a(this,_n).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${a(this,Sc)}_${Ot(this,Of)._++}`,refCounter:1,isSvg:!1},a(this,_n).set(e,n),a(this,_n).set(n.id,n),n}getSvgUrl(e){const t=a(this,_n).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;a(this,_n)||p(this,_n,new Map);const t=a(this,_n).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=r.convertToBlob()}(s=n.close)==null||s.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${a(this,Sc)}_`)}};Sc=new WeakMap,Of=new WeakMap,_n=new WeakMap,Ac=new WeakSet,kg=async function(e,t){a(this,_n)||p(this,_n,new Map);let n=a(this,_n).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${a(this,Sc)}_${Ot(this,Of)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(n.url=t,s=await au(t,"blob")):t instanceof File?s=n.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const r=Xy._isSVGFittingCanvas,o=new FileReader,l=new Image,d=new Promise((c,h)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,c()},o.onload=async()=>{const u=n.svgUrl=o.result;l.src=await r?`${u}#svgView(preserveAspectRatio(none))`:u},l.onerror=o.onerror=h});o.readAsDataURL(s),await d}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){ue(s),n=null}return a(this,_n).set(e,n),n&&a(this,_n).set(n.id,n),n};let m2=Xy;var Ct,Ra,zf,ht;class i7{constructor(e=128){x(this,Ct,[]);x(this,Ra,!1);x(this,zf);x(this,ht,-1);p(this,zf,e)}add({cmd:e,undo:t,post:n,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(s&&e(),a(this,Ra))return;const d={cmd:e,undo:t,post:n,type:r};if(a(this,ht)===-1){a(this,Ct).length>0&&(a(this,Ct).length=0),p(this,ht,0),a(this,Ct).push(d);return}if(o&&a(this,Ct)[a(this,ht)].type===r){l&&(d.undo=a(this,Ct)[a(this,ht)].undo),a(this,Ct)[a(this,ht)]=d;return}const c=a(this,ht)+1;c===a(this,zf)?a(this,Ct).splice(0,1):(p(this,ht,c),c<a(this,Ct).length&&a(this,Ct).splice(c)),a(this,Ct).push(d)}undo(){if(a(this,ht)===-1)return;p(this,Ra,!0);const{undo:e,post:t}=a(this,Ct)[a(this,ht)];e(),t==null||t(),p(this,Ra,!1),p(this,ht,a(this,ht)-1)}redo(){if(a(this,ht)<a(this,Ct).length-1){p(this,ht,a(this,ht)+1),p(this,Ra,!0);const{cmd:e,post:t}=a(this,Ct)[a(this,ht)];e(),t==null||t(),p(this,Ra,!1)}}hasSomethingToUndo(){return a(this,ht)!==-1}hasSomethingToRedo(){return a(this,ht)<a(this,Ct).length-1}cleanType(e){if(a(this,ht)!==-1){for(let t=a(this,ht);t>=0;t--)if(a(this,Ct)[t].type!==e){a(this,Ct).splice(t+1,a(this,ht)-t),p(this,ht,t);return}a(this,Ct).length=0,p(this,ht,-1)}}destroy(){p(this,Ct,null)}}Ct=new WeakMap,Ra=new WeakMap,zf=new WeakMap,ht=new WeakMap;var O0,Hk;class Sm{constructor(e){x(this,O0);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=sn.platform;for(const[n,s,r={}]of e)for(const o of n){const l=o.startsWith("mac+");t&&l?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!t&&!l&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(_(this,O0,Hk).call(this,t));if(!n)return;const{callback:s,options:{bubbles:r=!1,args:o=[],checker:l=null}}=n;l&&!l(e,t)||(s.bind(e,...o,t)(),r||pt(t))}}O0=new WeakSet,Hk=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const z0=class z0{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Z8(e),ge(this,"_colors",e)}convert(e){const t=ou(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,s]of this._colors)if(s.every((r,o)=>r===t[o]))return z0._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?ee.makeHexColor(...t):e}};O(z0,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let g2=z0;var Pc,di,Tc,bt,qt,Ic,qi,Cc,Xi,bn,Da,Na,Ec,Ha,Os,Yi,ol,Bf,qf,Lc,Xf,zs,ja,Mc,Oa,Bs,B0,za,Fc,Yf,Ba,ll,Rc,qa,Uf,Nt,De,Tr,Xa,Ya,Vf,Dc,$f,Ua,qs,Ir,Gf,Wf,Ui,V,wg,x2,jk,Ok,Ru,zk,Bk,qk,v2,Xk,y2,_2,Yk,En,yr,Uk,Vk,b2,$k,Du,k2;const hc=class hc{constructor(e,t,n,s,r,o,l,d,c,h,u,f,m,b,v,S){x(this,V);x(this,Pc,new AbortController);x(this,di,null);x(this,Tc,null);x(this,bt,new Map);x(this,qt,new Map);x(this,Ic,null);x(this,qi,null);x(this,Cc,null);x(this,Xi,new i7);x(this,bn,null);x(this,Da,null);x(this,Na,null);x(this,Ec,0);x(this,Ha,new Set);x(this,Os,null);x(this,Yi,null);x(this,ol,new Set);O(this,"_editorUndoBar",null);x(this,Bf,!1);x(this,qf,!1);x(this,Lc,!1);x(this,Xf,null);x(this,zs,null);x(this,ja,null);x(this,Mc,null);x(this,Oa,!1);x(this,Bs,null);x(this,B0,new n7);x(this,za,!1);x(this,Fc,!1);x(this,Yf,!1);x(this,Ba,null);x(this,ll,null);x(this,Rc,null);x(this,qa,null);x(this,Uf,null);x(this,Nt,he.NONE);x(this,De,new Set);x(this,Tr,null);x(this,Xa,null);x(this,Ya,null);x(this,Vf,null);x(this,Dc,null);x(this,$f,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});x(this,Ua,[0,0]);x(this,qs,null);x(this,Ir,null);x(this,Gf,null);x(this,Wf,null);x(this,Ui,null);const g=this._signal=a(this,Pc).signal;p(this,Ir,e),p(this,Gf,t),p(this,Wf,n),p(this,Ic,s),p(this,bn,r),p(this,Xa,o),p(this,Dc,d),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:g}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),l._on("setpreference",this.onSetPreference.bind(this),{signal:g}),l._on("switchannotationeditorparams",k=>this.updateParams(k.type,k.value),{signal:g}),window.addEventListener("pointerdown",()=>{p(this,Fc,!0)},{capture:!0,signal:g}),window.addEventListener("pointerup",()=>{p(this,Fc,!1)},{capture:!0,signal:g}),_(this,V,zk).call(this),_(this,V,Yk).call(this),_(this,V,v2).call(this),p(this,qi,d.annotationStorage),p(this,Xf,d.filterFactory),p(this,Ya,c),p(this,Mc,h||null),p(this,Bf,u),p(this,qf,f),p(this,Lc,m),p(this,Uf,b||null),this.viewParameters={realScale:va.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=S!==!1,r==null||r.setSidebarUiManager(this)}static get _keyboardManager(){const e=hc.prototype,t=o=>a(o,Ir).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:d}=l;return d!=="text"&&d!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return ge(this,"_keyboardManager",new Sm([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,Ir).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,Ir).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,n,s,r,o,l,d,c;(e=a(this,Ui))==null||e.resolve(),p(this,Ui,null),(t=a(this,Pc))==null||t.abort(),p(this,Pc,null),this._signal=null;for(const h of a(this,qt).values())h.destroy();a(this,qt).clear(),a(this,bt).clear(),a(this,ol).clear(),(n=a(this,qa))==null||n.clear(),p(this,di,null),a(this,De).clear(),a(this,Xi).destroy(),(s=a(this,Ic))==null||s.destroy(),(r=a(this,bn))==null||r.destroy(),(o=a(this,Xa))==null||o.destroy(),(l=a(this,Bs))==null||l.hide(),p(this,Bs,null),(d=a(this,Rc))==null||d.destroy(),p(this,Rc,null),p(this,Tc,null),a(this,zs)&&(clearTimeout(a(this,zs)),p(this,zs,null)),a(this,qs)&&(clearTimeout(a(this,qs)),p(this,qs,null)),(c=this._editorUndoBar)==null||c.destroy(),p(this,Dc,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return a(this,Uf)}get useNewAltTextFlow(){return a(this,qf)}get useNewAltTextWhenAddingImage(){return a(this,Lc)}get hcmFilter(){return ge(this,"hcmFilter",a(this,Ya)?a(this,Xf).addHCMFilter(a(this,Ya).foreground,a(this,Ya).background):"none")}get direction(){return ge(this,"direction",getComputedStyle(a(this,Ir)).direction)}get _highlightColors(){return ge(this,"_highlightColors",a(this,Mc)?new Map(a(this,Mc).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return ge(this,"highlightColors",null);const t=new Map,n=!!a(this,Ya);for(const[s,r]of e){const o=s.endsWith("_HCM");if(n&&o){t.set(s.replace("_HCM",""),r);continue}!n&&!o&&t.set(s,r)}return ge(this,"highlightColors",t)}get highlightColorNames(){return ge(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),p(this,Na,e)}setMainHighlightColorPicker(e){p(this,Rc,e)}editAltText(e,t=!1){var n;(n=a(this,Ic))==null||n.editAltText(this,e,t)}hasCommentManager(){return!!a(this,bn)}editComment(e,t,n,s){var r;(r=a(this,bn))==null||r.showDialog(this,e,t,n,s)}selectComment(e,t){const n=a(this,qt).get(e),s=n==null?void 0:n.getEditorByUID(t);s==null||s.toggleComment(!0,!0)}updateComment(e){var t;(t=a(this,bn))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=a(this,bn))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=a(this,bn))==null||t.removeComments([e.uid])}toggleComment(e,t,n=void 0){var s;(s=a(this,bn))==null||s.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){var n;return e&&((n=a(this,bn))==null?void 0:n.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=a(this,bn))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(a(this,qt).has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),s=r=>{r.pageNumber===e&&(this._eventBus._off("editorsrendered",s),t())};this._eventBus.on("editorsrendered",s),await n}getSignature(e){var t;(t=a(this,Xa))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return a(this,Xa)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":p(this,Lc,t);break}}onPageChanging({pageNumber:e}){p(this,Ec,e-1)}focusMainContainer(){a(this,Ir).focus()}findParent(e,t){for(const n of a(this,qt).values()){const{x:s,y:r,width:o,height:l}=n.div.getBoundingClientRect();if(e>=s&&e<=s+o&&t>=r&&t<=r+l)return n}return null}disableUserSelect(e=!1){a(this,Gf).classList.toggle("noUserSelect",e)}addShouldRescale(e){a(this,ol).add(e)}removeShouldRescale(e){a(this,ol).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*va.PDF_TO_CSS_UNITS;for(const n of a(this,ol))n.onScaleChanging();(t=a(this,Na))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:l}=n,d=n.toString(),h=_(this,V,wg).call(this,n).closest(".textLayer"),u=this.getSelectionBoxes(h);if(!u)return;n.empty();const f=_(this,V,x2).call(this,h),m=a(this,Nt)===he.NONE,b=()=>{const v=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:l,text:d});m&&this.showAllEditors("highlight",!0,!0),t&&(v==null||v.editComment())};if(m){this.switchToMode(he.HIGHLIGHT,b);return}b()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!a(this,qi))return null;const t=`${If}${e}`,n=a(this,qi).getRawValue(t);return n&&a(this,qi).remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&a(this,qi)&&!a(this,qi).has(e.id)&&a(this,qi).setValue(e.id,e)}a11yAlert(e,t=null){const n=a(this,Wf);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,a(this,Oa)&&(p(this,Oa,!1),_(this,V,Ru).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of a(this,De))if(t.div.contains(e)){p(this,ll,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!a(this,ll))return;const[e,t]=a(this,ll);p(this,ll,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){_(this,V,v2).call(this),_(this,V,y2).call(this)}removeEditListeners(){_(this,V,Xk).call(this),_(this,V,_2).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of a(this,Yi))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of a(this,Yi))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=a(this,di))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of a(this,De)){const r=s.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const o of a(this,Yi))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){ue(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const d of n){const c=await s.deserialize(d);if(!c)return;r.push(c)}const o=()=>{for(const d of r)_(this,V,b2).call(this,d);_(this,V,k2).call(this,r)},l=()=>{for(const d of r)d.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(r){ue(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,Nt)!==he.NONE&&!this.isEditorHandlingKeyboard&&hc._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,Oa)&&(p(this,Oa,!1),_(this,V,Ru).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(_(this,V,Bk).call(this),_(this,V,y2).call(this),_(this,V,En).call(this,{isEditing:a(this,Nt)!==he.NONE,isEmpty:_(this,V,Du).call(this),hasSomethingToUndo:a(this,Xi).hasSomethingToUndo(),hasSomethingToRedo:a(this,Xi).hasSomethingToRedo(),hasSelectedEditor:!1})):(_(this,V,qk).call(this),_(this,V,_2).call(this),_(this,V,En).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!a(this,Yi)){p(this,Yi,e);for(const t of a(this,Yi))_(this,V,yr).call(this,t.defaultPropertiesToUpdate)}}getId(){return a(this,B0).id}get currentLayer(){return a(this,qt).get(a(this,Ec))}getLayer(e){return a(this,qt).get(e)}get currentPageIndex(){return a(this,Ec)}addLayer(e){a(this,qt).set(e.pageIndex,e),a(this,za)?e.enable():e.disable()}removeLayer(e){a(this,qt).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,s=!1,r=!1){var o,l,d,c,h,u;if(a(this,Nt)!==e&&!(a(this,Ui)&&(await a(this,Ui).promise,!a(this,Ui)))){if(p(this,Ui,Promise.withResolvers()),(o=a(this,Na))==null||o.commitOrRemove(),a(this,Nt)===he.POPUP&&((l=a(this,bn))==null||l.hideSidebar()),(d=a(this,bn))==null||d.destroyPopup(),p(this,Nt,e),e===he.NONE){this.setEditingState(!1),_(this,V,Vk).call(this);for(const f of a(this,bt).values())f.hideStandaloneCommentButton();(c=this._editorUndoBar)==null||c.hide(),this.toggleComment(null),a(this,Ui).resolve();return}for(const f of a(this,bt).values())f.addStandaloneCommentButton();e===he.SIGNATURE&&await((h=a(this,Xa))==null?void 0:h.loadSignatures()),this.setEditingState(!0),await _(this,V,Uk).call(this),this.unselectAll();for(const f of a(this,qt).values())f.updateMode(e);if(e===he.POPUP){a(this,Tc)||p(this,Tc,await a(this,Dc).getAnnotationsByType(new Set(a(this,Yi).map(b=>b._editorType))));const f=new Set,m=[];for(const b of a(this,bt).values()){const{annotationElementId:v,hasComment:S,deleted:g}=b;v&&f.add(v),S&&!g&&m.push(b.getData())}for(const b of a(this,Tc)){const{id:v,popupRef:S,contentsObj:g}=b;S&&(g!=null&&g.str)&&!f.has(v)&&!a(this,Ha).has(v)&&m.push(b)}(u=a(this,bn))==null||u.showSidebar(m)}if(!t){n&&this.addNewEditorFromKeyboard(),a(this,Ui).resolve();return}for(const f of a(this,bt).values())f.uid===t?(this.setSelected(f),r?f.editComment():s?f.enterInEditMode():f.focus()):f.unselect();a(this,Ui).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==a(this,Nt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(a(this,Yi)){switch(e){case Se.CREATE:this.currentLayer.addNewEditor(t);return;case Se.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,Vf)||p(this,Vf,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of a(this,De))n.updateParams(e,t);else for(const n of a(this,Yi))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var r;for(const o of a(this,bt).values())o.editorType===e&&o.show(t);(((r=a(this,Vf))==null?void 0:r.get(Se.HIGHLIGHT_SHOW_ALL))??!0)!==t&&_(this,V,yr).call(this,[[Se.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(a(this,Yf)!==e){p(this,Yf,e);for(const t of a(this,qt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of a(this,bt).values())t.pageIndex===e&&(yield t)}getEditor(e){return a(this,bt).get(e)}addEditor(e){a(this,bt).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(a(this,zs)&&clearTimeout(a(this,zs)),p(this,zs,setTimeout(()=>{this.focusMainContainer(),p(this,zs,null)},0))),a(this,bt).delete(e.id),e.annotationElementId&&((t=a(this,qa))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!a(this,Ha).has(e.annotationElementId))&&((n=a(this,qi))==null||n.remove(e.id))}addDeletedAnnotationElement(e){a(this,Ha).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return a(this,Ha).has(e)}removeDeletedAnnotationElement(e){a(this,Ha).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){a(this,di)!==e&&(p(this,di,e),e&&_(this,V,yr).call(this,e.propertiesToUpdate))}updateUI(e){a(this,V,$k)===e&&_(this,V,yr).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){_(this,V,yr).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(a(this,De).has(e)){a(this,De).delete(e),e.unselect(),_(this,V,En).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,De).add(e),e.select(),_(this,V,yr).call(this,e.propertiesToUpdate),_(this,V,En).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=a(this,Na))==null||t.commitOrRemove();for(const n of a(this,De))n!==e&&n.unselect();a(this,De).clear(),a(this,De).add(e),e.select(),_(this,V,yr).call(this,e.propertiesToUpdate),_(this,V,En).call(this,{hasSelectedEditor:!0})}isSelected(e){return a(this,De).has(e)}get firstSelectedEditor(){return a(this,De).values().next().value}unselect(e){e.unselect(),a(this,De).delete(e),_(this,V,En).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,De).size!==0}get isEnterHandled(){return a(this,De).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;a(this,Xi).undo(),_(this,V,En).call(this,{hasSomethingToUndo:a(this,Xi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_(this,V,Du).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){a(this,Xi).redo(),_(this,V,En).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,Xi).hasSomethingToRedo(),isEmpty:_(this,V,Du).call(this)})}addCommands(e){a(this,Xi).add(e),_(this,V,En).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_(this,V,Du).call(this)})}cleanUndoStack(e){a(this,Xi).cleanType(e)}delete(){var r;this.commitOrRemove();const e=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...a(this,De)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},s=()=>{for(const o of t)_(this,V,b2).call(this,o)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=a(this,di))==null||e.commitOrRemove()}hasSomethingToControl(){return a(this,di)||this.hasSelection}selectAll(){for(const e of a(this,De))e.commit();_(this,V,k2).call(this,a(this,bt).values())}unselectAll(){var e;if(!(a(this,di)&&(a(this,di).commitOrRemove(),a(this,Nt)!==he.NONE))&&!((e=a(this,Na))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of a(this,De))t.unselect();a(this,De).clear(),_(this,V,En).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;a(this,Ua)[0]+=e,a(this,Ua)[1]+=t;const[s,r]=a(this,Ua),o=[...a(this,De)],l=1e3;a(this,qs)&&clearTimeout(a(this,qs)),p(this,qs,setTimeout(()=>{p(this,qs,null),a(this,Ua)[0]=a(this,Ua)[1]=0,this.addCommands({cmd:()=>{for(const d of o)a(this,bt).has(d.id)&&(d.translateInPage(s,r),d.translationDone())},undo:()=>{for(const d of o)a(this,bt).has(d.id)&&(d.translateInPage(-s,-r),d.translationDone())},mustExec:!1})},l));for(const d of o)d.translateInPage(e,t),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),p(this,Os,new Map);for(const e of a(this,De))a(this,Os).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,Os))return!1;this.disableUserSelect(!1);const e=a(this,Os);p(this,Os,null);let t=!1;for(const[{x:s,y:r,pageIndex:o},l]of e)l.newX=s,l.newY=r,l.newPageIndex=o,t||(t=s!==l.savedX||r!==l.savedY||o!==l.savedPageIndex);if(!t)return!1;const n=(s,r,o,l)=>{if(a(this,bt).has(s.id)){const d=a(this,qt).get(l);d?s._setParentAndPosition(d,r,o):(s.pageIndex=l,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:o,newPageIndex:l}]of e)n(s,r,o,l)},undo:()=>{for(const[s,{savedX:r,savedY:o,savedPageIndex:l}]of e)n(s,r,o,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(a(this,Os))for(const n of a(this,Os).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||a(this,De).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return a(this,di)===e}getActive(){return a(this,di)}getMode(){return a(this,Nt)}isEditingMode(){return a(this,Nt)!==he.NONE}get imageManager(){return ge(this,"imageManager",new m2)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,h=t.rangeCount;c<h;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:n,y:s,width:r,height:o}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(c,h,u,f)=>({x:(h-s)/o,y:1-(c+u-n)/r,width:f/o,height:u/r});break;case"180":l=(c,h,u,f)=>({x:1-(c+u-n)/r,y:1-(h+f-s)/o,width:u/r,height:f/o});break;case"270":l=(c,h,u,f)=>({x:1-(h+f-s)/o,y:(c-n)/r,width:f/o,height:u/r});break;default:l=(c,h,u,f)=>({x:(c-n)/r,y:(h-s)/o,width:u/r,height:f/o});break}const d=[];for(let c=0,h=t.rangeCount;c<h;c++){const u=t.getRangeAt(c);if(!u.collapsed)for(const{x:f,y:m,width:b,height:v}of u.getClientRects())b===0||v===0||d.push(l(f,m,b,v))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(a(this,Cc)||p(this,Cc,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=a(this,Cc))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=a(this,Cc))==null?void 0:s.get(e.data.id);if(!t)return;const n=a(this,qi).getRawValue(t);n&&(a(this,Nt)===he.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var r;const s=(r=a(this,qa))==null?void 0:r.get(e);s&&(s.setCanvas(t,n),a(this,qa).delete(e))}addMissingCanvas(e,t){(a(this,qa)||p(this,qa,new Map)).set(e,t)}};Pc=new WeakMap,di=new WeakMap,Tc=new WeakMap,bt=new WeakMap,qt=new WeakMap,Ic=new WeakMap,qi=new WeakMap,Cc=new WeakMap,Xi=new WeakMap,bn=new WeakMap,Da=new WeakMap,Na=new WeakMap,Ec=new WeakMap,Ha=new WeakMap,Os=new WeakMap,Yi=new WeakMap,ol=new WeakMap,Bf=new WeakMap,qf=new WeakMap,Lc=new WeakMap,Xf=new WeakMap,zs=new WeakMap,ja=new WeakMap,Mc=new WeakMap,Oa=new WeakMap,Bs=new WeakMap,B0=new WeakMap,za=new WeakMap,Fc=new WeakMap,Yf=new WeakMap,Ba=new WeakMap,ll=new WeakMap,Rc=new WeakMap,qa=new WeakMap,Uf=new WeakMap,Nt=new WeakMap,De=new WeakMap,Tr=new WeakMap,Xa=new WeakMap,Ya=new WeakMap,Vf=new WeakMap,Dc=new WeakMap,$f=new WeakMap,Ua=new WeakMap,qs=new WeakMap,Ir=new WeakMap,Gf=new WeakMap,Wf=new WeakMap,Ui=new WeakMap,V=new WeakSet,wg=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},x2=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of a(this,qt).values())if(n.hasTextLayer(e))return n;return null},jk=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=_(this,V,wg).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(a(this,Bs)||p(this,Bs,new t7(this)),a(this,Bs).show(n,s,this.direction==="ltr"))},Ok=function(){var r,o,l;const e=document.getSelection();if(!e||e.isCollapsed){a(this,Tr)&&((r=a(this,Bs))==null||r.hide(),p(this,Tr,null),_(this,V,En).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===a(this,Tr))return;const s=_(this,V,wg).call(this,e).closest(".textLayer");if(!s){a(this,Tr)&&((o=a(this,Bs))==null||o.hide(),p(this,Tr,null),_(this,V,En).call(this,{hasSelectedText:!1}));return}if((l=a(this,Bs))==null||l.hide(),p(this,Tr,t),_(this,V,En).call(this,{hasSelectedText:!0}),!(a(this,Nt)!==he.HIGHLIGHT&&a(this,Nt)!==he.NONE)&&(a(this,Nt)===he.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),p(this,Oa,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=a(this,Nt)===he.HIGHLIGHT?_(this,V,x2).call(this,s):null;if(d==null||d.toggleDrawing(),a(this,Fc)){const c=new AbortController,h=this.combinedSignal(c),u=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),d==null||d.toggleDrawing(!0),f.type==="pointerup"&&_(this,V,Ru).call(this,"main_toolbar"))};window.addEventListener("pointerup",u,{signal:h}),window.addEventListener("blur",u,{signal:h})}else d==null||d.toggleDrawing(!0),_(this,V,Ru).call(this,"main_toolbar")}},Ru=function(e=""){a(this,Nt)===he.HIGHLIGHT?this.highlightSelection(e):a(this,Bf)&&_(this,V,jk).call(this)},zk=function(){document.addEventListener("selectionchange",_(this,V,Ok).bind(this),{signal:this._signal})},Bk=function(){if(a(this,ja))return;p(this,ja,new AbortController);const e=this.combinedSignal(a(this,ja));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},qk=function(){var e;(e=a(this,ja))==null||e.abort(),p(this,ja,null)},v2=function(){if(a(this,Ba))return;p(this,Ba,new AbortController);const e=this.combinedSignal(a(this,Ba));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},Xk=function(){var e;(e=a(this,Ba))==null||e.abort(),p(this,Ba,null)},y2=function(){if(a(this,Da))return;p(this,Da,new AbortController);const e=this.combinedSignal(a(this,Da));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},_2=function(){var e;(e=a(this,Da))==null||e.abort(),p(this,Da,null)},Yk=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},En=function(e){Object.entries(e).some(([n,s])=>a(this,$f)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,$f),e)}),a(this,Nt)===he.HIGHLIGHT&&e.hasSelectedEditor===!1&&_(this,V,yr).call(this,[[Se.HIGHLIGHT_FREE,!0]]))},yr=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},Uk=async function(){if(!a(this,za)){p(this,za,!0);const e=[];for(const t of a(this,qt).values())e.push(t.enable());await Promise.all(e);for(const t of a(this,bt).values())t.enable()}},Vk=function(){if(this.unselectAll(),a(this,za)){p(this,za,!1);for(const e of a(this,qt).values())e.disable();for(const e of a(this,bt).values())e.disable()}},b2=function(e){const t=a(this,qt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},$k=function(){let e=null;for(e of a(this,De));return e},Du=function(){if(a(this,bt).size===0)return!0;if(a(this,bt).size===1)for(const e of a(this,bt).values())return e.isEmpty();return!1},k2=function(e){for(const t of a(this,De))t.unselect();a(this,De).clear();for(const t of e)t.isEmpty()||(a(this,De).add(t),t.select());_(this,V,En).call(this,{hasSelectedEditor:this.hasSelection})},O(hc,"TRANSLATE_SMALL",1),O(hc,"TRANSLATE_BIG",10);let Oo=hc;var Gt,Xs,ds,Nc,Ys,ci,Hc,Us,Un,Cr,dl,Vs,Va,Ss,Nu,Sg;const Ln=class Ln{constructor(e){x(this,Ss);x(this,Gt,null);x(this,Xs,!1);x(this,ds,null);x(this,Nc,null);x(this,Ys,null);x(this,ci,null);x(this,Hc,!1);x(this,Us,null);x(this,Un,null);x(this,Cr,null);x(this,dl,null);x(this,Vs,!1);p(this,Un,e),p(this,Vs,e._uiManager.useNewAltTextFlow),a(Ln,Va)||p(Ln,Va,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Ln._l10n??(Ln._l10n=e)}async render(){const e=p(this,ds,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=p(this,Nc,document.createElement("span"));e.append(t),a(this,Vs)?(e.classList.add("new"),e.setAttribute("data-l10n-id",a(Ln,Va).missing),t.setAttribute("data-l10n-id",a(Ln,Va)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=a(this,Un)._uiManager._signal;e.addEventListener("contextmenu",Ri,{signal:n}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const s=r=>{r.preventDefault(),a(this,Un)._uiManager.editAltText(a(this,Un)),a(this,Vs)&&a(this,Un)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,Ss,Nu)}})};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(p(this,Hc,!0),s(r))},{signal:n}),await _(this,Ss,Sg).call(this),e}finish(){a(this,ds)&&(a(this,ds).focus({focusVisible:a(this,Hc)}),p(this,Hc,!1))}isEmpty(){return a(this,Vs)?a(this,Gt)===null:!a(this,Gt)&&!a(this,Xs)}hasData(){return a(this,Vs)?a(this,Gt)!==null||!!a(this,Cr):this.isEmpty()}get guessedText(){return a(this,Cr)}async setGuessedText(e){a(this,Gt)===null&&(p(this,Cr,e),p(this,dl,await Ln._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),_(this,Ss,Sg).call(this))}toggleAltTextBadge(e=!1){var t;if(!a(this,Vs)||a(this,Gt)){(t=a(this,Us))==null||t.remove(),p(this,Us,null);return}if(!a(this,Us)){const n=p(this,Us,document.createElement("div"));n.className="noAltTextBadge",a(this,Un).div.append(n)}a(this,Us).classList.toggle("hidden",!e)}serialize(e){let t=a(this,Gt);return!e&&a(this,Cr)===t&&(t=a(this,dl)),{altText:t,decorative:a(this,Xs),guessedText:a(this,Cr),textWithDisclaimer:a(this,dl)}}get data(){return{altText:a(this,Gt),decorative:a(this,Xs)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:s,cancel:r=!1}){n&&(p(this,Cr,n),p(this,dl,s)),!(a(this,Gt)===e&&a(this,Xs)===t)&&(r||(p(this,Gt,e),p(this,Xs,t)),_(this,Ss,Sg).call(this))}toggle(e=!1){a(this,ds)&&(!e&&a(this,ci)&&(clearTimeout(a(this,ci)),p(this,ci,null)),a(this,ds).disabled=!e)}shown(){a(this,Un)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,Ss,Nu)}})}destroy(){var e,t;(e=a(this,ds))==null||e.remove(),p(this,ds,null),p(this,Nc,null),p(this,Ys,null),(t=a(this,Us))==null||t.remove(),p(this,Us,null)}};Gt=new WeakMap,Xs=new WeakMap,ds=new WeakMap,Nc=new WeakMap,Ys=new WeakMap,ci=new WeakMap,Hc=new WeakMap,Us=new WeakMap,Un=new WeakMap,Cr=new WeakMap,dl=new WeakMap,Vs=new WeakMap,Va=new WeakMap,Ss=new WeakSet,Nu=function(){return a(this,Gt)&&"added"||a(this,Gt)===null&&this.guessedText&&"review"||"missing"},Sg=async function(){var s,r,o;const e=a(this,ds);if(!e)return;if(a(this,Vs)){if(e.classList.toggle("done",!!a(this,Gt)),e.setAttribute("data-l10n-id",a(Ln,Va)[a(this,Ss,Nu)]),(s=a(this,Nc))==null||s.setAttribute("data-l10n-id",a(Ln,Va)[`${a(this,Ss,Nu)}-label`]),!a(this,Gt)){(r=a(this,Ys))==null||r.remove();return}}else{if(!a(this,Gt)&&!a(this,Xs)){e.classList.remove("done"),(o=a(this,Ys))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=a(this,Ys);if(!t){p(this,Ys,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${a(this,Un).id}`;const l=100,d=a(this,Un)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(a(this,ci)),p(this,ci,null)},{once:!0}),e.addEventListener("mouseenter",()=>{p(this,ci,setTimeout(()=>{p(this,ci,null),a(this,Ys).classList.add("show"),a(this,Un)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:d}),e.addEventListener("mouseleave",()=>{var c;a(this,ci)&&(clearTimeout(a(this,ci)),p(this,ci,null)),(c=a(this,Ys))==null||c.classList.remove("show")},{signal:d})}a(this,Xs)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=a(this,Gt)),t.parentNode||e.append(t);const n=a(this,Un).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},x(Ln,Va,null),O(Ln,"_l10n",null);let A0=Ln;var an,Vi,cl,Qe,Kf,hl,cs,ul,fl,pl,Qf,w2;class Zm{constructor(e){x(this,Qf);x(this,an,null);x(this,Vi,null);x(this,cl,!1);x(this,Qe,null);x(this,Kf,null);x(this,hl,null);x(this,cs,null);x(this,ul,null);x(this,fl,!1);x(this,pl,null);p(this,Qe,e)}renderForToolbar(){const e=p(this,Vi,document.createElement("button"));return e.className="comment",_(this,Qf,w2).call(this,e,!1)}renderForStandalone(){const e=p(this,an,document.createElement("button"));e.className="annotationCommentButton";const t=a(this,Qe).commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(a(this,Qe)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const s=a(this,Qe).commentButtonColor;s&&(n.backgroundColor=s)}return _(this,Qf,w2).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=a(this,an)??a(this,Vi))==null||e.focus()},0)}onUpdatedColor(){if(!a(this,an))return;const e=a(this,Qe).commentButtonColor;e&&(a(this,an).style.backgroundColor=e),a(this,Qe)._uiManager.updatePopupColor(a(this,Qe))}get commentButtonWidth(){var e;return(((e=a(this,an))==null?void 0:e.getBoundingClientRect().width)??0)/a(this,Qe).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(a(this,pl))return a(this,pl);if(!a(this,an))return null;const{x:e,y:t,height:n}=a(this,an).getBoundingClientRect(),{x:s,y:r,width:o,height:l}=a(this,Qe).parent.boundingClientRect;return[(e-s)/o,(t+n-r)/l]}set commentPopupPositionInLayer(e){p(this,pl,e)}hasDefaultPopupPosition(){return a(this,pl)===null}removeStandaloneCommentButton(){var e;(e=a(this,an))==null||e.remove(),p(this,an,null)}removeToolbarCommentButton(){var e;(e=a(this,Vi))==null||e.remove(),p(this,Vi,null)}setCommentButtonStates({selected:e,hasPopup:t}){a(this,an)&&(a(this,an).classList.toggle("selected",e),a(this,an).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let n,s;if(t)[n,s]=t;else{[n,s]=a(this,Qe).commentButtonPosition;const{width:h,height:u,x:f,y:m}=a(this,Qe);n=f+n*h,s=m+s*u}const r=a(this,Qe).parent.boundingClientRect,{x:o,y:l,width:d,height:c}=r;a(this,Qe)._uiManager.editComment(a(this,Qe),o+n*d,l+s*c,{...e,parentDimensions:r})}finish(){a(this,Vi)&&(a(this,Vi).focus({focusVisible:a(this,cl)}),p(this,cl,!1))}isDeleted(){return a(this,fl)||a(this,cs)===""}isEmpty(){return a(this,cs)===null}hasBeenEdited(){return this.isDeleted()||a(this,cs)!==a(this,Kf)}serialize(){return this.data}get data(){return{text:a(this,cs),richText:a(this,hl),date:a(this,ul),deleted:this.isDeleted()}}set data(e){if(e!==a(this,cs)&&p(this,hl,null),e===null){p(this,cs,""),p(this,fl,!0);return}p(this,cs,e),p(this,ul,new Date),p(this,fl,!1)}setInitialText(e,t=null){p(this,Kf,e),this.data=e,p(this,ul,null),p(this,hl,t)}shown(){}destroy(){var e,t;(e=a(this,Vi))==null||e.remove(),p(this,Vi,null),(t=a(this,an))==null||t.remove(),p(this,an,null),p(this,cs,""),p(this,hl,null),p(this,ul,null),p(this,Qe,null),p(this,cl,!1),p(this,fl,!1)}}an=new WeakMap,Vi=new WeakMap,cl=new WeakMap,Qe=new WeakMap,Kf=new WeakMap,hl=new WeakMap,cs=new WeakMap,ul=new WeakMap,fl=new WeakMap,pl=new WeakMap,Qf=new WeakSet,w2=function(e,t){if(!a(this,Qe)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[a(this,Qe)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=a(this,Qe)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",Ri,{signal:n}),t&&(e.addEventListener("focusin",r=>{a(this,Qe)._focusEventsAllowed=!1,pt(r)},{capture:!0,signal:n}),e.addEventListener("focusout",r=>{a(this,Qe)._focusEventsAllowed=!0,pt(r)},{capture:!0,signal:n})),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const s=r=>{r.preventDefault(),e===a(this,Vi)?this.edit():a(this,Qe).toggleComment(!0)};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(p(this,cl,!0),s(r))},{signal:n}),e.addEventListener("pointerenter",()=>{a(this,Qe).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{a(this,Qe).toggleComment(!1,!1)},{signal:n}),e};var jc,ml,Jf,Zf,ep,tp,np,Er,gl,Lr,xl,Mr,zo,Gk,Wk,Kk;const Yy=class Yy{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:o=null,signal:l}){x(this,zo);x(this,jc);x(this,ml,!1);x(this,Jf,null);x(this,Zf);x(this,ep);x(this,tp);x(this,np);x(this,Er,null);x(this,gl);x(this,Lr,null);x(this,xl);x(this,Mr,null);p(this,jc,e),p(this,Jf,n),p(this,Zf,t),p(this,ep,s),p(this,tp,r),p(this,np,o),p(this,xl,new AbortController),p(this,gl,AbortSignal.any([l,a(this,xl).signal])),e.addEventListener("touchstart",_(this,zo,Gk).bind(this),{passive:!1,signal:a(this,gl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Is.pixelRatio}destroy(){var e,t;(e=a(this,xl))==null||e.abort(),p(this,xl,null),(t=a(this,Er))==null||t.abort(),p(this,Er,null)}};jc=new WeakMap,ml=new WeakMap,Jf=new WeakMap,Zf=new WeakMap,ep=new WeakMap,tp=new WeakMap,np=new WeakMap,Er=new WeakMap,gl=new WeakMap,Lr=new WeakMap,xl=new WeakMap,Mr=new WeakMap,zo=new WeakSet,Gk=function(e){var s,r,o;if((s=a(this,Zf))!=null&&s.call(this))return;if(e.touches.length===1){if(a(this,Er))return;const l=p(this,Er,new AbortController),d=AbortSignal.any([a(this,gl),l.signal]),c=a(this,jc),h={capture:!0,signal:d,passive:!1},u=f=>{var m;f.pointerType==="touch"&&((m=a(this,Er))==null||m.abort(),p(this,Er,null))};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(pt(f),u(f))},h),c.addEventListener("pointerup",u,h),c.addEventListener("pointercancel",u,h);return}if(!a(this,Mr)){p(this,Mr,new AbortController);const l=AbortSignal.any([a(this,gl),a(this,Mr).signal]),d=a(this,jc),c={signal:l,capture:!1,passive:!1};d.addEventListener("touchmove",_(this,zo,Wk).bind(this),c);const h=_(this,zo,Kk).bind(this);d.addEventListener("touchend",h,c),d.addEventListener("touchcancel",h,c),c.capture=!0,d.addEventListener("pointerdown",pt,c),d.addEventListener("pointermove",pt,c),d.addEventListener("pointercancel",pt,c),d.addEventListener("pointerup",pt,c),(r=a(this,ep))==null||r.call(this)}if(pt(e),e.touches.length!==2||(o=a(this,Jf))!=null&&o.call(this)){p(this,Lr,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),p(this,Lr,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},Wk=function(e){var A;if(!a(this,Lr)||e.touches.length!==2)return;pt(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:s,screenY:r}=t,{screenX:o,screenY:l}=n,d=a(this,Lr),{touch0X:c,touch0Y:h,touch1X:u,touch1Y:f}=d,m=u-c,b=f-h,v=o-s,S=l-r,g=Math.hypot(v,S)||1,k=Math.hypot(m,b)||1;if(!a(this,ml)&&Math.abs(k-g)<=Yy.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=s,d.touch0Y=r,d.touch1X=o,d.touch1Y=l,!a(this,ml)){p(this,ml,!0);return}const w=[(s+o)/2,(r+l)/2];(A=a(this,tp))==null||A.call(this,w,k,g)},Kk=function(e){var t;e.touches.length>=2||(a(this,Mr)&&(a(this,Mr).abort(),p(this,Mr,null),(t=a(this,np))==null||t.call(this)),a(this,Lr)&&(pt(e),p(this,Lr,null),p(this,ml,!1)))};let Mf=Yy;var vl,hs,ot,Ve,Fr,Oc,$a,ip,on,yl,Rr,$s,Ga,sp,_l,hi,rp,bl,Dr,Gs,zc,Bc,$i,kl,ap,q0,oe,S2,op,A2,Ag,Qk,Jk,P2,Pg,T2,Zk,ew,tw,I2,nw,C2,iw,sw,rw,E2,Hu;const fe=class fe{constructor(e){x(this,oe);x(this,vl,null);x(this,hs,null);x(this,ot,null);x(this,Ve,null);x(this,Fr,null);x(this,Oc,!1);x(this,$a,null);x(this,ip,"");x(this,on,null);x(this,yl,null);x(this,Rr,null);x(this,$s,null);x(this,Ga,null);x(this,sp,"");x(this,_l,!1);x(this,hi,null);x(this,rp,!1);x(this,bl,!1);x(this,Dr,!1);x(this,Gs,null);x(this,zc,0);x(this,Bc,0);x(this,$i,null);x(this,kl,null);O(this,"isSelected",!1);O(this,"_isCopy",!1);O(this,"_editToolbar",null);O(this,"_initialOptions",Object.create(null));O(this,"_initialData",null);O(this,"_isVisible",!0);O(this,"_uiManager",null);O(this,"_focusEventsAllowed",!0);x(this,ap,!1);x(this,q0,fe._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[r,o];const[l,d]=this.parentDimensions;this.x=e.x/l,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=fe.prototype._resizeWithKeyboard,t=Oo.TRANSLATE_SMALL,n=Oo.TRANSLATE_BIG;return ge(this,"_resizerKeyboardManager",new Sm([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],fe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ge(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new s7({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(fe._l10n??(fe._l10n=e),fe._l10nResizer||(fe._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),fe._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);fe._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){We("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,ap)}set _isDraggable(e){var t;p(this,ap,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,q0)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(_(this,oe,Hu).call(this),(t=a(this,$s))==null||t.remove(),p(this,$s,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(a(this,_l)?p(this,_l,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,s){const[r,o]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(e+n)/r,this.y=(t+s)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,s]=this.parentDimensions;this.setAt(e*n,t*s,this.width*n,this.height*s),this._onTranslated()}translate(e,t){_(this,oe,S2).call(this,this.parentDimensions,e,t)}translateInPage(e,t){a(this,hi)||p(this,hi,[this.x,this.y,this.width,this.height]),_(this,oe,S2).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){a(this,hi)||p(this,hi,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[s,r]}=this;if(this.x+=e/s,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[d,c]=this.getBaseTranslation();o+=d,l+=c;const{style:h}=n;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!a(this,hi)&&(a(this,hi)[0]!==this.x||a(this,hi)[1]!==this.y)}get _hasBeenResized(){return!!a(this,hi)&&(a(this,hi)[2]!==this.width||a(this,hi)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=fe,s=n/e,r=n/t;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,s]}=this;let{x:r,y:o,width:l,height:d}=this;if(l*=n,d*=s,r*=n,o*=s,this._mustFixPosition)switch(e){case 0:r=Pn(r,0,n-l),o=Pn(o,0,s-d);break;case 90:r=Pn(r,0,n-d),o=Pn(o,l,s);break;case 180:r=Pn(r,l,n),o=Pn(o,d,s);break;case 270:r=Pn(r,d,n),o=Pn(o,0,s-l);break}this.x=r/=n,this.y=o/=s;const[c,h]=this.getBaseTranslation();r+=c,o+=h,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return _(n=fe,op,A2).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return _(n=fe,op,A2).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=a(this,ot))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||a(this,bl))return this._editToolbar;this._editToolbar=new f2(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=a(this,ot))==null||t.destroy()}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return a(this,ot)||(A0.initialize(fe._l10n),p(this,ot,new A0(this)),a(this,vl)&&(a(this,ot).data=a(this,vl),p(this,vl,null))),a(this,ot)}get altTextData(){var e;return(e=a(this,ot))==null?void 0:e.data}set altTextData(e){a(this,ot)&&(a(this,ot).data=e)}get guessedAltText(){var e;return(e=a(this,ot))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=a(this,ot))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=a(this,ot))==null?void 0:t.serialize(e)}hasAltText(){return!!a(this,ot)&&!a(this,ot).isEmpty()}hasAltTextData(){var e;return((e=a(this,ot))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=a(this,Ve))==null||e.focusButton()}addCommentButton(){return a(this,Ve)||p(this,Ve,new Zm(this))}addStandaloneCommentButton(){if(a(this,Fr)){this._uiManager.isEditingMode()&&a(this,Fr).classList.remove("hidden");return}this.hasComment&&(p(this,Fr,a(this,Ve).renderForStandalone()),this.div.append(a(this,Fr)))}removeStandaloneCommentButton(){a(this,Ve).removeStandaloneCommentButton(),p(this,Fr,null)}hideStandaloneCommentButton(){var e;(e=a(this,Fr))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:n,deleted:s}}=a(this,Ve);return{text:t,richText:e,date:n,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){a(this,Ve)||p(this,Ve,new Zm(this)),a(this,Ve).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(a(this,Ve)||p(this,Ve,new Zm(this)),a(this,Ve).setInitialText(e,n),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){var e;return(e=a(this,Ve))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=a(this,Ve))==null?void 0:e.isDeleted()}get hasComment(){return!!a(this,Ve)&&!a(this,Ve).isEmpty()&&!a(this,Ve).isDeleted()}async editComment(e){a(this,Ve)||p(this,Ve,new Zm(this)),a(this,Ve).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){a(this,Ve).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,s]=e.rect,[r]=this.pageDimensions,[o]=this.pageTranslation,l=o+r+1,d=s-100,c=l+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,d,c,s]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){a(this,Ve).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=a(this,Oc)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),_(this,oe,C2).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),Nk(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,kl)||p(this,kl,new Mf({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:_(this,oe,Zk).bind(this),onPinching:_(this,oe,ew).bind(this),onPinchEnd:_(this,oe,tw).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=sn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(p(this,_l,!0),this._isDraggable){_(this,oe,nw).call(this,e);return}_(this,oe,I2).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,Gs)&&clearTimeout(a(this,Gs)),p(this,Gs,setTimeout(()=>{var e;p(this,Gs,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const s=this.parentScale,[r,o]=this.pageDimensions,[l,d]=this.pageTranslation,c=e/s,h=t/s,u=this.x*r,f=this.y*o,m=this.width*r,b=this.height*o;switch(n){case 0:return[u+c+l,o-f-h-b+d,u+c+m+l,o-f-h+d];case 90:return[u+h+l,o-f+c+d,u+h+b+l,o-f+c+m+d];case 180:return[u-c-m+l,o-f+h+d,u-c+l,o-f+h+b+d];case 270:return[u-h-b+l,o-f-c-m+d,u-h+l,o-f-c+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,s,r,o]=e,l=r-n,d=o-s;switch(this.rotation){case 0:return[n,t-o,l,d];case 90:return[n,t-s,d,l];case 180:return[r,t-s,l,d];case 270:return[r,t-o,d,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&fe._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=a(this,Ve))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:s,deleted:r,richText:o},uid:l,pageIndex:d,creationDate:c,modificationDate:h}=this;return{id:l,pageIndex:d,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:c,modificationDate:n||h,popupRef:!r,color:t,opacity:s}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),p(this,bl,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),p(this,bl,!1),!0):!1}isInEditMode(){return a(this,bl)}shouldGetKeyboardEvents(){return a(this,Dr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return t<o&&s>0&&e<r&&n>0}rebuild(){_(this,oe,C2).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(e,t,n){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});s.rotation=e.rotation,p(s,vl,e.accessibilityData),s._isCopy=e.isCopy||!1;const[r,o]=s.pageDimensions,[l,d,c,h]=s.getRectInCurrentCoords(e.rect,o);return s.x=l/r,s.y=d/o,s.width=c/r,s.height=h/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=a(this,Ga))==null||e.abort(),p(this,Ga,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,Gs)&&(clearTimeout(a(this,Gs)),p(this,Gs,null)),_(this,oe,Hu).call(this),this.removeEditToolbar(),a(this,$i)){for(const n of a(this,$i).values())clearTimeout(n);p(this,$i,null)}this.parent=null,(t=a(this,kl))==null||t.destroy(),p(this,kl,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(_(this,oe,Qk).call(this),a(this,on).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,s,r,o]=this.getPDFRect();return[fe._round(n+(r-n)*e),fe._round(s+(o-s)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return a(this,Ve).commentPopupPositionInLayer}set commentPopupPosition(e){a(this,Ve).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return a(this,Ve).hasDefaultPopupPosition()}get commentButtonWidth(){return a(this,Ve).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){a(this,Ve).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),p(this,Rr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=a(this,on).children;if(!a(this,hs)){p(this,hs,Array.from(t));const o=_(this,oe,iw).bind(this),l=_(this,oe,sw).bind(this),d=this._uiManager._signal;for(const c of a(this,hs)){const h=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:d}),c.addEventListener("blur",l,{signal:d}),c.addEventListener("focus",_(this,oe,rw).bind(this,h),{signal:d}),c.setAttribute("data-l10n-id",fe._l10nResizer[h])}}const n=a(this,hs)[0];let s=0;for(const o of t){if(o===n)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(a(this,hs).length/4);if(r!==s){if(r<s)for(let l=0;l<s-r;l++)a(this,on).append(a(this,on).firstChild);else if(r>s)for(let l=0;l<r-s;l++)a(this,on).firstChild.before(a(this,on).lastChild);let o=0;for(const l of t){const c=a(this,hs)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",fe._l10nResizer[c])}}_(this,oe,E2).call(this,0),p(this,Dr,!0),a(this,on).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){a(this,Dr)&&_(this,oe,T2).call(this,a(this,sp),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){_(this,oe,Hu).call(this),this.div.focus()}select(){var e,t,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(n=a(this,ot))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,n,s,r;this.isSelected&&(this.isSelected=!1,(e=a(this,on))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=a(this,ot))==null||r.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return a(this,rp)}set isEditing(e){p(this,rp,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){a(this,$i)||p(this,$i,new Map);const{action:n}=e;let s=a(this,$i).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),a(this,$i).delete(n),a(this,$i).size===0&&p(this,$i,null)},fe._telemetryTimeout),a(this,$i).set(n,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),p(this,Oc,!1)}disable(){this.div&&(this.div.tabIndex=-1),p(this,Oc,!0)}updateFakeAnnotationElement(e){if(!a(this,$s)&&!this.deleted){p(this,$s,e.addFakeAnnotation(this));return}if(this.deleted){a(this,$s).remove(),p(this,$s,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&a(this,$s).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};vl=new WeakMap,hs=new WeakMap,ot=new WeakMap,Ve=new WeakMap,Fr=new WeakMap,Oc=new WeakMap,$a=new WeakMap,ip=new WeakMap,on=new WeakMap,yl=new WeakMap,Rr=new WeakMap,$s=new WeakMap,Ga=new WeakMap,sp=new WeakMap,_l=new WeakMap,hi=new WeakMap,rp=new WeakMap,bl=new WeakMap,Dr=new WeakMap,Gs=new WeakMap,zc=new WeakMap,Bc=new WeakMap,$i=new WeakMap,kl=new WeakMap,ap=new WeakMap,q0=new WeakMap,oe=new WeakSet,S2=function([e,t],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},op=new WeakSet,A2=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Ag=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},Qk=function(){if(a(this,on))return;p(this,on,document.createElement("div")),a(this,on).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const s=document.createElement("div");a(this,on).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",_(this,oe,Jk).bind(this,n),{signal:t}),s.addEventListener("contextmenu",Ri,{signal:t}),s.tabIndex=-1}this.div.prepend(a(this,on))},Jk=function(e,t){var h;t.preventDefault();const{isMac:n}=sn.platform;if(t.button!==0||t.ctrlKey&&n)return;(h=a(this,ot))==null||h.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,p(this,yl,[t.screenX,t.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",_(this,oe,T2).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",pt,{passive:!1,signal:o}),window.addEventListener("contextmenu",Ri,{signal:o}),p(this,Rr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var u;r.abort(),this.parent.togglePointerEvents(!0),(u=a(this,ot))==null||u.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=l,this.div.style.cursor=d,_(this,oe,Pg).call(this)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})},P2=function(e,t,n,s){this.width=n,this.height=s,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},Pg=function(){if(!a(this,Rr))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:s}=a(this,Rr);p(this,Rr,null);const r=this.x,o=this.y,l=this.width,d=this.height;r===e&&o===t&&l===n&&d===s||this.addCommands({cmd:_(this,oe,P2).bind(this,r,o,l,d),undo:_(this,oe,P2).bind(this,e,t,n,s),mustExec:!0})},T2=function(e,t){const[n,s]=this.parentDimensions,r=this.x,o=this.y,l=this.width,d=this.height,c=fe.MIN_SIZE/n,h=fe.MIN_SIZE/s,u=_(this,oe,Ag).call(this,this.rotation),f=(q,G)=>[u[0]*q+u[2]*G,u[1]*q+u[3]*G],m=_(this,oe,Ag).call(this,360-this.rotation),b=(q,G)=>[m[0]*q+m[2]*G,m[1]*q+m[3]*G];let v,S,g=!1,k=!1;switch(e){case"topLeft":g=!0,v=(q,G)=>[0,0],S=(q,G)=>[q,G];break;case"topMiddle":v=(q,G)=>[q/2,0],S=(q,G)=>[q/2,G];break;case"topRight":g=!0,v=(q,G)=>[q,0],S=(q,G)=>[0,G];break;case"middleRight":k=!0,v=(q,G)=>[q,G/2],S=(q,G)=>[0,G/2];break;case"bottomRight":g=!0,v=(q,G)=>[q,G],S=(q,G)=>[0,0];break;case"bottomMiddle":v=(q,G)=>[q/2,G],S=(q,G)=>[q/2,0];break;case"bottomLeft":g=!0,v=(q,G)=>[0,G],S=(q,G)=>[q,0];break;case"middleLeft":k=!0,v=(q,G)=>[0,G/2],S=(q,G)=>[q,G/2];break}const w=v(l,d),A=S(l,d);let T=f(...A);const I=fe._round(r+T[0]),C=fe._round(o+T[1]);let L=1,F=1,D,j;if(t.fromKeyboard)({deltaX:D,deltaY:j}=t);else{const{screenX:q,screenY:G}=t,[H,W]=a(this,yl);[D,j]=this.screenToPageTranslation(q-H,G-W),a(this,yl)[0]=q,a(this,yl)[1]=G}if([D,j]=b(D/n,j/s),g){const q=Math.hypot(l,d);L=F=Math.max(Math.min(Math.hypot(A[0]-w[0]-D,A[1]-w[1]-j)/q,1/l,1/d),c/l,h/d)}else k?L=Pn(Math.abs(A[0]-w[0]-D),c,1)/l:F=Pn(Math.abs(A[1]-w[1]-j),h,1)/d;const N=fe._round(l*L),ie=fe._round(d*F);T=f(...S(N,ie));const R=I-T[0],X=C-T[1];a(this,hi)||p(this,hi,[this.x,this.y,this.width,this.height]),this.width=N,this.height=ie,this.x=R,this.y=X,this.setDims(),this.fixAndSetPosition(),this._onResizing()},Zk=function(){var e;p(this,Rr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=a(this,ot))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},ew=function(e,t,n){let r=.7*(n/t)+1-.7;if(r===1)return;const o=_(this,oe,Ag).call(this,this.rotation),l=(I,C)=>[o[0]*I+o[2]*C,o[1]*I+o[3]*C],[d,c]=this.parentDimensions,h=this.x,u=this.y,f=this.width,m=this.height,b=fe.MIN_SIZE/d,v=fe.MIN_SIZE/c;r=Math.max(Math.min(r,1/f,1/m),b/f,v/m);const S=fe._round(f*r),g=fe._round(m*r);if(S===f&&g===m)return;a(this,hi)||p(this,hi,[h,u,f,m]);const k=l(f/2,m/2),w=fe._round(h+k[0]),A=fe._round(u+k[1]),T=l(S/2,g/2);this.x=w-T[0],this.y=A-T[1],this.width=S,this.height=g,this.setDims(),this.fixAndSetPosition(),this._onResizing()},tw=function(){var e;(e=a(this,ot))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),_(this,oe,Pg).call(this)},I2=function(e){const{isMac:t}=sn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},nw=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:r},l=c=>{s.abort(),p(this,$a,null),p(this,_l,!1),this._uiManager.endDragSession()||_(this,oe,I2).call(this,c),n&&this._onStopDragging()};t&&(p(this,zc,e.clientX),p(this,Bc,e.clientY),p(this,$a,e.pointerId),p(this,ip,e.pointerType),window.addEventListener("pointermove",c=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:h,clientY:u,pointerId:f}=c;if(f!==a(this,$a)){pt(c);return}const[m,b]=this.screenToPageTranslation(h-a(this,zc),u-a(this,Bc));p(this,zc,h),p(this,Bc,u),this._uiManager.dragSelectedEditors(m,b)},o),window.addEventListener("touchmove",pt,o),window.addEventListener("pointerdown",c=>{c.pointerType===a(this,ip)&&(a(this,kl)||c.isPrimary)&&l(c),pt(c)},o));const d=c=>{if(!a(this,$a)||a(this,$a)===c.pointerId){l(c);return}pt(c)};window.addEventListener("pointerup",d,{signal:r}),window.addEventListener("blur",d,{signal:r})},C2=function(){if(a(this,Ga)||!this.div)return;p(this,Ga,new AbortController);const e=this._uiManager.combinedSignal(a(this,Ga));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},iw=function(e){fe._resizerKeyboardManager.exec(this,e)},sw=function(e){var t;a(this,Dr)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==a(this,on)&&_(this,oe,Hu).call(this)},rw=function(e){p(this,sp,a(this,Dr)?e:"")},E2=function(e){if(a(this,hs))for(const t of a(this,hs))t.tabIndex=e},Hu=function(){p(this,Dr,!1),_(this,oe,E2).call(this,-1),_(this,oe,Pg).call(this)},x(fe,op),O(fe,"_l10n",null),O(fe,"_l10nResizer",null),O(fe,"_borderLineWidth",-1),O(fe,"_colorManager",new g2),O(fe,"_zIndex",1),O(fe,"_telemetryTimeout",1e3);let Ze=fe;class s7 extends Ze{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Eb=3285377520,ji=4294901760,Ns=65535;class aw{constructor(e){this.h1=e?e&4294967295:Eb,this.h2=e?e&4294967295:Eb}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let v=0,S=e.length;v<S;v++){const g=e.charCodeAt(v);g<=255?t[n++]=g:(t[n++]=g>>>8,t[n++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,r=n-s*4,o=new Uint32Array(t.buffer,0,s);let l=0,d=0,c=this.h1,h=this.h2;const u=3432918353,f=461845907,m=u&Ns,b=f&Ns;for(let v=0;v<s;v++)v&1?(l=o[v],l=l*u&ji|l*m&Ns,l=l<<15|l>>>17,l=l*f&ji|l*b&Ns,c^=l,c=c<<13|c>>>19,c=c*5+3864292196):(d=o[v],d=d*u&ji|d*m&Ns,d=d<<15|d>>>17,d=d*f&ji|d*b&Ns,h^=d,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,r){case 3:l^=t[s*4+2]<<16;case 2:l^=t[s*4+1]<<8;case 1:l^=t[s*4],l=l*u&ji|l*m&Ns,l=l<<15|l>>>17,l=l*f&ji|l*b&Ns,s&1?c^=l:h^=l}this.h1=c,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ji|e*36045&Ns,t=t*4283543511&ji|((t<<16|e>>>16)*2950163797&ji)>>>16,e^=t>>>1,e=e*444984403&ji|e*60499&Ns,t=t*3301882366&ji|((t<<16|e>>>16)*3120437893&ji)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const L2=Object.freeze({map:null,hash:"",transfer:void 0});var wl,Sl,Nr,ln,X0,ow;class Ry{constructor(){x(this,X0);x(this,wl,!1);x(this,Sl,null);x(this,Nr,null);x(this,ln,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=a(this,ln).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return a(this,ln).get(e)}remove(e){const t=a(this,ln).get(e);if(t!==void 0&&(t instanceof Ze&&a(this,Nr).delete(t.annotationElementId),a(this,ln).delete(e),a(this,ln).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of a(this,ln).values())if(n instanceof Ze)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=a(this,ln).get(e);let s=!1;if(n!==void 0)for(const[r,o]of Object.entries(t))n[r]!==o&&(s=!0,n[r]=o);else s=!0,a(this,ln).set(e,t);s&&_(this,X0,ow).call(this),t instanceof Ze&&((a(this,Nr)||p(this,Nr,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return a(this,ln).has(e)}get size(){return a(this,ln).size}resetModified(){a(this,wl)&&(p(this,wl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new lw(this)}get serializable(){if(a(this,ln).size===0)return L2;const e=new Map,t=new aw,n=[],s=Object.create(null);let r=!1;for(const[o,l]of a(this,ln)){const d=l instanceof Ze?l.serialize(!1,s):l;d&&(e.set(o,d),t.update(`${o}:${JSON.stringify(d)}`),r||(r=!!d.bitmap))}if(r)for(const o of e.values())o.bitmap&&n.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:L2}get editorStats(){let e=null;const t=new Map;let n=0,s=0;for(const r of a(this,ln).values()){if(!(r instanceof Ze)){r.popup&&(r.popup.deleted?s+=1:n+=1);continue}r.isCommentDeleted?s+=1:r.hasEditedComment&&(n+=1);const o=r.telemetryFinalData;if(!o)continue;const{type:l}=o;t.has(l)||t.set(l,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const d=e[l]||(e[l]=new Map);for(const[c,h]of Object.entries(o)){if(c==="type")continue;let u=d.get(c);u||(u=new Map,d.set(c,u));const f=u.get(h)??0;u.set(h,f+1)}}if((s>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:s,edited:n}),!e)return null;for(const[r,o]of t)e[r]=o.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){p(this,Sl,null)}updateEditor(e,t){var s;const n=(s=a(this,Nr))==null?void 0:s.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=a(this,Nr))==null?void 0:t.get(e))||null}get modifiedIds(){if(a(this,Sl))return a(this,Sl);const e=[];if(a(this,Nr))for(const t of a(this,Nr).values())t.serialize()&&e.push(t.annotationElementId);return p(this,Sl,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return a(this,ln).entries()}}wl=new WeakMap,Sl=new WeakMap,Nr=new WeakMap,ln=new WeakMap,X0=new WeakSet,ow=function(){a(this,wl)||(p(this,wl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var lp;class lw extends Ry{constructor(t){super();x(this,lp);const{map:n,hash:s,transfer:r}=t.serializable,o=structuredClone(n,r?{transfer:r}:null);p(this,lp,{map:o,hash:s,transfer:r})}get print(){We("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,lp)}get modifiedIds(){return ge(this,"modifiedIds",{ids:new Set,hash:""})}}lp=new WeakMap;var qc;class r7{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){x(this,qc,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),a(this,qc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||a(this,qc).has(e.loadedName))){if(Ae(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:o}=e,l=new FontFace(s,r,o);this.addNativeFontFace(l);try{await l.load(),a(this,qc).add(s),n==null||n(e)}catch{ue(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}We("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw ue(`Failed to load font '${n.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ge(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return ge(this,"isSyncFontLoadingSupported",Dn||sn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Ae(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:t,callback:e};return n.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ge(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(A,T){return A.charCodeAt(T)<<24|A.charCodeAt(T+1)<<16|A.charCodeAt(T+2)<<8|A.charCodeAt(T+3)&255}function s(A,T,I,C){const L=A.substring(0,T),F=A.substring(T+I);return L+C+F}let r,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const d=l.getContext("2d");let c=0;function h(A,T){if(++c>30){ue("Load test font never loaded."),T();return}if(d.font="30px "+A,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(h.bind(null,A,T))}const u=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,u.length,u);const b=16,v=1482184792;let S=n(f,b);for(r=0,o=u.length-3;r<o;r+=4)S=S-v+n(u,r)|0;r<u.length&&(S=S-v+n(u+"XXX",r)|0),f=s(f,b,4,V8(S));const g=`url(data:font/opentype;base64,${btoa(f)});`,k=`@font-face {font-family:"${u}";src:${g}}`;this.insertRule(k);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const A of[e.loadedName,u]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=A,w.append(T)}this._document.body.append(w),h(u,()=>{w.remove(),t.complete()})}}qc=new WeakMap;var ze;class a7{constructor(e,t=null,n,s){x(this,ze);this.compiledGlyphs=Object.create(null),p(this,ze,e),this._inspectFont=t,n&&Object.assign(this,n),s&&(this.charProcOperatorList=s)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Sk(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let s;try{s=e.get(n)}catch(o){ue(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(s||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=r}get black(){return a(this,ze).black}get bold(){return a(this,ze).bold}get disableFontFace(){return a(this,ze).disableFontFace??!1}get fontExtraProperties(){return a(this,ze).fontExtraProperties??!1}get isInvalidPDFjsFont(){return a(this,ze).isInvalidPDFjsFont}get isType3Font(){return a(this,ze).isType3Font}get italic(){return a(this,ze).italic}get missingFile(){return a(this,ze).missingFile}get remeasure(){return a(this,ze).remeasure}get vertical(){return a(this,ze).vertical}get ascent(){return a(this,ze).ascent}get defaultWidth(){return a(this,ze).defaultWidth}get descent(){return a(this,ze).descent}get bbox(){return a(this,ze).bbox}get fontMatrix(){return a(this,ze).fontMatrix}get fallbackName(){return a(this,ze).fallbackName}get loadedName(){return a(this,ze).loadedName}get mimetype(){return a(this,ze).mimetype}get name(){return a(this,ze).name}get data(){return a(this,ze).data}clearData(){a(this,ze).clearData()}get cssFontInfo(){return a(this,ze).cssFontInfo}get systemFontInfo(){return a(this,ze).systemFontInfo}get defaultVMetrics(){return a(this,ze).defaultVMetrics}}ze=new WeakMap;function o7(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(Dn)return i;const e=URL.parse(i,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function l7(i){if(Dn&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return bm(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function eg(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const M2=i=>typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0,d7=i=>typeof i=="object"&&typeof(i==null?void 0:i.name)=="string",dw=K8.bind(null,M2,d7);var Hr,Y0;class c7{constructor(){x(this,Hr,new Map);x(this,Y0,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};a(this,Y0).then(()=>{for(const[s]of a(this,Hr))s.call(this,n)})}addEventListener(e,t,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){ue("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);s=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}a(this,Hr).set(t,s)}removeEventListener(e,t){const n=a(this,Hr).get(t);n==null||n(),a(this,Hr).delete(t)}terminate(){for(const[,e]of a(this,Hr))e==null||e();a(this,Hr).clear()}}Hr=new WeakMap,Y0=new WeakMap;const tg={DATA:1,ERROR:2},Dt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Lb(){}function Xn(i){if(i instanceof xa||i instanceof w0||i instanceof wb||i instanceof Cf||i instanceof ax)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||We('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new xa(i.message);case"InvalidPDFException":return new w0(i.message);case"PasswordException":return new wb(i.message,i.code);case"ResponseException":return new Cf(i.message,i.status,i.missing);case"UnknownErrorException":return new ax(i.message,i.details)}return new ax(i.message,i.toString())}var Xc,ns,cw,hw,uw,Tg;class ju{constructor(e,t,n){x(this,ns);x(this,Xc,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",_(this,ns,cw).bind(this),{signal:a(this,Xc).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},n)}catch(o){r.reject(o)}return r.promise}sendWithStream(e,t,n,s){const r=this.streamId++,o=this.sourceName,l=this.targetName,d=this.comObj;return new ReadableStream({start:c=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:c,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:o,targetName:l,action:e,streamId:r,data:t,desiredSize:c.desiredSize},s),h.promise},pull:c=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,d.postMessage({sourceName:o,targetName:l,stream:Dt.PULL,streamId:r,desiredSize:c.desiredSize}),h.promise},cancel:c=>{Ae(c instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,d.postMessage({sourceName:o,targetName:l,stream:Dt.CANCEL,streamId:r,reason:Xn(c)}),h.promise}},n)}destroy(){var e;(e=a(this,Xc))==null||e.abort(),p(this,Xc,null)}}Xc=new WeakMap,ns=new WeakSet,cw=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){_(this,ns,uw).call(this,e);return}if(e.callback){const n=e.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===tg.DATA)s.resolve(e.data);else if(e.callback===tg.ERROR)s.reject(Xn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,s=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(o){r.postMessage({sourceName:n,targetName:s,callback:tg.DATA,callbackId:e.callbackId,data:o})},function(o){r.postMessage({sourceName:n,targetName:s,callback:tg.ERROR,callbackId:e.callbackId,reason:Xn(o)})});return}if(e.streamId){_(this,ns,hw).call(this,e);return}t(e.data)},hw=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,r=this.comObj,o=this,l=this.actionHandler[e.action],d={enqueue(c,h=1,u){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:s,stream:Dt.ENQUEUE,streamId:t,chunk:c},u)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:Dt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(c){Ae(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:Dt.ERROR,streamId:t,reason:Xn(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,Promise.try(l,e.data,d).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Dt.START_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:n,targetName:s,stream:Dt.START_COMPLETE,streamId:t,reason:Xn(c)})})},uw=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,r=this.comObj,o=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case Dt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Xn(e.reason));break;case Dt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Xn(e.reason));break;case Dt.PULL:if(!l){r.postMessage({sourceName:n,targetName:s,stream:Dt.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||Lb).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Dt.PULL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:n,targetName:s,stream:Dt.PULL_COMPLETE,streamId:t,reason:Xn(c)})});break;case Dt.ENQUEUE:if(Ae(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Dt.CLOSE:if(Ae(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),_(this,ns,Tg).call(this,o,t);break;case Dt.ERROR:Ae(o,"error should have stream controller"),o.controller.error(Xn(e.reason)),_(this,ns,Tg).call(this,o,t);break;case Dt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Xn(e.reason)),_(this,ns,Tg).call(this,o,t);break;case Dt.CANCEL:if(!l)break;const d=Xn(e.reason);Promise.try(l.onCancel||Lb,d).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Dt.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:n,targetName:s,stream:Dt.CANCEL_COMPLETE,streamId:t,reason:Xn(c)})}),l.sinkCapability.reject(d),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Tg=async function(e,t){var n,s,r;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(s=e.pullCall)==null?void 0:s.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var dp;class fw{constructor({enableHWA:e=!1}){x(this,dp,!1);p(this,dp,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!a(this,dp)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){We("Abstract method `_createCanvas` called.")}}dp=new WeakMap;class h7 extends fw{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class pw{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){We("Abstract method `_fetch` called.")}}class Mb extends pw{async _fetch(e){const t=await au(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):bm(t)}}class mw{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,s,r){return"none"}destroy(e=!1){}}var Al,Yc,jr,Or,kn,Pl,Tl,Q,yn,Ou,Ud,Ig,Vd,gw,F2,$d,zu,Bu,R2,qu;class u7 extends mw{constructor({docId:t,ownerDocument:n=globalThis.document}){super();x(this,Q);x(this,Al);x(this,Yc);x(this,jr);x(this,Or);x(this,kn);x(this,Pl);x(this,Tl,0);p(this,Or,t),p(this,kn,n)}addFilter(t){if(!t)return"none";let n=a(this,Q,yn).get(t);if(n)return n;const[s,r,o]=_(this,Q,Ig).call(this,t),l=t.length===1?s:`${s}${r}${o}`;if(n=a(this,Q,yn).get(l),n)return a(this,Q,yn).set(t,n),n;const d=`g_${a(this,Or)}_transfer_map_${Ot(this,Tl)._++}`,c=_(this,Q,Vd).call(this,d);a(this,Q,yn).set(t,c),a(this,Q,yn).set(l,c);const h=_(this,Q,$d).call(this,d);return _(this,Q,Bu).call(this,s,r,o,h),c}addHCMFilter(t,n){var b;const s=`${t}-${n}`,r="base";let o=a(this,Q,Ou).get(r);if((o==null?void 0:o.key)===s||(o?((b=o.filter)==null||b.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},a(this,Q,Ou).set(r,o)),!t||!n))return o.url;const l=_(this,Q,qu).call(this,t);t=ee.makeHexColor(...l);const d=_(this,Q,qu).call(this,n);if(n=ee.makeHexColor(...d),a(this,Q,Ud).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const c=new Array(256);for(let v=0;v<=255;v++){const S=v/255;c[v]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const h=c.join(","),u=`g_${a(this,Or)}_hcm_filter`,f=o.filter=_(this,Q,$d).call(this,u);_(this,Q,Bu).call(this,h,h,h,f),_(this,Q,F2).call(this,f);const m=(v,S)=>{const g=l[v]/255,k=d[v]/255,w=new Array(S+1);for(let A=0;A<=S;A++)w[A]=g+A/S*(k-g);return w.join(",")};return _(this,Q,Bu).call(this,m(0,5),m(1,5),m(2,5),f),o.url=_(this,Q,Vd).call(this,u),o.url}addAlphaFilter(t){let n=a(this,Q,yn).get(t);if(n)return n;const[s]=_(this,Q,Ig).call(this,[t]),r=`alpha_${s}`;if(n=a(this,Q,yn).get(r),n)return a(this,Q,yn).set(t,n),n;const o=`g_${a(this,Or)}_alpha_map_${Ot(this,Tl)._++}`,l=_(this,Q,Vd).call(this,o);a(this,Q,yn).set(t,l),a(this,Q,yn).set(r,l);const d=_(this,Q,$d).call(this,o);return _(this,Q,R2).call(this,s,d),l}addLuminosityFilter(t){let n=a(this,Q,yn).get(t||"luminosity");if(n)return n;let s,r;if(t?([s]=_(this,Q,Ig).call(this,[t]),r=`luminosity_${s}`):r="luminosity",n=a(this,Q,yn).get(r),n)return a(this,Q,yn).set(t,n),n;const o=`g_${a(this,Or)}_luminosity_map_${Ot(this,Tl)._++}`,l=_(this,Q,Vd).call(this,o);a(this,Q,yn).set(t,l),a(this,Q,yn).set(r,l);const d=_(this,Q,$d).call(this,o);return _(this,Q,gw).call(this,d),t&&_(this,Q,R2).call(this,s,d),l}addHighlightHCMFilter(t,n,s,r,o){var k;const l=`${n}-${s}-${r}-${o}`;let d=a(this,Q,Ou).get(t);if((d==null?void 0:d.key)===l||(d?((k=d.filter)==null||k.remove(),d.key=l,d.url="none",d.filter=null):(d={key:l,url:"none",filter:null},a(this,Q,Ou).set(t,d)),!n||!s))return d.url;const[c,h]=[n,s].map(_(this,Q,qu).bind(this));let u=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[m,b]=[r,o].map(_(this,Q,qu).bind(this));f<u&&([u,f,m,b]=[f,u,b,m]),a(this,Q,Ud).style.color="";const v=(w,A,T)=>{const I=new Array(256),C=(f-u)/T,L=w/255,F=(A-w)/(255*T);let D=0;for(let j=0;j<=T;j++){const N=Math.round(u+j*C),ie=L+j*F;for(let R=D;R<=N;R++)I[R]=ie;D=N+1}for(let j=D;j<256;j++)I[j]=I[D-1];return I.join(",")},S=`g_${a(this,Or)}_hcm_${t}_filter`,g=d.filter=_(this,Q,$d).call(this,S);return _(this,Q,F2).call(this,g),_(this,Q,Bu).call(this,v(m[0],b[0],5),v(m[1],b[1],5),v(m[2],b[2],5),g),d.url=_(this,Q,Vd).call(this,S),d.url}destroy(t=!1){var n,s,r,o;t&&((n=a(this,Pl))!=null&&n.size)||((s=a(this,jr))==null||s.parentNode.parentNode.remove(),p(this,jr,null),(r=a(this,Yc))==null||r.clear(),p(this,Yc,null),(o=a(this,Pl))==null||o.clear(),p(this,Pl,null),p(this,Tl,0))}}Al=new WeakMap,Yc=new WeakMap,jr=new WeakMap,Or=new WeakMap,kn=new WeakMap,Pl=new WeakMap,Tl=new WeakMap,Q=new WeakSet,yn=function(){return a(this,Yc)||p(this,Yc,new Map)},Ou=function(){return a(this,Pl)||p(this,Pl,new Map)},Ud=function(){if(!a(this,jr)){const t=a(this,kn).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=a(this,kn).createElementNS(vr,"svg");s.setAttribute("width",0),s.setAttribute("height",0),p(this,jr,a(this,kn).createElementNS(vr,"defs")),t.append(s),s.append(a(this,jr)),a(this,kn).body.append(t)}return a(this,jr)},Ig=function(t){if(t.length===1){const c=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=c[f]/255;const u=h.join(",");return[u,u,u]}const[n,s,r]=t,o=new Array(256),l=new Array(256),d=new Array(256);for(let c=0;c<256;c++)o[c]=n[c]/255,l[c]=s[c]/255,d[c]=r[c]/255;return[o.join(","),l.join(","),d.join(",")]},Vd=function(t){if(a(this,Al)===void 0){p(this,Al,"");const n=a(this,kn).URL;n!==a(this,kn).baseURI&&(wm(n)?ue('#createUrl: ignore "data:"-URL for performance reasons.'):p(this,Al,Cy(n,"")))}return`url(${a(this,Al)}#${t})`},gw=function(t){const n=a(this,kn).createElementNS(vr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},F2=function(t){const n=a(this,kn).createElementNS(vr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},$d=function(t){const n=a(this,kn).createElementNS(vr,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),a(this,Q,Ud).append(n),n},zu=function(t,n,s){const r=a(this,kn).createElementNS(vr,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)},Bu=function(t,n,s,r){const o=a(this,kn).createElementNS(vr,"feComponentTransfer");r.append(o),_(this,Q,zu).call(this,o,"feFuncR",t),_(this,Q,zu).call(this,o,"feFuncG",n),_(this,Q,zu).call(this,o,"feFuncB",s)},R2=function(t,n){const s=a(this,kn).createElementNS(vr,"feComponentTransfer");n.append(s),_(this,Q,zu).call(this,s,"feFuncA",t)},qu=function(t){return a(this,Q,Ud).style.color=t,ou(getComputedStyle(a(this,Q,Ud)).getPropertyValue("color"))};class xw{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){We("Abstract method `_fetch` called.")}}class Fb extends xw{async _fetch(e){const t=await au(e,"arraybuffer");return new Uint8Array(t)}}class vw{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){We("Abstract method `_fetch` called.")}}class Rb extends vw{async _fetch(e){const t=await au(e,"arraybuffer");return new Uint8Array(t)}}Dn&&ue("Please use the `legacy` build in Node.js environments.");async function Dy(i){const t=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(t)}class f7 extends mw{}class p7 extends fw{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class m7 extends pw{async _fetch(e){return Dy(e)}}class g7 extends xw{async _fetch(e){return Dy(e)}}class x7 extends vw{async _fetch(e){return Dy(e)}}const qd="__forcedDependency",{floor:Db,ceil:Nb}=Math;function ng(i,e,t,n,s,r){i[e*4+0]=Math.min(i[e*4+0],t),i[e*4+1]=Math.min(i[e*4+1],n),i[e*4+2]=Math.max(i[e*4+2],s),i[e*4+3]=Math.max(i[e*4+3],r)}const D2=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Uc,Wa;class v7{constructor(e,t){x(this,Uc);x(this,Wa);p(this,Uc,e),p(this,Wa,t)}get length(){return a(this,Uc).length}isEmpty(e){return a(this,Uc)[e]===D2}minX(e){return a(this,Wa)[e*4+0]/256}minY(e){return a(this,Wa)[e*4+1]/256}maxX(e){return(a(this,Wa)[e*4+2]+1)/256}maxY(e){return(a(this,Wa)[e*4+3]+1)/256}}Uc=new WeakMap,Wa=new WeakMap;const ig=(i,e)=>{if(!i)return;let t=i.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},i.set(e,t)),t};var Vn,$n,Il,us,Cl,zr,Ne,Be,Br,Gn,cp,Vc,El,Ll,qr,wn,Ws,hp,N2;class y7{constructor(e,t,n=!1){x(this,hp);x(this,Vn,{__proto__:null});x(this,$n,{__proto__:null,transform:[],moveText:[],sameLineText:[],[qd]:[]});x(this,Il,new Map);x(this,us,[]);x(this,Cl,[]);x(this,zr,[[1,0,0,1,0,0]]);x(this,Ne,[-1/0,-1/0,1/0,1/0]);x(this,Be,new Float64Array([1/0,1/0,-1/0,-1/0]));x(this,Br,-1);x(this,Gn,new Set);x(this,cp,new Map);x(this,Vc,new Map);x(this,El);x(this,Ll);x(this,qr);x(this,wn);x(this,Ws);p(this,El,e.width),p(this,Ll,e.height),_(this,hp,N2).call(this,t),n&&p(this,Ws,new Map)}growOperationsCount(e){e>=a(this,wn).length&&_(this,hp,N2).call(this,e,a(this,wn))}save(e){return p(this,Vn,{__proto__:a(this,Vn)}),p(this,$n,{__proto__:a(this,$n),transform:{__proto__:a(this,$n).transform},moveText:{__proto__:a(this,$n).moveText},sameLineText:{__proto__:a(this,$n).sameLineText},[qd]:{__proto__:a(this,$n)[qd]}}),p(this,Ne,{__proto__:a(this,Ne)}),a(this,us).push(e),this}restore(e){var s;const t=Object.getPrototypeOf(a(this,Vn));if(t===null)return this;p(this,Vn,t),p(this,$n,Object.getPrototypeOf(a(this,$n))),p(this,Ne,Object.getPrototypeOf(a(this,Ne)));const n=a(this,us).pop();return n!==void 0&&((s=ig(a(this,Ws),e))==null||s.dependencies.add(n),a(this,wn)[e]=a(this,wn)[n]),this}recordOpenMarker(e){return a(this,us).push(e),this}getOpenMarker(){return a(this,us).length===0?null:a(this,us).at(-1)}recordCloseMarker(e){var n;const t=a(this,us).pop();return t!==void 0&&((n=ig(a(this,Ws),e))==null||n.dependencies.add(t),a(this,wn)[e]=a(this,wn)[t]),this}beginMarkedContent(e){return a(this,Cl).push(e),this}endMarkedContent(e){var n;const t=a(this,Cl).pop();return t!==void 0&&((n=ig(a(this,Ws),e))==null||n.dependencies.add(t),a(this,wn)[e]=a(this,wn)[t]),this}pushBaseTransform(e){return a(this,zr).push(ee.multiplyByDOMMatrix(a(this,zr).at(-1),e.getTransform())),this}popBaseTransform(){return a(this,zr).length>1&&a(this,zr).pop(),this}recordSimpleData(e,t){return a(this,Vn)[e]=t,this}recordIncrementalData(e,t){return a(this,$n)[e].push(t),this}resetIncrementalData(e,t){return a(this,$n)[e].length=0,this}recordNamedData(e,t){return a(this,Il).set(e,t),this}recordSimpleDataFromNamed(e,t,n){a(this,Vn)[e]=a(this,Il).get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(qd,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in a(this,Vn)&&this.recordFutureForcedDependency(t,a(this,Vn)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of a(this,Gn))this.recordFutureForcedDependency(qd,e);return this}resetBBox(e){return a(this,Br)!==e&&(p(this,Br,e),a(this,Be)[0]=1/0,a(this,Be)[1]=1/0,a(this,Be)[2]=-1/0,a(this,Be)[3]=-1/0),this}recordClipBox(e,t,n,s,r,o){const l=ee.multiplyByDOMMatrix(a(this,zr).at(-1),t.getTransform()),d=[1/0,1/0,-1/0,-1/0];ee.axialAlignedBoundingBox([n,r,s,o],l,d);const c=ee.intersect(a(this,Ne),d);return c?(a(this,Ne)[0]=c[0],a(this,Ne)[1]=c[1],a(this,Ne)[2]=c[2],a(this,Ne)[3]=c[3]):(a(this,Ne)[0]=a(this,Ne)[1]=1/0,a(this,Ne)[2]=a(this,Ne)[3]=-1/0),this}recordBBox(e,t,n,s,r,o){const l=a(this,Ne);if(l[0]===1/0)return this;const d=ee.multiplyByDOMMatrix(a(this,zr).at(-1),t.getTransform());if(l[0]===-1/0)return ee.axialAlignedBoundingBox([n,r,s,o],d,a(this,Be)),this;const c=[1/0,1/0,-1/0,-1/0];return ee.axialAlignedBoundingBox([n,r,s,o],d,c),a(this,Be)[0]=Math.min(a(this,Be)[0],Math.max(c[0],l[0])),a(this,Be)[1]=Math.min(a(this,Be)[1],Math.max(c[1],l[1])),a(this,Be)[2]=Math.max(a(this,Be)[2],Math.min(c[2],l[2])),a(this,Be)[3]=Math.max(a(this,Be)[3],Math.min(c[3],l[3])),this}recordCharacterBBox(e,t,n,s=1,r=0,o=0,l){const d=n.bbox;let c,h;if(d&&(c=d[2]!==d[0]&&d[3]!==d[1]&&a(this,Vc).get(n),c!==!1&&(h=[0,0,0,0],ee.axialAlignedBoundingBox(d,n.fontMatrix,h),(s!==1||r!==0||o!==0)&&ee.scaleMinMax([s,0,0,-s,r,o],h),c)))return this.recordBBox(e,t,h[0],h[2],h[1],h[3]);if(!l)return this.recordFullPageBBox(e);const u=l();return d&&h&&c===void 0&&(c=h[0]<=r-u.actualBoundingBoxLeft&&h[2]>=r+u.actualBoundingBoxRight&&h[1]<=o-u.actualBoundingBoxAscent&&h[3]>=o+u.actualBoundingBoxDescent,a(this,Vc).set(n,c),c)?this.recordBBox(e,t,h[0],h[2],h[1],h[3]):this.recordBBox(e,t,r-u.actualBoundingBoxLeft,r+u.actualBoundingBoxRight,o-u.actualBoundingBoxAscent,o+u.actualBoundingBoxDescent)}recordFullPageBBox(e){return a(this,Be)[0]=Math.max(0,a(this,Ne)[0]),a(this,Be)[1]=Math.max(0,a(this,Ne)[1]),a(this,Be)[2]=Math.min(a(this,El),a(this,Ne)[2]),a(this,Be)[3]=Math.min(a(this,Ll),a(this,Ne)[3]),this}getSimpleIndex(e){return a(this,Vn)[e]}recordDependencies(e,t){const n=a(this,Gn),s=a(this,Vn),r=a(this,$n);for(const o of t)o in a(this,Vn)?n.add(s[o]):o in r&&r[o].forEach(n.add,n);return this}recordNamedDependency(e,t){return a(this,Il).has(t)&&a(this,Gn).add(a(this,Il).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[qd]),a(this,Ws)){const n=ig(a(this,Ws),e),{dependencies:s}=n;a(this,Gn).forEach(s.add,s),a(this,us).forEach(s.add,s),a(this,Cl).forEach(s.add,s),s.delete(e),n.isRenderingOperation=!0}if(a(this,Br)===e){const n=Db(a(this,Be)[0]*256/a(this,El)),s=Db(a(this,Be)[1]*256/a(this,Ll)),r=Nb(a(this,Be)[2]*256/a(this,El)),o=Nb(a(this,Be)[3]*256/a(this,Ll));ng(a(this,qr),e,n,s,r,o);for(const l of a(this,Gn))l!==e&&ng(a(this,qr),l,n,s,r,o);for(const l of a(this,us))l!==e&&ng(a(this,qr),l,n,s,r,o);for(const l of a(this,Cl))l!==e&&ng(a(this,qr),l,n,s,r,o);t||(a(this,Gn).clear(),p(this,Br,-1))}return this}recordShowTextOperation(e,t=!1){const n=Array.from(a(this,Gn));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const s of n)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(e,t=!1){return a(this,Br)===e&&(p(this,Br,-1),a(this,Ne)[0]=Math.max(a(this,Ne)[0],a(this,Be)[0]),a(this,Ne)[1]=Math.max(a(this,Ne)[1],a(this,Be)[1]),a(this,Ne)[2]=Math.min(a(this,Ne)[2],a(this,Be)[2]),a(this,Ne)[3]=Math.min(a(this,Ne)[3],a(this,Be)[3]),t||a(this,Gn).clear()),this}_takePendingDependencies(){const e=a(this,Gn);return p(this,Gn,new Set),e}_extractOperation(e){const t=a(this,cp).get(e);return a(this,cp).delete(e),t}_pushPendingDependencies(e){for(const t of e)a(this,Gn).add(t)}take(){return a(this,Vc).clear(),new v7(a(this,wn),a(this,qr))}takeDebugMetadata(){return a(this,Ws)}}Vn=new WeakMap,$n=new WeakMap,Il=new WeakMap,us=new WeakMap,Cl=new WeakMap,zr=new WeakMap,Ne=new WeakMap,Be=new WeakMap,Br=new WeakMap,Gn=new WeakMap,cp=new WeakMap,Vc=new WeakMap,El=new WeakMap,Ll=new WeakMap,qr=new WeakMap,wn=new WeakMap,Ws=new WeakMap,hp=new WeakSet,N2=function(e,t){const n=new ArrayBuffer(e*4);p(this,qr,new Uint8ClampedArray(n)),p(this,wn,new Uint32Array(n)),t&&t.length>0?(a(this,wn).set(t),a(this,wn).fill(D2,t.length)):a(this,wn).fill(D2)};var $e,kt,fs,$c,Gc;const Uy=class Uy{constructor(e,t,n){x(this,$e);x(this,kt);x(this,fs);x(this,$c,0);x(this,Gc,0);if(e instanceof Uy&&a(e,fs)===!!n)return e;p(this,$e,e),p(this,kt,t),p(this,fs,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return Ot(this,Gc)._++,a(this,$e).save(a(this,kt)),this}restore(e){return a(this,Gc)>0&&(a(this,$e).restore(a(this,kt)),Ot(this,Gc)._--),this}recordOpenMarker(e){return Ot(this,$c)._++,this}getOpenMarker(){return a(this,$c)>0?a(this,kt):a(this,$e).getOpenMarker()}recordCloseMarker(e){return Ot(this,$c)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return a(this,$e).pushBaseTransform(e),this}popBaseTransform(){return a(this,$e).popBaseTransform(),this}recordSimpleData(e,t){return a(this,$e).recordSimpleData(e,a(this,kt)),this}recordIncrementalData(e,t){return a(this,$e).recordIncrementalData(e,a(this,kt)),this}resetIncrementalData(e,t){return a(this,$e).resetIncrementalData(e,a(this,kt)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return a(this,$e).recordSimpleDataFromNamed(e,t,a(this,kt)),this}recordFutureForcedDependency(e,t){return a(this,$e).recordFutureForcedDependency(e,a(this,kt)),this}inheritSimpleDataAsFutureForcedDependencies(e){return a(this,$e).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return a(this,$e).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return a(this,fs)||a(this,$e).resetBBox(a(this,kt)),this}recordClipBox(e,t,n,s,r,o){return a(this,fs)||a(this,$e).recordClipBox(a(this,kt),t,n,s,r,o),this}recordBBox(e,t,n,s,r,o){return a(this,fs)||a(this,$e).recordBBox(a(this,kt),t,n,s,r,o),this}recordCharacterBBox(e,t,n,s,r,o,l){return a(this,fs)||a(this,$e).recordCharacterBBox(a(this,kt),t,n,s,r,o,l),this}recordFullPageBBox(e){return a(this,fs)||a(this,$e).recordFullPageBBox(a(this,kt)),this}getSimpleIndex(e){return a(this,$e).getSimpleIndex(e)}recordDependencies(e,t){return a(this,$e).recordDependencies(a(this,kt),t),this}recordNamedDependency(e,t){return a(this,$e).recordNamedDependency(a(this,kt),t),this}recordOperation(e){return a(this,$e).recordOperation(a(this,kt),!0),this}recordShowTextOperation(e){return a(this,$e).recordShowTextOperation(a(this,kt),!0),this}bboxToClipBoxDropOperation(e){return a(this,fs)||a(this,$e).bboxToClipBoxDropOperation(a(this,kt),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};$e=new WeakMap,kt=new WeakMap,fs=new WeakMap,$c=new WeakMap,Gc=new WeakMap;let P0=Uy;const Oi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},un={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function H2(i,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,n),i.clip(s)}class Ny{isModifyingCurrentTransform(){return!1}getPattern(){We("Abstract method `getPattern` called.")}}class _7 extends Ny{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,s){let r;if(s===un.STROKE||s===un.FILL){const o=t.current.getClippedPathBoundingBox(s,ut(e))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,d=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",l,d),h=c.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),n=ee.transform(n,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),H2(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(c.canvas,"no-repeat");const u=new DOMMatrix(n);r.setTransform(u)}else H2(e,this._bbox),r=this._createGradient(e);return r}}function dx(i,e,t,n,s,r,o,l){const d=e.coords,c=e.colors,h=i.data,u=i.width*4;let f;d[t+1]>d[n+1]&&(f=t,t=n,n=f,f=r,r=o,o=f),d[n+1]>d[s+1]&&(f=n,n=s,s=f,f=o,o=l,l=f),d[t+1]>d[n+1]&&(f=t,t=n,n=f,f=r,r=o,o=f);const m=(d[t]+e.offsetX)*e.scaleX,b=(d[t+1]+e.offsetY)*e.scaleY,v=(d[n]+e.offsetX)*e.scaleX,S=(d[n+1]+e.offsetY)*e.scaleY,g=(d[s]+e.offsetX)*e.scaleX,k=(d[s+1]+e.offsetY)*e.scaleY;if(b>=k)return;const w=c[r],A=c[r+1],T=c[r+2],I=c[o],C=c[o+1],L=c[o+2],F=c[l],D=c[l+1],j=c[l+2],N=Math.round(b),ie=Math.round(k);let R,X,q,G,H,W,se,J;for(let ae=N;ae<=ie;ae++){if(ae<S){const Re=ae<b?0:(b-ae)/(b-S);R=m-(m-v)*Re,X=w-(w-I)*Re,q=A-(A-C)*Re,G=T-(T-L)*Re}else{let Re;ae>k?Re=1:S===k?Re=0:Re=(S-ae)/(S-k),R=v-(v-g)*Re,X=I-(I-F)*Re,q=C-(C-D)*Re,G=L-(L-j)*Re}let de;ae<b?de=0:ae>k?de=1:de=(b-ae)/(b-k),H=m-(m-g)*de,W=w-(w-F)*de,se=A-(A-D)*de,J=T-(T-j)*de;const st=Math.round(Math.min(R,H)),Ue=Math.round(Math.max(R,H));let vt=u*ae+st*4;for(let Re=st;Re<=Ue;Re++)de=(R-Re)/(R-H),de<0?de=0:de>1&&(de=1),h[vt++]=X-(X-W)*de|0,h[vt++]=q-(q-se)*de|0,h[vt++]=G-(G-J)*de|0,h[vt++]=255}}function b7(i,e,t){const n=e.coords,s=e.colors;let r,o;switch(e.type){case"lattice":const l=e.verticesPerRow,d=Math.floor(n.length/l)-1,c=l-1;for(r=0;r<d;r++){let h=r*l;for(let u=0;u<c;u++,h++)dx(i,t,n[h],n[h+1],n[h+l],s[h],s[h+1],s[h+l]),dx(i,t,n[h+l+1],n[h+1],n[h+l],s[h+l+1],s[h+1],s[h+l])}break;case"triangles":for(r=0,o=n.length;r<o;r+=3)dx(i,t,n[r],n[r+1],n[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class k7 extends Ny{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const l=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-d,u=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),m=c/u,b=h/f,v={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-d,scaleX:1/m,scaleY:1/b},S=u+2*2,g=f+2*2,k=n.getCanvas("mesh",S,g),w=k.context,A=w.createImageData(u,f);if(t){const I=A.data;for(let C=0,L=I.length;C<L;C+=4)I[C]=t[0],I[C+1]=t[1],I[C+2]=t[2],I[C+3]=255}for(const I of this._figures)b7(A,I,v);return w.putImageData(A,2,2),{canvas:k.canvas,offsetX:l-2*m,offsetY:d-2*b,scaleX:m,scaleY:b}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,s){H2(e,this._bbox);const r=new Float32Array(2);if(s===un.SHADING)ee.singularValueDecompose2dScale(ut(e),r);else if(this.matrix){ee.singularValueDecompose2dScale(this.matrix,r);const[l,d]=r;ee.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=l,r[1]*=d}else ee.singularValueDecompose2dScale(t.baseTransform,r);const o=this._createMeshCanvas(r,s===un.SHADING?null:this._background,t.cachedCanvases);return s!==un.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class w7 extends Ny{getPattern(){return"hotpink"}}function S7(i){switch(i[0]){case"RadialAxial":return new _7(i);case"Mesh":return new k7(i);case"Dummy":return new w7}throw new Error(`Unknown IR type: ${i[0]}`)}const Hb={COLORED:1,UNCOLORED:2},U0=class U0{constructor(e,t,n,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(e,t){var W,se;const{bbox:n,operatorList:s,paintType:r,tilingType:o,color:l,canvasGraphicsFactory:d}=this;let{xstep:c,ystep:h}=this;c=Math.abs(c),h=Math.abs(h),y1("TilingType: "+o);const u=n[0],f=n[1],m=n[2],b=n[3],v=m-u,S=b-f,g=new Float32Array(2);ee.singularValueDecompose2dScale(this.matrix,g);const[k,w]=g;ee.singularValueDecompose2dScale(this.baseTransform,g);const A=k*g[0],T=w*g[1];let I=v,C=S,L=!1,F=!1;const D=Math.ceil(c*A),j=Math.ceil(h*T),N=Math.ceil(v*A),ie=Math.ceil(S*T);D>=N?I=c:L=!0,j>=ie?C=h:F=!0;const R=this.getSizeAndScale(I,this.ctx.canvas.width,A),X=this.getSizeAndScale(C,this.ctx.canvas.height,T),q=e.cachedCanvases.getCanvas("pattern",R.size,X.size),G=q.context,H=d.createCanvasGraphics(G,t);if(H.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(H,r,l),G.translate(-R.scale*u,-X.scale*f),H.transform(0,R.scale,0,0,X.scale,0,0),G.save(),(W=H.dependencyTracker)==null||W.save(),this.clipBbox(H,u,f,m,b),H.baseTransform=ut(H.ctx),H.executeOperatorList(s),H.endDrawing(),(se=H.dependencyTracker)==null||se.restore(),G.restore(),L||F){const J=q.canvas;L&&(I=c),F&&(C=h);const ae=this.getSizeAndScale(I,this.ctx.canvas.width,A),de=this.getSizeAndScale(C,this.ctx.canvas.height,T),st=ae.size,Ue=de.size,vt=e.cachedCanvases.getCanvas("pattern-workaround",st,Ue),Re=vt.context,Oe=L?Math.floor(v/c):0,ce=F?Math.floor(S/h):0;for(let Hi=0;Hi<=Oe;Hi++)for(let si=0;si<=ce;si++)Re.drawImage(J,st*Hi,Ue*si,st,Ue,0,0,st,Ue);return{canvas:vt.canvas,scaleX:ae.scale,scaleY:de.scale,offsetX:u,offsetY:f}}return{canvas:q.canvas,scaleX:R.scale,scaleY:X.scale,offsetX:u,offsetY:f}}getSizeAndScale(e,t,n){const s=Math.max(U0.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*n);return r>=s?r=s:n=r/e,{scale:n,size:r}}clipBbox(e,t,n,s,r){const o=s-t,l=r-n;e.ctx.rect(t,n,o,l),ee.axialAlignedBoundingBox([t,n,s,r],ut(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const s=e.ctx,r=e.current;switch(t){case Hb.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;s.fillStyle=r.fillColor=o,s.strokeStyle=r.strokeColor=l;break;case Hb.UNCOLORED:s.fillStyle=s.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new U8(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,s,r){let o=n;s!==un.SHADING&&(o=ee.transform(o,t.baseTransform),this.matrix&&(o=ee.transform(o,this.matrix)));const l=this.createPatternCanvas(t,r);let d=new DOMMatrix(o);d=d.translate(l.offsetX,l.offsetY),d=d.scale(1/l.scaleX,1/l.scaleY);const c=e.createPattern(l.canvas,"repeat");return c.setTransform(d),c}};O(U0,"MAX_PATTERN_SIZE",3e3);let j2=U0;function A7({src:i,srcPos:e=0,dest:t,width:n,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const l=sn.isLittleEndian?4278190080:255,[d,c]=o?[r,l]:[l,r],h=n>>3,u=n&7,f=i.length;t=new Uint32Array(t.buffer);let m=0;for(let b=0;b<s;b++){for(const S=e+h;e<S;e++){const g=e<f?i[e]:255;t[m++]=g&128?c:d,t[m++]=g&64?c:d,t[m++]=g&32?c:d,t[m++]=g&16?c:d,t[m++]=g&8?c:d,t[m++]=g&4?c:d,t[m++]=g&2?c:d,t[m++]=g&1?c:d}if(u===0)continue;const v=e<f?i[e++]:255;for(let S=0;S<u;S++)t[m++]=v&1<<7-S?c:d}return{srcPos:e,destPos:m}}const jb=16,Ob=100,P7=15,zb=10,Jn=16,cx=new DOMMatrix,Ii=new Float32Array(2),cc=new Float32Array([1/0,1/0,-1/0,-1/0]);function T7(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},i.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},i.transform=function(t,n,s,r,o,l){e.transform(t,n,s,r,o,l),this.__originalTransform(t,n,s,r,o,l)},i.setTransform=function(t,n,s,r,o,l){e.setTransform(t,n,s,r,o,l),this.__originalSetTransform(t,n,s,r,o,l)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(t){e.rotate(t),this.__originalRotate(t)},i.clip=function(t){e.clip(t),this.__originalClip(t)},i.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},i.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},i.bezierCurveTo=function(t,n,s,r,o,l){e.bezierCurveTo(t,n,s,r,o,l),this.__originalBezierCurveTo(t,n,s,r,o,l)},i.rect=function(t,n,s,r){e.rect(t,n,s,r),this.__originalRect(t,n,s,r)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class I7{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,n)):(s=this.canvasFactory.create(t,n),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function sg(i,e,t,n,s,r,o,l,d,c){const[h,u,f,m,b,v]=ut(i);if(u===0&&f===0){const k=o*h+b,w=Math.round(k),A=l*m+v,T=Math.round(A),I=(o+d)*h+b,C=Math.abs(Math.round(I)-w)||1,L=(l+c)*m+v,F=Math.abs(Math.round(L)-T)||1;return i.setTransform(Math.sign(h),0,0,Math.sign(m),w,T),i.drawImage(e,t,n,s,r,0,0,C,F),i.setTransform(h,u,f,m,b,v),[C,F]}if(h===0&&m===0){const k=l*f+b,w=Math.round(k),A=o*u+v,T=Math.round(A),I=(l+c)*f+b,C=Math.abs(Math.round(I)-w)||1,L=(o+d)*u+v,F=Math.abs(Math.round(L)-T)||1;return i.setTransform(0,Math.sign(u),Math.sign(f),0,w,T),i.drawImage(e,t,n,s,r,0,0,F,C),i.setTransform(h,u,f,m,b,v),[F,C]}i.drawImage(e,t,n,s,r,o,l,d,c);const S=Math.hypot(h,u),g=Math.hypot(f,m);return[S*d,g*c]}class Bb{constructor(e,t,n){O(this,"alphaIsShape",!1);O(this,"fontSize",0);O(this,"fontSizeScale",1);O(this,"textMatrix",null);O(this,"textMatrixScale",1);O(this,"fontMatrix",c2);O(this,"leading",0);O(this,"x",0);O(this,"y",0);O(this,"lineX",0);O(this,"lineY",0);O(this,"charSpacing",0);O(this,"wordSpacing",0);O(this,"textHScale",1);O(this,"textRenderingMode",rn.FILL);O(this,"textRise",0);O(this,"fillColor","#000000");O(this,"strokeColor","#000000");O(this,"patternFill",!1);O(this,"patternStroke",!1);O(this,"fillAlpha",1);O(this,"strokeAlpha",1);O(this,"lineWidth",1);O(this,"activeSMask",null);O(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=cc.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=un.FILL,t=null){const n=this.minMax.slice();if(e===un.STROKE){t||We("Stroke bounding box must include transform."),ee.singularValueDecompose2dScale(t,Ii);const s=Ii[0]*this.lineWidth/2,r=Ii[1]*this.lineWidth/2;n[0]-=s,n[1]-=r,n[2]+=s,n[3]+=r}return n}updateClipFromPath(){const e=ee.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(cc,0)}getClippedPathBoundingBox(e=un.FILL,t=null){return ee.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function qb(i,e){if(e instanceof ImageData){i.putImageData(e,0,0);return}const t=e.height,n=e.width,s=t%Jn,r=(t-s)/Jn,o=s===0?r:r+1,l=i.createImageData(n,Jn);let d=0,c;const h=e.data,u=l.data;let f,m,b,v;if(e.kind===cf.GRAYSCALE_1BPP){const S=h.byteLength,g=new Uint32Array(u.buffer,0,u.byteLength>>2),k=g.length,w=n+7>>3,A=4294967295,T=sn.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(b=f<r?Jn:s,c=0,m=0;m<b;m++){const I=S-d;let C=0;const L=I>w?n:I*8-7,F=L&-8;let D=0,j=0;for(;C<F;C+=8)j=h[d++],g[c++]=j&128?A:T,g[c++]=j&64?A:T,g[c++]=j&32?A:T,g[c++]=j&16?A:T,g[c++]=j&8?A:T,g[c++]=j&4?A:T,g[c++]=j&2?A:T,g[c++]=j&1?A:T;for(;C<L;C++)D===0&&(j=h[d++],D=128),g[c++]=j&D?A:T,D>>=1}for(;c<k;)g[c++]=0;i.putImageData(l,0,f*Jn)}}else if(e.kind===cf.RGBA_32BPP){for(m=0,v=n*Jn*4,f=0;f<r;f++)u.set(h.subarray(d,d+v)),d+=v,i.putImageData(l,0,m),m+=Jn;f<o&&(v=n*s*4,u.set(h.subarray(d,d+v)),i.putImageData(l,0,m))}else if(e.kind===cf.RGB_24BPP)for(b=Jn,v=n*b,f=0;f<o;f++){for(f>=r&&(b=s,v=n*b),c=0,m=v;m--;)u[c++]=h[d++],u[c++]=h[d++],u[c++]=h[d++],u[c++]=255;i.putImageData(l,0,f*Jn)}else throw new Error(`bad image kind: ${e.kind}`)}function Xb(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,s=t%Jn,r=(t-s)/Jn,o=s===0?r:r+1,l=i.createImageData(n,Jn);let d=0;const c=e.data,h=l.data;for(let u=0;u<o;u++){const f=u<r?Jn:s;({srcPos:d}=A7({src:c,srcPos:d,dest:h,width:n,height:f,nonBlackColor:0})),i.putImageData(l,0,u*Jn)}}function ku(i,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)i[n]!==void 0&&(e[n]=i[n]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function rg(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}function Yb(i,e){if(e)return!0;ee.singularValueDecompose2dScale(i,Ii);const t=Math.fround(Is.pixelRatio*va.PDF_TO_CSS_UNITS);return Ii[0]<=t&&Ii[1]<=t}const C7=["butt","round","square"],E7=["miter","round","bevel"],L7={},Ub={};var Cs,O2,z2,B2;const Vy=class Vy{constructor(e,t,n,s,r,{optionalContentConfig:o,markedContentStack:l=null},d,c,h){x(this,Cs);this.ctx=e,this.current=new Bb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new I7(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(e,t,n=null){var s;return typeof t=="string"?((s=this.dependencyTracker)==null||s.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:s=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=l,n){const d=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...ut(this.compositeCtx))}this.ctx.save(),rg(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ut(this.ctx)}executeOperatorList(e,t,n,s,r){var g;const o=e.argsArray,l=e.fnArray;let d=t||0;const c=o.length;if(c===d)return d;const h=c-d>zb&&typeof n=="function",u=h?Date.now()+P7:0;let f=0;const m=this.commonObjs,b=this.objs;let v,S;for(;;){if(s!==void 0&&d===s.nextBreakPoint)return s.breakIt(d,n),d;if(!r||r(d))if(v=l[d],S=o[d]??null,v!==eu.dependency)S===null?this[v](d):this[v](d,...S);else for(const k of S){(g=this.dependencyTracker)==null||g.recordNamedData(k,d);const w=k.startsWith("g_")?m:b;if(!w.has(k))return w.get(k,n),d}if(d++,d===c)return d;if(h&&++f>zb){if(Date.now()>u)return n(),d;f=0}}}endDrawing(){_(this,Cs,O2).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),_(this,Cs,z2).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,s=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=n,d=s,c="prescale1",h,u;for(;r>2&&l>1||o>2&&d>1;){let f=l,m=d;r>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/f),o>2&&d>1&&(m=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,o/=d/m),h=this.cachedCanvases.getCanvas(c,f,m),u=h.context,u.clearRect(0,0,f,m),u.drawImage(e,0,0,l,d,0,0,f,m),e=h.canvas,l=f,d=m,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:d}}_createMaskCanvas(e,t){var D,j;const n=this.ctx,{width:s,height:r}=t,o=this.current.fillColor,l=this.current.patternFill,d=ut(n);let c,h,u,f;if((t.bitmap||t.data)&&t.count>1){const N=t.bitmap||t.data.buffer;h=JSON.stringify(l?d:[d.slice(0,4),o]),c=this._cachedBitmapsMap.get(N),c||(c=new Map,this._cachedBitmapsMap.set(N,c));const ie=c.get(h);if(ie&&!l){const R=Math.round(Math.min(d[0],d[2])+d[4]),X=Math.round(Math.min(d[1],d[3])+d[5]);return(D=this.dependencyTracker)==null||D.recordDependencies(e,Oi.transformAndFill),{canvas:ie,offsetX:R,offsetY:X}}u=ie}u||(f=this.cachedCanvases.getCanvas("maskCanvas",s,r),Xb(f.context,t));let m=ee.transform(d,[1/s,0,0,-1/r,0,0]);m=ee.transform(m,[1,0,0,1,0,-r]);const b=cc.slice();ee.axialAlignedBoundingBox([0,0,s,r],m,b);const[v,S,g,k]=b,w=Math.round(g-v)||1,A=Math.round(k-S)||1,T=this.cachedCanvases.getCanvas("fillCanvas",w,A),I=T.context,C=v,L=S;I.translate(-C,-L),I.transform(...m),u||(u=this._scaleImage(f.canvas,Ds(I)),u=u.img,c&&l&&c.set(h,u)),I.imageSmoothingEnabled=Yb(ut(I),t.interpolate),sg(I,u,0,0,u.width,u.height,0,0,s,r),I.globalCompositeOperation="source-in";const F=ee.transform(Ds(I),[1,0,0,1,-C,-L]);return I.fillStyle=l?o.getPattern(n,this,F,un.FILL,e):o,I.fillRect(0,0,s,r),c&&!l&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,T.canvas)),(j=this.dependencyTracker)==null||j.recordDependencies(e,Oi.transformAndFill),{canvas:T.canvas,offsetX:Math.round(C),offsetY:Math.round(L)}}setLineWidth(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=C7[t]}setLineJoin(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=E7[t]}setMiterLimit(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("dash",e);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,s,r,o,l;for(const[d,c]of t)switch(d){case"LW":this.setLineWidth(e,c);break;case"LC":this.setLineCap(e,c);break;case"LJ":this.setLineJoin(e,c);break;case"ML":this.setMiterLimit(e,c);break;case"D":this.setDash(e,c[0],c[1]);break;case"RI":this.setRenderingIntent(e,c);break;case"FL":this.setFlatness(e,c);break;case"Font":this.setFont(e,c[0],c[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=c;break;case"ca":(s=this.dependencyTracker)==null||s.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=c;break;case"BM":(r=this.dependencyTracker)==null||r.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=c;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=c?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(l=this.dependencyTracker)==null||l.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(c);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,t,n);this.suspendedCtx=this.ctx;const o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),ku(this.suspendedCtx,o),T7(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ku(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,s){const r=s[0],o=s[1],l=s[2]-r,d=s[3]-o;l===0||d===0||(this.genericComposeSMask(t.context,n,l,d,t.subtype,t.backdrop,t.transferMap,r,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,s,r,o,l,d,c,h,u){let f=e.canvas,m=d-h,b=c-u;if(o)if(m<0||b<0||m+n>f.width||b+s>f.height){const S=this.cachedCanvases.getCanvas("maskExtension",n,s),g=S.context;g.drawImage(f,-m,-b),g.globalCompositeOperation="destination-atop",g.fillStyle=o,g.fillRect(0,0,n,s),g.globalCompositeOperation="source-over",f=S.canvas,m=b=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(m,b,n,s),e.clip(S),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(m,b,n,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const v=new Path2D;v.rect(d,c,n,s),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(f,m,b,n,s,d,c,n,s),t.restore()}save(e){var n;this.inSMaskMode&&ku(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&ku(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,s,r,o,l){var d;(d=this.dependencyTracker)==null||d.recordIncrementalData("transform",e),this.ctx.transform(t,n,s,r,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,s){let[r]=n;if(!s){r||(r=n[0]=new Path2D),this[t](e,r);return}if(this.dependencyTracker!==null){const o=t===eu.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,s[0]-o,s[2]+o,s[1]-o,s[3]+o).recordDependencies(e,["transform"])}if(!(r instanceof Path2D)){const o=n[0]=new Path2D;for(let l=0,d=r.length;l<d;)switch(r[l++]){case Jm.moveTo:o.moveTo(r[l++],r[l++]);break;case Jm.lineTo:o.lineTo(r[l++],r[l++]);break;case Jm.curveTo:o.bezierCurveTo(r[l++],r[l++],r[l++],r[l++],r[l++],r[l++]);break;case Jm.closePath:o.closePath();break;default:ue(`Unrecognized drawing path operator: ${r[l-1]}`);break}r=o}ee.axialAlignedBoundingBox(s,ut(this.ctx),this.current.minMax),this[t](e,r),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){var o;const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const l=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,Ds(s),un.STROKE,e),l){const d=new Path2D;d.addPath(t,s.getTransform().invertSelf().multiplySelf(l)),t=d}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,Oi.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(un.STROKE,ut(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){var c,h,u;const s=this.ctx,r=this.current.fillColor,o=this.current.patternFill;let l=!1;if(o){const f=r.isModifyingCurrentTransform()?s.getTransform():null;if((c=this.dependencyTracker)==null||c.save(e),s.save(),s.fillStyle=r.getPattern(s,this,Ds(s),un.FILL,e),f){const m=new Path2D;m.addPath(t,s.getTransform().invertSelf().multiplySelf(f)),t=m}l=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),(h=this.dependencyTracker)==null||h.recordDependencies(e,Oi.fill),l&&(s.restore(),(u=this.dependencyTracker)==null||u.restore(e)),n&&this.consumePath(e,t,d)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),(n=this.dependencyTracker)==null||n.recordDependencies(e,Oi.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=L7}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=Ub}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;t!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",e),s.recordCloseMarker(e)}if(t!==void 0){const s=new Path2D,r=n.getTransform().invertSelf();for(const{transform:o,x:l,y:d,fontSize:c,path:h}of t)h&&s.addPath(h,new DOMMatrix(o).preMultiplySelf(r).translate(l,d).scale(c,-c));n.clip(s)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var u,f;(u=this.dependencyTracker)==null||u.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const s=this.commonObjs.get(t),r=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=s.fontMatrix||c2,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&ue("Invalid font matrix for font "+t),n<0?(n=-n,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const o=s.loadedName||"sans-serif",l=((f=s.systemFontInfo)==null?void 0:f.css)||`"${o}", ${s.fallbackName}`;let d="normal";s.black?d="900":s.bold&&(d="bold");const c=s.italic?"italic":"normal";let h=n;n<jb?h=jb:n>Ob&&(h=Ob),this.current.fontSizeScale=n/h,this.ctx.font=`${c} ${d} ${h}px ${l}`}setTextRenderingMode(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,s,r,o){var g,k,w,A;const l=this.ctx,d=this.current,c=d.font,h=d.textRenderingMode,u=d.fontSize/d.fontSizeScale,f=h&rn.FILL_STROKE_MASK,m=!!(h&rn.ADD_TO_PATH_FLAG),b=d.patternFill&&!c.missingFile,v=d.patternStroke&&!c.missingFile;let S;if((c.disableFontFace||m||b||v)&&!c.missingFile&&(S=c.getPathGenerator(this.commonObjs,t)),S&&(c.disableFontFace||b||v)){l.save(),l.translate(n,s),l.scale(u,-u),(g=this.dependencyTracker)==null||g.recordCharacterBBox(e,l,c);let T;if(f===rn.FILL||f===rn.FILL_STROKE)if(r){T=l.getTransform(),l.setTransform(...r);const I=_(this,Cs,B2).call(this,S,T,r);l.fill(I)}else l.fill(S);if(f===rn.STROKE||f===rn.FILL_STROKE)if(o){T||(T=l.getTransform()),l.setTransform(...o);const{a:I,b:C,c:L,d:F}=T,D=ee.inverseTransform(o),j=ee.transform([I,C,L,F,0,0],D);ee.singularValueDecompose2dScale(j,Ii),l.lineWidth*=Math.max(Ii[0],Ii[1])/u,l.stroke(_(this,Cs,B2).call(this,S,T,o))}else l.lineWidth/=u,l.stroke(S);l.restore()}else(f===rn.FILL||f===rn.FILL_STROKE)&&(l.fillText(t,n,s),(k=this.dependencyTracker)==null||k.recordCharacterBBox(e,l,c,u,n,s,()=>l.measureText(t))),(f===rn.STROKE||f===rn.FILL_STROKE)&&(this.dependencyTracker&&((w=this.dependencyTracker)==null||w.recordCharacterBBox(e,l,c,u,n,s,()=>l.measureText(t)).recordDependencies(e,Oi.stroke)),l.strokeText(t,n,s));m&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ut(l),x:n,y:s,fontSize:u,path:S}),(A=this.dependencyTracker)==null||A.recordCharacterBBox(e,l,c,u,n,s))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){n=!0;break}return ge(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var L,F,D,j;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Oi.showText).resetBBox(e),this.current.textRenderingMode&rn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,s=n.font;if(s.isType3Font){this.showType3Text(e,t),(L=this.dependencyTracker)==null||L.recordShowTextOperation(e);return}const r=n.fontSize;if(r===0){(F=this.dependencyTracker)==null||F.recordOperation(e);return}const o=this.ctx,l=n.fontSizeScale,d=n.charSpacing,c=n.wordSpacing,h=n.fontDirection,u=n.textHScale*h,f=t.length,m=s.vertical,b=m?1:-1,v=s.defaultVMetrics,S=r*n.fontMatrix[0],g=n.textRenderingMode===rn.FILL&&!s.disableFontFace&&!n.patternFill;o.save(),n.textMatrix&&o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),h>0?o.scale(u,-1):o.scale(u,1);let k,w;if(n.patternFill){o.save();const N=n.fillColor.getPattern(o,this,Ds(o),un.FILL,e);k=ut(o),o.restore(),o.fillStyle=N}if(n.patternStroke){o.save();const N=n.strokeColor.getPattern(o,this,Ds(o),un.STROKE,e);w=ut(o),o.restore(),o.strokeStyle=N}let A=n.lineWidth;const T=n.textMatrixScale;if(T===0||A===0){const N=n.textRenderingMode&rn.FILL_STROKE_MASK;(N===rn.STROKE||N===rn.FILL_STROKE)&&(A=this.getSinglePixelWidth())}else A/=T;if(l!==1&&(o.scale(l,l),A/=l),o.lineWidth=A,s.isInvalidPDFjsFont){const N=[];let ie=0;for(const X of t)N.push(X.unicode),ie+=X.width;const R=N.join("");if(o.fillText(R,0,0),this.dependencyTracker!==null){const X=o.measureText(R);this.dependencyTracker.recordBBox(e,this.ctx,-X.actualBoundingBoxLeft,X.actualBoundingBoxRight,-X.actualBoundingBoxAscent,X.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=ie*S*u,o.restore(),this.compose();return}let I=0,C;for(C=0;C<f;++C){const N=t[C];if(typeof N=="number"){I+=b*N*r/1e3;continue}let ie=!1;const R=(N.isSpace?c:0)+d,X=N.fontChar,q=N.accent;let G,H,W=N.width;if(m){const ae=N.vmetric||v,de=-(N.vmetric?ae[1]:W*.5)*S,st=ae[2]*S;W=ae?-ae[0]:W,G=de/l,H=(I+st)/l}else G=I/l,H=0;let se;if(s.remeasure&&W>0){se=o.measureText(X);const ae=se.width*1e3/r*l;if(W<ae&&this.isFontSubpixelAAEnabled){const de=W/ae;ie=!0,o.save(),o.scale(de,1),G/=de}else W!==ae&&(G+=(W-ae)/2e3*r/l)}if(this.contentVisible&&(N.isInFont||s.missingFile)){if(g&&!q)o.fillText(X,G,H),(D=this.dependencyTracker)==null||D.recordCharacterBBox(e,o,se?{bbox:null}:s,r/l,G,H,()=>se??o.measureText(X));else if(this.paintChar(e,X,G,H,k,w),q){const ae=G+r*q.offset.x/l,de=H-r*q.offset.y/l;this.paintChar(e,q.fontChar,ae,de,k,w)}}const J=m?W*S-R*h:W*S+R*h;I+=J,ie&&o.restore()}m?n.y-=I:n.x+=I*u,o.restore(),this.compose(),(j=this.dependencyTracker)==null||j.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,s=this.current,r=s.font,o=s.fontSize,l=s.fontDirection,d=r.vertical?1:-1,c=s.charSpacing,h=s.wordSpacing,u=s.textHScale*l,f=s.fontMatrix||c2,m=t.length,b=s.textRenderingMode===rn.INVISIBLE;let v,S,g,k;if(b||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),s.textMatrix&&n.transform(...s.textMatrix),n.translate(s.x,s.y+s.textRise),n.scale(u,l);const w=this.dependencyTracker;for(this.dependencyTracker=w?new P0(w,e):null,v=0;v<m;++v){if(S=t[v],typeof S=="number"){k=d*S*o/1e3,this.ctx.translate(k,0),s.x+=k*u;continue}const A=(S.isSpace?h:0)+c,T=r.charProcOperatorList[S.operatorListId];T?this.contentVisible&&(this.save(),n.scale(o,o),n.transform(...f),this.executeOperatorList(T),this.restore()):ue(`Type3 character "${S.operatorListId}" is not available.`);const I=[S.width,0];ee.applyTransform(I,f),g=I[0]*o+A,n.translate(g,0),s.x+=g*u}n.restore(),w&&(this.dependencyTracker=w)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,s,r,o,l){var c;const d=new Path2D;d.rect(s,r,o-s,l-r),this.ctx.clip(d),(c=this.dependencyTracker)==null||c.recordBBox(e,this.ctx,s,o,r,l).recordClipBox(e,this.ctx,s,o,r,l),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const s=this.baseTransform||ut(this.ctx),r={createCanvasGraphics:(o,l)=>new Vy(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new P0(this.dependencyTracker,l,!0):null)};n=new j2(t,this.ctx,r,s)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=S7(this.getObject(e,t)),this.cachedPatterns.set(t,s)),n&&(s.matrix=n),s}shadingFill(e,t){var o;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const s=this._getPattern(e,t);n.fillStyle=s.getPattern(n,this,Ds(n),un.SHADING,e);const r=Ds(n);if(r){const{width:l,height:d}=n.canvas,c=cc.slice();ee.axialAlignedBoundingBox([0,0,l,d],r,c);const[h,u,f,m]=c;this.ctx.fillRect(h,u,f-h,m-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Oi.transform).recordDependencies(e,Oi.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){We("Should not call beginInlineImage")}beginImageData(){We("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){var s;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=ut(this.ctx),n)){ee.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[r,o,l,d]=n,c=new Path2D;c.rect(r,o,l-r,d-o),this.ctx.clip(c),(s=this.dependencyTracker)==null||s.recordClipBox(e,this.ctx,r,l,o,d),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var w;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||y1("TODO: Support non-isolated groups."),t.knockout&&ue("Knockout groups not supported.");const s=ut(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=cc.slice();ee.axialAlignedBoundingBox(t.bbox,ut(n),r);const o=[0,0,n.canvas.width,n.canvas.height];r=ee.intersect(r,o)||[0,0,0,0];const l=Math.floor(r[0]),d=Math.floor(r[1]),c=Math.max(Math.ceil(r[2])-l,1),h=Math.max(Math.ceil(r[3])-d,1);this.current.startNewPathAndClipBox([0,0,c,h]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(u,c,h),m=f.context;m.translate(-l,-d),m.transform(...s);let b=new Path2D;const[v,S,g,k]=t.bbox;if(b.rect(v,S,g-v,k-S),t.matrix){const A=new Path2D;A.addPath(b,new DOMMatrix(t.matrix)),b=A}m.clip(b),t.smask&&this.smaskStack.push({canvas:f.canvas,context:m,offsetX:l,offsetY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(l,d),n.save()),ku(n,m),this.ctx=m,(w=this.dependencyTracker)==null||w.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){var r;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,(r=this.dependencyTracker)==null||r.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=ut(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const l=cc.slice();ee.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,n,s,r,o){if(_(this,Cs,O2).call(this),rg(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const l=n[2]-n[0],d=n[3]-n[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=l,n[3]=d,ee.singularValueDecompose2dScale(ut(this.ctx),Ii);const{viewportScale:c}=this,h=Math.ceil(l*this.outputScaleX*c),u=Math.ceil(d*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(h,u);const{canvas:f,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(Ii[0],0,0,-Ii[1],0,d*Ii[1]),rg(this.ctx)}else{rg(this.ctx),this.endPath(e);const c=new Path2D;c.rect(n[0],n[1],l,d),this.ctx.clip(c)}}this.current=new Bb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...s),this.transform(e,...r)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),_(this,Cs,z2).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var l;if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const s=this.ctx,r=this._createMaskCanvas(e,t),o=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,r.offsetX,r.offsetY),(l=this.dependencyTracker)==null||l.resetBBox(e).recordBBox(e,this.ctx,r.offsetX,r.offsetX+o.width,r.offsetY,r.offsetY+o.height).recordOperation(e),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,s=0,r=0,o,l){var u,f,m;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const d=this.ctx;d.save();const c=ut(d);d.transform(n,s,r,o,0,0);const h=this._createMaskCanvas(e,t);d.setTransform(1,0,0,1,h.offsetX-c[4],h.offsetY-c[5]),(u=this.dependencyTracker)==null||u.resetBBox(e);for(let b=0,v=l.length;b<v;b+=2){const S=ee.transform(c,[n,s,r,o,l[b],l[b+1]]);d.drawImage(h.canvas,S[4],S[5]),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,S[4],S[4]+h.canvas.width,S[5],S[5]+h.canvas.height)}d.restore(),this.compose(),(m=this.dependencyTracker)==null||m.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,l,d;if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,r=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,Oi.transformAndFill);for(const c of t){const{data:h,width:u,height:f,transform:m}=c,b=this.cachedCanvases.getCanvas("maskCanvas",u,f),v=b.context;v.save();const S=this.getObject(e,h,c);Xb(v,S),v.globalCompositeOperation="source-in",v.fillStyle=r?s.getPattern(v,this,Ds(n),un.FILL,e):s,v.fillRect(0,0,u,f),v.restore(),n.save(),n.transform(...m),n.scale(1,-1),sg(n,b.canvas,0,0,u,f,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,n,0,u,0,f),n.restore()}this.compose(),(d=this.dependencyTracker)==null||d.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){ue("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,s,r){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){ue("Dependent image isn't ready yet");return}const l=o.width,d=o.height,c=[];for(let h=0,u=r.length;h<u;h+=2)c.push({transform:[n,0,0,s,r[h],r[h+1]],x:0,y:0,w:l,h:d});this.paintInlineImageXObjectGroup(e,o,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:s}=e,r=this.cachedCanvases.getCanvas("inlineImage",n,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",r.canvas}paintInlineImageXObject(e,t){var c;if(!this.contentVisible)return;const n=t.width,s=t.height,r=this.ctx;this.save(e);const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/n,-1/s);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const u=this.cachedCanvases.getCanvas("inlineImage",n,s).context;qb(u,t),l=this.applyTransferMapsToCanvas(u)}const d=this._scaleImage(l,Ds(r));r.imageSmoothingEnabled=Yb(ut(r),t.interpolate),(c=this.dependencyTracker)==null||c.resetBBox(e).recordBBox(e,r,0,n,-s,0).recordDependencies(e,Oi.imageXObject).recordOperation(e),sg(r,d.img,0,0,d.paintWidth,d.paintHeight,0,-s,n,s),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var o,l,d;if(!this.contentVisible)return;const s=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const c=t.width,h=t.height,f=this.cachedCanvases.getCanvas("inlineImage",c,h).context;qb(f,t),r=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const c of n)s.save(),s.transform(...c.transform),s.scale(1,-1),sg(s,r,c.x,c.y,c.w,c.h,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,s,0,1,-1,0),s.restore();(d=this.dependencyTracker)==null||d.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Oi.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){var o,l;const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const r=this.ctx;this.pendingClip?(s||(this.pendingClip===Ub?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(l=this.dependencyTracker)==null||l.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ut(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:s,d:r}=this.ctx.getTransform();let o,l;if(n===0&&s===0){const d=Math.abs(t),c=Math.abs(r);if(d===c)if(e===0)o=l=1/d;else{const h=d*e;o=l=h<1?1/h:1}else if(e===0)o=1/d,l=1/c;else{const h=d*e,u=c*e;o=h<1?1/h:1,l=u<1?1/u:1}}else{const d=Math.abs(t*r-n*s),c=Math.hypot(t,n),h=Math.hypot(s,r);if(e===0)o=h/d,l=c/d;else{const u=e*d;o=h>u?h/u:1,l=c>u?c/u:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:s}}=this,[r,o]=this.getScaleForStroking();if(r===o){n.lineWidth=(s||1)*r,n.stroke(e);return}const l=n.getLineDash();t&&n.save(),n.scale(r,o),cx.a=1/r,cx.d=1/o;const d=new Path2D;if(d.addPath(e,cx),l.length>0){const c=Math.max(r,o);n.setLineDash(l.map(h=>h/c)),n.lineDashOffset/=c}n.lineWidth=s||1,n.stroke(d),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Cs=new WeakSet,O2=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},z2=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},B2=function(e,t,n){const s=new Path2D;return s.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),s};let bc=Vy;for(const i in eu)bc.prototype[i]!==void 0&&(bc.prototype[eu[i]]=bc.prototype[i]);var Wc,Kc,up,Qc,Cg;const uc=class uc{constructor(e){x(this,Qc);x(this,Wc);x(this,Kc);x(this,up);p(this,Wc,e),p(this,Kc,new DataView(a(this,Wc))),p(this,up,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let s=0;for(const c of uc.strings){const h=t.encode(e[c]);n[c]=h,s+=4+h.length}const r=new ArrayBuffer(s),o=new Uint8Array(r),l=new DataView(r);let d=0;for(const c of uc.strings){const h=n[c],u=h.length;l.setUint32(d,u),o.set(h,d+4),d+=4+u}return Ae(d===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}get fontFamily(){return _(this,Qc,Cg).call(this,0)}get fontWeight(){return _(this,Qc,Cg).call(this,1)}get italicAngle(){return _(this,Qc,Cg).call(this,2)}};Wc=new WeakMap,Kc=new WeakMap,up=new WeakMap,Qc=new WeakSet,Cg=function(e){Ae(e<uc.strings.length,"Invalid string index");let t=0;for(let s=0;s<e;s++)t+=a(this,Kc).getUint32(t)+4;const n=a(this,Kc).getUint32(t);return a(this,up).decode(new Uint8Array(a(this,Wc),t+4,n))},O(uc,"strings",["fontFamily","fontWeight","italicAngle"]);let T0=uc;var Ka,Ks,Ml,Fl,Xu;const fc=class fc{constructor(e){x(this,Fl);x(this,Ka);x(this,Ks);x(this,Ml);p(this,Ka,e),p(this,Ks,new DataView(a(this,Ka))),p(this,Ml,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let s=0;for(const f of fc.strings){const m=t.encode(e[f]);n[f]=m,s+=4+m.length}s+=4;let r,o,l=1+s;e.style&&(r=t.encode(e.style.style),o=t.encode(e.style.weight),l+=4+r.length+4+o.length);const d=new ArrayBuffer(l),c=new Uint8Array(d),h=new DataView(d);let u=0;h.setUint8(u++,e.guessFallback?1:0),h.setUint32(u,0),u+=4,s=0;for(const f of fc.strings){const m=n[f],b=m.length;s+=4+b,h.setUint32(u,b),c.set(m,u+4),u+=4+b}return h.setUint32(u-s-4,s),e.style&&(h.setUint32(u,r.length),c.set(r,u+4),u+=4+r.length,h.setUint32(u,o.length),c.set(o,u+4),u+=4+o.length),Ae(u<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(u)}get guessFallback(){return a(this,Ks).getUint8(0)!==0}get css(){return _(this,Fl,Xu).call(this,0)}get loadedName(){return _(this,Fl,Xu).call(this,1)}get baseFontName(){return _(this,Fl,Xu).call(this,2)}get src(){return _(this,Fl,Xu).call(this,3)}get style(){let e=1;e+=4+a(this,Ks).getUint32(e);const t=a(this,Ks).getUint32(e),n=a(this,Ml).decode(new Uint8Array(a(this,Ka),e+4,t));e+=4+t;const s=a(this,Ks).getUint32(e),r=a(this,Ml).decode(new Uint8Array(a(this,Ka),e+4,s));return{style:n,weight:r}}};Ka=new WeakMap,Ks=new WeakMap,Ml=new WeakMap,Fl=new WeakSet,Xu=function(e){Ae(e<fc.strings.length,"Invalid string index");let t=5;for(let s=0;s<e;s++)t+=a(this,Ks).getUint32(t)+4;const n=a(this,Ks).getUint32(t);return a(this,Ml).decode(new Uint8Array(a(this,Ka),t+4,n))},O(fc,"strings",["css","loadedName","baseFontName","src"]);let I0=fc;var Jc,Zc,eh,th,ui,Qs,fp,qe,St,as,Eg,Yu;const me=class me{constructor({data:e,extra:t}){x(this,St);x(this,Qs);x(this,fp);x(this,qe);p(this,Qs,e),p(this,fp,new TextDecoder),p(this,qe,new DataView(a(this,Qs))),t&&Object.assign(this,t)}get black(){return _(this,St,as).call(this,0)}get bold(){return _(this,St,as).call(this,1)}get disableFontFace(){return _(this,St,as).call(this,2)}get fontExtraProperties(){return _(this,St,as).call(this,3)}get isInvalidPDFjsFont(){return _(this,St,as).call(this,4)}get isType3Font(){return _(this,St,as).call(this,5)}get italic(){return _(this,St,as).call(this,6)}get missingFile(){return _(this,St,as).call(this,7)}get remeasure(){return _(this,St,as).call(this,8)}get vertical(){return _(this,St,as).call(this,9)}get ascent(){return _(this,St,Eg).call(this,0)}get defaultWidth(){return _(this,St,Eg).call(this,1)}get descent(){return _(this,St,Eg).call(this,2)}get bbox(){let e=a(me,Zc);if(a(this,qe).getUint8(e)===0)return;e+=1;const n=[];for(let s=0;s<4;s++)n.push(a(this,qe).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=a(me,eh);if(a(this,qe).getUint8(e)===0)return;e+=1;const n=[];for(let s=0;s<6;s++)n.push(a(this,qe).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=a(me,th);if(a(this,qe).getUint8(e)===0)return;e+=1;const n=[];for(let s=0;s<3;s++)n.push(a(this,qe).getInt16(e,!0)),e+=2;return n}get fallbackName(){return _(this,St,Yu).call(this,0)}get loadedName(){return _(this,St,Yu).call(this,1)}get mimetype(){return _(this,St,Yu).call(this,2)}get name(){return _(this,St,Yu).call(this,3)}get data(){let e=a(me,ui);const t=a(this,qe).getUint32(e);e+=4+t;const n=a(this,qe).getUint32(e);e+=4+n;const s=a(this,qe).getUint32(e);e+=4+s;const r=a(this,qe).getUint32(e);if(r!==0)return new Uint8Array(a(this,Qs),e+4,r)}clearData(){let e=a(me,ui);const t=a(this,qe).getUint32(e);e+=4+t;const n=a(this,qe).getUint32(e);e+=4+n;const s=a(this,qe).getUint32(e);e+=4+s;const r=a(this,qe).getUint32(e);new Uint8Array(a(this,Qs),e+4,r).fill(0),a(this,qe).setUint32(e,0)}get cssFontInfo(){let e=a(me,ui);const t=a(this,qe).getUint32(e);e+=4+t;const n=a(this,qe).getUint32(e);e+=4+n;const s=a(this,qe).getUint32(e);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(a(this,Qs),e+4,s)),new T0(r.buffer)}get systemFontInfo(){let e=a(me,ui);const t=a(this,qe).getUint32(e);e+=4+t;const n=a(this,qe).getUint32(e);if(n===0)return null;const s=new Uint8Array(n);return s.set(new Uint8Array(a(this,Qs),e+4,n)),new I0(s.buffer)}static write(e){const t=e.systemFontInfo?I0.write(e.systemFontInfo):null,n=e.cssFontInfo?T0.write(e.cssFontInfo):null,s=new TextEncoder,r={};let o=0;for(const v of me.strings)r[v]=s.encode(e[v]),o+=4+r[v].length;const l=a(me,ui)+4+o+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),d=new ArrayBuffer(l),c=new Uint8Array(d),h=new DataView(d);let u=0;const f=me.bools.length;let m=0,b=0;for(let v=0;v<f;v++){const S=e[me.bools[v]];m|=(S===void 0?0:S?2:1)<<b,b+=2,(b===8||v===f-1)&&(h.setUint8(u++,m),m=0,b=0)}Ae(u===a(me,Jc),"FontInfo.write: Boolean properties offset mismatch");for(const v of me.numbers)h.setFloat64(u,e[v]),u+=8;if(Ae(u===a(me,Zc),"FontInfo.write: Number properties offset mismatch"),e.bbox){h.setUint8(u++,4);for(const v of e.bbox)h.setInt16(u,v,!0),u+=2}else h.setUint8(u++,0),u+=2*4;if(Ae(u===a(me,eh),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){h.setUint8(u++,6);for(const v of e.fontMatrix)h.setFloat64(u,v,!0),u+=8}else h.setUint8(u++,0),u+=8*6;if(Ae(u===a(me,th),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){h.setUint8(u++,1);for(const v of e.defaultVMetrics)h.setInt16(u,v,!0),u+=2}else h.setUint8(u++,0),u+=3*2;Ae(u===a(me,ui),"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32(a(me,ui),0),u+=4;for(const v of me.strings){const S=r[v],g=S.length;h.setUint32(u,g),c.set(S,u+4),u+=4+g}if(h.setUint32(a(me,ui),u-a(me,ui)-4),!t)h.setUint32(u,0),u+=4;else{const v=t.byteLength;h.setUint32(u,v),Ae(u+4+v<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),c.set(new Uint8Array(t),u+4),u+=4+v}if(!n)h.setUint32(u,0),u+=4;else{const v=n.byteLength;h.setUint32(u,v),Ae(u+4+v<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),c.set(new Uint8Array(n),u+4),u+=4+v}return e.data===void 0?(h.setUint32(u,0),u+=4):(h.setUint32(u,e.data.length),c.set(e.data,u+4),u+=4+e.data.length),Ae(u<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(u)}};Jc=new WeakMap,Zc=new WeakMap,eh=new WeakMap,th=new WeakMap,ui=new WeakMap,Qs=new WeakMap,fp=new WeakMap,qe=new WeakMap,St=new WeakSet,as=function(e){Ae(e<me.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,s=a(this,qe).getUint8(t)>>n&3;return s===0?void 0:s===2},Eg=function(e){return Ae(e<me.numbers.length,"Invalid number index"),a(this,qe).getFloat64(a(me,Jc)+e*8)},Yu=function(e){Ae(e<me.strings.length,"Invalid string index");let t=a(me,ui)+4;for(let r=0;r<e;r++)t+=a(this,qe).getUint32(t)+4;const n=a(this,qe).getUint32(t),s=new Uint8Array(n);return s.set(new Uint8Array(a(this,Qs),t+4,n)),a(this,fp).decode(s)},O(me,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),O(me,"numbers",["ascent","defaultWidth","descent"]),O(me,"strings",["fallbackName","loadedName","mimetype","name"]),x(me,Jc,Math.ceil(me.bools.length*2/8)),x(me,Zc,a(me,Jc)+me.numbers.length*8),x(me,eh,a(me,Zc)+1+2*4),x(me,th,a(me,eh)+1+8*6),x(me,ui,a(me,th)+1+2*3);let q2=me;var pp,mp;class ws{static get workerPort(){return a(this,pp)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");p(this,pp,e)}static get workerSrc(){return a(this,mp)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");p(this,mp,e)}}pp=new WeakMap,mp=new WeakMap,x(ws,pp,null),x(ws,mp,"");var nh,gp;class M7{constructor({parsedData:e,rawData:t}){x(this,nh);x(this,gp);p(this,nh,e),p(this,gp,t)}getRaw(){return a(this,gp)}get(e){return a(this,nh).get(e)??null}[Symbol.iterator](){return a(this,nh).entries()}}nh=new WeakMap,gp=new WeakMap;const Gd=Symbol("INTERNAL");var xp,vp,yp,ih;class F7{constructor(e,{name:t,intent:n,usage:s,rbGroups:r}){x(this,xp,!1);x(this,vp,!1);x(this,yp,!1);x(this,ih,!0);p(this,xp,!!(e&Pi.DISPLAY)),p(this,vp,!!(e&Pi.PRINT)),this.name=t,this.intent=n,this.usage=s,this.rbGroups=r}get visible(){if(a(this,yp))return a(this,ih);if(!a(this,ih))return!1;const{print:e,view:t}=this.usage;return a(this,xp)?(t==null?void 0:t.viewState)!=="OFF":a(this,vp)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Gd&&We("Internal method `_setVisible` called."),p(this,yp,n),p(this,ih,t)}}xp=new WeakMap,vp=new WeakMap,yp=new WeakMap,ih=new WeakMap;var Qa,Xe,sh,rh,_p,X2;class R7{constructor(e,t=Pi.DISPLAY){x(this,_p);x(this,Qa,null);x(this,Xe,new Map);x(this,sh,null);x(this,rh,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,p(this,rh,e.order);for(const n of e.groups)a(this,Xe).set(n.id,new F7(t,n));if(e.baseState==="OFF")for(const n of a(this,Xe).values())n._setVisible(Gd,!1);for(const n of e.on)a(this,Xe).get(n)._setVisible(Gd,!0);for(const n of e.off)a(this,Xe).get(n)._setVisible(Gd,!1);p(this,sh,this.getHash())}}isVisible(e){if(a(this,Xe).size===0)return!0;if(!e)return y1("Optional content group not defined."),!0;if(e.type==="OCG")return a(this,Xe).has(e.id)?a(this,Xe).get(e.id).visible:(ue(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return _(this,_p,X2).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!a(this,Xe).has(t))return ue(`Optional content group not found: ${t}`),!0;if(a(this,Xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!a(this,Xe).has(t))return ue(`Optional content group not found: ${t}`),!0;if(!a(this,Xe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!a(this,Xe).has(t))return ue(`Optional content group not found: ${t}`),!0;if(!a(this,Xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!a(this,Xe).has(t))return ue(`Optional content group not found: ${t}`),!0;if(a(this,Xe).get(t).visible)return!1}return!0}return ue(`Unknown optional content policy ${e.policy}.`),!0}return ue(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var r;const s=a(this,Xe).get(e);if(!s){ue(`Optional content group not found: ${e}`);return}if(n&&t&&s.rbGroups.length)for(const o of s.rbGroups)for(const l of o)l!==e&&((r=a(this,Xe).get(l))==null||r._setVisible(Gd,!1,!0));s._setVisible(Gd,!!t,!0),p(this,Qa,null)}setOCGState({state:e,preserveRB:t}){let n;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const r=a(this,Xe).get(s);if(r)switch(n){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!r.visible,t);break}}p(this,Qa,null)}get hasInitialVisibility(){return a(this,sh)===null||this.getHash()===a(this,sh)}getOrder(){return a(this,Xe).size?a(this,rh)?a(this,rh).slice():[...a(this,Xe).keys()]:null}getGroup(e){return a(this,Xe).get(e)||null}getHash(){if(a(this,Qa)!==null)return a(this,Qa);const e=new aw;for(const[t,n]of a(this,Xe))e.update(`${t}:${n.visible}`);return p(this,Qa,e.hexdigest())}[Symbol.iterator](){return a(this,Xe).entries()}}Qa=new WeakMap,Xe=new WeakMap,sh=new WeakMap,rh=new WeakMap,_p=new WeakSet,X2=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let s=1;s<t;s++){const r=e[s];let o;if(Array.isArray(r))o=_(this,_p,X2).call(this,r);else if(a(this,Xe).has(r))o=a(this,Xe).get(r).visible;else return ue(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class D7{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Ae(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:o,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const d=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,c)=>{this._onReceiveData({begin:d,chunk:c})}),e.addProgressListener((d,c)=>{this._onProgress({loaded:d,total:c})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(n),!0)});Ae(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,s,r;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ae(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new N7(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new H7(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class N7{constructor(e,t,n=!1,s=null){this._stream=e,this._done=n||!1,this._filename=b1(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class H7{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function j7(i){let e=!0,t=n("filename\\*","i").exec(i);if(t){t=t[1];let h=l(t);return h=unescape(h),h=d(h),h=c(h),r(h)}if(t=o(i),t){const h=c(t);return r(h)}if(t=n("filename","i").exec(i),t){t=t[1];let h=l(t);return h=c(h),r(h)}function n(h,u){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',u)}function s(h,u){if(h){if(!/^[\x00-\xFF]+$/.test(u))return u;try{const f=new TextDecoder(h,{fatal:!0}),m=bm(u);u=f.decode(m),e=!1}catch{}}return u}function r(h){return e&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),e&&(h=s("iso-8859-1",h))),h}function o(h){const u=[];let f;const m=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=m.exec(h))!==null;){let[,v,S,g]=f;if(v=parseInt(v,10),v in u){if(v===0)break;continue}u[v]=[S,g]}const b=[];for(let v=0;v<u.length&&v in u;++v){let[S,g]=u[v];g=l(g),S&&(g=unescape(g),v===0&&(g=d(g))),b.push(g)}return b.join("")}function l(h){if(h.startsWith('"')){const u=h.slice(1).split('\\"');for(let f=0;f<u.length;++f){const m=u[f].indexOf('"');m!==-1&&(u[f]=u[f].slice(0,m),u.length=f+1),u[f]=u[f].replaceAll(/\\(.)/g,"$1")}h=u.join('"')}return h}function d(h){const u=h.indexOf("'");if(u===-1)return h;const f=h.slice(0,u),b=h.slice(u+1).replace(/^[^']*'/,"");return s(f,b)}function c(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(u,f,m,b){if(m==="q"||m==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,S){return String.fromCharCode(parseInt(S,16))}),s(f,b);try{b=atob(b)}catch{}return s(f,b)})}return""}function yw(i,e){const t=new Headers;if(!i||!e||typeof e!="object")return t;for(const n in e){const s=e[n];s!==void 0&&t.append(n,s)}return t}function k1(i){var e;return((e=URL.parse(i))==null?void 0:e.origin)??null}function _w({responseHeaders:i,isHttp:e,rangeChunkSize:t,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*t)||n||!e||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function bw(i){const e=i.get("Content-Disposition");if(e){let t=j7(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(b1(t))return t}return null}function Am(i,e){return new Cf(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i,i===404||i===0&&e.startsWith("file:"))}function kw(i){return i===200||i===206}function ww(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Sw(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(ue(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class O7{constructor(e){O(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=yw(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ae(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new z7(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new B7(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class z7{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),s=t.url;fetch(s,ww(n,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=k1(r.url),!kw(r.status))throw Am(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:l,suggestedLength:d}=_w({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=d||this._contentLength,this._filename=bw(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new xa("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Sw(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class B7{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${n-1}`);const o=s.url;fetch(o,ww(r,this._withCredentials,this._abortController)).then(l=>{const d=k1(l.url);if(d!==e._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${e._responseOrigin}".`);if(!kw(l.status))throw Am(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:Sw(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const hx=200,ux=206;function q7(i){const e=i.response;return typeof e!="string"?e:bm(e).buffer}class X7{constructor({url:e,httpHeaders:t,withCredentials:n}){O(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=yw(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,o]of this.headers)t.setRequestHeader(r,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=ux):s.expectedStatus=hx,t.responseType="arraybuffer",Ae(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var s;const n=this.pendingRequests[e];n&&((s=n.onProgress)==null||s.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){n.onError(s.status);return}const r=s.status||hx;if(!(r===hx&&n.expectedStatus===ux)&&r!==n.expectedStatus){n.onError(s.status);return}const l=q7(s);if(r===ux){const d=s.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);c?n.onDone({begin:parseInt(c[1],10),chunk:l}):(ue('Missing or invalid "Content-Range" header.'),n.onError(0))}else l?n.onDone({begin:0,chunk:l}):n.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Y7{constructor(e){this._source=e,this._manager=new X7(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ae(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new U7(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new V7(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class U7{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=k1(t.responseURL);const n=t.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[d,...c]=l.split(": ");return[d,c.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=_w({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=bw(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Am(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class V7{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=k1((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Am(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const $7=/^[a-z][a-z0-9\-+.]+:/i;function G7(i){if($7.test(i))return new URL(i);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(i))}class W7{constructor(e){this.source=e,this.url=G7(e.url),Ae(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ae(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new K7(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Q7(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class K7{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=Am(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new xa("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Q7{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const wu=Symbol("INITIAL_DATA");var fi,bp,Y2;class Aw{constructor(){x(this,bp);x(this,fi,Object.create(null))}get(e,t=null){if(t){const s=_(this,bp,Y2).call(this,e);return s.promise.then(()=>t(s.data)),null}const n=a(this,fi)[e];if(!n||n.data===wu)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=a(this,fi)[e];return!!t&&t.data!==wu}delete(e){const t=a(this,fi)[e];return!t||t.data===wu?!1:(delete a(this,fi)[e],!0)}resolve(e,t=null){const n=_(this,bp,Y2).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in a(this,fi)){const{data:n}=a(this,fi)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}p(this,fi,Object.create(null))}*[Symbol.iterator](){for(const e in a(this,fi)){const{data:t}=a(this,fi)[e];t!==wu&&(yield[e,t])}}}fi=new WeakMap,bp=new WeakSet,Y2=function(e){var t;return(t=a(this,fi))[e]||(t[e]={...Promise.withResolvers(),data:wu})};const J7=1e5,Vb=30;var n3,Ja,Wn,kp,wp,Rl,Xr,Sp,Ap,Dl,ah,oh,Za,lh,Pp,dh,Nl,Tp,Ip,ch,Hl,Cp,eo,hh,_a,Pw,Tw,U2,Mi,Lg,V2,Iw,Cw;const zt=class zt{constructor({textContentSource:e,container:t,viewport:n}){x(this,_a);x(this,Ja,Promise.withResolvers());x(this,Wn,null);x(this,kp,!1);x(this,wp,!!((n3=globalThis.FontInspector)!=null&&n3.enabled));x(this,Rl,null);x(this,Xr,null);x(this,Sp,0);x(this,Ap,0);x(this,Dl,null);x(this,ah,null);x(this,oh,0);x(this,Za,0);x(this,lh,Object.create(null));x(this,Pp,[]);x(this,dh,null);x(this,Nl,[]);x(this,Tp,new WeakMap);x(this,Ip,null);var d;if(e instanceof ReadableStream)p(this,dh,e);else if(typeof e=="object")p(this,dh,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');p(this,Wn,p(this,ah,t)),p(this,Za,n.scale*Is.pixelRatio),p(this,oh,n.rotation),p(this,Xr,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:o,pageY:l}=n.rawDims;p(this,Ip,[1,0,0,-1,-o,l+r]),p(this,Ap,s),p(this,Sp,r),_(d=zt,Mi,Iw).call(d),jo(t,n),a(this,Ja).promise.finally(()=>{a(zt,hh).delete(this),p(this,Xr,null),p(this,lh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=sn.platform;return ge(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{a(this,Dl).read().then(({value:t,done:n})=>{if(n){a(this,Ja).resolve();return}a(this,Rl)??p(this,Rl,t.lang),Object.assign(a(this,lh),t.styles),_(this,_a,Pw).call(this,t.items),e()},a(this,Ja).reject)};return p(this,Dl,a(this,dh).getReader()),a(zt,hh).add(this),e(),a(this,Ja).promise}update({viewport:e,onBefore:t=null}){var r;const n=e.scale*Is.pixelRatio,s=e.rotation;if(s!==a(this,oh)&&(t==null||t(),p(this,oh,s),jo(a(this,ah),{rotation:s})),n!==a(this,Za)){t==null||t(),p(this,Za,n);const o={div:null,properties:null,ctx:_(r=zt,Mi,Lg).call(r,a(this,Rl))};for(const l of a(this,Nl))o.properties=a(this,Tp).get(l),o.div=l,_(this,_a,U2).call(this,o)}}cancel(){var t;const e=new xa("TextLayer task cancelled.");(t=a(this,Dl))==null||t.cancel(e).catch(()=>{}),p(this,Dl,null),a(this,Ja).reject(e)}get textDivs(){return a(this,Nl)}get textContentItemsStr(){return a(this,Pp)}static cleanup(){if(!(a(this,hh).size>0)){a(this,ch).clear();for(const{canvas:e}of a(this,Hl).values())e.remove();a(this,Hl).clear()}}};Ja=new WeakMap,Wn=new WeakMap,kp=new WeakMap,wp=new WeakMap,Rl=new WeakMap,Xr=new WeakMap,Sp=new WeakMap,Ap=new WeakMap,Dl=new WeakMap,ah=new WeakMap,oh=new WeakMap,Za=new WeakMap,lh=new WeakMap,Pp=new WeakMap,dh=new WeakMap,Nl=new WeakMap,Tp=new WeakMap,Ip=new WeakMap,ch=new WeakMap,Hl=new WeakMap,Cp=new WeakMap,eo=new WeakMap,hh=new WeakMap,_a=new WeakSet,Pw=function(e){var s,r;if(a(this,kp))return;(r=a(this,Xr)).ctx??(r.ctx=_(s=zt,Mi,Lg).call(s,a(this,Rl)));const t=a(this,Nl),n=a(this,Pp);for(const o of e){if(t.length>J7){ue("Ignoring additional textDivs for performance reasons."),p(this,kp,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=a(this,Wn);p(this,Wn,document.createElement("span")),a(this,Wn).classList.add("markedContent"),o.id&&a(this,Wn).setAttribute("id",`${o.id}`),l.append(a(this,Wn))}else o.type==="endMarkedContent"&&p(this,Wn,a(this,Wn).parentNode);continue}n.push(o.str),_(this,_a,Tw).call(this,o)}},Tw=function(e){var v;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};a(this,Nl).push(t);const s=ee.transform(a(this,Ip),e.transform);let r=Math.atan2(s[1],s[0]);const o=a(this,lh)[e.fontName];o.vertical&&(r+=Math.PI/2);let l=a(this,wp)&&o.fontSubstitution||o.fontFamily;l=zt.fontFamilyMap.get(l)||l;const d=Math.hypot(s[2],s[3]),c=d*_(v=zt,Mi,Cw).call(v,l,o,a(this,Rl));let h,u;r===0?(h=s[4],u=s[5]-c):(h=s[4]+c*Math.sin(r),u=s[5]-c*Math.cos(r));const f="calc(var(--total-scale-factor) *",m=t.style;a(this,Wn)===a(this,ah)?(m.left=`${(100*h/a(this,Ap)).toFixed(2)}%`,m.top=`${(100*u/a(this,Sp)).toFixed(2)}%`):(m.left=`${f}${h.toFixed(2)}px)`,m.top=`${f}${u.toFixed(2)}px)`),m.fontSize=`${f}${(a(zt,eo)*d).toFixed(2)}px)`,m.fontFamily=l,n.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,a(this,wp)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),r!==0&&(n.angle=r*(180/Math.PI));let b=!1;if(e.str.length>1)b=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);S!==g&&Math.max(S,g)/Math.min(S,g)>1.5&&(b=!0)}if(b&&(n.canvasWidth=o.vertical?e.height:e.width),a(this,Tp).set(t,n),a(this,Xr).div=t,a(this,Xr).properties=n,_(this,_a,U2).call(this,a(this,Xr)),n.hasText&&a(this,Wn).append(t),n.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),a(this,Wn).append(S)}},U2=function(e){var l;const{div:t,properties:n,ctx:s}=e,{style:r}=t;let o="";if(a(zt,eo)>1&&(o=`scale(${1/a(zt,eo)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:d}=r,{canvasWidth:c,fontSize:h}=n;_(l=zt,Mi,V2).call(l,s,h*a(this,Za),d);const{width:u}=s.measureText(t.textContent);u>0&&(o=`scaleX(${c*a(this,Za)/u}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(r.transform=o)},Mi=new WeakSet,Lg=function(e=null){let t=a(this,Hl).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,Hl).set(e,t),a(this,Cp).set(t,{size:0,family:""})}return t},V2=function(e,t,n){const s=a(this,Cp).get(e);t===s.size&&n===s.family||(e.font=`${t}px ${n}`,s.size=t,s.family=n)},Iw=function(){if(a(this,eo)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),p(this,eo,e.getBoundingClientRect().height),e.remove()},Cw=function(e,t,n){const s=a(this,ch).get(e);if(s)return s;const r=_(this,Mi,Lg).call(this,n);r.canvas.width=r.canvas.height=Vb,_(this,Mi,V2).call(this,r,Vb,e);const o=r.measureText(""),l=o.fontBoundingBoxAscent,d=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let c=.8;return l?c=l/(l+d):(sn.platform.isFirefox&&ue("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),a(this,ch).set(e,c),c},x(zt,Mi),x(zt,ch,new Map),x(zt,Hl,new Map),x(zt,Cp,new WeakMap),x(zt,eo,null),x(zt,hh,new Set);let tu=zt;const Z7=100;function Ew(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const e=new $2,{docId:t}=e,n=i.url?o7(i.url):null,s=i.data?l7(i.data):null,r=i.httpHeaders||null,o=i.withCredentials===!0,l=i.password??null,d=i.range instanceof Hy?i.range:null,c=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16;let h=i.worker instanceof nu?i.worker:null;const u=i.verbosity,f=typeof i.docBaseUrl=="string"&&!wm(i.docBaseUrl)?i.docBaseUrl:null,m=eg(i.cMapUrl),b=i.cMapPacked!==!1,v=i.CMapReaderFactory||(Dn?m7:Mb),S=eg(i.iccUrl),g=eg(i.standardFontDataUrl),k=i.StandardFontDataFactory||(Dn?g7:Fb),w=eg(i.wasmUrl),A=i.WasmFactory||(Dn?x7:Rb),T=i.stopAtErrors!==!0,I=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,C=i.isEvalSupported!==!1,L=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Dn,F=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!Dn&&(sn.platform.isFirefox||!globalThis.chrome),D=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,j=typeof i.disableFontFace=="boolean"?i.disableFontFace:Dn,N=i.fontExtraProperties===!0,ie=i.enableXfa===!0,R=i.ownerDocument||globalThis.document,X=i.disableRange===!0,q=i.disableStream===!0,G=i.disableAutoFetch===!0,H=i.pdfBug===!0,W=i.CanvasFactory||(Dn?p7:h7),se=i.FilterFactory||(Dn?f7:u7),J=i.enableHWA===!0,ae=i.useWasm!==!1,de=d?d.length:i.length??NaN,st=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Dn&&!j,Ue=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(v===Mb&&k===Fb&&A===Rb&&m&&g&&w&&Mu(m,document.baseURI)&&Mu(g,document.baseURI)&&Mu(w,document.baseURI)),vt=null;q8(u);const Re={canvasFactory:new W({ownerDocument:R,enableHWA:J}),filterFactory:new se({docId:t,ownerDocument:R}),cMapReaderFactory:Ue?null:new v({baseUrl:m,isCompressed:b}),standardFontDataFactory:Ue?null:new k({baseUrl:g}),wasmFactory:Ue?null:new A({baseUrl:w})};h||(h=nu.create({verbosity:u,port:ws.workerPort}),e._worker=h);const Oe={docId:t,apiVersion:"5.4.296",data:s,password:l,disableAutoFetch:G,rangeChunkSize:c,length:de,docBaseUrl:f,enableXfa:ie,evaluatorOptions:{maxImageSize:I,disableFontFace:j,ignoreErrors:T,isEvalSupported:C,isOffscreenCanvasSupported:L,isImageDecoderSupported:F,canvasMaxAreaInBytes:D,fontExtraProperties:N,useSystemFonts:st,useWasm:ae,useWorkerFetch:Ue,cMapUrl:m,iccUrl:S,standardFontDataUrl:g,wasmUrl:w}},ce={ownerDocument:R,pdfBug:H,styleElement:vt,loadingParams:{disableAutoFetch:G,enableXfa:ie}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Hi=h.messageHandler.sendWithPromise("GetDocRequest",Oe,s?[s.buffer]:null);let si;if(d)si=new D7(d,{disableRange:X,disableStream:q});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Es=Mu(n)?O7:Dn?W7:Y7;si=new Es({url:n,length:de,httpHeaders:r,withCredentials:o,rangeChunkSize:c,disableRange:X,disableStream:q})}return Hi.then(Es=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const fr=new ju(t,Es,h.port),lu=new nA(fr,e,si,ce,Re,J);e._transport=lu,fr.send("Ready",null)})}).catch(e._capability.reject),e}var V0;const $0=class $0{constructor(){O(this,"_capability",Promise.withResolvers());O(this,"_transport",null);O(this,"_worker",null);O(this,"docId",`d${Ot($0,V0)._++}`);O(this,"destroyed",!1);O(this,"onPassword",null);O(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};V0=new WeakMap,x($0,V0,0);let $2=$0;var jl,Ep,Lp,Mp,Fp;class Hy{constructor(e,t,n=!1,s=null){x(this,jl,Promise.withResolvers());x(this,Ep,[]);x(this,Lp,[]);x(this,Mp,[]);x(this,Fp,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=s}addRangeListener(e){a(this,Fp).push(e)}addProgressListener(e){a(this,Mp).push(e)}addProgressiveReadListener(e){a(this,Lp).push(e)}addProgressiveDoneListener(e){a(this,Ep).push(e)}onDataRange(e,t){for(const n of a(this,Fp))n(e,t)}onDataProgress(e,t){a(this,jl).promise.then(()=>{for(const n of a(this,Mp))n(e,t)})}onDataProgressiveRead(e){a(this,jl).promise.then(()=>{for(const t of a(this,Lp))t(e)})}onDataProgressiveDone(){a(this,jl).promise.then(()=>{for(const e of a(this,Ep))e()})}transportReady(){a(this,jl).resolve()}requestDataRange(e,t){We("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}jl=new WeakMap,Ep=new WeakMap,Lp=new WeakMap,Mp=new WeakMap,Fp=new WeakMap;class eA{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ge(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Yr,Ol,Uu;class tA{constructor(e,t,n,s=!1){x(this,Ol);x(this,Yr,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=s?new Ab:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new Aw,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:r=!1}={}){return new km({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ge(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:s="display",annotationMode:r=aa.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:d=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:u=null,isEditing:f=!1,recordOperations:m=!1,operationsFilter:b=null}){var F,D,j;(F=this._stats)==null||F.time("Overall");const v=this._transport.getRenderingIntent(s,r,u,f),{renderingIntent:S,cacheKey:g}=v;p(this,Yr,!1),d||(d=this._transport.getOptionalContentConfig(S));let k=this._intentStates.get(g);k||(k=Object.create(null),this._intentStates.set(g,k)),k.streamReaderCancelTimeout&&(clearTimeout(k.streamReaderCancelTimeout),k.streamReaderCancelTimeout=null);const w=!!(S&Pi.PRINT);k.displayReadyCapability||(k.displayReadyCapability=Promise.withResolvers(),k.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(D=this._stats)==null||D.time("Page Request"),this._pumpOperatorList(v));const A=!!(this._pdfBug&&((j=globalThis.StepperManager)!=null&&j.enabled)),T=!this.recordedBBoxes&&(m||A),I=N=>{var ie,R;if(k.renderTasks.delete(C),T){const X=(ie=C.gfx)==null?void 0:ie.dependencyTracker.take();X&&(C.stepper&&C.stepper.setOperatorBBoxes(X,C.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=X))}w&&p(this,Yr,!0),_(this,Ol,Uu).call(this),N?(C.capability.reject(N),this._abortOperatorList({intentState:k,reason:N instanceof Error?N:new Error(N)})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(R=globalThis.Stats)!=null&&R.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new G2({callback:I,params:{canvas:t,canvasContext:e,dependencyTracker:T?new y7(t,k.operatorList.length,A):null,viewport:n,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:k.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:b});(k.renderTasks||(k.renderTasks=new Set)).add(C);const L=C.task;return Promise.all([k.displayReadyCapability.promise,d]).then(([N,ie])=>{var R;if(this.destroyed){I();return}if((R=this._stats)==null||R.time("Rendering"),!(ie.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:N,optionalContentConfig:ie}),C.operatorListChanged()}).catch(I),L}getOperatorList({intent:e="display",annotationMode:t=aa.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var c;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(d))}const o=this._transport.getRenderingIntent(e,t,n,s,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let d;return l.opListReadCapability||(d=Object.create(null),d.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(d),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Ef.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,s){function r(){o.read().then(function({value:d,done:c}){if(c){n(l);return}l.lang??(l.lang=d.lang),Object.assign(l.styles,d.styles),l.items.push(...d.items),r()},s)}const o=t.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),p(this,Yr,!1),Promise.all(e)}cleanup(e=!1){p(this,Yr,!0);const t=_(this,Ol,Uu).call(this);return e&&t&&this._stats&&(this._stats=new Ab),t}_startRenderPage(e,t){var s,r;const n=this._intentStates.get(t);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let n=0,s=e.length;n<s;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&_(this,Ol,Uu).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:s}){const{map:r,transfer:o}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:s},o).getReader(),c=this._intentStates.get(t);c.streamReader=d;const h=()=>{d.read().then(({value:u,done:f})=>{if(f){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,c),h())},u=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const f of c.renderTasks)f.operatorListChanged();_(this,Ol,Uu).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(u);else if(c.opListReadCapability)c.opListReadCapability.reject(u);else throw u}})};h()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof _1){let s=Z7;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new xa(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Yr=new WeakMap,Ol=new WeakSet,Uu=function(){if(!a(this,Yr)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),p(this,Yr,!1),!0};var to,ps,Ur,zl,G0,Bl,ql,Hn,Mg,Lw,Mw,Vu,uh,Fg;const at=class at{constructor({name:e=null,port:t=null,verbosity:n=X8()}={}){x(this,Hn);x(this,to,Promise.withResolvers());x(this,ps,null);x(this,Ur,null);x(this,zl,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(a(at,ql).has(t))throw new Error("Cannot use more than one PDFWorker per port.");a(at,ql).set(t,this),_(this,Hn,Lw).call(this,t)}else _(this,Hn,Mw).call(this)}get promise(){return a(this,to).promise}get port(){return a(this,Ur)}get messageHandler(){return a(this,ps)}destroy(){var e,t;this.destroyed=!0,(e=a(this,zl))==null||e.terminate(),p(this,zl,null),a(at,ql).delete(a(this,Ur)),p(this,Ur,null),(t=a(this,ps))==null||t.destroy(),p(this,ps,null)}static create(e){const t=a(this,ql).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new at(e)}static get workerSrc(){if(ws.workerSrc)return ws.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ge(this,"_setupFakeWorkerGlobal",(async()=>a(this,uh,Fg)?a(this,uh,Fg):(await import(this.workerSrc)).WorkerMessageHandler)())}};to=new WeakMap,ps=new WeakMap,Ur=new WeakMap,zl=new WeakMap,G0=new WeakMap,Bl=new WeakMap,ql=new WeakMap,Hn=new WeakSet,Mg=function(){a(this,to).resolve(),a(this,ps).send("configure",{verbosity:this.verbosity})},Lw=function(e){p(this,Ur,e),p(this,ps,new ju("main","worker",e)),a(this,ps).on("ready",()=>{}),_(this,Hn,Mg).call(this)},Mw=function(){if(a(at,Bl)||a(at,uh,Fg)){_(this,Hn,Vu).call(this);return}let{workerSrc:e}=at;try{at._isSameOrigin(window.location,e)||(e=at._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new ju("main","worker",t),s=()=>{r.abort(),n.destroy(),t.terminate(),this.destroyed?a(this,to).reject(new Error("Worker was destroyed")):_(this,Hn,Vu).call(this)},r=new AbortController;t.addEventListener("error",()=>{a(this,zl)||s()},{signal:r.signal}),n.on("test",l=>{if(r.abort(),this.destroyed||!l){s();return}p(this,ps,n),p(this,Ur,t),p(this,zl,t),_(this,Hn,Mg).call(this)}),n.on("ready",l=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{_(this,Hn,Vu).call(this)}});const o=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};o();return}catch{y1("The worker has been disabled.")}_(this,Hn,Vu).call(this)},Vu=function(){a(at,Bl)||(ue("Setting up fake worker."),p(at,Bl,!0)),at._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){a(this,to).reject(new Error("Worker was destroyed"));return}const t=new c7;p(this,Ur,t);const n=`fake${Ot(at,G0)._++}`,s=new ju(n+"_worker",n,t);e.setup(s,t),p(this,ps,new ju(n,n+"_worker",t)),_(this,Hn,Mg).call(this)}).catch(e=>{a(this,to).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},uh=new WeakSet,Fg=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},x(at,uh),x(at,G0,0),x(at,Bl,!1),x(at,ql,new WeakMap),Dn&&(p(at,Bl,!0),ws.workerSrc||(ws.workerSrc="./pdf.worker.mjs")),at._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const s=new URL(t,n);return n.origin===s.origin},at._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},at.fromPort=e=>{if(J8("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return at.create(e)};let nu=at;var Vr,Js,fh,ph,$r,Xl,$u;class nA{constructor(e,t,n,s,r,o){x(this,Xl);x(this,Vr,new Map);x(this,Js,new Map);x(this,fh,new Map);x(this,ph,new Map);x(this,$r,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Aw,this.fontLoader=new r7({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return ge(this,"annotationStorage",new Ry)}getRenderingIntent(e,t=aa.ENABLE,n=null,s=!1,r=!1){let o=Pi.DISPLAY,l=L2;switch(e){case"any":o=Pi.ANY;break;case"display":break;case"print":o=Pi.PRINT;break;default:ue(`getRenderingIntent - invalid intent: ${e}`)}const d=o&Pi.PRINT&&n instanceof lw?n:this.annotationStorage;switch(t){case aa.DISABLE:o+=Pi.ANNOTATIONS_DISABLE;break;case aa.ENABLE:break;case aa.ENABLE_FORMS:o+=Pi.ANNOTATIONS_FORMS;break;case aa.ENABLE_STORAGE:o+=Pi.ANNOTATIONS_STORAGE,l=d.serializable;break;default:ue(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(o+=Pi.IS_EDITING),r&&(o+=Pi.OPLIST);const{ids:c,hash:h}=d.modifiedIds,u=[o,l.hash,h];return{renderingIntent:o,cacheKey:u.join("_"),annotationStorageSerializable:l,modifiedIds:c}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=a(this,$r))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of a(this,Js).values())e.push(s._destroy());a(this,Js).clear(),a(this,fh).clear(),a(this,ph).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s,r;this.commonObjs.clear(),this.fontLoader.clear(),a(this,Vr).clear(),this.filterFactory.destroy(),tu.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new xa("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,s)=>{Ae(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){s.close();return}Ae(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async n=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:o}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=d=>{var c;(c=t.onProgress)==null||c.call(t,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:o}}),e.on("GetRangeReader",(n,s)=>{Ae(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:l}){if(l){s.close();return}Ae(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new eA(n,this))}),e.on("DocException",n=>{t._capability.reject(Xn(n))}),e.on("PasswordRequest",n=>{p(this,$r,Promise.withResolvers());try{if(!t.onPassword)throw Xn(n);const s=r=>{r instanceof Error?a(this,$r).reject(r):a(this,$r).resolve({password:r})};t.onPassword(s,n.code)}catch(s){a(this,$r).reject(s)}return a(this,$r).promise}),e.on("DataLoaded",n=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;a(this,Js).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,s,r])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":if("error"in r){const u=r.error;ue(`Error during font loading: ${u}`),this.commonObjs.resolve(n,u);break}const l=new q2(r),d=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(u,f)=>globalThis.FontInspector.fontAdded(u,f):null,c=new a7(l,d,r.extra,r.charProcOperatorList);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c.fontExtraProperties&&c.data&&c.clearData(),this.commonObjs.resolve(n,c)});break;case"CopyLocalImage":const{imageRef:h}=r;Ae(h,"The imageRef must be defined.");for(const u of a(this,Js).values())for(const[,f]of u.objs)if((f==null?void 0:f.ref)===h)return f.dataLen?(this.commonObjs.resolve(n,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([n,s,r,o])=>{var d;if(this.destroyed)return;const l=a(this,Js).get(s);if(!l.objs.has(n)){if(l._intentStates.size===0){(d=o==null?void 0:o.bitmap)==null||d.close();return}switch(r){case"Image":case"Pattern":l.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",n=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[n.type];if(!s)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&ue("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=a(this,fh).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&a(this,ph).set(r.refStr,e);const o=new tA(t,r,this,this._params.pdfBug);return a(this,Js).set(t,o),o});return a(this,fh).set(t,s),s}getPageIndex(e){return M2(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return _(this,Xl,$u).call(this,"GetFieldObjects")}hasJSActions(){return _(this,Xl,$u).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return _(this,Xl,$u).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return _(this,Xl,$u).call(this,"GetOptionalContentConfig").then(t=>new R7(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=a(this,Vr).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(s=>{var r,o;return{info:s[0],metadata:s[1]?new M7(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return a(this,Vr).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of a(this,Js).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),a(this,Vr).clear(),this.filterFactory.destroy(!0),tu.cleanup()}}cachedPageNumber(e){if(!M2(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return a(this,ph).get(t)??null}}Vr=new WeakMap,Js=new WeakMap,fh=new WeakMap,ph=new WeakMap,$r=new WeakMap,Xl=new WeakSet,$u=function(e,t=null){const n=a(this,Vr).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise(e,t);return a(this,Vr).set(e,s),s};var no;class iA{constructor(e){x(this,no,null);O(this,"onContinue",null);O(this,"onError",null);p(this,no,e)}get promise(){return a(this,no).capability.promise}cancel(e=0){a(this,no).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=a(this,no).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=a(this,no);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}no=new WeakMap;var io,Yl;const tl=class tl{constructor({callback:e,params:t,objs:n,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:l,canvasFactory:d,filterFactory:c,useRequestAnimationFrame:h=!1,pdfBug:u=!1,pageColors:f=null,enableHWA:m=!1,operationsFilter:b=null}){x(this,io,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=d,this.filterFactory=c,this._pdfBug=u,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new iA(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=m,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=b}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var d,c;if(this.cancelled)return;if(this._canvas){if(a(tl,Yl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(tl,Yl).add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)!=null&&d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:s,background:r,dependencyTracker:o}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new bc(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:s,viewport:n,transparency:e,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var n,s,r;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),a(this,io)&&(window.cancelAnimationFrame(a(this,io)),p(this,io,null)),a(tl,Yl).delete(this._canvas),e||(e=new _1(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(r=(s=this.task).onError)==null||r.call(s,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?p(this,io,window.requestAnimationFrame(()=>{p(this,io,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(tl,Yl).delete(this._canvas),this.callback())))}};io=new WeakMap,Yl=new WeakMap,x(tl,Yl,new WeakSet);let G2=tl;const Fw="5.4.296",Rw="f56dc8601";var pi,Ul,mh,Xt,Rp,gh,Gr,Dp,so,ms,Np,Ye,W2,K2,Q2,Ko,Dw,Pa;const Yn=class Yn{constructor({editor:e=null,uiManager:t=null}){x(this,Ye);x(this,pi,null);x(this,Ul,null);x(this,mh);x(this,Xt,null);x(this,Rp,!1);x(this,gh,!1);x(this,Gr,null);x(this,Dp);x(this,so,null);x(this,ms,null);var n,s;e?(p(this,gh,!1),p(this,Gr,e)):p(this,gh,!0),p(this,ms,(e==null?void 0:e._uiManager)||t),p(this,Dp,a(this,ms)._eventBus),p(this,mh,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((s=a(this,ms))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),a(Yn,Np)||p(Yn,Np,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ge(this,"_keyboardManager",new Sm([[["Escape","mac+Escape"],Yn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Yn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Yn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Yn.prototype._moveToPrevious],[["Home","mac+Home"],Yn.prototype._moveToBeginning],[["End","mac+End"],Yn.prototype._moveToEnd]]))}renderButton(){const e=p(this,pi,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",a(this,Gr)&&(e.ariaControls=`${a(this,Gr).id}_colorpicker_dropdown`);const t=a(this,ms)._signal;e.addEventListener("click",_(this,Ye,Ko).bind(this),{signal:t}),e.addEventListener("keydown",_(this,Ye,Q2).bind(this),{signal:t});const n=p(this,Ul,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=a(this,mh),e.append(n),e}renderMainDropdown(){const e=p(this,Xt,_(this,Ye,W2).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===a(this,pi)){_(this,Ye,Ko).call(this,e);return}const t=e.target.getAttribute("data-color");t&&_(this,Ye,K2).call(this,t,e)}_moveToNext(e){var t,n;if(!a(this,Ye,Pa)){_(this,Ye,Ko).call(this,e);return}if(e.target===a(this,pi)){(t=a(this,Xt).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=a(this,Xt))==null?void 0:t.firstChild)||e.target===a(this,pi)){a(this,Ye,Pa)&&this._hideDropdownFromKeyboard();return}a(this,Ye,Pa)||_(this,Ye,Ko).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!a(this,Ye,Pa)){_(this,Ye,Ko).call(this,e);return}(t=a(this,Xt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!a(this,Ye,Pa)){_(this,Ye,Ko).call(this,e);return}(t=a(this,Xt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=a(this,Xt))==null||e.classList.add("hidden"),a(this,pi).ariaExpanded="false",(t=a(this,so))==null||t.abort(),p(this,so,null)}_hideDropdownFromKeyboard(){var e;if(!a(this,gh)){if(!a(this,Ye,Pa)){(e=a(this,Gr))==null||e.unselect();return}this.hideDropdown(),a(this,pi).focus({preventScroll:!0,focusVisible:a(this,Rp)})}}updateColor(e){if(a(this,Ul)&&(a(this,Ul).style.backgroundColor=e),!a(this,Xt))return;const t=a(this,ms).highlightColors.values();for(const n of a(this,Xt).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=a(this,pi))==null||e.remove(),p(this,pi,null),p(this,Ul,null),(t=a(this,Xt))==null||t.remove(),p(this,Xt,null)}};pi=new WeakMap,Ul=new WeakMap,mh=new WeakMap,Xt=new WeakMap,Rp=new WeakMap,gh=new WeakMap,Gr=new WeakMap,Dp=new WeakMap,so=new WeakMap,ms=new WeakMap,Np=new WeakMap,Ye=new WeakSet,W2=function(){const e=document.createElement("div"),t=a(this,ms)._signal;e.addEventListener("contextmenu",Ri,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),a(this,Gr)&&(e.id=`${a(this,Gr).id}_colorpicker_dropdown`);for(const[n,s]of a(this,ms).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=n,r.setAttribute("data-l10n-id",a(Yn,Np)[n]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.ariaSelected=s===a(this,mh),r.addEventListener("click",_(this,Ye,K2).bind(this,s),{signal:t}),e.append(r)}return e.addEventListener("keydown",_(this,Ye,Q2).bind(this),{signal:t}),e},K2=function(e,t){t.stopPropagation(),a(this,Dp).dispatch("switchannotationeditorparams",{source:this,type:Se.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},Q2=function(e){Yn._keyboardManager.exec(this,e)},Ko=function(e){if(a(this,Ye,Pa)){this.hideDropdown();return}if(p(this,Rp,e.detail===0),a(this,so)||(p(this,so,new AbortController),window.addEventListener("pointerdown",_(this,Ye,Dw).bind(this),{signal:a(this,ms).combinedSignal(a(this,so))})),a(this,pi).ariaExpanded="true",a(this,Xt)){a(this,Xt).classList.remove("hidden");return}const t=p(this,Xt,_(this,Ye,W2).call(this));a(this,pi).append(t)},Dw=function(e){var t;(t=a(this,Xt))!=null&&t.contains(e.target)||this.hideDropdown()},Pa=function(){return a(this,Xt)&&!a(this,Xt).classList.contains("hidden")},x(Yn,Np,null);let Ff=Yn;var Zs,Hp,xh,jp;const nl=class nl{constructor(e){x(this,Zs,null);x(this,Hp,null);x(this,xh,null);p(this,Hp,e),p(this,xh,e._uiManager),a(nl,jp)||p(nl,jp,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(a(this,Zs))return a(this,Zs);const{editorType:e,colorType:t,colorValue:n}=a(this,Hp),s=p(this,Zs,document.createElement("input"));return s.type="color",s.value=n||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",a(nl,jp)[e]),s.addEventListener("input",()=>{a(this,xh).updateParams(t,s.value)},{signal:a(this,xh)._signal}),s}update(e){a(this,Zs)&&(a(this,Zs).value=e)}destroy(){var e;(e=a(this,Zs))==null||e.remove(),p(this,Zs,null)}hideDropdown(){}};Zs=new WeakMap,Hp=new WeakMap,xh=new WeakMap,jp=new WeakMap,x(nl,jp,null);let C0=nl;function $b(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Su(i){return Math.max(0,Math.min(255,255*i))}class Gb{static CMYK_G([e,t,n,s]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Su(e),[e,e,e]}static G_HTML([e]){const t=$b(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Su)}static RGB_HTML(e){return`#${e.map($b).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,n+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,n,s]){return[Su(1-Math.min(1,e+s)),Su(1-Math.min(1,n+s)),Su(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const s=1-e,r=1-t,o=1-n,l=Math.min(s,r,o);return["CMYK",s,r,o,l]}}class sA{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){We("Abstract method `_createSVG` called.")}}class Rf extends sA{_createSVG(e){return document.createElementNS(vr,e)}}const rA=9,Ad=new WeakSet,aA=new Date().getTimezoneOffset()*60*1e3;class Wb{static create(e){switch(e.data.annotationType){case It.LINK:return new jy(e);case It.TEXT:return new lA(e);case It.WIDGET:switch(e.data.fieldType){case"Tx":return new dA(e);case"Btn":return e.data.radioButton?new jw(e):e.data.checkBox?new hA(e):new uA(e);case"Ch":return new fA(e);case"Sig":return new cA(e)}return new Cd(e);case It.POPUP:return new Z2(e);case It.FREETEXT:return new Xw(e);case It.LINE:return new mA(e);case It.SQUARE:return new gA(e);case It.CIRCLE:return new xA(e);case It.POLYLINE:return new Yw(e);case It.CARET:return new yA(e);case It.INK:return new Oy(e);case It.POLYGON:return new vA(e);case It.HIGHLIGHT:return new Uw(e);case It.UNDERLINE:return new _A(e);case It.SQUIGGLY:return new bA(e);case It.STRIKEOUT:return new kA(e);case It.STAMP:return new Vw(e);case It.FILEATTACHMENT:return new wA(e);default:return new gt(e)}}}var Vl,vh,Gi,Op,J2;const $y=class $y{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){x(this,Op);x(this,Vl,null);x(this,vh,!1);x(this,Gi,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return $y._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:e}=this,t=(n=this.annotationStorage)==null?void 0:n.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var l;const e=(l=this.annotationStorage)==null?void 0:l.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:s}=this.data;let r=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let d=0;d<t.length;d+=8)t[d+1]>o?(o=t[d+1],r=t[d+2]):t[d+1]===o&&(r=Math.max(r,t[d+2]));return[r,o]}if((n==null?void 0:n.length)>=1){for(const d of n)for(let c=0,h=d.length;c<h;c+=2)d[c+1]>o?(o=d[c+1],r=d[c]):d[c+1]===o&&(r=Math.max(r,d[c]));if(r!==1/0)return[r,o]}return s?[s[2],s[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-r)/n,e[1]=100*(e[1]-o)/s,e}get commentText(){var t,n,s;const{data:e}=this;return((n=(t=this.annotationStorage.getRawValue(`${If}${e.id}`))==null?void 0:t.popup)==null?void 0:n.contents)||((s=e.contentsObj)==null?void 0:s.str)||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${If}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=a(this,Gi))==null?void 0:e.popup)||this.popup)==null||t.remove(),p(this,Gi,this.popup=null)}updateEdited(e){var r;if(!this.container)return;e.rect&&(a(this,Vl)||p(this,Vl,{rect:this.data.rect.slice(0)}));const{rect:t,popup:n}=e;t&&_(this,Op,J2).call(this,t);let s=((r=a(this,Gi))==null?void 0:r.popup)||this.popup;!s&&(n!=null&&n.text)&&(this._createPopup(n),s=a(this,Gi).popup),s&&(s.updateEdited(e),n!=null&&n.deleted&&(s.remove(),p(this,Gi,null),this.popup=null))}resetEdited(){var e;a(this,Vl)&&(_(this,Op,J2).call(this,a(this,Vl).rect),(e=a(this,Gi))==null||e.popup.resetEdited(),p(this,Vl,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),!(this instanceof Cd)&&!(this instanceof jy)&&(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof Z2){const{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,r),r}const{width:l,height:d}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const v=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(v>0||S>0){const k=`calc(${v}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;o.borderRadius=k}else if(this instanceof jw){const k=`calc(${l}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;o.borderRadius=k}switch(t.borderStyle.style){case Xd.SOLID:o.borderStyle="solid";break;case Xd.DASHED:o.borderStyle="dashed";break;case Xd.BEVELED:ue("Unimplemented border style: beveled");break;case Xd.INSET:ue("Unimplemented border style: inset");break;case Xd.UNDERLINE:o.borderBottomStyle="solid";break}const g=t.borderColor||null;g?(p(this,vh,!0),o.borderColor=ee.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):o.borderWidth=0}const c=ee.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:h,pageHeight:u,pageX:f,pageY:m}=s.rawDims;o.left=`${100*(c[0]-f)/h}%`,o.top=`${100*(c[1]-m)/u}%`;const{rotation:b}=t;return t.hasOwnCanvas||b===0?(o.width=`${100*l/h}%`,o.height=`${100*d/u}%`):this.setRotation(b,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims;let{width:r,height:o}=this;e%180!==0&&([r,o]=[o,r]),t.style.width=`${100*r/n}%`,t.style.height=`${100*o/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,s)=>{const r=s.detail[t],o=r[0],l=r.slice(1);s.target.style[n]=Gb[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:Gb[`${o}_rgb`](l)})};return ge(this,"_commonActions",{display:t=>{const{display:n}=t.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const s of Object.keys(t.detail)){const r=e[s]||n[s];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[s,r]of Object.entries(t)){const o=n[s];if(o){const l={detail:{[s]:r},target:e};o(l),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,s,r]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,S,g,k]=e.subarray(2,6);if(s===v&&r===S&&t===g&&n===k)return}const{style:o}=this.container;let l;if(a(this,vh)){const{borderColor:v,borderWidth:S}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const d=s-t,c=r-n,{svgFactory:h}=this,u=h.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0),u.role="none";const f=h.createElement("defs");u.append(f);const m=h.createElement("clipPath"),b=`clippath_${this.data.id}`;m.setAttribute("id",b),m.setAttribute("clipPathUnits","objectBoundingBox"),f.append(m);for(let v=2,S=e.length;v<S;v+=8){const g=e[v],k=e[v+1],w=e[v+2],A=e[v+3],T=h.createElement("rect"),I=(w-t)/d,C=(r-k)/c,L=(g-w)/d,F=(k-A)/c;T.setAttribute("x",I),T.setAttribute("y",C),T.setAttribute("width",L),T.setAttribute("height",F),m.append(T),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${C}" width="${L}" height="${F}"/>`)}a(this,vh)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(u),this.container.style.clipPath=`url(#${b})`}_createPopup(e=null){const{data:t}=this;let n,s;e?(n={str:e.text},s=e.date):(n=t.contentsObj,s=t.modificationDate);const r=p(this,Gi,new Z2({data:{color:t.color,titleObj:t.titleObj,modificationDate:s,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(r.render())}get hasPopupElement(){return!!(a(this,Gi)||this.popup||this.data.popupRef)}get extraPopupElement(){return a(this,Gi)}render(){We("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:r,id:o,exportValues:l}of s){if(r===-1||o===t)continue;const d=typeof l=="string"?l:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!Ad.has(c)){ue(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:d,domElement:c})}return n}for(const s of document.getElementsByName(e)){const{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==t&&Ad.has(s)&&n.push({id:o,exportValue:r,domElement:s})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Vl=new WeakMap,vh=new WeakMap,Gi=new WeakMap,Op=new WeakSet,J2=function(e){const{container:{style:t},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:d}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-l)/r}%`,t.top=`${100*(o-e[3]+d)/o}%`,s===0?(t.width=`${100*(e[2]-e[0])/r}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(s)};let gt=$y;class oA extends gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var Ci,Qo,Nw,Hw;class jy extends gt{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});x(this,Ci);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(n.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),r=!0):t.attachment?(_(this,Ci,Nw).call(this,s,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(_(this,Ci,Hw).call(this,s,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(t,n,s=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&_(this,Ci,Qo).call(this),s&&(t.title=s)}_bindNamedAction(t,n,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),s&&(t.title=s),_(this,Ci,Qo).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const o=s.get(r);o&&(t[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),_(this,Ci,Qo).call(this)}_bindResetFormAction(t,n){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),_(this,Ci,Qo).call(this),!this._fieldObjects){ue('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var u;s==null||s();const{fields:r,refs:o,include:l}=n,d=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const m of r){const b=this._fieldObjects[m]||[];for(const{id:v}of b)f.add(v)}for(const m of Object.values(this._fieldObjects))for(const b of m)f.has(b.id)===l&&d.push(b)}else for(const f of Object.values(this._fieldObjects))d.push(...f);const c=this.annotationStorage,h=[];for(const f of d){const{id:m}=f;switch(h.push(m),f.type){case"text":{const v=f.defaultValue||"";c.setValue(m,{value:v});break}case"checkbox":case"radiobutton":{const v=f.defaultValue===f.exportValues;c.setValue(m,{value:v});break}case"combobox":case"listbox":{const v=f.defaultValue||"";c.setValue(m,{value:v});break}default:continue}const b=document.querySelector(`[data-element-id="${m}"]`);if(b){if(!Ad.has(b)){ue(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Ci=new WeakSet,Qo=function(){this.container.setAttribute("data-internal-link","")},Nw=function(t,n,s="",r=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:s&&(t.title=s),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,r),!1},_(this,Ci,Qo).call(this)},Hw=function(t,n,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),s&&(t.title=s),_(this,Ci,Qo).call(this)};class lA extends gt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Cd extends gt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return sn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,s,r){n.includes("mouse")?e.addEventListener(n,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(n,o=>{var l;if(n==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}}))})}_setEventListeners(e,t,n,s){var r,o,l;for(const[d,c]of n)(c==="Action"||(r=this.data.actions)!=null&&r[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,c,s),c==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ee.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||rA,r=e.style;let o;const l=2,d=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(c/(rx*s))||1,u=c/h;o=Math.min(s,d(u/rx))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(s,d(c/rx))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=ee.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class dA extends Cd{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,s){const r=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=n),r.setValue(o.id,{[s]:n})}render(){var s,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let l=o.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&l.length>d&&(l=l.slice(0,d));let c=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=c??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",c??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Ad.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:u,datetimeType:f,timeStep:m}=this.data,b=!!f&&this.enableScripting;u&&(n.title=u),this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",S=>{e.setValue(t,{value:S.target.value}),this.setPropertyOnSiblings(n,"value",S.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",S=>{const g=this.data.defaultFieldValue??"";n.value=h.userValue=g,h.formattedValue=null});let v=S=>{const{formattedValue:g}=h;g!=null&&(S.target.value=g),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",g=>{var w;if(h.focused)return;const{target:k}=g;if(b&&(k.type=f,m&&(k.step=m)),h.userValue){const A=h.userValue;if(b)if(f==="time"){const T=new Date(A),I=[T.getHours(),T.getMinutes(),T.getSeconds()];k.value=I.map(C=>C.toString().padStart(2,"0")).join(":")}else k.value=new Date(A-aA).toISOString().split(f==="date"?"T":".",1)[0];else k.value=A}h.lastCommittedValue=k.value,h.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const k={value(w){h.userValue=w.detail.value??"",b||e.setValue(t,{value:h.userValue.toString()}),w.target.value=h.userValue},formattedValue(w){const{formattedValue:A}=w.detail;h.formattedValue=A,A!=null&&w.target!==document.activeElement&&(w.target.value=A);const T={formattedValue:A};b&&(T.value=A),e.setValue(t,T)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var C;const{charLimit:A}=w.detail,{target:T}=w;if(A===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",A);let I=h.userValue;!I||I.length<=A||(I=I.slice(0,A),T.value=h.userValue=I,e.setValue(t,{value:I}),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:I,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(k,g)}),n.addEventListener("keydown",g=>{var A;h.commitKey=1;let k=-1;if(g.key==="Escape"?k=0:g.key==="Enter"&&!this.data.multiLine?k=2:g.key==="Tab"&&(h.commitKey=3),k===-1)return;const{value:w}=g.target;h.lastCommittedValue!==w&&(h.lastCommittedValue=w,h.userValue=w,(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:k,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const S=v;v=null,n.addEventListener("blur",g=>{var A,T;if(!h.focused||!g.relatedTarget)return;(A=this.data.actions)!=null&&A.Blur||(h.focused=!1);const{target:k}=g;let{value:w}=k;if(b){if(w&&f==="time"){const I=w.split(":").map(C=>parseInt(C,10));w=new Date(2e3,0,1,I[0],I[1],I[2]||0).valueOf(),k.step=""}else w.includes("T")||(w=`${w}T00:00`),w=new Date(w).valueOf();k.type="text"}h.userValue=w,h.lastCommittedValue!==w&&((T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:h.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),S(g)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",g=>{var F;h.lastCommittedValue=null;const{data:k,target:w}=g,{value:A,selectionStart:T,selectionEnd:I}=w;let C=T,L=I;switch(g.inputType){case"deleteWordBackward":{const D=A.substring(0,T).match(/\w*[^\w]*$/);D&&(C-=D[0].length);break}case"deleteWordForward":{const D=A.substring(T).match(/^[^\w]*\w*/);D&&(L+=D[0].length);break}case"deleteContentBackward":T===I&&(C-=1);break;case"deleteContentForward":T===I&&(L+=1);break}g.preventDefault(),(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,change:k||"",willCommit:!1,selStart:C,selEnd:L}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(v&&n.addEventListener("blur",v),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class cA extends Cd{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class hA extends Cd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Ad.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:l,checked:d}=o.target;for(const c of this._getElementsByName(l,n)){const h=d&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=h),e.setValue(c.id,{value:h})}e.setValue(n,{value:d})}),r.addEventListener("resetform",o=>{const l=t.defaultFieldValue||"Off";o.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const l={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class jw extends Cd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(n,{value:s})),s)for(const o of this._getElementsByName(t.fieldName,n))e.setValue(o.id,{value:!1});const r=document.createElement("input");if(Ad.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:l,checked:d}=o.target;for(const c of this._getElementsByName(l,n))e.setValue(c.id,{value:!1});e.setValue(n,{value:d})}),r.addEventListener("resetform",o=>{const l=t.defaultFieldValue;o.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;r.addEventListener("updatefromsandbox",l=>{const d={value:c=>{const h=o===c.detail.value;for(const u of this._getElementsByName(c.target.name)){const f=h&&u.id===n;u.domElement&&(u.domElement.checked=f),e.setValue(u.id,{value:f})}}};this._dispatchEventFromSandbox(d,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class uA extends jy{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class fA extends Cd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Ad.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const u=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===u});for(const h of this.data.options){const u=document.createElement("option");u.textContent=h.displayValue,u.value=h.exportValue,n.value.includes(h.exportValue)&&(u.setAttribute("selected",!0),r=!1),s.append(u)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),o=()=>{h.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const l=h=>{const u=h?"value":"textContent",{options:f,multiple:m}=s;return m?Array.prototype.filter.call(f,b=>b.selected).map(b=>b[u]):f.selectedIndex===-1?null:f[f.selectedIndex][u]};let d=l(!1);const c=h=>{const u=h.target.options;return Array.prototype.map.call(u,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const u={value(f){o==null||o();const m=f.detail.value,b=new Set(Array.isArray(m)?m:[m]);for(const v of s.options)v.selected=b.has(v.value);e.setValue(t,{value:l(!0)}),d=l(!1)},multipleSelection(f){s.multiple=!0},remove(f){const m=s.options,b=f.detail.remove;m[b].selected=!1,s.remove(b),m.length>0&&Array.prototype.findIndex.call(m,S=>S.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:l(!0),items:c(f)}),d=l(!1)},clear(f){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),d=l(!1)},insert(f){const{index:m,displayValue:b,exportValue:v}=f.detail.insert,S=s.children[m],g=document.createElement("option");g.textContent=b,g.value=v,S?S.before(g):s.append(g),e.setValue(t,{value:l(!0),items:c(f)}),d=l(!1)},items(f){const{items:m}=f.detail;for(;s.length!==0;)s.remove(0);for(const b of m){const{displayValue:v,exportValue:S}=b,g=document.createElement("option");g.textContent=v,g.value=S,s.append(g)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:l(!0),items:c(f)}),d=l(!1)},indices(f){const m=new Set(f.detail.indices);for(const b of f.target.options)b.selected=m.has(b.index);e.setValue(t,{value:l(!0)}),d=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(u,h)}),s.addEventListener("input",h=>{var m;const u=l(!0),f=l(!1);e.setValue(t,{value:u}),h.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:f,changeEx:u,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}var zp,ev;class Z2 extends gt{constructor(t){const{data:n,elements:s,parent:r}=t,o=!!r._commentManager;super(t,{isRenderable:!o&&gt._hasPopupData(n)});x(this,zp);if(this.elements=s,o&&gt._hasPopupData(n)){const l=this.popup=_(this,zp,ev).call(this);for(const d of s)d.popup=l}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const n=this.popup=_(this,zp,ev).call(this),s=[];for(const r of this.elements)r.popup=n,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${Ly}${r}`).join(",")),this.container}}zp=new WeakSet,ev=function(){return new pA({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var mi,ro,W0,K0,yh,_h,wt,er,ao,$l,bh,kh,tr,gi,Wr,Kr,Wt,Qr,oo,Bp,Jr,wh,Gl,lo,Sn,co,ve,Rg,tv,nv,iv,Dg,sv,Ow,zw,Bw,qw,Ng,Hg,rv;class pA{constructor({container:e,color:t,elements:n,titleObj:s,modificationDate:r,contentsObj:o,richText:l,parent:d,rect:c,parentRect:h,open:u,commentManager:f=null}){x(this,ve);x(this,mi,null);x(this,ro,_(this,ve,Bw).bind(this));x(this,W0,_(this,ve,rv).bind(this));x(this,K0,_(this,ve,Hg).bind(this));x(this,yh,_(this,ve,Ng).bind(this));x(this,_h,null);x(this,wt,null);x(this,er,null);x(this,ao,null);x(this,$l,null);x(this,bh,null);x(this,kh,null);x(this,tr,!1);x(this,gi,null);x(this,Wr,null);x(this,Kr,null);x(this,Wt,null);x(this,Qr,null);x(this,oo,null);x(this,Bp,null);x(this,Jr,null);x(this,wh,null);x(this,Gl,null);x(this,lo,!1);x(this,Sn,null);x(this,co,null);p(this,wt,e),p(this,wh,s),p(this,er,o),p(this,Jr,l),p(this,bh,d),p(this,_h,t),p(this,Bp,c),p(this,kh,h),p(this,$l,n),p(this,mi,f),p(this,Sn,n[0]),p(this,ao,Lf.toDateObject(r)),this.trigger=n.flatMap(m=>m.getElementsToTriggerPopup()),f?this.renderCommentButton():(_(this,ve,Rg).call(this),a(this,wt).hidden=!0,u&&_(this,ve,Ng).call(this))}renderCommentButton(){if(a(this,Wt)||(a(this,Qr)||_(this,ve,tv).call(this),!a(this,Qr)))return;const{signal:e}=p(this,Wr,new AbortController),t=!!a(this,Sn).extraPopupElement,n=()=>{a(this,mi).toggleCommentPopup(this,!0,void 0,!t)},s=()=>{a(this,mi).toggleCommentPopup(this,!1,!0,!t)},r=()=>{a(this,mi).toggleCommentPopup(this,!1,!1)};if(t){p(this,Wt,a(this,Sn).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",a(this,ro),{signal:e}),o.addEventListener("click",n,{signal:e}),o.addEventListener("pointerenter",s,{signal:e}),o.addEventListener("pointerleave",r,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=p(this,Wt,document.createElement("button"));o.className="annotationCommentButton";const l=a(this,Sn).container;o.style.zIndex=l.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),_(this,ve,iv).call(this),_(this,ve,nv).call(this),o.addEventListener("keydown",a(this,ro),{signal:e}),o.addEventListener("click",n,{signal:e}),o.addEventListener("pointerenter",s,{signal:e}),o.addEventListener("pointerleave",r,{signal:e}),l.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=a(this,Sn).commentData;return e?a(this,bh)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=a(this,Wt))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:s,modificationDate:r}=a(this,Sn).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:s,modificationDate:r}}get elementBeforePopup(){return a(this,Wt)}get comment(){return a(this,co)||p(this,co,a(this,Sn).commentText),a(this,co)}set comment(e){e!==this.comment&&(a(this,Sn).commentText=p(this,co,e))}get parentBoundingClientRect(){return a(this,Sn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){a(this,Wt)&&(a(this,Wt).classList.toggle("selected",e),a(this,Wt).ariaExpanded=t)}setSelectedCommentButton(e){a(this,Wt).classList.toggle("selected",e)}get commentPopupPosition(){if(a(this,oo))return a(this,oo);const{x:e,y:t,height:n}=a(this,Wt).getBoundingClientRect(),{x:s,y:r,width:o,height:l}=a(this,Sn).layer.getBoundingClientRect();return[(e-s)/o,(t+n-r)/l]}set commentPopupPosition(e){p(this,oo,e)}hasDefaultPopupPosition(){return a(this,oo)===null}get commentButtonPosition(){return a(this,Qr)}get commentButtonWidth(){return a(this,Wt).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=a(this,oo)||this.commentButtonPosition.map(c=>c/100),s=this.parentBoundingClientRect,{x:r,y:o,width:l,height:d}=s;a(this,mi).showDialog(null,this,r+t*l,o+n*d,{...e,parentDimensions:s})}render(){var n,s;if(a(this,gi))return;const e=p(this,gi,document.createElement("div"));if(e.className="popup",a(this,_h)){const r=e.style.outlineColor=ee.makeHexColor(...a(this,_h));e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const t=document.createElement("span");if(t.className="header",(n=a(this,wh))!=null&&n.str){const r=document.createElement("span");r.className="title",t.append(r),{dir:r.dir,str:r.textContent}=a(this,wh)}if(e.append(t),a(this,ao)){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,ao).valueOf()})),r.dateTime=a(this,ao).toISOString(),t.append(r)}Fy({html:a(this,ve,Dg)||a(this,er).str,dir:(s=a(this,er))==null?void 0:s.dir,className:"popupContent"},e),a(this,wt).append(e)}updateEdited({rect:e,popup:t,deleted:n}){var s;if(a(this,mi)){n?(this.remove(),p(this,co,null)):t&&(t.deleted?this.remove():(_(this,ve,iv).call(this),p(this,co,t.text))),e&&(p(this,Qr,null),_(this,ve,tv).call(this),_(this,ve,nv).call(this));return}if(n||t!=null&&t.deleted){this.remove();return}_(this,ve,Rg).call(this),a(this,Gl)||p(this,Gl,{contentsObj:a(this,er),richText:a(this,Jr)}),e&&p(this,Kr,null),t&&t.text&&(p(this,Jr,_(this,ve,zw).call(this,t.text)),p(this,ao,Lf.toDateObject(t.date)),p(this,er,null)),(s=a(this,gi))==null||s.remove(),p(this,gi,null)}resetEdited(){var e;a(this,Gl)&&({contentsObj:Ot(this,er)._,richText:Ot(this,Jr)._}=a(this,Gl),p(this,Gl,null),(e=a(this,gi))==null||e.remove(),p(this,gi,null),p(this,Kr,null))}remove(){var e,t,n;if((e=a(this,Wr))==null||e.abort(),p(this,Wr,null),(t=a(this,gi))==null||t.remove(),p(this,gi,null),p(this,lo,!1),p(this,tr,!1),(n=a(this,Wt))==null||n.remove(),p(this,Wt,null),this.trigger)for(const s of this.trigger)s.classList.remove("popupTriggerArea")}forceHide(){p(this,lo,this.isVisible),a(this,lo)&&(a(this,wt).hidden=!0)}maybeShow(){a(this,mi)||(_(this,ve,Rg).call(this),a(this,lo)&&(a(this,gi)||_(this,ve,Hg).call(this),p(this,lo,!1),a(this,wt).hidden=!1))}get isVisible(){return a(this,mi)?!1:a(this,wt).hidden===!1}}mi=new WeakMap,ro=new WeakMap,W0=new WeakMap,K0=new WeakMap,yh=new WeakMap,_h=new WeakMap,wt=new WeakMap,er=new WeakMap,ao=new WeakMap,$l=new WeakMap,bh=new WeakMap,kh=new WeakMap,tr=new WeakMap,gi=new WeakMap,Wr=new WeakMap,Kr=new WeakMap,Wt=new WeakMap,Qr=new WeakMap,oo=new WeakMap,Bp=new WeakMap,Jr=new WeakMap,wh=new WeakMap,Gl=new WeakMap,lo=new WeakMap,Sn=new WeakMap,co=new WeakMap,ve=new WeakSet,Rg=function(){var t;if(a(this,Wr))return;p(this,Wr,new AbortController);const{signal:e}=a(this,Wr);for(const n of this.trigger)n.addEventListener("click",a(this,yh),{signal:e}),n.addEventListener("pointerenter",a(this,K0),{signal:e}),n.addEventListener("pointerleave",a(this,W0),{signal:e}),n.classList.add("popupTriggerArea");for(const n of a(this,$l))(t=n.container)==null||t.addEventListener("keydown",a(this,ro),{signal:e})},tv=function(){const e=a(this,$l).find(t=>t.hasCommentButton);e&&p(this,Qr,e._normalizePoint(e.commentButtonPosition))},nv=function(){if(a(this,Sn).extraPopupElement&&!a(this,Sn).editor)return;this.renderCommentButton();const[e,t]=a(this,Qr),{style:n}=a(this,Wt);n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`},iv=function(){a(this,Sn).extraPopupElement||(this.renderCommentButton(),a(this,Wt).style.backgroundColor=this.commentButtonColor||"")},Dg=function(){const e=a(this,Jr),t=a(this,er);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&a(this,Jr).html||null},sv=function(){var e,t,n;return((n=(t=(e=a(this,ve,Dg))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},Ow=function(){var e,t,n;return((n=(t=(e=a(this,ve,Dg))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},zw=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:a(this,ve,Ow),fontSize:a(this,ve,sv)?`calc(${a(this,ve,sv)}px * var(--total-scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:s});return n},Bw=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&a(this,tr))&&_(this,ve,Ng).call(this)},qw=function(){if(a(this,Kr)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:s,pageY:r}}}=a(this,bh);let o=!!a(this,kh),l=o?a(this,kh):a(this,Bp);for(const b of a(this,$l))if(!l||ee.intersect(b.data.rect,l)!==null){l=b.data.rect,o=!0;break}const d=ee.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),h=o?l[2]-l[0]+5:0,u=d[0]+h,f=d[1];p(this,Kr,[100*(u-s)/t,100*(f-r)/n]);const{style:m}=a(this,wt);m.left=`${a(this,Kr)[0]}%`,m.top=`${a(this,Kr)[1]}%`},Ng=function(){if(a(this,mi)){a(this,mi).toggleCommentPopup(this,!1);return}p(this,tr,!a(this,tr)),a(this,tr)?(_(this,ve,Hg).call(this),a(this,wt).addEventListener("click",a(this,yh)),a(this,wt).addEventListener("keydown",a(this,ro))):(_(this,ve,rv).call(this),a(this,wt).removeEventListener("click",a(this,yh)),a(this,wt).removeEventListener("keydown",a(this,ro)))},Hg=function(){a(this,gi)||this.render(),this.isVisible?a(this,tr)&&a(this,wt).classList.add("focused"):(_(this,ve,qw).call(this),a(this,wt).hidden=!1,a(this,wt).style.zIndex=parseInt(a(this,wt).style.zIndex)+1e3)},rv=function(){a(this,wt).classList.remove("focused"),!(a(this,tr)||!this.isVisible)&&(a(this,wt).hidden=!0,a(this,wt).style.zIndex=parseInt(a(this,wt).style.zIndex)-1e3)};class Xw extends gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=he.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var qp;class mA extends gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,qp,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),o=p(this,qp,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,qp)}addHighlightArea(){this.container.classList.add("highlightArea")}}qp=new WeakMap;var Xp;class gA extends gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,Xp,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),o=t.borderStyle.width,l=p(this,Xp,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",n-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Xp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xp=new WeakMap;var Yp;class xA extends gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,Yp,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),o=t.borderStyle.width,l=p(this,Yp,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",s/2),l.setAttribute("rx",n/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Yp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yp=new WeakMap;var Up;class Yw extends gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,Up,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:s,popupRef:r},width:o,height:l}=this;if(!n)return this.container;const d=this.svgFactory.create(o,l,!0);let c=[];for(let u=0,f=n.length;u<f;u+=2){const m=n[u]-t[0],b=t[3]-n[u+1];c.push(`${m},${b}`)}c=c.join(" ");const h=p(this,Up,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",c),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),d.append(h),this.container.append(d),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Up)}addHighlightArea(){this.container.classList.add("highlightArea")}}Up=new WeakMap;class vA extends Yw{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class yA extends gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Vp,Wl,$p,av;class Oy extends gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,$p);x(this,Vp,null);x(this,Wl,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?he.HIGHLIGHT:he.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:l,width:d,height:c}=_(this,$p,av).call(this,n,t),h=this.svgFactory.create(d,c,!0),u=p(this,Vp,this.svgFactory.createElement("svg:g"));h.append(u),u.setAttribute("stroke-width",r.width||1),u.setAttribute("stroke-linecap","round"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit",10),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),u.setAttribute("transform",l);for(let f=0,m=s.length;f<m;f++){const b=this.svgFactory.createElement(this.svgElementName);a(this,Wl).push(b),b.setAttribute("points",s[f].join(",")),u.append(b)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:s,rect:r}=t,o=a(this,Vp);if(n>=0&&o.setAttribute("stroke-width",n||1),s)for(let l=0,d=a(this,Wl).length;l<d;l++)a(this,Wl)[l].setAttribute("points",s[l].join(","));if(r){const{transform:l,width:d,height:c}=_(this,$p,av).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${d} ${c}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return a(this,Wl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vp=new WeakMap,Wl=new WeakMap,$p=new WeakSet,av=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class Uw extends gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=he.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class _A extends gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class bA extends gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class kA extends gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class Vw extends gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=he.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Gp,Wp,ov;class wA extends gt{constructor(t){var s;super(t,{isRenderable:!0});x(this,Wp);x(this,Gp,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",_(this,Wp,ov).bind(this)),p(this,Gp,s);const{isMac:r}=sn.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&_(this,Wp,ov).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return a(this,Gp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gp=new WeakMap,Wp=new WeakSet,ov=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Sh,Kl,Ah,ho,Kp,Ql,Bo,lv,dv;const Gy=class Gy{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:s,page:r,viewport:o,structTreeLayer:l,commentManager:d,linkService:c,annotationStorage:h}){x(this,Bo);x(this,Sh,null);x(this,Kl,null);x(this,Ah,null);x(this,ho,new Map);x(this,Kp,null);x(this,Ql,null);this.div=e,p(this,Sh,t),p(this,Kl,n),p(this,Kp,l||null),p(this,Ql,c||null),p(this,Ah,h||new Ry),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=d||null}hasEditableAnnotations(){return a(this,ho).size>0}async render(e){var o,l,d;const{annotations:t}=e,n=this.div;jo(n,this.viewport);const s=new Map,r={data:null,layer:n,linkService:a(this,Ql),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Rf,annotationStorage:a(this,Ah),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const c of t){if(c.noHTML)continue;const h=c.annotationType===It.POPUP;if(h){const m=s.get(c.id);if(!m)continue;r.elements=m}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;r.data=c;const u=Wb.create(r);if(!u.isRenderable)continue;if(!h&&c.popupRef){const m=s.get(c.popupRef);m?m.push(u):s.set(c.popupRef,[u])}const f=u.render();c.hidden&&(f.style.visibility="hidden"),await _(this,Bo,lv).call(this,f,c.id,r.elements),(l=(o=u.extraPopupElement)==null?void 0:o.popup)==null||l.renderCommentButton(),u._isEditable&&(a(this,ho).set(u.data.id,u),(d=this._annotationEditorUIManager)==null||d.renderAnnotationElement(u))}_(this,Bo,dv).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:a(this,Ql),svgFactory:new Rf,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=Gy._defaultBorderStyle),t.data=n;const s=Wb.create(t);if(!s.isRenderable)continue;const r=s.render();await _(this,Bo,lv).call(this,r,n.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,jo(t,{rotation:e.rotation}),_(this,Bo,dv).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(a(this,ho).values())}getEditableAnnotation(e){return a(this,ho).get(e)}addFakeAnnotation(e){var l;const{div:t}=this,{id:n,rotation:s}=e,r=new oA({data:{id:n,rect:e.getPDFRect(),rotation:s},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:a(this,Ql),annotationStorage:a(this,Ah)}),o=r.render();return t.append(o),(l=a(this,Sh))==null||l.moveElementInDOM(t,o,o,!1),r.createOrUpdatePopup(),r}static get _defaultBorderStyle(){return ge(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Xd.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Sh=new WeakMap,Kl=new WeakMap,Ah=new WeakMap,ho=new WeakMap,Kp=new WeakMap,Ql=new WeakMap,Bo=new WeakSet,lv=async function(e,t,n){var l,d;const s=e.firstChild||e,r=s.id=`${Ly}${t}`,o=await((l=a(this,Kp))==null?void 0:l.getAriaAttributes(r));if(o)for(const[c,h]of o)s.setAttribute(c,h);n?n.at(-1).container.after(e):(this.div.append(e),(d=a(this,Sh))==null||d.moveElementInDOM(this.div,e,s,!1))},dv=function(){var t;if(!a(this,Kl))return;const e=this.div;for(const[n,s]of a(this,Kl)){const r=e.querySelector(`[data-annotation-id="${n}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const l=a(this,ho).get(n);l&&(l._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,r.id,s),l._hasNoCanvas=!1):l.canvas=s)}a(this,Kl).clear()};let E0=Gy;const ag=/\r\n?|\n/g;var xi,Qp,Jl,vi,jt,$w,Gw,Ww,jg,ua,Og,zg,Kw,hv,Qw;const nt=class nt extends Ze{constructor(t){super({...t,name:"freeTextEditor"});x(this,jt);x(this,xi,"");x(this,Qp,`${this.id}-editor`);x(this,Jl,null);x(this,vi);O(this,"_colorPicker",null);this.color=t.color||nt._defaultColor||Ze._defaultLineColor,p(this,vi,t.fontSize||nt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=nt.prototype,n=o=>o.isEmpty(),s=Oo.TRANSLATE_SMALL,r=Oo.TRANSLATE_BIG;return ge(this,"_keyboardManager",new Sm([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(t,n){Ze.initialize(t,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Se.FREETEXT_SIZE:nt._defaultFontSize=n;break;case Se.FREETEXT_COLOR:nt._defaultColor=n;break}}updateParams(t,n){switch(t){case Se.FREETEXT_SIZE:_(this,jt,$w).call(this,n);break;case Se.FREETEXT_COLOR:_(this,jt,Gw).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Se.FREETEXT_SIZE,nt._defaultFontSize],[Se.FREETEXT_COLOR,nt._defaultColor||Ze._defaultLineColor]]}get propertiesToUpdate(){return[[Se.FREETEXT_SIZE,a(this,vi)],[Se.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new C0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Se.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-nt._internalPadding*t,-(nt._internalPadding+a(this,vi))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),p(this,Jl,new AbortController);const t=this._uiManager.combinedSignal(a(this,Jl));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,Qp)),this._isDraggable=!0,(t=a(this,Jl))==null||t.abort(),p(this,Jl,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=a(this,xi),n=p(this,xi,_(this,jt,Ww).call(this).trimEnd());if(t===n)return;const s=r=>{if(p(this,xi,r),!r){this.remove();return}_(this,jt,zg).call(this),this._uiManager.rebuild(this),_(this,jt,jg).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(t)},mustExec:!1}),_(this,jt,jg).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){nt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,Qp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${a(this,vi)}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[d,c]=this.getInitialTranslation();[d,c]=this.pageTranslationToScreen(d,c);const[h,u]=this.pageDimensions,[f,m]=this.pageTranslation;let b,v;switch(this.rotation){case 0:b=t+(l[0]-f)/h,v=n+this.height-(l[1]-m)/u;break;case 90:b=t+(l[0]-f)/h,v=n-(l[1]-m)/u,[d,c]=[c,-d];break;case 180:b=t-this.width+(l[0]-f)/h,v=n-(l[1]-m)/u,[d,c]=[-d,-c];break;case 270:b=t+(l[0]-f-this.height*u)/h,v=n+(l[1]-m-this.width*h)/u,[d,c]=[-c,d];break}this.setAt(b*r,v*o,d,c)}else this._moveAfterPaste(t,n);_(this,jt,zg).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var b,v,S;const n=t.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=_(b=nt,ua,hv).call(b,n.getData("text")||"").replaceAll(ag,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:d,startOffset:c}=l,h=[],u=[];if(d.nodeType===Node.TEXT_NODE){const g=d.parentElement;if(u.push(d.nodeValue.slice(c).replaceAll(ag,"")),g!==this.editorDiv){let k=h;for(const w of this.editorDiv.childNodes){if(w===g){k=u;continue}k.push(_(v=nt,ua,Og).call(v,w))}}h.push(d.nodeValue.slice(0,c).replaceAll(ag,""))}else if(d===this.editorDiv){let g=h,k=0;for(const w of this.editorDiv.childNodes)k++===c&&(g=u),g.push(_(S=nt,ua,Og).call(S,w))}p(this,xi,`${h.join(`
`)}${r}${u.join(`
`)}`),_(this,jt,zg).call(this);const f=new Range;let m=Math.sumPrecise(h.map(g=>g.length));for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const k=g.nodeValue.length;if(m<=k){f.setStart(g,m),f.setEnd(g,m);break}m-=k}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=nt._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,s){var l;let r=null;if(t instanceof Xw){const{data:{defaultAppearanceData:{fontSize:d,fontColor:c},rect:h,rotation:u,id:f,popupRef:m,richText:b,contentsObj:v,creationDate:S,modificationDate:g},textContent:k,textPosition:w,parent:{page:{pageNumber:A}}}=t;if(!k||k.length===0)return null;r=t={annotationType:he.FREETEXT,color:Array.from(c),fontSize:d,value:k.join(`
`),position:w,pageIndex:A-1,rect:h.slice(0),rotation:u,annotationElementId:f,id:f,deleted:!1,popupRef:m,comment:(v==null?void 0:v.str)||null,richText:b,creationDate:S,modificationDate:g}}const o=await super.deserialize(t,n,s);return p(o,vi,t.fontSize),o.color=ee.makeHexColor(...t.color),p(o,xi,_(l=nt,ua,hv).call(l,t.value)),o._initialData=r,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Ze._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:n,fontSize:a(this,vi),value:_(this,jt,Kw).call(this)});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!_(this,jt,Qw).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:s}=n;s.fontSize=`calc(${a(this,vi)}px * var(--total-scale-factor))`,s.color=this.color,n.replaceChildren();for(const r of a(this,xi).split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),n.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:a(this,xi)}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};xi=new WeakMap,Qp=new WeakMap,Jl=new WeakMap,vi=new WeakMap,jt=new WeakSet,$w=function(t){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-a(this,vi))*this.parentScale),p(this,vi,r),_(this,jt,jg).call(this)},s=a(this,vi);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Se.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Gw=function(t){const n=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Se.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ww=function(){var s;const t=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(_(s=nt,ua,Og).call(s,r)),n=r);return t.join(`
`)},jg=function(){const[t,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,d=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/n):(this.width=s.height/t,this.height=s.width/n),this.fixAndSetPosition()},ua=new WeakSet,Og=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(ag,"")},zg=function(){if(this.editorDiv.replaceChildren(),!!a(this,xi))for(const t of a(this,xi).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},Kw=function(){return a(this,xi).replaceAll(""," ")},hv=function(t){return t.replaceAll(" ","")},Qw=function(t){const{value:n,fontSize:s,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==s||t.color.some((l,d)=>l!==r[d])||t.pageIndex!==o},x(nt,ua),O(nt,"_freeTextDefaultContent",""),O(nt,"_internalPadding",0),O(nt,"_defaultColor",null),O(nt,"_defaultFontSize",10),O(nt,"_type","freetext"),O(nt,"_editorType",he.FREETEXT);let cv=nt;class Z{toSVGPath(){We("Abstract method `toSVGPath` must be implemented.")}get box(){We("Abstract getter `box` must be implemented.")}serialize(e,t){We("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,s,r,o){o||(o=new Float32Array(e.length));for(let l=0,d=e.length;l<d;l+=2)o[l]=t+e[l]*s,o[l+1]=n+e[l+1]*r;return o}static _rescaleAndSwap(e,t,n,s,r,o){o||(o=new Float32Array(e.length));for(let l=0,d=e.length;l<d;l+=2)o[l]=t+e[l+1]*s,o[l+1]=n+e[l]*r;return o}static _translate(e,t,n,s){s||(s=new Float32Array(e.length));for(let r=0,o=e.length;r<o;r+=2)s[r]=t+e[r],s[r+1]=n+e[r+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,s,r){switch(r){case 90:return[1-t/n,e/s];case 180:return[1-e/n,1-t/s];case 270:return[t/n,1-e/s];default:return[e/n,t/s]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,s,r,o){return[(e+5*n)/6,(t+5*s)/6,(5*n+r)/6,(5*s+o)/6,(n+r)/2,(s+o)/2]}}O(Z,"PRECISION",1e-4);var yi,gs,Ph,Th,nr,_e,Zl,ed,Jp,Zp,Ih,Ch,uo,em,Q0,J0,Vt,Gu,Jw,Zw,e6,t6,n6,i6;const wr=class wr{constructor({x:e,y:t},n,s,r,o,l=0){x(this,Vt);x(this,yi);x(this,gs,[]);x(this,Ph);x(this,Th);x(this,nr,[]);x(this,_e,new Float32Array(18));x(this,Zl);x(this,ed);x(this,Jp);x(this,Zp);x(this,Ih);x(this,Ch);x(this,uo,[]);p(this,yi,n),p(this,Ch,r*s),p(this,Th,o),a(this,_e).set([NaN,NaN,NaN,NaN,e,t],6),p(this,Ph,l),p(this,Zp,a(wr,em)*s),p(this,Jp,a(wr,J0)*s),p(this,Ih,s),a(this,uo).push(e,t)}isEmpty(){return isNaN(a(this,_e)[8])}add({x:e,y:t}){var F;p(this,Zl,e),p(this,ed,t);const[n,s,r,o]=a(this,yi);let[l,d,c,h]=a(this,_e).subarray(8,12);const u=e-c,f=t-h,m=Math.hypot(u,f);if(m<a(this,Jp))return!1;const b=m-a(this,Zp),v=b/m,S=v*u,g=v*f;let k=l,w=d;l=c,d=h,c+=S,h+=g,(F=a(this,uo))==null||F.push(e,t);const A=-g/b,T=S/b,I=A*a(this,Ch),C=T*a(this,Ch);return a(this,_e).set(a(this,_e).subarray(2,8),0),a(this,_e).set([c+I,h+C],4),a(this,_e).set(a(this,_e).subarray(14,18),12),a(this,_e).set([c-I,h-C],16),isNaN(a(this,_e)[6])?(a(this,nr).length===0&&(a(this,_e).set([l+I,d+C],2),a(this,nr).push(NaN,NaN,NaN,NaN,(l+I-n)/r,(d+C-s)/o),a(this,_e).set([l-I,d-C],14),a(this,gs).push(NaN,NaN,NaN,NaN,(l-I-n)/r,(d-C-s)/o)),a(this,_e).set([k,w,l,d,c,h],6),!this.isEmpty()):(a(this,_e).set([k,w,l,d,c,h],6),Math.abs(Math.atan2(w-d,k-l)-Math.atan2(g,S))<Math.PI/2?([l,d,c,h]=a(this,_e).subarray(2,6),a(this,nr).push(NaN,NaN,NaN,NaN,((l+c)/2-n)/r,((d+h)/2-s)/o),[l,d,k,w]=a(this,_e).subarray(14,18),a(this,gs).push(NaN,NaN,NaN,NaN,((k+l)/2-n)/r,((w+d)/2-s)/o),!0):([k,w,l,d,c,h]=a(this,_e).subarray(0,6),a(this,nr).push(((k+5*l)/6-n)/r,((w+5*d)/6-s)/o,((5*l+c)/6-n)/r,((5*d+h)/6-s)/o,((l+c)/2-n)/r,((d+h)/2-s)/o),[c,h,l,d,k,w]=a(this,_e).subarray(12,18),a(this,gs).push(((k+5*l)/6-n)/r,((w+5*d)/6-s)/o,((5*l+c)/6-n)/r,((5*d+h)/6-s)/o,((l+c)/2-n)/r,((d+h)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=a(this,nr),t=a(this,gs);if(isNaN(a(this,_e)[6])&&!this.isEmpty())return _(this,Vt,Jw).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);_(this,Vt,e6).call(this,n);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return _(this,Vt,Zw).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,s,r,o){return new s6(e,t,n,s,r,o)}getOutlines(){var u;const e=a(this,nr),t=a(this,gs),n=a(this,_e),[s,r,o,l]=a(this,yi),d=new Float32Array((((u=a(this,uo))==null?void 0:u.length)??0)+2);for(let f=0,m=d.length-2;f<m;f+=2)d[f]=(a(this,uo)[f]-s)/o,d[f+1]=(a(this,uo)[f+1]-r)/l;if(d[d.length-2]=(a(this,Zl)-s)/o,d[d.length-1]=(a(this,ed)-r)/l,isNaN(n[6])&&!this.isEmpty())return _(this,Vt,t6).call(this,d);const c=new Float32Array(a(this,nr).length+24+a(this,gs).length);let h=e.length;for(let f=0;f<h;f+=2){if(isNaN(e[f])){c[f]=c[f+1]=NaN;continue}c[f]=e[f],c[f+1]=e[f+1]}h=_(this,Vt,i6).call(this,c,h);for(let f=t.length-6;f>=6;f-=6)for(let m=0;m<6;m+=2){if(isNaN(t[f+m])){c[h]=c[h+1]=NaN,h+=2;continue}c[h]=t[f+m],c[h+1]=t[f+m+1],h+=2}return _(this,Vt,n6).call(this,c,h),this.newFreeDrawOutline(c,d,a(this,yi),a(this,Ih),a(this,Ph),a(this,Th))}};yi=new WeakMap,gs=new WeakMap,Ph=new WeakMap,Th=new WeakMap,nr=new WeakMap,_e=new WeakMap,Zl=new WeakMap,ed=new WeakMap,Jp=new WeakMap,Zp=new WeakMap,Ih=new WeakMap,Ch=new WeakMap,uo=new WeakMap,em=new WeakMap,Q0=new WeakMap,J0=new WeakMap,Vt=new WeakSet,Gu=function(){const e=a(this,_e).subarray(4,6),t=a(this,_e).subarray(16,18),[n,s,r,o]=a(this,yi);return[(a(this,Zl)+(e[0]-t[0])/2-n)/r,(a(this,ed)+(e[1]-t[1])/2-s)/o,(a(this,Zl)+(t[0]-e[0])/2-n)/r,(a(this,ed)+(t[1]-e[1])/2-s)/o]},Jw=function(){const[e,t,n,s]=a(this,yi),[r,o,l,d]=_(this,Vt,Gu).call(this);return`M${(a(this,_e)[2]-e)/n} ${(a(this,_e)[3]-t)/s} L${(a(this,_e)[4]-e)/n} ${(a(this,_e)[5]-t)/s} L${r} ${o} L${l} ${d} L${(a(this,_e)[16]-e)/n} ${(a(this,_e)[17]-t)/s} L${(a(this,_e)[14]-e)/n} ${(a(this,_e)[15]-t)/s} Z`},Zw=function(e){const t=a(this,gs);e.push(`L${t[4]} ${t[5]} Z`)},e6=function(e){const[t,n,s,r]=a(this,yi),o=a(this,_e).subarray(4,6),l=a(this,_e).subarray(16,18),[d,c,h,u]=_(this,Vt,Gu).call(this);e.push(`L${(o[0]-t)/s} ${(o[1]-n)/r} L${d} ${c} L${h} ${u} L${(l[0]-t)/s} ${(l[1]-n)/r}`)},t6=function(e){const t=a(this,_e),[n,s,r,o]=a(this,yi),[l,d,c,h]=_(this,Vt,Gu).call(this),u=new Float32Array(36);return u.set([NaN,NaN,NaN,NaN,(t[2]-n)/r,(t[3]-s)/o,NaN,NaN,NaN,NaN,(t[4]-n)/r,(t[5]-s)/o,NaN,NaN,NaN,NaN,l,d,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,(t[16]-n)/r,(t[17]-s)/o,NaN,NaN,NaN,NaN,(t[14]-n)/r,(t[15]-s)/o],0),this.newFreeDrawOutline(u,e,a(this,yi),a(this,Ih),a(this,Ph),a(this,Th))},n6=function(e,t){const n=a(this,gs);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},i6=function(e,t){const n=a(this,_e).subarray(4,6),s=a(this,_e).subarray(16,18),[r,o,l,d]=a(this,yi),[c,h,u,f]=_(this,Vt,Gu).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-r)/l,(n[1]-o)/d,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,u,f,NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-o)/d],t),t+=24},x(wr,em,8),x(wr,Q0,2),x(wr,J0,a(wr,em)+a(wr,Q0));let L0=wr;var Eh,td,Zr,tm,_i,nm,Et,Z0,r6;class s6 extends Z{constructor(t,n,s,r,o,l){super();x(this,Z0);x(this,Eh);x(this,td,new Float32Array(4));x(this,Zr);x(this,tm);x(this,_i);x(this,nm);x(this,Et);p(this,Et,t),p(this,_i,n),p(this,Eh,s),p(this,nm,r),p(this,Zr,o),p(this,tm,l),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],_(this,Z0,r6).call(this,l);const[d,c,h,u]=a(this,td);for(let f=0,m=t.length;f<m;f+=2)t[f]=(t[f]-d)/h,t[f+1]=(t[f+1]-c)/u;for(let f=0,m=n.length;f<m;f+=2)n[f]=(n[f]-d)/h,n[f+1]=(n[f+1]-c)/u}toSVGPath(){const t=[`M${a(this,Et)[4]} ${a(this,Et)[5]}`];for(let n=6,s=a(this,Et).length;n<s;n+=6){if(isNaN(a(this,Et)[n])){t.push(`L${a(this,Et)[n+4]} ${a(this,Et)[n+5]}`);continue}t.push(`C${a(this,Et)[n]} ${a(this,Et)[n+1]} ${a(this,Et)[n+2]} ${a(this,Et)[n+3]} ${a(this,Et)[n+4]} ${a(this,Et)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,s,r],o){const l=s-t,d=r-n;let c,h;switch(o){case 0:c=Z._rescale(a(this,Et),t,r,l,-d),h=Z._rescale(a(this,_i),t,r,l,-d);break;case 90:c=Z._rescaleAndSwap(a(this,Et),t,n,l,d),h=Z._rescaleAndSwap(a(this,_i),t,n,l,d);break;case 180:c=Z._rescale(a(this,Et),s,n,-l,d),h=Z._rescale(a(this,_i),s,n,-l,d);break;case 270:c=Z._rescaleAndSwap(a(this,Et),s,r,-l,-d),h=Z._rescaleAndSwap(a(this,_i),s,r,-l,-d);break}return{outline:Array.from(c),points:[Array.from(h)]}}get box(){return a(this,td)}newOutliner(t,n,s,r,o,l=0){return new L0(t,n,s,r,o,l)}getNewOutline(t,n){const[s,r,o,l]=a(this,td),[d,c,h,u]=a(this,Eh),f=o*h,m=l*u,b=s*h+d,v=r*u+c,S=this.newOutliner({x:a(this,_i)[0]*f+b,y:a(this,_i)[1]*m+v},a(this,Eh),a(this,nm),t,a(this,tm),n??a(this,Zr));for(let g=2;g<a(this,_i).length;g+=2)S.add({x:a(this,_i)[g]*f+b,y:a(this,_i)[g+1]*m+v});return S.getOutlines()}}Eh=new WeakMap,td=new WeakMap,Zr=new WeakMap,tm=new WeakMap,_i=new WeakMap,nm=new WeakMap,Et=new WeakMap,Z0=new WeakSet,r6=function(t){const n=a(this,Et);let s=n[4],r=n[5];const o=[s,r,s,r];let l=s,d=r,c=s,h=r;const u=t?Math.max:Math.min,f=new Float32Array(4);for(let b=6,v=n.length;b<v;b+=6){const S=n[b+4],g=n[b+5];isNaN(n[b])?(ee.pointBoundingBox(S,g,o),d>g?(l=S,d=g):d===g&&(l=u(l,S)),h<g?(c=S,h=g):h===g&&(c=u(c,S))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,ee.bezierBoundingBox(s,r,...n.slice(b,b+6),f),ee.rectBoundingBox(f[0],f[1],f[2],f[3],o),d>f[1]?(l=f[0],d=f[1]):d===f[1]&&(l=u(l,f[0])),h<f[3]?(c=f[2],h=f[3]):h===f[3]&&(c=u(c,f[2]))),s=S,r=g}const m=a(this,td);m[0]=o[0]-a(this,Zr),m[1]=o[1]-a(this,Zr),m[2]=o[2]-o[0]+2*a(this,Zr),m[3]=o[3]-o[1]+2*a(this,Zr),this.firstPoint=[l,d],this.lastPoint=[c,h]};var im,sm,rm,fo,xs,On,a6,Bg,o6,l6,fv;class uv{constructor(e,t=0,n=0,s=!0){x(this,On);x(this,im);x(this,sm);x(this,rm);x(this,fo,[]);x(this,xs,[]);const r=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:v,y:S,width:g,height:k}of e){const w=Math.floor((v-t)/o)*o,A=Math.ceil((v+g+t)/o)*o,T=Math.floor((S-t)/o)*o,I=Math.ceil((S+k+t)/o)*o,C=[w,T,I,!0],L=[A,T,I,!1];a(this,fo).push(C,L),ee.rectBoundingBox(w,T,A,I,r)}const l=r[2]-r[0]+2*n,d=r[3]-r[1]+2*n,c=r[0]-n,h=r[1]-n;let u=s?-1/0:1/0,f=1/0;const m=a(this,fo).at(s?-1:-2),b=[m[0],m[2]];for(const v of a(this,fo)){const[S,g,k,w]=v;!w&&s?g<f?(f=g,u=S):g===f&&(u=Math.max(u,S)):w&&!s&&(g<f?(f=g,u=S):g===f&&(u=Math.min(u,S))),v[0]=(S-c)/l,v[1]=(g-h)/d,v[2]=(k-h)/d}p(this,im,new Float32Array([c,h,l,d])),p(this,sm,[u,f]),p(this,rm,b)}getOutlines(){a(this,fo).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of a(this,fo))t[3]?(e.push(..._(this,On,fv).call(this,t)),_(this,On,o6).call(this,t)):(_(this,On,l6).call(this,t),e.push(..._(this,On,fv).call(this,t)));return _(this,On,a6).call(this,e)}}im=new WeakMap,sm=new WeakMap,rm=new WeakMap,fo=new WeakMap,xs=new WeakMap,On=new WeakSet,a6=function(e){const t=[],n=new Set;for(const o of e){const[l,d,c]=o;t.push([l,d,o],[l,c,o])}t.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=t.length;o<l;o+=2){const d=t[o][2],c=t[o+1][2];d.push(c),c.push(d),n.add(d),n.add(c)}const s=[];let r;for(;n.size>0;){const o=n.values().next().value;let[l,d,c,h,u]=o;n.delete(o);let f=l,m=d;for(r=[l,c],s.push(r);;){let b;if(n.has(h))b=h;else if(n.has(u))b=u;else break;n.delete(b),[l,d,c,h,u]=b,f!==l&&(r.push(f,m,l,m===d?d:c),f=l),m=m===d?c:d}r.push(f,m)}return new SA(s,a(this,im),a(this,sm),a(this,rm))},Bg=function(e){const t=a(this,xs);let n=0,s=t.length-1;for(;n<=s;){const r=n+s>>1,o=t[r][0];if(o===e)return r;o<e?n=r+1:s=r-1}return s+1},o6=function([,e,t]){const n=_(this,On,Bg).call(this,e);a(this,xs).splice(n,0,[e,t])},l6=function([,e,t]){const n=_(this,On,Bg).call(this,e);for(let s=n;s<a(this,xs).length;s++){const[r,o]=a(this,xs)[s];if(r!==e)break;if(r===e&&o===t){a(this,xs).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[r,o]=a(this,xs)[s];if(r!==e)break;if(r===e&&o===t){a(this,xs).splice(s,1);return}}},fv=function(e){const[t,n,s]=e,r=[[t,n,s]],o=_(this,On,Bg).call(this,s);for(let l=0;l<o;l++){const[d,c]=a(this,xs)[l];for(let h=0,u=r.length;h<u;h++){const[,f,m]=r[h];if(!(c<=f||m<=d)){if(f>=d){if(m>c)r[h][1]=c;else{if(u===1)return[];r.splice(h,1),h--,u--}continue}r[h][2]=d,m>c&&r.push([t,c,m])}}}return r};var am,Lh;class SA extends Z{constructor(t,n,s,r){super();x(this,am);x(this,Lh);p(this,Lh,t),p(this,am,n),this.firstPoint=s,this.lastPoint=r}toSVGPath(){const t=[];for(const n of a(this,Lh)){let[s,r]=n;t.push(`M${s} ${r}`);for(let o=2;o<n.length;o+=2){const l=n[o],d=n[o+1];l===s?(t.push(`V${d}`),r=d):d===r&&(t.push(`H${l}`),s=l)}t.push("Z")}return t.join(" ")}serialize([t,n,s,r],o){const l=[],d=s-t,c=r-n;for(const h of a(this,Lh)){const u=new Array(h.length);for(let f=0;f<h.length;f+=2)u[f]=t+h[f]*d,u[f+1]=r-h[f+1]*c;l.push(u)}return l}get box(){return a(this,am)}get classNamesForOutlining(){return["highlightOutline"]}}am=new WeakMap,Lh=new WeakMap;class pv extends L0{newFreeDrawOutline(e,t,n,s,r,o){return new AA(e,t,n,s,r,o)}}class AA extends s6{newOutliner(e,t,n,s,r,o=0){return new pv(e,t,n,s,r,o)}}var Mh,om,ea,nd,lm,Kn,dm,cm,id,bi,ki,dn,Fh,Rh,An,Dh,Wi,hm,xe,mv,qg,d6,c6,h6,gv,Jo,Zi,Wd,u6,Xg,Yg,f6,p6,m6,g6,x6;const Le=class Le extends Ze{constructor(t){super({...t,name:"highlightEditor"});x(this,xe);x(this,Mh,null);x(this,om,0);x(this,ea);x(this,nd,null);x(this,lm,null);x(this,Kn,null);x(this,dm,null);x(this,cm,0);x(this,id,null);x(this,bi,null);x(this,ki,null);x(this,dn,!1);x(this,Fh,null);x(this,Rh,null);x(this,An,null);x(this,Dh,"");x(this,Wi);x(this,hm,"");this.color=t.color||Le._defaultColor,p(this,Wi,t.thickness||Le._defaultThickness),this.opacity=t.opacity||Le._defaultOpacity,p(this,ea,t.boxes||null),p(this,hm,t.methodOfCreation||""),p(this,Dh,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(p(this,dn,!0),_(this,xe,qg).call(this,t),_(this,xe,Jo).call(this)):a(this,ea)&&(p(this,Mh,t.anchorNode),p(this,om,t.anchorOffset),p(this,dm,t.focusNode),p(this,cm,t.focusOffset),_(this,xe,mv).call(this),_(this,xe,Jo).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Le.prototype;return ge(this,"_keyboardManager",new Sm([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,dn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:a(this,Wi),methodOfCreation:a(this,hm)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var s;Ze.initialize(t,n),Le._defaultColor||(Le._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Se.HIGHLIGHT_COLOR:Le._defaultColor=n;break;case Se.HIGHLIGHT_THICKNESS:Le._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return a(this,Rh)}get commentButtonPosition(){return a(this,Fh)}updateParams(t,n){switch(t){case Se.HIGHLIGHT_COLOR:_(this,xe,d6).call(this,n);break;case Se.HIGHLIGHT_THICKNESS:_(this,xe,c6).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Se.HIGHLIGHT_COLOR,Le._defaultColor],[Se.HIGHLIGHT_THICKNESS,Le._defaultThickness]]}get propertiesToUpdate(){return[[Se.HIGHLIGHT_COLOR,this.color||Le._defaultColor],[Se.HIGHLIGHT_THICKNESS,a(this,Wi)||Le._defaultThickness],[Se.HIGHLIGHT_FREE,a(this,dn)]]}onUpdatedColor(){var t,n;(t=this.parent)==null||t.drawLayer.updateProperties(a(this,ki),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=a(this,lm))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",p(this,lm,new Ff({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(_(this,xe,Yg).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,_(this,xe,Yg).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){_(this,xe,gv).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(_(this,xe,Jo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let n=!1;this.parent&&!t?_(this,xe,gv).call(this):t&&(_(this,xe,Jo).call(this,t),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var r,o,l;const{drawLayer:n}=this.parent;let s;a(this,dn)?(t=(t-this.rotation+360)%360,s=_(r=Le,Zi,Wd).call(r,a(this,bi).box,t)):s=_(o=Le,Zi,Wd).call(o,[this.x,this.y,this.width,this.height],t),n.updateProperties(a(this,ki),{bbox:s,root:{"data-main-rotation":t}}),n.updateProperties(a(this,An),{bbox:_(l=Le,Zi,Wd).call(l,a(this,Kn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();a(this,Dh)&&(t.setAttribute("aria-label",a(this,Dh)),t.setAttribute("role","mark")),a(this,dn)?t.classList.add("free"):this.div.addEventListener("keydown",_(this,xe,u6).bind(this),{signal:this._uiManager._signal});const n=p(this,id,document.createElement("div"));return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=a(this,nd),this.setDims(this.width,this.height),Nk(this,a(this,id),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(a(this,An),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(a(this,An),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:_(this,xe,Xg).call(this,!0);break;case 1:case 3:_(this,xe,Xg).call(this,!1);break}}select(){var t;super.select(),a(this,An)&&((t=this.parent)==null||t.drawLayer.updateProperties(a(this,An),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),a(this,An)&&((t=this.parent)==null||t.drawLayer.updateProperties(a(this,An),{rootClass:{selected:!1}}),a(this,dn)||_(this,xe,Xg).call(this,!1))}get _mustFixPosition(){return!a(this,dn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(a(this,ki),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(a(this,An),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:s,x:r,y:o}){const{x:l,y:d,width:c,height:h}=s.getBoundingClientRect(),u=new AbortController,f=t.combinedSignal(u),m=b=>{u.abort(),_(this,Zi,g6).call(this,t,b)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",pt,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Ri,{signal:f}),s.addEventListener("pointermove",_(this,Zi,m6).bind(this,t),{signal:f}),this._freeHighlight=new pv({x:r,y:o},[l,d,c,h],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,s){var v,S,g,k;let r=null;if(t instanceof Uw){const{data:{quadPoints:w,rect:A,rotation:T,id:I,color:C,opacity:L,popupRef:F,richText:D,contentsObj:j,creationDate:N,modificationDate:ie},parent:{page:{pageNumber:R}}}=t;r=t={annotationType:he.HIGHLIGHT,color:Array.from(C),opacity:L,quadPoints:w,boxes:null,pageIndex:R-1,rect:A.slice(0),rotation:T,annotationElementId:I,id:I,deleted:!1,popupRef:F,richText:D,comment:(j==null?void 0:j.str)||null,creationDate:N,modificationDate:ie}}else if(t instanceof Oy){const{data:{inkLists:w,rect:A,rotation:T,id:I,color:C,borderStyle:{rawWidth:L},popupRef:F,richText:D,contentsObj:j,creationDate:N,modificationDate:ie},parent:{page:{pageNumber:R}}}=t;r=t={annotationType:he.HIGHLIGHT,color:Array.from(C),thickness:L,inkLists:w,boxes:null,pageIndex:R-1,rect:A.slice(0),rotation:T,annotationElementId:I,id:I,deleted:!1,popupRef:F,richText:D,comment:(j==null?void 0:j.str)||null,creationDate:N,modificationDate:ie}}const{color:o,quadPoints:l,inkLists:d,opacity:c}=t,h=await super.deserialize(t,n,s);h.color=ee.makeHexColor(...o),h.opacity=c||1,d&&p(h,Wi,t.thickness),h._initialData=r,t.comment&&h.setCommentData(t);const[u,f]=h.pageDimensions,[m,b]=h.pageTranslation;if(l){const w=p(h,ea,[]);for(let A=0;A<l.length;A+=8)w.push({x:(l[A]-m)/u,y:1-(l[A+1]-b)/f,width:(l[A+2]-l[A])/u,height:(l[A+1]-l[A+5])/f});_(v=h,xe,mv).call(v),_(S=h,xe,Jo).call(S),h.rotate(h.rotation)}else if(d){p(h,dn,!0);const w=d[0],A={x:w[0]-m,y:f-(w[1]-b)},T=new pv(A,[0,0,u,f],1,a(h,Wi)/2,!0,.001);for(let L=0,F=w.length;L<F;L+=2)A.x=w[L]-m,A.y=f-(w[L+1]-b),T.add(A);const{id:I,clipPathId:C}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);_(g=h,xe,qg).call(g,{highlightOutlines:T.getOutlines(),highlightId:I,clipPathId:C}),_(k=h,xe,Jo).call(k),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=Ze._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:n,opacity:this.opacity,thickness:a(this,Wi),quadPoints:_(this,xe,f6).call(this),outlines:_(this,xe,p6).call(this,s.rect)}),this.addComment(s),this.annotationElementId&&!_(this,xe,x6).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Mh=new WeakMap,om=new WeakMap,ea=new WeakMap,nd=new WeakMap,lm=new WeakMap,Kn=new WeakMap,dm=new WeakMap,cm=new WeakMap,id=new WeakMap,bi=new WeakMap,ki=new WeakMap,dn=new WeakMap,Fh=new WeakMap,Rh=new WeakMap,An=new WeakMap,Dh=new WeakMap,Wi=new WeakMap,hm=new WeakMap,xe=new WeakSet,mv=function(){const t=new uv(a(this,ea),.001);p(this,bi,t.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,bi).box;const n=new uv(a(this,ea),.0025,.001,this._uiManager.direction==="ltr");p(this,Kn,n.getOutlines());const{firstPoint:s}=a(this,bi);p(this,Fh,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]);const{lastPoint:r}=a(this,Kn);p(this,Rh,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},qg=function({highlightOutlines:t,highlightId:n,clipPathId:s}){var f,m;if(p(this,bi,t),p(this,Kn,t.getNewOutline(a(this,Wi)/2+1.5,.0025)),n>=0)p(this,ki,n),p(this,nd,s),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),p(this,An,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,Kn).box,path:{d:a(this,Kn).toSVGPath()}},!0));else if(this.parent){const b=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,ki),{bbox:_(f=Le,Zi,Wd).call(f,a(this,bi).box,(b-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,An),{bbox:_(m=Le,Zi,Wd).call(m,a(this,Kn).box,b),path:{d:a(this,Kn).toSVGPath()}})}const[o,l,d,c]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=d,this.height=c;break;case 90:{const[b,v]=this.parentDimensions;this.x=l,this.y=1-o,this.width=d*v/b,this.height=c*b/v;break}case 180:this.x=1-o,this.y=1-l,this.width=d,this.height=c;break;case 270:{const[b,v]=this.parentDimensions;this.x=1-l,this.y=o,this.width=d*v/b,this.height=c*b/v;break}}const{firstPoint:h}=t;p(this,Fh,[(h[0]-o)/d,(h[1]-l)/c]);const{lastPoint:u}=a(this,Kn);p(this,Rh,[(u[0]-o)/d,(u[1]-l)/c])},d6=function(t){const n=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:n.bind(this,t,Le._defaultOpacity),undo:n.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Se.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},c6=function(t){const n=a(this,Wi),s=r=>{p(this,Wi,r),_(this,xe,h6).call(this,r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Se.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},h6=function(t){a(this,dn)&&(_(this,xe,qg).call(this,{highlightOutlines:a(this,bi).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},gv=function(){a(this,ki)===null||!this.parent||(this.parent.drawLayer.remove(a(this,ki)),p(this,ki,null),this.parent.drawLayer.remove(a(this,An)),p(this,An,null))},Jo=function(t=this.parent){a(this,ki)===null&&({id:Ot(this,ki)._,clipPathId:Ot(this,nd)._}=t.drawLayer.draw({bbox:a(this,bi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:a(this,dn)},path:{d:a(this,bi).toSVGPath()}},!1,!0),p(this,An,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,dn)},bbox:a(this,Kn).box,path:{d:a(this,Kn).toSVGPath()}},a(this,dn))),a(this,id)&&(a(this,id).style.clipPath=a(this,nd)))},Zi=new WeakSet,Wd=function([t,n,s,r],o){switch(o){case 90:return[1-n-r,t,r,s];case 180:return[1-t-s,1-n-r,s,r];case 270:return[n,1-t-s,r,s]}return[t,n,s,r]},u6=function(t){Le._keyboardManager.exec(this,t)},Xg=function(t){if(!a(this,Mh))return;const n=window.getSelection();t?n.setPosition(a(this,Mh),a(this,om)):n.setPosition(a(this,dm),a(this,cm))},Yg=function(){return a(this,dn)?this.rotation:0},f6=function(){if(a(this,dn))return null;const[t,n]=this.pageDimensions,[s,r]=this.pageTranslation,o=a(this,ea),l=new Float32Array(o.length*8);let d=0;for(const{x:c,y:h,width:u,height:f}of o){const m=c*t+s,b=(1-h)*n+r;l[d]=l[d+4]=m,l[d+1]=l[d+3]=b,l[d+2]=l[d+6]=m+u*t,l[d+5]=l[d+7]=b-f*n,d+=8}return l},p6=function(t){return a(this,bi).serialize(t,_(this,xe,Yg).call(this))},m6=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},g6=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},x6=function(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((s,r)=>s!==n[r])},x(Le,Zi),O(Le,"_defaultColor",null),O(Le,"_defaultOpacity",1),O(Le,"_defaultThickness",12),O(Le,"_type","highlight"),O(Le,"_editorType",he.HIGHLIGHT),O(Le,"_freeHighlightId",-1),O(Le,"_freeHighlight",null),O(Le,"_freeHighlightClipId","");let M0=Le;var sd;class v6{constructor(){x(this,sd,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){a(this,sd)[e]=t}toSVGProperties(){const e=a(this,sd);return p(this,sd,Object.create(null)),{root:e}}reset(){p(this,sd,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){We("Not implemented")}}sd=new WeakMap;var wi,Nh,Kt,rd,ad,po,mo,go,od,Ce,xv,vv,yv,Wu,y6,Ug,Ku,Kd;const ne=class ne extends Ze{constructor(t){super(t);x(this,Ce);x(this,wi,null);x(this,Nh);O(this,"_colorPicker",null);O(this,"_drawId",null);p(this,Nh,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(_(this,Ce,xv).call(this,t),_(this,Ce,Wu).call(this))}static _mergeSVGProperties(t,n){const s=new Set(Object.keys(t));for(const[r,o]of Object.entries(n))s.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){We("Not implemented")}static get typesMap(){We("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(a(ne,Kt).updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,n[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,n[r]]);return t}_updateProperty(t,n,s){const r=this._drawingOptions,o=r[n],l=d=>{var h;r.updateProperty(n,d);const c=a(this,wi).updateProperty(n,d);c&&_(this,Ce,Ku).call(this,c),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ne._mergeSVGProperties(a(this,wi).getPathResizingSVGProperties(_(this,Ce,Ug).call(this)),{bbox:_(this,Ce,Kd).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ne._mergeSVGProperties(a(this,wi).getPathResizedSVGProperties(_(this,Ce,Ug).call(this)),{bbox:_(this,Ce,Kd).call(this)}))}_onTranslating(t,n){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:_(this,Ce,Kd).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ne._mergeSVGProperties(a(this,wi).getPathTranslatedSVGProperties(_(this,Ce,Ug).call(this),this.parentDimensions),{bbox:_(this,Ce,Kd).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,Nh)&&(p(this,Nh,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){_(this,Ce,yv).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(_(this,Ce,Wu).call(this),_(this,Ce,Ku).call(this,a(this,wi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),_(this,Ce,yv).call(this)):t&&(this._uiManager.addShouldRescale(this),_(this,Ce,Wu).call(this,t),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ne._mergeSVGProperties({bbox:_(this,Ce,Kd).call(this)},a(this,wi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&_(this,Ce,Ku).call(this,a(this,wi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),s}static createDrawerInstance(t,n,s,r,o){We("Not implemented")}static startDrawing(t,n,s,r){var S;const{target:o,offsetX:l,offsetY:d,pointerId:c,pointerType:h}=r;if(a(ne,mo)&&a(ne,mo)!==h)return;const{viewport:{rotation:u}}=t,{width:f,height:m}=o.getBoundingClientRect(),b=p(ne,rd,new AbortController),v=t.combinedSignal(b);if(a(ne,po)||p(ne,po,c),a(ne,mo)??p(ne,mo,h),window.addEventListener("pointerup",g=>{var k;a(ne,po)===g.pointerId?this._endDraw(g):(k=a(ne,go))==null||k.delete(g.pointerId)},{signal:v}),window.addEventListener("pointercancel",g=>{var k;a(ne,po)===g.pointerId?this._currentParent.endDrawingSession():(k=a(ne,go))==null||k.delete(g.pointerId)},{signal:v}),window.addEventListener("pointerdown",g=>{a(ne,mo)===g.pointerType&&((a(ne,go)||p(ne,go,new Set)).add(g.pointerId),a(ne,Kt).isCancellable()&&(a(ne,Kt).removeLastElement(),a(ne,Kt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Ri,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",g=>{g.timeStamp===a(ne,od)&&pt(g)},{signal:v}),t.toggleDrawing(),(S=n._editorUndoBar)==null||S.hide(),a(ne,Kt)){t.drawLayer.updateProperties(this._currentDrawId,a(ne,Kt).startNew(l,d,f,m,u));return}n.updateUIForDefaultProperties(this),p(ne,Kt,this.createDrawerInstance(l,d,f,m,u)),p(ne,ad,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(a(ne,ad).toSVGProperties(),a(ne,Kt).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(p(ne,od,-1),!a(ne,Kt))return;const{offsetX:n,offsetY:s,pointerId:r}=t;if(a(ne,po)===r){if(((o=a(ne,go))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(ne,Kt).add(n,s)),p(ne,od,t.timeStamp),pt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,p(ne,Kt,null),p(ne,ad,null),p(ne,mo,null),p(ne,od,NaN)),a(ne,rd)&&(a(ne,rd).abort(),p(ne,rd,null),p(ne,po,NaN),p(ne,go,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,a(ne,Kt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=a(ne,Kt),r=this._currentDrawId,o=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:Se.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Se.DRAW_STEP),!a(ne,Kt).isEmpty()){const{pageDimensions:[s,r],scale:o}=n,l=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(ne,Kt).getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:a(ne,ad),mustBeCommitted:!t});return this._cleanup(!0),l}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,s,r,o,l){We("Not implemented")}static async deserialize(t,n,s){var u,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:d}}=n.viewport,c=this.deserializeDraw(l,d,r,o,this._INNER_MARGIN,t),h=await super.deserialize(t,n,s);return h.createDrawingOptions(t),_(u=h,Ce,xv).call(u,{drawOutlines:c}),_(f=h,Ce,Wu).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[n,s]=this.pageTranslation,[r,o]=this.pageDimensions;return a(this,wi).serialize([n,s,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};wi=new WeakMap,Nh=new WeakMap,Kt=new WeakMap,rd=new WeakMap,ad=new WeakMap,po=new WeakMap,mo=new WeakMap,go=new WeakMap,od=new WeakMap,Ce=new WeakSet,xv=function({drawOutlines:t,drawId:n,drawingOptions:s}){p(this,wi,t),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=_(this,Ce,vv).call(this,t,this.parent),_(this,Ce,Ku).call(this,t.box)},vv=function(t,n){const{id:s}=n.drawLayer.draw(ne._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s},yv=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Wu=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=_(this,Ce,vv).call(this,a(this,wi),t)}},y6=function([t,n,s,r]){const{parentDimensions:[o,l],rotation:d}=this;switch(d){case 90:return[n,1-t,s*(l/o),r*(o/l)];case 180:return[1-t,1-n,s,r];case 270:return[1-n,t,s*(l/o),r*(o/l)];default:return[t,n,s,r]}},Ug=function(){const{x:t,y:n,width:s,height:r,parentDimensions:[o,l],rotation:d}=this;switch(d){case 90:return[1-n,t,s*(o/l),r*(l/o)];case 180:return[1-t,1-n,s,r];case 270:return[n,1-t,s*(o/l),r*(l/o)];default:return[t,n,s,r]}},Ku=function(t){[this.x,this.y,this.width,this.height]=_(this,Ce,y6).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Kd=function(){const{x:t,y:n,width:s,height:r,rotation:o,parentRotation:l,parentDimensions:[d,c]}=this;switch((o*4+l)/90){case 1:return[1-n-r,t,r,s];case 2:return[1-t-s,1-n-r,s,r];case 3:return[n,1-t-s,r,s];case 4:return[t,n-s*(d/c),r*(c/d),s*(d/c)];case 5:return[1-n,t,s*(d/c),r*(c/d)];case 6:return[1-t-r*(c/d),1-n,r*(c/d),s*(d/c)];case 7:return[n-s*(d/c),1-t-r*(c/d),s*(d/c),r*(c/d)];case 8:return[t-s,n-r,s,r];case 9:return[1-n,t-s,r,s];case 10:return[1-t,1-n,s,r];case 11:return[n-r,1-t,r,s];case 12:return[t-r*(c/d),n,r*(c/d),s*(d/c)];case 13:return[1-n-s*(d/c),t-r*(c/d),s*(d/c),r*(c/d)];case 14:return[1-t,1-n-s*(d/c),r*(c/d),s*(d/c)];case 15:return[n,1-t,s*(d/c),r*(c/d)];default:return[t,n,s,r]}},O(ne,"_currentDrawId",-1),O(ne,"_currentParent",null),x(ne,Kt,null),x(ne,rd,null),x(ne,ad,null),x(ne,po,NaN),x(ne,mo,null),x(ne,go,null),x(ne,od,NaN),O(ne,"_INNER_MARGIN",3);let F0=ne;var ir,Qt,Jt,ld,Hh,Mn,cn,Ki,dd,cd,hd,jh,Vg;class PA{constructor(e,t,n,s,r,o){x(this,jh);x(this,ir,new Float64Array(6));x(this,Qt);x(this,Jt);x(this,ld);x(this,Hh);x(this,Mn);x(this,cn,"");x(this,Ki,0);x(this,dd,new Pm);x(this,cd);x(this,hd);p(this,cd,n),p(this,hd,s),p(this,ld,r),p(this,Hh,o),[e,t]=_(this,jh,Vg).call(this,e,t);const l=p(this,Qt,[NaN,NaN,NaN,NaN,e,t]);p(this,Mn,[e,t]),p(this,Jt,[{line:l,points:a(this,Mn)}]),a(this,ir).set(l,0)}updateProperty(e,t){e==="stroke-width"&&p(this,Hh,t)}isEmpty(){return!a(this,Jt)||a(this,Jt).length===0}isCancellable(){return a(this,Mn).length<=10}add(e,t){[e,t]=_(this,jh,Vg).call(this,e,t);const[n,s,r,o]=a(this,ir).subarray(2,6),l=e-r,d=t-o;return Math.hypot(a(this,cd)*l,a(this,hd)*d)<=2?null:(a(this,Mn).push(e,t),isNaN(n)?(a(this,ir).set([r,o,e,t],2),a(this,Qt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(a(this,ir)[0])&&a(this,Qt).splice(6,6),a(this,ir).set([n,s,r,o,e,t],0),a(this,Qt).push(...Z.createBezierPoints(n,s,r,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(a(this,Mn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,s,r){p(this,cd,n),p(this,hd,s),p(this,ld,r),[e,t]=_(this,jh,Vg).call(this,e,t);const o=p(this,Qt,[NaN,NaN,NaN,NaN,e,t]);p(this,Mn,[e,t]);const l=a(this,Jt).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),a(this,Jt).push({line:o,points:a(this,Mn)}),a(this,ir).set(o,0),p(this,Ki,0),this.toSVGPath(),null}getLastElement(){return a(this,Jt).at(-1)}setLastElement(e){return a(this,Jt)?(a(this,Jt).push(e),p(this,Qt,e.line),p(this,Mn,e.points),p(this,Ki,0),{path:{d:this.toSVGPath()}}):a(this,dd).setLastElement(e)}removeLastElement(){if(!a(this,Jt))return a(this,dd).removeLastElement();a(this,Jt).pop(),p(this,cn,"");for(let e=0,t=a(this,Jt).length;e<t;e++){const{line:n,points:s}=a(this,Jt)[e];p(this,Qt,n),p(this,Mn,s),p(this,Ki,0),this.toSVGPath()}return{path:{d:a(this,cn)}}}toSVGPath(){const e=Z.svgRound(a(this,Qt)[4]),t=Z.svgRound(a(this,Qt)[5]);if(a(this,Mn).length===2)return p(this,cn,`${a(this,cn)} M ${e} ${t} Z`),a(this,cn);if(a(this,Mn).length<=6){const s=a(this,cn).lastIndexOf("M");p(this,cn,`${a(this,cn).slice(0,s)} M ${e} ${t}`),p(this,Ki,6)}if(a(this,Mn).length===4){const s=Z.svgRound(a(this,Qt)[10]),r=Z.svgRound(a(this,Qt)[11]);return p(this,cn,`${a(this,cn)} L ${s} ${r}`),p(this,Ki,12),a(this,cn)}const n=[];a(this,Ki)===0&&(n.push(`M ${e} ${t}`),p(this,Ki,6));for(let s=a(this,Ki),r=a(this,Qt).length;s<r;s+=6){const[o,l,d,c,h,u]=a(this,Qt).slice(s,s+6).map(Z.svgRound);n.push(`C${o} ${l} ${d} ${c} ${h} ${u}`)}return p(this,cn,a(this,cn)+n.join(" ")),p(this,Ki,a(this,Qt).length),a(this,cn)}getOutlines(e,t,n,s){const r=a(this,Jt).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),a(this,dd).build(a(this,Jt),e,t,n,a(this,ld),a(this,Hh),s),p(this,ir,null),p(this,Qt,null),p(this,Jt,null),p(this,cn,null),a(this,dd)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ir=new WeakMap,Qt=new WeakMap,Jt=new WeakMap,ld=new WeakMap,Hh=new WeakMap,Mn=new WeakMap,cn=new WeakMap,Ki=new WeakMap,dd=new WeakMap,cd=new WeakMap,hd=new WeakMap,jh=new WeakSet,Vg=function(e,t){return Z._normalizePoint(e,t,a(this,cd),a(this,hd),a(this,ld))};var Fn,um,fm,Si,sr,rr,Oh,zh,ud,fn,_r,_6,b6,k6;class Pm extends Z{constructor(){super(...arguments);x(this,fn);x(this,Fn);x(this,um,0);x(this,fm);x(this,Si);x(this,sr);x(this,rr);x(this,Oh);x(this,zh);x(this,ud)}build(t,n,s,r,o,l,d){p(this,sr,n),p(this,rr,s),p(this,Oh,r),p(this,zh,o),p(this,ud,l),p(this,fm,d??0),p(this,Si,t),_(this,fn,b6).call(this)}get thickness(){return a(this,ud)}setLastElement(t){return a(this,Si).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,Si).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of a(this,Si)){if(t.push(`M${Z.svgRound(n[4])} ${Z.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${Z.svgRound(n[10])} ${Z.svgRound(n[11])}`);continue}for(let s=6,r=n.length;s<r;s+=6){const[o,l,d,c,h,u]=n.subarray(s,s+6).map(Z.svgRound);t.push(`C${o} ${l} ${d} ${c} ${h} ${u}`)}}return t.join("")}serialize([t,n,s,r],o){const l=[],d=[],[c,h,u,f]=_(this,fn,_6).call(this);let m,b,v,S,g,k,w,A,T;switch(a(this,zh)){case 0:T=Z._rescale,m=t,b=n+r,v=s,S=-r,g=t+c*s,k=n+(1-h-f)*r,w=t+(c+u)*s,A=n+(1-h)*r;break;case 90:T=Z._rescaleAndSwap,m=t,b=n,v=s,S=r,g=t+h*s,k=n+c*r,w=t+(h+f)*s,A=n+(c+u)*r;break;case 180:T=Z._rescale,m=t+s,b=n,v=-s,S=r,g=t+(1-c-u)*s,k=n+h*r,w=t+(1-c)*s,A=n+(h+f)*r;break;case 270:T=Z._rescaleAndSwap,m=t+s,b=n+r,v=-s,S=-r,g=t+(1-h-f)*s,k=n+(1-c-u)*r,w=t+(1-h)*s,A=n+(1-c)*r;break}for(const{line:I,points:C}of a(this,Si))l.push(T(I,m,b,v,S,o?new Array(I.length):null)),d.push(T(C,m,b,v,S,o?new Array(C.length):null));return{lines:l,points:d,rect:[g,k,w,A]}}static deserialize(t,n,s,r,o,{paths:{lines:l,points:d},rotation:c,thickness:h}){const u=[];let f,m,b,v,S;switch(c){case 0:S=Z._rescale,f=-t/s,m=n/r+1,b=1/s,v=-1/r;break;case 90:S=Z._rescaleAndSwap,f=-n/r,m=-t/s,b=1/r,v=1/s;break;case 180:S=Z._rescale,f=t/s+1,m=-n/r,b=-1/s,v=1/r;break;case 270:S=Z._rescaleAndSwap,f=n/r+1,m=t/s+1,b=-1/r,v=-1/s;break}if(!l){l=[];for(const k of d){const w=k.length;if(w===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,k[0],k[1]]));continue}if(w===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,k[0],k[1],NaN,NaN,NaN,NaN,k[2],k[3]]));continue}const A=new Float32Array(3*(w-2));l.push(A);let[T,I,C,L]=k.subarray(0,4);A.set([NaN,NaN,NaN,NaN,T,I],0);for(let F=4;F<w;F+=2){const D=k[F],j=k[F+1];A.set(Z.createBezierPoints(T,I,C,L,D,j),(F-2)*3),[T,I,C,L]=[C,L,D,j]}}}for(let k=0,w=l.length;k<w;k++)u.push({line:S(l[k].map(A=>A??NaN),f,m,b,v),points:S(d[k].map(A=>A??NaN),f,m,b,v)});const g=new this.prototype.constructor;return g.build(u,s,r,1,c,h,o),g}get box(){return a(this,Fn)}updateProperty(t,n){return t==="stroke-width"?_(this,fn,k6).call(this,n):null}updateParentDimensions([t,n],s){const[r,o]=_(this,fn,_r).call(this);p(this,sr,t),p(this,rr,n),p(this,Oh,s);const[l,d]=_(this,fn,_r).call(this),c=l-r,h=d-o,u=a(this,Fn);return u[0]-=c,u[1]-=h,u[2]+=2*c,u[3]+=2*h,u}updateRotation(t){return p(this,um,t),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,Fn).map(Z.svgRound).join(" ")}get defaultProperties(){const[t,n]=a(this,Fn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Z.svgRound(t)} ${Z.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=a(this,Fn);let s=0,r=0,o=0,l=0,d=0,c=0;switch(a(this,um)){case 90:r=n/t,o=-t/n,d=t;break;case 180:s=-1,l=-1,d=t,c=n;break;case 270:r=-n/t,o=t/n,c=n;break;default:return""}return`matrix(${s} ${r} ${o} ${l} ${Z.svgRound(d)} ${Z.svgRound(c)})`}getPathResizingSVGProperties([t,n,s,r]){const[o,l]=_(this,fn,_r).call(this),[d,c,h,u]=a(this,Fn);if(Math.abs(h-o)<=Z.PRECISION||Math.abs(u-l)<=Z.PRECISION){const S=t+s/2-(d+h/2),g=n+r/2-(c+u/2);return{path:{"transform-origin":`${Z.svgRound(t)} ${Z.svgRound(n)}`,transform:`${this.rotationTransform} translate(${S} ${g})`}}}const f=(s-2*o)/(h-2*o),m=(r-2*l)/(u-2*l),b=h/s,v=u/r;return{path:{"transform-origin":`${Z.svgRound(d)} ${Z.svgRound(c)}`,transform:`${this.rotationTransform} scale(${b} ${v}) translate(${Z.svgRound(o)} ${Z.svgRound(l)}) scale(${f} ${m}) translate(${Z.svgRound(-o)} ${Z.svgRound(-l)})`}}}getPathResizedSVGProperties([t,n,s,r]){const[o,l]=_(this,fn,_r).call(this),d=a(this,Fn),[c,h,u,f]=d;if(d[0]=t,d[1]=n,d[2]=s,d[3]=r,Math.abs(u-o)<=Z.PRECISION||Math.abs(f-l)<=Z.PRECISION){const g=t+s/2-(c+u/2),k=n+r/2-(h+f/2);for(const{line:w,points:A}of a(this,Si))Z._translate(w,g,k,w),Z._translate(A,g,k,A);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Z.svgRound(t)} ${Z.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(s-2*o)/(u-2*o),b=(r-2*l)/(f-2*l),v=-m*(c+o)+t+o,S=-b*(h+l)+n+l;if(m!==1||b!==1||v!==0||S!==0)for(const{line:g,points:k}of a(this,Si))Z._rescale(g,v,S,m,b,g),Z._rescale(k,v,S,m,b,k);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Z.svgRound(t)} ${Z.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],s){const[r,o]=s,l=a(this,Fn),d=t-l[0],c=n-l[1];if(a(this,sr)===r&&a(this,rr)===o)for(const{line:h,points:u}of a(this,Si))Z._translate(h,d,c,h),Z._translate(u,d,c,u);else{const h=a(this,sr)/r,u=a(this,rr)/o;p(this,sr,r),p(this,rr,o);for(const{line:f,points:m}of a(this,Si))Z._rescale(f,d,c,h,u,f),Z._rescale(m,d,c,h,u,m);l[2]*=h,l[3]*=u}return l[0]=t,l[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Z.svgRound(t)} ${Z.svgRound(n)}`}}}get defaultSVGProperties(){const t=a(this,Fn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Z.svgRound(t[0])} ${Z.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Fn=new WeakMap,um=new WeakMap,fm=new WeakMap,Si=new WeakMap,sr=new WeakMap,rr=new WeakMap,Oh=new WeakMap,zh=new WeakMap,ud=new WeakMap,fn=new WeakSet,_r=function(t=a(this,ud)){const n=a(this,fm)+t/2*a(this,Oh);return a(this,zh)%180===0?[n/a(this,sr),n/a(this,rr)]:[n/a(this,rr),n/a(this,sr)]},_6=function(){const[t,n,s,r]=a(this,Fn),[o,l]=_(this,fn,_r).call(this,0);return[t+o,n+l,s-2*o,r-2*l]},b6=function(){const t=p(this,Fn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of a(this,Si)){if(r.length<=12){for(let d=4,c=r.length;d<c;d+=6)ee.pointBoundingBox(r[d],r[d+1],t);continue}let o=r[4],l=r[5];for(let d=6,c=r.length;d<c;d+=6){const[h,u,f,m,b,v]=r.subarray(d,d+6);ee.bezierBoundingBox(o,l,h,u,f,m,b,v,t),o=b,l=v}}const[n,s]=_(this,fn,_r).call(this);t[0]=Pn(t[0]-n,0,1),t[1]=Pn(t[1]-s,0,1),t[2]=Pn(t[2]+n,0,1),t[3]=Pn(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]},k6=function(t){const[n,s]=_(this,fn,_r).call(this);p(this,ud,t);const[r,o]=_(this,fn,_r).call(this),[l,d]=[r-n,o-s],c=a(this,Fn);return c[0]-=l,c[1]-=d,c[2]+=2*l,c[3]+=2*d,c};class w1 extends v6{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Ze._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new w1(this._viewParameters);return e.updateAll(this),e}}var e1,w6;const pc=class pc extends F0{constructor(t){super({...t,name:"inkEditor"});x(this,e1);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){Ze.initialize(t,n),this._defaultDrawingOptions=new w1(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return ge(this,"typesMap",new Map([[Se.INK_THICKNESS,"stroke-width"],[Se.INK_COLOR,"stroke"],[Se.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,s,r,o){return new PA(t,n,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,s,r,o,l){return Pm.deserialize(t,n,s,r,o,l)}static async deserialize(t,n,s){let r=null;if(t instanceof Oy){const{data:{inkLists:l,rect:d,rotation:c,id:h,color:u,opacity:f,borderStyle:{rawWidth:m},popupRef:b,richText:v,contentsObj:S,creationDate:g,modificationDate:k},parent:{page:{pageNumber:w}}}=t;r=t={annotationType:he.INK,color:Array.from(u),thickness:m,opacity:f,paths:{points:l},boxes:null,pageIndex:w-1,rect:d.slice(0),rotation:c,annotationElementId:h,id:h,deleted:!1,popupRef:b,richText:v,comment:(S==null?void 0:S.str)||null,creationDate:g,modificationDate:k}}const o=await super.deserialize(t,n,s);return o._initialData=r,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new C0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Se.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:s}){this._drawingOptions=pc.getDefaultDrawingOptions({stroke:ee.makeHexColor(...t),"stroke-width":n,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":l}}=this,d=Object.assign(super.serialize(t),{color:Ze._colorManager.convert(r),opacity:o,thickness:l,paths:{lines:n,points:s}});return this.addComment(d),t?(d.isCopy=!0,d):this.annotationElementId&&!_(this,e1,w6).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};e1=new WeakSet,w6=function(t){const{color:n,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,d)=>l!==n[d])||t.thickness!==s||t.opacity!==r||t.pageIndex!==o},O(pc,"_type","ink"),O(pc,"_editorType",he.INK),O(pc,"_defaultDrawingOptions",null);let _v=pc;class bv extends Pm{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const og=8,Au=3;var fd,Fe,kv,vs,S6,A6,wv,$g,P6,T6,I6,Sv,Av,C6;class dr{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:s},r,o,l,d){let c=new OffscreenCanvas(1,1),h=c.getContext("2d",{alpha:!1});const u=200,f=h.font=`${n} ${s} ${u}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:b,actualBoundingBoxAscent:v,actualBoundingBoxDescent:S,fontBoundingBoxAscent:g,fontBoundingBoxDescent:k,width:w}=h.measureText(e),A=1.5,T=Math.ceil(Math.max(Math.abs(m)+Math.abs(b)||0,w)*A),I=Math.ceil(Math.max(Math.abs(v)+Math.abs(S)||u,Math.abs(g)+Math.abs(k)||u)*A);c=new OffscreenCanvas(T,I),h=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=f,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,T,I),h.fillStyle="black",h.fillText(e,T*(A-1)/2,I*(3-A)/2);const C=_(this,Fe,Sv).call(this,h.getImageData(0,0,T,I).data),L=_(this,Fe,I6).call(this,C),F=_(this,Fe,Av).call(this,L),D=_(this,Fe,wv).call(this,C,T,I,F);return this.processDrawnLines({lines:{curves:D,width:T,height:I},pageWidth:r,pageHeight:o,rotation:l,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(e,t,n,s,r){const[o,l,d]=_(this,Fe,C6).call(this,e),[c,h]=_(this,Fe,T6).call(this,o,l,d,Math.hypot(l,d)*a(this,fd).sigmaSFactor,a(this,fd).sigmaR,a(this,fd).kernelSize),u=_(this,Fe,Av).call(this,h),f=_(this,Fe,wv).call(this,c,l,d,u);return this.processDrawnLines({lines:{curves:f,width:l,height:d},pageWidth:t,pageHeight:n,rotation:s,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:s,innerMargin:r,mustSmooth:o,areContours:l}){s%180!==0&&([t,n]=[n,t]);const{curves:d,width:c,height:h}=e,u=e.thickness??0,f=[],m=Math.min(t/c,n/h),b=m/t,v=m/n,S=[];for(const{points:k}of d){const w=o?_(this,Fe,P6).call(this,k):k;if(!w)continue;S.push(w);const A=w.length,T=new Float32Array(A),I=new Float32Array(3*(A===2?2:A-2));if(f.push({line:I,points:T}),A===2){T[0]=w[0]*b,T[1]=w[1]*v,I.set([NaN,NaN,NaN,NaN,T[0],T[1]],0);continue}let[C,L,F,D]=w;C*=b,L*=v,F*=b,D*=v,T.set([C,L,F,D],0),I.set([NaN,NaN,NaN,NaN,C,L],0);for(let j=4;j<A;j+=2){const N=T[j]=w[j]*b,ie=T[j+1]=w[j+1]*v;I.set(Z.createBezierPoints(C,L,F,D,N,ie),(j-2)*3),[C,L,F,D]=[F,D,N,ie]}}if(f.length===0)return null;const g=l?new bv:new Pm;return g.build(f,t,n,1,s,l?0:u,r),{outline:g,newCurves:S,areContours:l,thickness:u,width:c,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:s,height:r}){let o=1/0,l=-1/0,d=0;for(const w of e){d+=w.length;for(let A=2,T=w.length;A<T;A++){const I=w[A]-w[A-2];o=Math.min(o,I),l=Math.max(l,I)}}let c;o>=-128&&l<=127?c=Int8Array:o>=-32768&&l<=32767?c=Int16Array:c=Int32Array;const h=e.length,u=og+Au*h,f=new Uint32Array(u);let m=0;f[m++]=u*Uint32Array.BYTES_PER_ELEMENT+(d-2*h)*c.BYTES_PER_ELEMENT,f[m++]=0,f[m++]=s,f[m++]=r,f[m++]=t?0:1,f[m++]=Math.max(0,Math.floor(n??0)),f[m++]=h,f[m++]=c.BYTES_PER_ELEMENT;for(const w of e)f[m++]=w.length-2,f[m++]=w[0],f[m++]=w[1];const b=new CompressionStream("deflate-raw"),v=b.writable.getWriter();await v.ready,v.write(f);const S=c.prototype.constructor;for(const w of e){const A=new S(w.length-2);for(let T=2,I=w.length;T<I;T++)A[T-2]=w[T]-w[T-2];v.write(A)}v.close();const g=await new Response(b.readable).arrayBuffer(),k=new Uint8Array(g);return Sk(k)}static async decompressSignature(e){try{const t=Q8(e),{readable:n,writable:s}=new DecompressionStream("deflate-raw"),r=s.getWriter();await r.ready,r.write(t).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,l=0;for await(const w of n)o||(o=new Uint8Array(new Uint32Array(w.buffer,0,4)[0])),o.set(w,l),l+=w.length;const d=new Uint32Array(o.buffer,0,o.length>>2),c=d[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const h=d[2],u=d[3],f=d[4]===0,m=d[5],b=d[6],v=d[7],S=[],g=(og+Au*b)*Uint32Array.BYTES_PER_ELEMENT;let k;switch(v){case Int8Array.BYTES_PER_ELEMENT:k=new Int8Array(o.buffer,g);break;case Int16Array.BYTES_PER_ELEMENT:k=new Int16Array(o.buffer,g);break;case Int32Array.BYTES_PER_ELEMENT:k=new Int32Array(o.buffer,g);break}l=0;for(let w=0;w<b;w++){const A=d[Au*w+og],T=new Float32Array(A+2);S.push(T);for(let I=0;I<Au-1;I++)T[I]=d[Au*w+og+I+1];for(let I=0;I<A;I++)T[I+2]=T[I]+k[l++]}return{areContours:f,thickness:m,outlines:S,width:h,height:u}}catch(t){return ue(`decompressSignature: ${t}`),null}}}fd=new WeakMap,Fe=new WeakSet,kv=function(e,t,n,s){return n-=e,s-=t,n===0?s>0?0:4:n===1?s+6:2-s},vs=new WeakMap,S6=function(e,t,n,s,r,o,l){const d=_(this,Fe,kv).call(this,n,s,r,o);for(let c=0;c<8;c++){const h=(-c+d-l+16)%8,u=a(this,vs)[2*h],f=a(this,vs)[2*h+1];if(e[(n+u)*t+(s+f)]!==0)return h}return-1},A6=function(e,t,n,s,r,o,l){const d=_(this,Fe,kv).call(this,n,s,r,o);for(let c=0;c<8;c++){const h=(c+d+l+16)%8,u=a(this,vs)[2*h],f=a(this,vs)[2*h+1];if(e[(n+u)*t+(s+f)]!==0)return h}return-1},wv=function(e,t,n,s){const r=e.length,o=new Int32Array(r);for(let h=0;h<r;h++)o[h]=e[h]<=s?1:0;for(let h=1;h<n-1;h++)o[h*t]=o[h*t+t-1]=0;for(let h=0;h<t;h++)o[h]=o[t*n-1-h]=0;let l=1,d;const c=[];for(let h=1;h<n-1;h++){d=1;for(let u=1;u<t-1;u++){const f=h*t+u,m=o[f];if(m===0)continue;let b=h,v=u;if(m===1&&o[f-1]===0)l+=1,v-=1;else if(m>=1&&o[f+1]===0)l+=1,v+=1,m>1&&(d=m);else{m!==1&&(d=Math.abs(m));continue}const S=[u,h],g=v===u+1,k={isHole:g,points:S,id:l,parent:0};c.push(k);let w;for(const j of c)if(j.id===d){w=j;break}w?w.isHole?k.parent=g?w.parent:d:k.parent=g?d:w.parent:k.parent=g?d:0;const A=_(this,Fe,S6).call(this,o,t,h,u,b,v,0);if(A===-1){o[f]=-l,o[f]!==1&&(d=Math.abs(o[f]));continue}let T=a(this,vs)[2*A],I=a(this,vs)[2*A+1];const C=h+T,L=u+I;b=C,v=L;let F=h,D=u;for(;;){const j=_(this,Fe,A6).call(this,o,t,F,D,b,v,1);T=a(this,vs)[2*j],I=a(this,vs)[2*j+1];const N=F+T,ie=D+I;S.push(ie,N);const R=F*t+D;if(o[R+1]===0?o[R]=-l:o[R]===1&&(o[R]=l),N===h&&ie===u&&F===C&&D===L){o[f]!==1&&(d=Math.abs(o[f]));break}else b=F,v=D,F=N,D=ie}}}return c},$g=function(e,t,n,s){if(n-t<=4){for(let C=t;C<n-2;C+=2)s.push(e[C],e[C+1]);return}const r=e[t],o=e[t+1],l=e[n-4]-r,d=e[n-3]-o,c=Math.hypot(l,d),h=l/c,u=d/c,f=h*o-u*r,m=d/l,b=1/c,v=Math.atan(m),S=Math.cos(v),g=Math.sin(v),k=b*(Math.abs(S)+Math.abs(g)),w=b*(1-k+k**2),A=Math.max(Math.atan(Math.abs(g+S)*w),Math.atan(Math.abs(g-S)*w));let T=0,I=t;for(let C=t+2;C<n-2;C+=2){const L=Math.abs(f-h*e[C+1]+u*e[C]);L>T&&(I=C,T=L)}T>(c*A)**2?(_(this,Fe,$g).call(this,e,t,I+2,s),_(this,Fe,$g).call(this,e,I,n,s)):s.push(r,o)},P6=function(e){const t=[],n=e.length;return _(this,Fe,$g).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},T6=function(e,t,n,s,r,o){const l=new Float32Array(o**2),d=-2*s**2,c=o>>1;for(let v=0;v<o;v++){const S=(v-c)**2;for(let g=0;g<o;g++)l[v*o+g]=Math.exp((S+(g-c)**2)/d)}const h=new Float32Array(256),u=-2*r**2;for(let v=0;v<256;v++)h[v]=Math.exp(v**2/u);const f=e.length,m=new Uint8Array(f),b=new Uint32Array(256);for(let v=0;v<n;v++)for(let S=0;S<t;S++){const g=v*t+S,k=e[g];let w=0,A=0;for(let I=0;I<o;I++){const C=v+I-c;if(!(C<0||C>=n))for(let L=0;L<o;L++){const F=S+L-c;if(F<0||F>=t)continue;const D=e[C*t+F],j=l[I*o+L]*h[Math.abs(D-k)];w+=D*j,A+=j}}const T=m[g]=Math.round(w/A);b[T]++}return[m,b]},I6=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},Sv=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let s=-1/0,r=1/0;for(let l=0,d=n.length;l<d;l++){const c=n[l]=e[l<<2];s=Math.max(s,c),r=Math.min(r,c)}const o=255/(s-r);for(let l=0,d=n.length;l<d;l++)n[l]=(n[l]-r)*o;return n},Av=function(e){let t,n=-1/0,s=-1/0;const r=e.findIndex(d=>d!==0);let o=r,l=r;for(t=r;t<256;t++){const d=e[t];d>n&&(t-o>s&&(s=t-o,l=t-1),n=d,o=t)}for(t=l-1;t>=0&&!(e[t]>e[t+1]);t--);return t},C6=function(e){const t=e,{width:n,height:s}=e,{maxDim:r}=a(this,fd);let o=n,l=s;if(n>r||s>r){let f=n,m=s,b=Math.log2(Math.max(n,s)/r);const v=Math.floor(b);b=b===v?v-1:v;for(let g=0;g<b;g++){o=Math.ceil(f/2),l=Math.ceil(m/2);const k=new OffscreenCanvas(o,l);k.getContext("2d").drawImage(e,0,0,f,m,0,0,o,l),f=o,m=l,e!==t&&e.close(),e=k.transferToImageBitmap()}const S=Math.min(r/o,r/l);o=Math.round(o*S),l=Math.round(l*S)}const c=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});c.fillStyle="white",c.fillRect(0,0,o,l),c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,o,l);const h=c.getImageData(0,0,o,l).data;return[_(this,Fe,Sv).call(this,h),o,l]},x(dr,Fe),x(dr,fd,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),x(dr,vs,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class zy extends v6{constructor(){super(),super.updateProperties({fill:Ze._defaultLineColor,"stroke-width":0})}clone(){const e=new zy;return e.updateAll(this),e}}class By extends w1{constructor(e){super(e),super.updateProperties({stroke:Ze._defaultLineColor,"stroke-width":1})}clone(){const e=new By(this._viewParameters);return e.updateAll(this),e}}var xo,ar,vo,pd;const li=class li extends F0{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});x(this,xo,!1);x(this,ar,null);x(this,vo,null);x(this,pd,null);this._willKeepAspectRatio=!0,p(this,vo,t.signatureData||null),p(this,ar,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){Ze.initialize(t,n),this._defaultDrawingOptions=new zy,this._defaultDrawnSignatureOptions=new By(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return ge(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!a(this,ar)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(a(this,vo)){const{lines:r,mustSmooth:o,areContours:l,description:d,uuid:c,heightInPage:h}=a(this,vo),{rawDims:{pageWidth:u,pageHeight:f},rotation:m}=this.parent.viewport,b=dr.processDrawnLines({lines:r,pageWidth:u,pageHeight:f,rotation:m,innerMargin:li._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(b,h,d,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:a(this,ar)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){p(this,pd,t),this.addEditToolbar()}getUuid(){return a(this,pd)}get description(){return a(this,ar)}set description(t){p(this,ar,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:s,width:r,height:o}=a(this,vo),l=Math.max(r,o),d=dr.processDrawnLines({lines:{curves:t.map(c=>({points:c})),thickness:s,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:d.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,s,r){const{x:o,y:l}=this,{outline:d}=p(this,vo,t);p(this,xo,d instanceof bv),this.description=s;let c;a(this,xo)?c=li.getDefaultDrawingOptions():(c=li._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":d.thickness})),this._addOutlines({drawOutlines:d,drawingOptions:c});const[,h]=this.pageDimensions;let u=n/h;u=u>=1?.5:u,this.width*=u/this.height,this.width>=1&&(u*=.9/this.width,this.width=.9),this.height=u,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return dr.process(t,n,s,r,li._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return dr.extractContoursFromText(t,n,s,r,o,li._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return dr.processDrawnLines({lines:t,pageWidth:n,pageHeight:s,rotation:r,innerMargin:li._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=li.getDefaultDrawingOptions():(this._drawingOptions=li._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:a(this,xo),color:[0,0,0],thickness:a(this,xo)?0:r});return this.addComment(o),t?(o.paths={lines:n,points:s},o.uuid=a(this,pd),o.isCopy=!0):o.lines=n,a(this,ar)&&(o.accessibilityData={type:"Figure",alt:a(this,ar)}),o}static deserializeDraw(t,n,s,r,o,l){return l.areContours?bv.deserialize(t,n,s,r,o,l):Pm.deserialize(t,n,s,r,o,l)}static async deserialize(t,n,s){var o;const r=await super.deserialize(t,n,s);return p(r,xo,t.areContours),r.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",p(r,pd,t.uuid),r}};xo=new WeakMap,ar=new WeakMap,vo=new WeakMap,pd=new WeakMap,O(li,"_type","signature"),O(li,"_editorType",he.SIGNATURE),O(li,"_defaultDrawingOptions",null);let Pv=li;var lt,Zt,yo,ta,_o,Bh,na,md,or,Ai,qh,Ee,Qu,Ju,Gg,Wg,Kg,Iv,Qg,E6;class Tv extends Ze{constructor(t){super({...t,name:"stampEditor"});x(this,Ee);x(this,lt,null);x(this,Zt,null);x(this,yo,null);x(this,ta,null);x(this,_o,null);x(this,Bh,"");x(this,na,null);x(this,md,!1);x(this,or,null);x(this,Ai,!1);x(this,qh,!1);p(this,ta,t.bitmapUrl),p(this,_o,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){Ze.initialize(t,n)}static isHandlingMimeForPasting(t){return S0.includes(t)}static paste(t,n){n.pasteEditor({mode:he.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,d=await s.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const c=d.output;return await this.setGuessedAltText(c),n&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var t;a(this,Zt)&&(p(this,lt,null),this._uiManager.imageManager.deleteId(a(this,Zt)),(t=a(this,na))==null||t.remove(),p(this,na,null),a(this,or)&&(clearTimeout(a(this,or)),p(this,or,null))),super.remove()}rebuild(){if(!this.parent){a(this,Zt)&&_(this,Ee,Gg).call(this);return}super.rebuild(),this.div!==null&&(a(this,Zt)&&a(this,na)===null&&_(this,Ee,Gg).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(a(this,yo)||a(this,lt)||a(this,ta)||a(this,_o)||a(this,Zt)||a(this,md))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),a(this,md)||(a(this,lt)?_(this,Ee,Wg).call(this):_(this,Ee,Gg).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(p(this,Zt,s),r&&p(this,lt,r),p(this,md,!1),_(this,Ee,Wg).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,or)!==null&&clearTimeout(a(this,or)),p(this,or,setTimeout(()=>{p(this,or,null),_(this,Ee,Iv).call(this)},200))}copyCanvas(t,n,s=!1){t||(t=224);const{width:r,height:o}=a(this,lt),l=new Is;let d=a(this,lt),c=r,h=o,u=null;if(n){if(r>n||o>n){const C=Math.min(n/r,n/o);c=Math.floor(r*C),h=Math.floor(o*C)}u=document.createElement("canvas");const m=u.width=Math.ceil(c*l.sx),b=u.height=Math.ceil(h*l.sy);a(this,Ai)||(d=_(this,Ee,Kg).call(this,m,b));const v=u.getContext("2d");v.filter=this._uiManager.hcmFilter;let S="white",g="#cfcfd8";this._uiManager.hcmFilter!=="none"?g="black":e7.isDarkMode&&(S="#8f8f9d",g="#42414d");const k=15,w=k*l.sx,A=k*l.sy,T=new OffscreenCanvas(w*2,A*2),I=T.getContext("2d");I.fillStyle=S,I.fillRect(0,0,w*2,A*2),I.fillStyle=g,I.fillRect(0,0,w,A),I.fillRect(w,A,w,A),v.fillStyle=v.createPattern(T,"repeat"),v.fillRect(0,0,m,b),v.drawImage(d,0,0,d.width,d.height,0,0,m,b)}let f=null;if(s){let m,b;if(l.symmetric&&d.width<t&&d.height<t)m=d.width,b=d.height;else if(d=a(this,lt),r>t||o>t){const g=Math.min(t/r,t/o);m=Math.floor(r*g),b=Math.floor(o*g),a(this,Ai)||(d=_(this,Ee,Kg).call(this,m,b))}const S=new OffscreenCanvas(m,b).getContext("2d",{willReadFrequently:!0});S.drawImage(d,0,0,d.width,d.height,0,0,m,b),f={width:m,height:b,data:S.getImageData(0,0,m,b).data}}return{canvas:u,width:c,height:h,imageData:f}}static async deserialize(t,n,s){var S;let r=null,o=!1;if(t instanceof Vw){const{data:{rect:g,rotation:k,id:w,structParent:A,popupRef:T,richText:I,contentsObj:C,creationDate:L,modificationDate:F},container:D,parent:{page:{pageNumber:j}},canvas:N}=t;let ie,R;N?(delete t.canvas,{id:ie,bitmap:R}=s.imageManager.getFromCanvas(D.id,N),N.remove()):(o=!0,t._hasNoCanvas=!0);const X=((S=await n._structTree.getAriaAttributes(`${Ly}${w}`))==null?void 0:S.get("aria-label"))||"";r=t={annotationType:he.STAMP,bitmapId:ie,bitmap:R,pageIndex:j-1,rect:g.slice(0),rotation:k,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:X},isSvg:!1,structParent:A,popupRef:T,richText:I,comment:(C==null?void 0:C.str)||null,creationDate:L,modificationDate:F}}const l=await super.deserialize(t,n,s),{rect:d,bitmap:c,bitmapUrl:h,bitmapId:u,isSvg:f,accessibilityData:m}=t;o?(s.addMissingCanvas(t.id,l),p(l,md,!0)):u&&s.imageManager.isValidId(u)?(p(l,Zt,u),c&&p(l,lt,c)):p(l,ta,h),p(l,Ai,f);const[b,v]=l.pageDimensions;return l.width=(d[2]-d[0])/b,l.height=(d[3]-d[1])/v,m&&(l.altTextData=m),l._initialData=r,t.comment&&l.setCommentData(t),p(l,qh,!!r),l}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:a(this,Zt),isSvg:a(this,Ai)});if(this.addComment(s),t)return s.bitmapUrl=_(this,Ee,Qg).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const d=_(this,Ee,E6).call(this,s);return d.isSame?null:(d.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(n===null)return s;n.stamps||(n.stamps=new Map);const l=a(this,Ai)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(a(this,Zt)))n.stamps.set(a(this,Zt),{area:l,serialized:s}),s.bitmap=_(this,Ee,Qg).call(this,!1);else if(a(this,Ai)){const d=n.stamps.get(a(this,Zt));l>d.area&&(d.area=l,d.serialized.bitmap.close(),d.serialized.bitmap=_(this,Ee,Qg).call(this,!1))}return s}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}lt=new WeakMap,Zt=new WeakMap,yo=new WeakMap,ta=new WeakMap,_o=new WeakMap,Bh=new WeakMap,na=new WeakMap,md=new WeakMap,or=new WeakMap,Ai=new WeakMap,qh=new WeakMap,Ee=new WeakSet,Qu=function(t,n=!1){if(!t){this.remove();return}p(this,lt,t.bitmap),n||(p(this,Zt,t.id),p(this,Ai,t.isSvg)),t.file&&p(this,Bh,t.file.name),_(this,Ee,Wg).call(this)},Ju=function(){if(p(this,yo,null),this._uiManager.enableWaiting(!1),!!a(this,na)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,lt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,lt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Gg=function(){if(a(this,Zt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,Zt)).then(s=>_(this,Ee,Qu).call(this,s,!0)).finally(()=>_(this,Ee,Ju).call(this));return}if(a(this,ta)){const s=a(this,ta);p(this,ta,null),this._uiManager.enableWaiting(!0),p(this,yo,this._uiManager.imageManager.getFromUrl(s).then(r=>_(this,Ee,Qu).call(this,r)).finally(()=>_(this,Ee,Ju).call(this)));return}if(a(this,_o)){const s=a(this,_o);p(this,_o,null),this._uiManager.enableWaiting(!0),p(this,yo,this._uiManager.imageManager.getFromFile(s).then(r=>_(this,Ee,Qu).call(this,r)).finally(()=>_(this,Ee,Ju).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=S0.join(",");const n=this._uiManager._signal;p(this,yo,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),_(this,Ee,Qu).call(this,r)}s()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>_(this,Ee,Ju).call(this))),t.click()},Wg=function(){var c;const{div:t}=this;let{width:n,height:s}=a(this,lt);const[r,o]=this.pageDimensions,l=.75;if(this.width)n=this.width*r,s=this.height*o;else if(n>l*r||s>l*o){const h=Math.min(l*r/n,l*o/s);n*=h,s*=h}this._uiManager.enableWaiting(!1);const d=p(this,na,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=n/r,this.height=s/o,this.setDims(),(c=this._initialOptions)!=null&&c.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),_(this,Ee,Iv).call(this),a(this,qh)||(this.parent.addUndoableEditor(this),p(this,qh,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,Bh)&&this.div.setAttribute("aria-description",a(this,Bh)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Kg=function(t,n){const{width:s,height:r}=a(this,lt);let o=s,l=r,d=a(this,lt);for(;o>2*t||l>2*n;){const c=o,h=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const u=new OffscreenCanvas(o,l);u.getContext("2d").drawImage(d,0,0,c,h,0,0,o,l),d=u.transferToImageBitmap()}return d},Iv=function(){const[t,n]=this.parentDimensions,{width:s,height:r}=this,o=new Is,l=Math.ceil(s*t*o.sx),d=Math.ceil(r*n*o.sy),c=a(this,na);if(!c||c.width===l&&c.height===d)return;c.width=l,c.height=d;const h=a(this,Ai)?a(this,lt):_(this,Ee,Kg).call(this,l,d),u=c.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(h,0,0,h.width,h.height,0,0,l,d)},Qg=function(t){if(t){if(a(this,Ai)){const r=this._uiManager.imageManager.getSvgUrl(a(this,Zt));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=a(this,lt),n.getContext("2d").drawImage(a(this,lt),0,0),n.toDataURL()}if(a(this,Ai)){const[n,s]=this.pageDimensions,r=Math.round(this.width*n*va.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*va.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(a(this,lt),0,0,a(this,lt).width,a(this,lt).height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(a(this,lt))},E6=function(t){var l;const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===n,o=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},O(Tv,"_type","stamp"),O(Tv,"_editorType",he.STAMP);var gd,Xh,bo,ko,ia,Qn,wo,Yh,Uh,ys,sa,en,ra,So,Vh,re,Ao,Ge,Cv,L6,Hs,Ev,Lv,Jg;const os=class os{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:s,accessibilityManager:r,annotationLayer:o,drawLayer:l,textLayer:d,viewport:c,l10n:h}){x(this,Ge);x(this,gd);x(this,Xh,!1);x(this,bo,null);x(this,ko,null);x(this,ia,null);x(this,Qn,new Map);x(this,wo,!1);x(this,Yh,!1);x(this,Uh,!1);x(this,ys,null);x(this,sa,null);x(this,en,null);x(this,ra,null);x(this,So,null);x(this,Vh,-1);x(this,re);const u=[...a(os,Ao).values()];if(!os._initialized){os._initialized=!0;for(const f of u)f.initialize(h,e)}e.registerEditorTypes(u),p(this,re,e),this.pageIndex=t,this.div=n,p(this,gd,r),p(this,bo,o),this.viewport=c,p(this,en,d),this.drawLayer=l,this._structTree=s,a(this,re).addLayer(this)}get isEmpty(){return a(this,Qn).size===0}get isInvisible(){return this.isEmpty&&a(this,re).getMode()===he.NONE}updateToolbar(e){a(this,re).updateToolbar(e)}updateMode(e=a(this,re).getMode()){switch(_(this,Ge,Jg).call(this),e){case he.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case he.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case he.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===he.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of a(os,Ao).values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=a(this,en))==null?void 0:t.div)}setEditingState(e){a(this,re).setEditingState(e)}addCommands(e){a(this,re).addCommands(e)}cleanUndoStack(e){a(this,re).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=a(this,bo))==null||t.div.classList.toggle("disabled",!e)}async enable(){var n;p(this,Uh,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=a(this,So))==null||n.abort(),p(this,So,null);const e=new Set;for(const s of a(this,Ge,Cv))s.enableEditing(),s.show(!0),s.annotationElementId&&(a(this,re).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));const t=a(this,bo);if(t)for(const s of t.getEditableAnnotations()){if(s.hide(),a(this,re).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}p(this,Uh,!1),a(this,re)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var n;if(p(this,Yh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),a(this,en)&&!a(this,So)){p(this,So,new AbortController);const s=a(this,re).combinedSignal(a(this,So));a(this,en).div.addEventListener("pointerdown",r=>{const{clientX:l,clientY:d,timeStamp:c}=r,h=a(this,Vh);if(c-h>500){p(this,Vh,c);return}p(this,Vh,-1);const{classList:u}=this.div;u.toggle("getElements",!0);const f=document.elementsFromPoint(l,d);if(u.toggle("getElements",!1),!this.div.contains(f[0]))return;let m;const b=new RegExp(`^${If}[0-9]+$`);for(const S of f)if(b.test(S.id)){m=S.id;break}if(!m)return;const v=a(this,Qn).get(m);(v==null?void 0:v.annotationElementId)===null&&(r.stopPropagation(),r.preventDefault(),v.dblclick(r))},{signal:s,capture:!0})}const e=a(this,bo);if(e){const s=new Map,r=new Map;for(const l of a(this,Ge,Cv)){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(e);continue}if(l.serialize()!==null){s.set(l.annotationElementId,l);continue}else r.set(l.annotationElementId,l);(n=this.getEditableAnnotation(l.annotationElementId))==null||n.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:d}=l.data;if(a(this,re).isDeletedAnnotationElement(d)){l.updateEdited({deleted:!0});continue}let c=r.get(d);if(c){c.resetAnnotationElement(l),c.show(!1),l.show();continue}c=s.get(d),c&&(a(this,re).addChangedExistingAnnotation(c),c.renderAnnotationElement(l)&&c.show(!1)),l.show()}}_(this,Ge,Jg).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const s of a(os,Ao).values())t.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),p(this,Yh,!1)}getEditableAnnotation(e){var t;return((t=a(this,bo))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){a(this,re).getActive()!==e&&a(this,re).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=a(this,en))!=null&&e.div&&!a(this,ra)){p(this,ra,new AbortController);const t=a(this,re).combinedSignal(a(this,ra));a(this,en).div.addEventListener("pointerdown",_(this,Ge,L6).bind(this),{signal:t}),a(this,en).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=a(this,en))!=null&&e.div&&a(this,ra)&&(a(this,ra).abort(),p(this,ra,null),a(this,en).div.classList.remove("highlighting"))}enableClick(){if(a(this,ko))return;p(this,ko,new AbortController);const e=a(this,re).combinedSignal(a(this,ko));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=a(this,ko))==null||e.abort(),p(this,ko,null)}attach(e){a(this,Qn).set(e.id,e);const{annotationElementId:t}=e;t&&a(this,re).isDeletedAnnotationElement(t)&&a(this,re).removeDeletedAnnotationElement(e)}detach(e){var t;a(this,Qn).delete(e.id),(t=a(this,gd))==null||t.removePointerInTextLayer(e.contentDiv),!a(this,Yh)&&e.annotationElementId&&a(this,re).addDeletedAnnotationElement(e)}remove(e){this.detach(e),a(this,re).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(a(this,re).addDeletedAnnotationElement(e.annotationElementId),Ze.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),a(this,re).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!a(this,Uh)),a(this,re).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!a(this,ia)&&(e._focusEventsAllowed=!1,p(this,ia,setTimeout(()=>{p(this,ia,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:a(this,re)._signal}),t.focus())},0))),e._structTreeParentId=(n=a(this,gd))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of a(this,Qn).values())if(t.uid===e)return t;return null}getNextId(){return a(this,re).getId()}combinedSignal(e){return a(this,re).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=a(this,Ge,Hs))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await a(this,re).updateMode(e.mode);const{offsetX:n,offsetY:s}=_(this,Ge,Lv).call(this),r=this.getNextId(),o=_(this,Ge,Ev).call(this,{parent:this,id:r,x:n,y:s,uiManager:a(this,re),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=a(os,Ao).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,a(this,re)))||null}createAndAddNewEditor(e,t,n={}){const s=this.getNextId(),r=_(this,Ge,Ev).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:a(this,re),isCentered:t,...n});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(_(this,Ge,Lv).call(this),!0,e)}setSelected(e){a(this,re).setSelected(e)}toggleSelected(e){a(this,re).toggleSelected(e)}unselect(e){a(this,re).unselect(e)}pointerup(e){var s;const{isMac:t}=sn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!a(this,wo)||(p(this,wo,!1),(s=a(this,Ge,Hs))!=null&&s.isDrawer&&a(this,Ge,Hs).supportMultipleDrawings))return;if(!a(this,Xh)){p(this,Xh,!0);return}const n=a(this,re).getMode();if(n===he.STAMP||n===he.SIGNATURE){a(this,re).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var s;if(a(this,re).getMode()===he.HIGHLIGHT&&this.enableTextSelection(),a(this,wo)){p(this,wo,!1);return}const{isMac:t}=sn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(p(this,wo,!0),(s=a(this,Ge,Hs))!=null&&s.isDrawer){this.startDrawingSession(e);return}const n=a(this,re).getActive();p(this,Xh,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),a(this,ys)){a(this,Ge,Hs).startDrawing(this,a(this,re),!1,e);return}a(this,re).setCurrentDrawingSession(this),p(this,ys,new AbortController);const t=a(this,re).combinedSignal(a(this,ys));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(p(this,sa,null),this.commitOrRemove())},{signal:t}),a(this,Ge,Hs).startDrawing(this,a(this,re),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&p(this,sa,t);return}a(this,sa)&&setTimeout(()=>{var t;(t=a(this,sa))==null||t.focus(),p(this,sa,null)},0)}endDrawingSession(e=!1){return a(this,ys)?(a(this,re).setCurrentDrawingSession(null),a(this,ys).abort(),p(this,ys,null),p(this,sa,null),a(this,Ge,Hs).endDrawing(e)):null}findNewParent(e,t,n){const s=a(this,re).findParent(t,n);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return a(this,ys)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,ys)&&a(this,Ge,Hs).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=a(this,re).getActive())==null?void 0:e.parent)===this&&(a(this,re).commitOrRemove(),a(this,re).setActiveEditor(null)),a(this,ia)&&(clearTimeout(a(this,ia)),p(this,ia,null));for(const n of a(this,Qn).values())(t=a(this,gd))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,a(this,Qn).clear(),a(this,re).removeLayer(this)}render({viewport:e}){this.viewport=e,jo(this.div,e);for(const t of a(this,re).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){a(this,re).commitOrRemove(),_(this,Ge,Jg).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,jo(this.div,{rotation:n}),t!==n)for(const s of a(this,Qn).values())s.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return a(this,re).viewParameters.realScale}};gd=new WeakMap,Xh=new WeakMap,bo=new WeakMap,ko=new WeakMap,ia=new WeakMap,Qn=new WeakMap,wo=new WeakMap,Yh=new WeakMap,Uh=new WeakMap,ys=new WeakMap,sa=new WeakMap,en=new WeakMap,ra=new WeakMap,So=new WeakMap,Vh=new WeakMap,re=new WeakMap,Ao=new WeakMap,Ge=new WeakSet,Cv=function(){return a(this,Qn).size!==0?a(this,Qn).values():a(this,re).getEditors(this.pageIndex)},L6=function(e){a(this,re).unselectAll();const{target:t}=e;if(t===a(this,en).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&a(this,en).div.contains(t)){const{isMac:n}=sn.platform;if(e.button!==0||e.ctrlKey&&n)return;a(this,re).showAllEditors("highlight",!0,!0),a(this,en).div.classList.add("free"),this.toggleDrawing(),M0.startHighlighting(this,a(this,re).direction==="ltr",{target:a(this,en).div,x:e.x,y:e.y}),a(this,en).div.addEventListener("pointerup",()=>{a(this,en).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,re)._signal}),e.preventDefault()}},Hs=function(){return a(os,Ao).get(a(this,re).getMode())},Ev=function(e){const t=a(this,Ge,Hs);return t?new t.prototype.constructor(e):null},Lv=function(){const{x:e,y:t,width:n,height:s}=this.boundingClientRect,r=Math.max(0,e),o=Math.max(0,t),l=Math.min(window.innerWidth,e+n),d=Math.min(window.innerHeight,t+s),c=(r+l)/2-e,h=(o+d)/2-t,[u,f]=this.viewport.rotation%180===0?[c,h]:[h,c];return{offsetX:u,offsetY:f}},Jg=function(){for(const e of a(this,Qn).values())e.isEmpty()&&e.remove()},O(os,"_initialized",!1),x(os,Ao,new Map([cv,_v,Tv,M0,Pv].map(e=>[e._editorType,e])));let R0=os;var _s,Rn,xd,pm,t1,M6,ur,Mv,F6,Fv;const Bt=class Bt{constructor({pageIndex:e}){x(this,ur);x(this,_s,null);x(this,Rn,new Map);x(this,xd,new Map);this.pageIndex=e}setParent(e){if(!a(this,_s)){p(this,_s,e);return}if(a(this,_s)!==e){if(a(this,Rn).size>0)for(const t of a(this,Rn).values())t.remove(),e.append(t);p(this,_s,e)}}static get _svgFactory(){return ge(this,"_svgFactory",new Rf)}draw(e,t=!1,n=!1){const s=Ot(Bt,pm)._++,r=_(this,ur,Mv).call(this),o=Bt._svgFactory.createElement("defs");r.append(o);const l=Bt._svgFactory.createElement("path");o.append(l);const d=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",d),l.setAttribute("vector-effect","non-scaling-stroke"),t&&a(this,xd).set(s,l);const c=n?_(this,ur,F6).call(this,o,d):null,h=Bt._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${d}`),this.updateProperties(r,e),a(this,Rn).set(s,r),{id:s,clipPathId:`url(#${c})`}}drawOutline(e,t){const n=Ot(Bt,pm)._++,s=_(this,ur,Mv).call(this),r=Bt._svgFactory.createElement("defs");s.append(r);const o=Bt._svgFactory.createElement("path");r.append(o);const l=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let d;if(t){const u=Bt._svgFactory.createElement("mask");r.append(u),d=`mask_p${this.pageIndex}_${n}`,u.setAttribute("id",d),u.setAttribute("maskUnits","objectBoundingBox");const f=Bt._svgFactory.createElement("rect");u.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const m=Bt._svgFactory.createElement("use");u.append(m),m.setAttribute("href",`#${l}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const c=Bt._svgFactory.createElement("use");s.append(c),c.setAttribute("href",`#${l}`),d&&c.setAttribute("mask",`url(#${d})`);const h=c.cloneNode();return s.append(h),c.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,e),a(this,Rn).set(n,s),n}finalizeDraw(e,t){a(this,xd).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var d;if(!t)return;const{root:n,bbox:s,rootClass:r,path:o}=t,l=typeof e=="number"?a(this,Rn).get(e):e;if(l){if(n&&_(this,ur,Fv).call(this,l,n),s&&_(d=Bt,t1,M6).call(d,l,s),r){const{classList:c}=l;for(const[h,u]of Object.entries(r))c.toggle(h,u)}if(o){const h=l.firstChild.firstChild;_(this,ur,Fv).call(this,h,o)}}}updateParent(e,t){if(t===this)return;const n=a(this,Rn).get(e);n&&(a(t,_s).append(n),a(this,Rn).delete(e),a(t,Rn).set(e,n))}remove(e){a(this,xd).delete(e),a(this,_s)!==null&&(a(this,Rn).get(e).remove(),a(this,Rn).delete(e))}destroy(){p(this,_s,null);for(const e of a(this,Rn).values())e.remove();a(this,Rn).clear(),a(this,xd).clear()}};_s=new WeakMap,Rn=new WeakMap,xd=new WeakMap,pm=new WeakMap,t1=new WeakSet,M6=function(e,[t,n,s,r]){const{style:o}=e;o.top=`${100*n}%`,o.left=`${100*t}%`,o.width=`${100*s}%`,o.height=`${100*r}%`},ur=new WeakSet,Mv=function(){const e=Bt._svgFactory.create(1,1,!0);return a(this,_s).append(e),e.setAttribute("aria-hidden",!0),e},F6=function(e,t){const n=Bt._svgFactory.createElement("clipPath");e.append(n);const s=`clip_${t}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const r=Bt._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),s},Fv=function(e,t){for(const[n,s]of Object.entries(t))s===null?e.removeAttribute(n):e.setAttribute(n,s)},x(Bt,t1),x(Bt,pm,0);let D0=Bt;globalThis._pdfjsTestingUtils={HighlightOutliner:uv};globalThis.pdfjsLib={AbortException:xa,AnnotationEditorLayer:R0,AnnotationEditorParamsType:Se,AnnotationEditorType:he,AnnotationEditorUIManager:Oo,AnnotationLayer:E0,AnnotationMode:aa,AnnotationType:It,applyOpacity:Ck,build:Rw,ColorPicker:Ff,createValidAbsoluteUrl:Iy,CSSConstants:Ik,DOMSVGFactory:Rf,DrawLayer:D0,FeatureTest:sn,fetchData:au,findContrastColor:Ek,getDocument:Ew,getFilenameFromUrl:Ak,getPdfFilenameFromUrl:Pk,getRGB:ou,getUuid:Ey,getXfaPageViewport:Tk,GlobalWorkerOptions:ws,ImageKind:cf,InvalidPDFException:w0,isDataScheme:wm,isPdfFile:b1,isValidExplicitDest:dw,MathClamp:Pn,noContextMenu:Ri,normalizeUnicode:wk,OPS:eu,OutputScale:Is,PasswordResponses:bk,PDFDataRangeTransport:Hy,PDFDateString:Lf,PDFWorker:nu,PermissionFlag:_k,PixelsPerInch:va,RenderingCancelledException:_1,renderRichText:Fy,ResponseException:Cf,setLayerDimensions:jo,shadow:ge,SignatureExtractor:dr,stopEvent:pt,SupportedImageMimeTypes:S0,TextLayer:tu,TouchManager:Mf,updateUrlHash:Cy,Util:ee,VerbosityLevel:_m,version:Fw,XfaLayer:My};const R6=Object.freeze(Object.defineProperty({__proto__:null,AbortException:xa,AnnotationEditorLayer:R0,AnnotationEditorParamsType:Se,AnnotationEditorType:he,AnnotationEditorUIManager:Oo,AnnotationLayer:E0,AnnotationMode:aa,AnnotationType:It,CSSConstants:Ik,ColorPicker:Ff,DOMSVGFactory:Rf,DrawLayer:D0,FeatureTest:sn,GlobalWorkerOptions:ws,ImageKind:cf,InvalidPDFException:w0,MathClamp:Pn,OPS:eu,OutputScale:Is,PDFDataRangeTransport:Hy,PDFDateString:Lf,PDFWorker:nu,PasswordResponses:bk,PermissionFlag:_k,PixelsPerInch:va,RenderingCancelledException:_1,ResponseException:Cf,SignatureExtractor:dr,SupportedImageMimeTypes:S0,TextLayer:tu,TouchManager:Mf,Util:ee,VerbosityLevel:_m,XfaLayer:My,applyOpacity:Ck,build:Rw,createValidAbsoluteUrl:Iy,fetchData:au,findContrastColor:Ek,getDocument:Ew,getFilenameFromUrl:Ak,getPdfFilenameFromUrl:Pk,getRGB:ou,getUuid:Ey,getXfaPageViewport:Tk,isDataScheme:wm,isPdfFile:b1,isValidExplicitDest:dw,noContextMenu:Ri,normalizeUnicode:wk,renderRichText:Fy,setLayerDimensions:jo,shadow:ge,stopEvent:pt,updateUrlHash:Cy,version:Fw},Symbol.toStringTag,{value:"Module"})),TA="/transfer-tool-ui/assets/pdf.worker.min-qwK7q_zL.mjs";ws.workerSrc=TA;async function IA(i,e){const t=e==null?void 0:e.maxChars,n=new Uint8Array(await i.arrayBuffer()),s=await R6.getDocument({data:n}).promise;let r="",o=!1;for(let l=1;l<=s.numPages;l+=1){const u=((await(await s.getPage(l)).getTextContent()).items??[]).map(f=>typeof(f==null?void 0:f.str)=="string"?f.str:"").filter(Boolean).join(" ");if(u&&(r+=u+`
`,r.length>=t)){r=r.slice(0,t),o=!0;break}}return{text:r,pageCount:s.numPages,truncated:o}}const CA={knee:"Kn",shoulder:"Axel",back:"Rygg",neck:"Nacke",hip:"Hft",hand:"Hand",foot:"Fot",other:"Annat"};function EA(i){if(!Number.isFinite(i)||i<0)return"0s";const e=Math.floor(i),t=Math.floor(e/60),n=e%60;return t>0?`${t}:${String(n).padStart(2,"0")}`:`${n}s`}function LA(i,e){return new Promise((t,n)=>{if(e!=null&&e.aborted)return n(new DOMException("Aborted","AbortError"));let s=null;const r=()=>{s&&clearTimeout(s),n(new DOMException("Aborted","AbortError"))};s=setTimeout(()=>{e==null||e.removeEventListener("abort",r),t()},i),e==null||e.addEventListener("abort",r,{once:!0})})}function MA(i,e){const t=URL.createObjectURL(i),n=document.createElement("a");n.href=t,n.download=e,n.click(),URL.revokeObjectURL(t)}function Kb(i){var n,s;const{err:e,timeoutStage:t}=i;if(!e)return"Unexpected error";if(e.code==="TIMEOUT"){const r=(s=(n=e.meta)==null?void 0:n.timingsMs)==null?void 0:s.openAiMsSoFar,o=typeof r=="number"&&Number.isFinite(r)?Math.round(r/1e3):null;return t==="ai"?[`AI tog fr lng tid den hr gngen${o?` (${o}s)`:""}. Frsk igen.`,"Tips: Om ni r flera som testar, vnta tills ngon fr sin frhandsvisning klar innan nsta kr."].join(`
`):["Det tog fr lng tid den hr gngen. Testa igen om en stund.","Tips: Om ni r flera som testar, vnta tills ngon fr sin frhandsvisning klar innan nsta kr."].join(`
`)}return`${e.code}: ${e.error}`}function Qb({title:i,subtitle:e,file:t,onChange:n}){return y.jsxs("label",{className:"dropcard",children:[y.jsx("input",{type:"file",accept:"application/pdf",className:"drop-input",onChange:s=>{var r;return n(((r=s.target.files)==null?void 0:r[0])||null)}}),y.jsx("div",{className:"dropcard-title",children:i}),y.jsx("div",{className:"dropcard-subtitle",children:e}),y.jsx("div",{className:"dropcard-file",children:t?t.name:"Ingen fil vald"})]})}function FA({question:i,answersByFieldId:e,onChangeOption:t,onChangeSubQuestion:n}){const{id:s,label:r,kind:o,options:l,subQuestions:d}=i,c=m=>e[m]??"",h=()=>!l||!l.length||o==="text"||o==="textarea"?null:y.jsx("div",{className:"checkbox-row",children:l.map(m=>{const b=vk(c(m.pdfFieldId))==="X";return y.jsxs("button",{type:"button",className:`checkbox-pill${b?" checked":""}`,onClick:()=>t(m.pdfFieldId,b?"":"X"),children:[y.jsx("span",{className:`checkbox-square${b?" checked":""}`,children:b?"X":""}),y.jsx("span",{children:m.label})]},m.id)})}),u=(o==="text"||o==="textarea")&&l&&l[0]?y.jsx("textarea",{value:c(l[0].pdfFieldId),onChange:m=>t(l[0].pdfFieldId,m.target.value)}):null,f=()=>!d||!d.length?null:y.jsx("div",{className:"subquestions",children:d.map(m=>y.jsxs("div",{className:"subquestion",children:[y.jsx("div",{className:"sources",children:m.label}),y.jsx("textarea",{value:c(m.pdfFieldId),onChange:b=>n(m.pdfFieldId,b.target.value)})]},m.id))});return y.jsxs("div",{className:"field-card",children:[y.jsx("div",{className:"question",children:r}),h(),u,f()]},s)}function RA(){const i=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="[::1]"||!1,[e,t]=M.useState(null),[n,s]=M.useState(null),[r,o]=M.useState([]),[l,d]=M.useState("lf"),[c,h]=M.useState([]),[u,f]=M.useState(""),[m,b]=M.useState([]),[v,S]=M.useState(""),[g,k]=M.useState(null),[w,A]=M.useState(null),[T,I]=M.useState(null),[C,L]=M.useState([]),[F,D]=M.useState([]),[j,N]=M.useState(void 0),[ie,R]=M.useState({}),[X,q]=M.useState(!1),[G,H]=M.useState(!1),W=M.useRef(!1),[se,J]=M.useState(null),[ae,de]=M.useState(null),[st,Ue]=M.useState(null),[vt,Re]=M.useState(!1),[Oe,ce]=M.useState(null),[Hi,si]=M.useState(null),Es=M.useRef(null),fr=M.useRef(null),[lu,ri]=M.useState(0),[Ed,yt]=M.useState(null),[Ld,Md]=M.useState(!1),du=w??v??"unknown",Uo=M.useMemo(()=>z8(F,du),[F,du]),Tm=M.useMemo(()=>{const $=new Map;return Uo.forEach(pe=>{pe.fieldIds.forEach(ye=>$.set(ye,pe.id))}),$},[Uo]),$t=M.useMemo(()=>{const $=new Map;return Uo.forEach(pe=>$.set(pe.id,pe)),$},[Uo]);M.useEffect(()=>{let $=!1;return(async()=>{try{const pe=await fetch(He("/api/catalog/insurers"));if(!pe.ok)return;const ye=await pe.json(),we=Array.isArray(ye.insurers)?ye.insurers:[];if($)return;o(we),we.length>0&&(we.some(Pt=>Pt.id===l)||d(we[0].id))}catch{$||o([])}})(),()=>{$=!0}},[]),M.useEffect(()=>{if(!l)return;let $=!1;return(async()=>{try{const pe=new URLSearchParams({insurerId:l}),ye=await fetch(He(`/api/catalog/body-parts?${pe.toString()}`));if(!ye.ok)return;const we=await ye.json(),Mt=Array.isArray(we.bodyParts)?we.bodyParts:[];if($)return;h(Mt),f(Pt=>Pt&&Mt.includes(Pt)?Pt:Mt[0]??"")}catch{$||(h([]),f(""))}})(),()=>{$=!0}},[l]),M.useEffect(()=>{if(!l||!u)return;let $=!1;return(async()=>{var pe;try{const ye=new URLSearchParams({insurerId:l,bodyPart:u}),we=await fetch(He(`/api/catalog/forms?${ye.toString()}`));if(!we.ok)return;const Mt=await we.json(),Pt=Array.isArray(Mt.forms)?Mt.forms:[];if($)return;b(Pt),S(((pe=Pt[0])==null?void 0:pe.id)??"")}catch{$||(b([]),S(""))}})(),()=>{$=!0}},[l,u]),M.useEffect(()=>{if(!X)return;const $=setInterval(()=>{const pe=fr.current;if(!pe)return;const ye=Math.max(0,Math.floor((Date.now()-pe)/1e3));ri(we=>we===ye?we:ye)},250);return()=>clearInterval($)},[X]);const pr=$=>{var ye;const pe={};return $.questions.forEach(we=>{pe[we.questionId]=we.answer??""}),(ye=$.form)==null||ye.questions.forEach(we=>{var Mt,Pt;(Mt=we.options)==null||Mt.forEach(ai=>{pe[ai.pdfFieldId]=ai.answer??""}),(Pt=we.subQuestions)==null||Pt.forEach(ai=>{pe[ai.pdfFieldId]=ai.answer??""})}),pe},Ls=($,pe)=>{R(ye=>ye[$]===pe?ye:{...ye,[$]:pe}),D(ye=>ye.map(we=>we.questionId===$?{...we,answer:pe}:we))},ka=async()=>{var pe;if(!e||!v)return;(pe=Es.current)==null||pe.abort();const $=new AbortController;Es.current=$,fr.current=Date.now(),ri(0),q(!0),J(null),de(null),yt(null),Md(!1),A(null),I(null),L([]),ce(null),si(null),Re(!1);try{let Mt=null,Pt=!0;const ai=(rt,Ke)=>["Servern r upptagen",`Flera andra bearbetar just nu ett dokument. Frsker igen om ${rt} sekunder (frsk ${Ke})`,"Du behver inte gra ngot  vi frsker automatiskt."].join(`
`),Cn=()=>["Kunde inte starta just nu","Servern r fortfarande upptagen. Testa igen om en liten stund.","Tips: Om ni r flera som testar, vnta tills ngon fr sin frhandsvisning klar innan nsta kr."].join(`
`),wa=()=>{const rt=new FormData;return rt.append("sourcePdf",e),rt.append("insurerId",l),rt.append("formId",v),rt};try{de("Extraherar PDF-text lokalt");const rt=await IA(e,{maxChars:2e4});if(Mt=rt.text.trim(),!Mt)throw new Error("No text extracted from PDF");rt.truncated&&console.warn("Client PDF text extraction truncated to 20k chars")}catch(rt){console.warn("Client PDF text extraction failed; falling back to server-side extraction",rt),Mt=null,Pt=!1}finally{de(null)}const Dd=10*60*1e3,Me=Date.now()+Dd;let Tt=0,_t=null;for(;Date.now()<Me&&(Tt+=1,de("Analyserar (AI kr)"),Pt&&Mt?_t=await fetch(He("/api/convert/preview-text"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({insurerId:l,formId:v,extractedText:Mt}),signal:$.signal}):_t=await fetch(He("/api/convert/preview"),{method:"POST",body:wa(),signal:$.signal}),_t.status===429);){const rt=_t.headers.get("retry-after"),Ke=rt?Number.parseInt(rt,10):NaN,Nd=Number.isFinite(Ke)&&Ke>0?Ke:3,Lm=Nd*1e3;de(ai(Nd,Tt)),await LA(Lm,$.signal)}if(!_t)throw new Error("No response from server");if(si(_t.headers.get("x-timeout-stage")),de(null),_t.status===429)throw new Error(Cn());if(!_t.ok){let rt=null;try{rt=await _t.json(),ce((rt==null?void 0:rt.meta)??null)}catch{}throw new Error(Kb({err:rt,timeoutStage:_t.headers.get("x-timeout-stage")}))}const Ft=await _t.json();ce((Ft==null?void 0:Ft.meta)??null),k(Ft.canonicalInjury),A(Ft.resolvedVariantId??null),I(Ft.resolutionReason??null),L(Array.isArray(Ft.warnings)?Ft.warnings:[]),D(Ft.questions),N(Ft.form),R(pr(Ft))}catch(ye){(ye==null?void 0:ye.name)==="AbortError"||(ye==null?void 0:ye.code)==="ABORT_ERR"?J("Avbrutet."):J(ye.message)}finally{de(null),q(!1),Es.current=null,fr.current=null}},cu=()=>{var $;($=Es.current)==null||$.abort()},A1=async()=>{if(!(!e||!n||F.length===0)&&v&&!W.current){W.current=!0,H(!0),J(null),Ue(null),yt(null),Md(!1);try{const pe=(Me,Tt)=>["Servern r upptagen",`Flera andra bearbetar just nu ett dokument. Frsker igen om ${Me} sekunder (frsk ${Tt})`,"Du behver inte gra ngot  vi frsker automatiskt."].join(`
`),ye=()=>["Kunde inte starta just nu","Servern r fortfarande upptagen. Testa igen om en liten stund.","Tips: Om ni r flera som testar, vnta tills ngon fr sin PDF klar innan nsta kr."].join(`
`),we=()=>{const Me=new FormData;Me.append("sourcePdf",e),Me.append("templatePdf",n),Me.append("insurerId",l),Me.append("formId",v),w&&Me.append("resolvedVariantId",w);const Tt=Object.keys(ie).length>0?ie:F.reduce((_t,Ft)=>(_t[Ft.questionId]=Ft.answer,_t),{});return Me.append("answers",JSON.stringify(Tt)),Me},Mt=10*60*1e3,Pt=Date.now()+Mt;let ai=0,Cn=null;for(;Date.now()<Pt&&(ai+=1,Ue("Bearbetar (det hr kan ta upp till ngon minut)"),Cn=await fetch(He("/api/convert/generate"),{method:"POST",body:we()}),Cn.status===429);){const Me=Cn.headers.get("retry-after"),Tt=Me?Number.parseInt(Me,10):NaN,_t=Number.isFinite(Tt)&&Tt>0?Tt:5,Ft=_t*1e3;Ue(pe(_t,ai)),await new Promise(rt=>setTimeout(rt,Ft))}if(!Cn)throw new Error("No response from server");if(Ue(null),Cn.status===429)throw new Error(ye());const wa=Cn.headers.get("content-type")||"";if(!Cn.ok){let Me=null;try{Me=await Cn.json()}catch{}throw(Me==null?void 0:Me.code)==="PDF_ANCHOR_NOT_FOUND"?new Error("PDF_ANCHOR_NOT_FOUND: Kunde inte hitta frgetexten i LF-PDF:en. Kontrollera att du valt rtt formulrvariant."):((Me==null?void 0:Me.code)==="ALIGNMENT_FAILED"&&typeof Me.error=="string"&&/canonical template|sha mismatch|references template pages|missing templateplacement/i.test(Me.error)&&yt(w??v),new Error(Kb({err:Me})))}if(!wa.includes("application/pdf"))throw new Error("Expected PDF response");const Dd=await Cn.blob();MA(Dd,"lf-filled.pdf"),Md(!0)}catch($){J($.message)}finally{H(!1),W.current=!1,Ue(null)}}},mr=!!e&&!X&&!!v,gr=!!e&&!!n&&F.length>0&&!G&&!!v,hu=F.length>0||!!j,Im=M.useMemo(()=>g?JSON.stringify(g,null,2):"{}",[g]),Fd=($,pe)=>{Ls($,pe)},Cm=$=>y.jsxs("div",{className:"field-card",children:[y.jsx("div",{className:"question",children:$.questionLabel}),y.jsxs("div",{className:"sources",children:["Source: ",$.sourceFields.join(", ")," ",$.maxCharacters?`(max ${$.maxCharacters} tecken)`:""]}),y.jsx("textarea",{value:ie[$.questionId]??$.answer,onChange:pe=>Fd($.questionId,pe.target.value)})]},$.questionId),Em=()=>F.length?y.jsx("div",{className:"grid",children:(()=>{const $=new Set;return F.map(pe=>{const ye=Tm.get(pe.questionId);if(ye){if($.has(ye))return null;$.add(ye);const we=$t.get(ye);return we?y.jsx(M8,{group:we,questions:F,onChange:Fd},we.id):null}return Cm(pe)})})()}):null,Rd=()=>j?y.jsx("div",{className:"grid",children:j.questions.map($=>y.jsx(FA,{question:$,answersByFieldId:ie,onChangeOption:Ls,onChangeSubQuestion:Ls},$.id))}):null;return y.jsxs("div",{className:"app",children:[y.jsx("h1",{children:"Egenintygsverfring"}),y.jsx("p",{className:"subhead",children:"X  Y flde: ladda upp Insurellos ifyllda PDF och frskringsbolagets mall, frhandsgranska AI-svar, redigera och ladda sedan ner ifylld PDF."}),y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"grid two-col",children:[y.jsx(Qb,{title:"1. Klla  Insurellos skadeformulr (PDF, ifylld av kund)",subtitle:"Slpp PDF hr eller klicka fr att vlja.",file:e,onChange:t}),y.jsx(Qb,{title:"2. Ml  Frskringsbolagets blankett (PDF att fylla)",subtitle:"Slpp PDF hr eller klicka fr att vlja.",file:n,onChange:s})]}),y.jsxs("div",{className:"row",style:{marginTop:12,gap:10,alignItems:"flex-end"},children:[y.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap",alignItems:"flex-end"},children:[y.jsxs("label",{children:["Frskringsbolag",y.jsx("br",{}),y.jsxs("select",{value:l,onChange:$=>{d($.target.value),A(null),I(null),L([])},children:[r.length===0&&y.jsx("option",{value:l,children:l}),r.map($=>y.jsx("option",{value:$.id,children:$.displayName},$.id))]})]}),y.jsxs("label",{children:["Kroppsdel",y.jsx("br",{}),y.jsxs("select",{value:u,disabled:!l||c.length===0,onChange:$=>{f($.target.value),A(null),I(null),L([])},children:[c.length===0&&y.jsx("option",{value:"",children:""}),c.map($=>y.jsx("option",{value:$,children:CA[$]??$},$))]})]})]}),y.jsx("div",{style:{flex:1}}),y.jsxs("div",{style:{display:"flex",gap:10},children:[y.jsx("button",{onClick:ka,disabled:!mr,children:X?"Genererar frhandsgranskning...":"Generera frhandsgranskning"}),X?y.jsx("button",{onClick:cu,type:"button",children:"Avbryt"}):null,y.jsx("button",{onClick:A1,disabled:!gr,title:"Krver preview + bda PDF:erna",children:G?"Skapar PDF...":"Skapa ifylld PDF"})]})]}),st&&y.jsx("div",{style:{marginTop:10,padding:"10px 12px",borderRadius:10,background:"rgba(52, 152, 219, 0.12)",border:"1px solid rgba(52, 152, 219, 0.35)",color:"var(--text-on-card)"},children:y.jsx("div",{style:{fontWeight:600,whiteSpace:"pre-line"},children:st})}),ae&&y.jsx("div",{style:{marginTop:10,padding:"10px 12px",borderRadius:10,background:"rgba(52, 152, 219, 0.12)",border:"1px solid rgba(52, 152, 219, 0.35)",color:"var(--text-on-card)"},children:y.jsxs("div",{style:{fontWeight:600,whiteSpace:"pre-line"},children:[ae,X?`
Tid: ${EA(lu)}`:""]})}),(Oe||Hi)&&y.jsxs("div",{style:{marginTop:10,padding:"10px 12px",borderRadius:10,background:"rgba(27, 126, 183, 0.06)",border:"1px solid rgba(27, 126, 183, 0.18)",color:"var(--text-on-card)"},children:[y.jsx("button",{type:"button",onClick:()=>Re($=>!$),style:{background:"transparent",color:"inherit",border:"none",padding:0,cursor:"pointer",fontWeight:700},children:vt?"Detaljer (dlj)":"Detaljer"}),vt?y.jsxs("div",{style:{marginTop:8,fontSize:13,opacity:.92,lineHeight:1.5},children:[Oe!=null&&Oe.previewPath?y.jsxs("div",{children:[y.jsx("strong",{children:"Path:"})," ",y.jsx("code",{children:Oe.previewPath})]}):null,Oe!=null&&Oe.extractionMode?y.jsxs("div",{children:[y.jsx("strong",{children:"Extraction:"})," ",y.jsx("code",{children:Oe.extractionMode})]}):null,Hi?y.jsxs("div",{children:[y.jsx("strong",{children:"Timeout stage:"})," ",y.jsx("code",{children:Hi})]}):null,Oe!=null&&Oe.timingsMs?y.jsxs("div",{style:{marginTop:6},children:[y.jsx("strong",{children:"Timings:"})," ",y.jsx("code",{children:JSON.stringify(Oe.timingsMs)})]}):null,Oe!=null&&Oe.ai?y.jsxs("div",{style:{marginTop:6},children:[y.jsx("strong",{children:"AI:"})," ",y.jsx("code",{children:JSON.stringify(Oe.ai)})]}):null,Oe!=null&&Oe.server?y.jsxs("div",{style:{marginTop:6},children:[y.jsx("strong",{children:"Server:"})," ",y.jsx("code",{children:JSON.stringify(Oe.server)})]}):null]}):null]}),se&&y.jsx("div",{className:"error",children:se}),Ed&&y.jsxs("div",{style:{marginTop:10,padding:"10px 12px",borderRadius:10,background:"rgba(231, 76, 60, 0.14)",border:"1px solid rgba(231, 76, 60, 0.35)"},children:[y.jsx("div",{style:{fontWeight:700,marginBottom:4},children:"Fix: layout/canonical mismatch"}),y.jsxs("div",{style:{opacity:.92,fontSize:13,lineHeight:1.45},children:["Generate failed because the canonical template and/or saved layout for ",y.jsx("code",{children:Ed})," are out of sync."," ",i?y.jsxs(y.Fragment,{children:["Open Layout Inspector, use ",y.jsx("strong",{children:"Page offset (migration)"})," if cover pages changed, then"," ",y.jsx("strong",{children:"Calibrate & persist layout"}),". If the canonical PDF is incomplete/wrong, upload the correct one in the Templates tab."]}):y.jsx(y.Fragment,{children:"Ask an operator to open Layout Inspector/Templates locally to fix the canonical template/layout mismatch."})]}),i?y.jsx("div",{style:{marginTop:8},children:y.jsx("a",{href:`/?tab=inspector&formId=${encodeURIComponent(Ed)}`,style:{color:"#86c5ff",textDecoration:"none",fontWeight:700},children:"Open Layout Inspector "})}):null]}),Ld&&y.jsx("div",{className:"success",children:"PDF nedladdad."}),w&&y.jsxs("div",{style:{marginTop:10,fontSize:13,opacity:.9},children:[y.jsx("strong",{children:"Resolved variant:"})," ",w," ",T?y.jsxs("span",{style:{opacity:.8},children:["(",T,")"]}):null]}),C.length>0&&y.jsxs("div",{style:{marginTop:10,padding:"10px 12px",borderRadius:10,background:"rgba(241, 196, 15, 0.18)",border:"1px solid rgba(241, 196, 15, 0.35)",color:"var(--text-on-card)"},children:[y.jsx("div",{style:{fontWeight:600},children:"Warnings (non-fatal)"}),y.jsx("div",{style:{opacity:.9,marginTop:4},children:"Some verbatim fields could not be copied exactly and were left blank."}),y.jsxs("ul",{style:{marginTop:8,paddingLeft:18},children:[C.slice(0,5).map($=>y.jsxs("li",{children:[y.jsx("code",{children:$.fieldId}),": ",$.reason]},$.fieldId)),C.length>5&&y.jsxs("li",{children:["and ",C.length-5," more"]})]})]})]}),hu&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"panel",children:[y.jsx("div",{className:"badge",children:"Insurer questions"}),j?Rd():Em()]}),g&&y.jsxs("div",{className:"panel",children:[y.jsx("div",{className:"badge",children:"Canonical injury profile"}),y.jsx("pre",{children:Im})]})]})]})}const da={short:{fontSize:10,lineHeight:12},medium:{fontSize:9,lineHeight:11},long:{fontSize:8.5,lineHeight:10},note:{fontSize:8,lineHeight:10}},DA=.4,NA=.3,HA=4,jA=3;function OA(i,e){const t=da[e];return{...i,fontSize:i.fontSize??t.fontSize,lineHeight:i.lineHeight??t.lineHeight}}function qy(i){const e=da[i];return{paddingX:Math.max(HA,e.fontSize*DA),paddingY:Math.max(jA,e.lineHeight*NA)}}function Qd(i){return i?i<=20?"short":i<=120?"medium":i<=400?"long":"note":"medium"}const zA=10,BA=12,D6=8.5,N6=10,qA={regions:[{id:"insured_name",anchorText:"Intyg knskada Namn Personnummer Skadedatum Skadenummer",anchorSpec:{primary:["Intyg knskada"],requiredNearby:["Namn","Personnummer","Skadedatum","Skadenummer"],proximity:{maxDx:900,maxDy:220}},textKind:"short",pageIndex:2,placement:{offsetX:-423.99,offsetY:-111.37,width:180,lineHeight:12,maxLines:1,fontSize:7}},{id:"insured_personnummer",anchorText:"Intyg knskada Namn Personnummer Skadedatum Skadenummer",anchorSpec:{primary:["Intyg knskada"],requiredNearby:["Namn","Personnummer","Skadedatum","Skadenummer"],proximity:{maxDx:900,maxDy:220}},textKind:"short",pageIndex:2,placement:{offsetX:-236.65,offsetY:-111.37,width:116.66666666666669,lineHeight:12,maxLines:1,fontSize:7}},{id:"injury_date",anchorText:"Intyg knskada Namn Personnummer Skadedatum Skadenummer",anchorSpec:{primary:["Intyg knskada"],requiredNearby:["Namn","Personnummer","Skadedatum","Skadenummer"],proximity:{maxDx:900,maxDy:220}},textKind:"short",pageIndex:2,placement:{offsetX:-110.65,offsetY:-111.37,width:52.666666666666686,lineHeight:12,maxLines:1,fontSize:7}},{id:"claim_number",anchorText:"Intyg knskada Namn Personnummer Skadedatum Skadenummer",anchorSpec:{primary:["Intyg knskada"],requiredNearby:["Namn","Personnummer","Skadedatum","Skadenummer"],proximity:{maxDx:900,maxDy:220}},textKind:"short",pageIndex:2,placement:{offsetX:-49.99,offsetY:-116.04,width:118.66666666666669,lineHeight:12,maxLines:1,fontSize:7}},{id:"occupation",anchorText:"Yrke Skadan avser",textKind:"short",pageIndex:2,placement:{offsetX:1.51,offsetY:48.12,width:490.00000000000006,lineHeight:12,maxLines:1,fontSize:7}},{id:"injury_side_left",kind:"checkbox",anchorText:"Skadan avser l: Vnster kn D Hger kn",pageIndex:2,placement:{offsetX:-7.4,offsetY:4.5,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"injury_side_right",kind:"checkbox",anchorText:"Skadan avser l: Vnster kn D Hger kn",pageIndex:2,placement:{offsetX:55.3,offsetY:5.8,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q1_prev_injury_no",kind:"checkbox",anchorText:"1. Har du tidigare skadat eller haft besvr i samma ben",pageIndex:2,placement:{offsetX:119.3,offsetY:-.5,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q1_prev_injury_yes",kind:"checkbox",anchorText:"1. Har du tidigare skadat eller haft besvr i samma ben",pageIndex:2,placement:{offsetX:143.9,offsetY:-.5,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q1_prev_injury_where_when",anchorText:"1. Har du tidigare skadat eller haft besvr i samma ben",anchorAlternatives:["Om Ja. nr och var behandlades du fr de besvren?"],textKind:"long",pageIndex:2,placement:{offsetX:2.33,offsetY:-2.37,width:304.66666666666674,lineHeight:10,maxLines:2,fontSize:8.5}},{id:"q2_further_treatment_no",kind:"checkbox",anchorText:"2 r det aktuellt med ytterligare behandling eller operation av din skada",pageIndex:2,placement:{offsetX:118.6,offsetY:3.7,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q2_further_treatment_yes",kind:"checkbox",anchorText:"2 r det aktuellt med ytterligare behandling eller operation av din skada",pageIndex:2,placement:{offsetX:144.6,offsetY:4.3,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q2_further_treatment_where_when",anchorText:"2 r det aktuellt med ytterligare behandling eller operation av din skada",anchorAlternatives:["Om Ja. nr och var?"],textKind:"long",pageIndex:2,placement:{offsetX:2.33,offsetY:-3.63,width:302.66666666666674,lineHeight:10,maxLines:1,fontSize:7}},{id:"q3_promenader_none",kind:"checkbox",anchorText:"Smrtor vid promenader?",anchorAlternatives:["Smartor vid promenader?"],pageIndex:2,placement:{offsetX:127.9,offsetY:4.9,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_promenader_mild",kind:"checkbox",anchorText:"Smrtor vid promenader?",anchorAlternatives:["Smartor vid promenader?"],pageIndex:2,placement:{offsetX:189.9,offsetY:6.2,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_promenader_moderate",kind:"checkbox",anchorText:"Smrtor vid promenader?",anchorAlternatives:["Smartor vid promenader?"],pageIndex:2,placement:{offsetX:251.9,offsetY:6.9,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_promenader_severe",kind:"checkbox",anchorText:"Smrtor vid promenader?",anchorAlternatives:["Smartor vid promenader?"],pageIndex:2,placement:{offsetX:314.6,offsetY:6.9,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_gang_trappor_none",kind:"checkbox",anchorText:"Gng i trappor?",anchorAlternatives:["Gang i trappor?"],pageIndex:2,placement:{offsetX:127,offsetY:5.5,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_gang_trappor_mild",kind:"checkbox",anchorText:"Gng i trappor?",anchorAlternatives:["Gang i trappor?"],pageIndex:2,placement:{offsetX:189,offsetY:6.2,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_gang_trappor_moderate",kind:"checkbox",anchorText:"Gng i trappor?",anchorAlternatives:["Gang i trappor?"],pageIndex:2,placement:{offsetX:251.7,offsetY:6.8,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_gang_trappor_severe",kind:"checkbox",anchorText:"Gng i trappor?",anchorAlternatives:["Gang i trappor?"],pageIndex:2,placement:{offsetX:313.7,offsetY:7.5,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_gang_skog_mark_none",kind:"checkbox",anchorText:"Gng i skog och mark?",anchorAlternatives:["Gang i skog och mark?"],pageIndex:2,placement:{offsetX:127,offsetY:4.5,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_gang_skog_mark_mild",kind:"checkbox",anchorText:"Gng i skog och mark?",anchorAlternatives:["Gang i skog och mark?"],pageIndex:2,placement:{offsetX:189.7,offsetY:5.9,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_gang_skog_mark_moderate",kind:"checkbox",anchorText:"Gng i skog och mark?",anchorAlternatives:["Gang i skog och mark?"],pageIndex:2,placement:{offsetX:251,offsetY:5.9,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_gang_skog_mark_severe",kind:"checkbox",anchorText:"Gng i skog och mark?",anchorAlternatives:["Gang i skog och mark?"],pageIndex:2,placement:{offsetX:313,offsetY:7.2,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_aktivitet_springa_none",kind:"checkbox",anchorText:"Smartor vid aktivitet som att springa?",anchorAlternatives:["Smrtor vid aktivitet som att springa?"],pageIndex:2,placement:{offsetX:127,offsetY:5.2,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_aktivitet_springa_mild",kind:"checkbox",anchorText:"Smartor vid aktivitet som att springa?",anchorAlternatives:["Smrtor vid aktivitet som att springa?"],pageIndex:2,placement:{offsetX:190.3,offsetY:5.8,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_aktivitet_springa_moderate",kind:"checkbox",anchorText:"Smartor vid aktivitet som att springa?",anchorAlternatives:["Smrtor vid aktivitet som att springa?"],pageIndex:2,placement:{offsetX:251,offsetY:6.5,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_aktivitet_springa_severe",kind:"checkbox",anchorText:"Smartor vid aktivitet som att springa?",anchorAlternatives:["Smrtor vid aktivitet som att springa?"],pageIndex:2,placement:{offsetX:314.3,offsetY:6.5,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_smartor_efter_aktivitet_none",kind:"checkbox",anchorText:"Smartor efter aktivitet?",anchorAlternatives:["Smrtor efter aktivitet?"],pageIndex:2,placement:{offsetX:126.6,offsetY:4.7,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_smartor_efter_aktivitet_mild",kind:"checkbox",anchorText:"Smartor efter aktivitet?",anchorAlternatives:["Smrtor efter aktivitet?"],pageIndex:2,placement:{offsetX:189.2,offsetY:6,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_smartor_efter_aktivitet_moderate",kind:"checkbox",anchorText:"Smartor efter aktivitet?",anchorAlternatives:["Smrtor efter aktivitet?"],pageIndex:2,placement:{offsetX:251.9,offsetY:8,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_smartor_efter_aktivitet_severe",kind:"checkbox",anchorText:"Smartor efter aktivitet?",anchorAlternatives:["Smrtor efter aktivitet?"],pageIndex:2,placement:{offsetX:315.2,offsetY:7.3,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_vark_vid_vila_none",kind:"checkbox",anchorText:"Vrk vid vila? (inte belastningsrelaterat)",anchorAlternatives:["Vrk vid vila?"],pageIndex:2,placement:{offsetX:127.5,offsetY:6,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_vark_vid_vila_mild",kind:"checkbox",anchorText:"Vrk vid vila? (inte belastningsrelaterat)",anchorAlternatives:["Vrk vid vila?"],pageIndex:2,placement:{offsetX:190.1,offsetY:6,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_vark_vid_vila_moderate",kind:"checkbox",anchorText:"Vrk vid vila? (inte belastningsrelaterat)",anchorAlternatives:["Vrk vid vila?"],pageIndex:2,placement:{offsetX:252.1,offsetY:6.6,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_vark_vid_vila_severe",kind:"checkbox",anchorText:"Vrk vid vila? (inte belastningsrelaterat)",anchorAlternatives:["Vrk vid vila?"],pageIndex:2,placement:{offsetX:314.1,offsetY:7.3,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_stord_nattsomn_none",kind:"checkbox",anchorText:"Stord natts'omn?",anchorAlternatives:["Strd nattsmn?"],pageIndex:2,placement:{offsetX:127.5,offsetY:5.7,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_stord_nattsomn_mild",kind:"checkbox",anchorText:"Stord natts'omn?",anchorAlternatives:["Strd nattsmn?"],pageIndex:2,placement:{offsetX:190.1,offsetY:5.1,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_stord_nattsomn_moderate",kind:"checkbox",anchorText:"Stord natts'omn?",anchorAlternatives:["Strd nattsmn?"],pageIndex:2,placement:{offsetX:252.8,offsetY:6.4,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_stord_nattsomn_severe",kind:"checkbox",anchorText:"Stord natts'omn?",anchorAlternatives:["Strd nattsmn?"],pageIndex:2,placement:{offsetX:314.1,offsetY:7.1,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_stelhet_domningar_none",kind:"checkbox",anchorText:"Stelhet/domningar?",pageIndex:2,placement:{offsetX:127.2,offsetY:5,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_stelhet_domningar_mild",kind:"checkbox",anchorText:"Stelhet/domningar?",pageIndex:2,placement:{offsetX:189.9,offsetY:5.7,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_stelhet_domningar_moderate",kind:"checkbox",anchorText:"Stelhet/domningar?",pageIndex:2,placement:{offsetX:251.9,offsetY:6.3,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_stelhet_domningar_severe",kind:"checkbox",anchorText:"Stelhet/domningar?",pageIndex:2,placement:{offsetX:314.6,offsetY:6.3,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_ostadighet_none",kind:"checkbox",anchorText:"Ostadighet?",pageIndex:2,placement:{offsetX:127.2,offsetY:4.8,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_ostadighet_mild",kind:"checkbox",anchorText:"Ostadighet?",pageIndex:2,placement:{offsetX:189.9,offsetY:6.1,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_ostadighet_moderate",kind:"checkbox",anchorText:"Ostadighet?",pageIndex:2,placement:{offsetX:252.6,offsetY:6.1,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_ostadighet_severe",kind:"checkbox",anchorText:"Ostadighet?",pageIndex:2,placement:{offsetX:313.9,offsetY:6.8,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_svullnad_none",kind:"checkbox",anchorText:"Svullnad?",pageIndex:2,placement:{offsetX:127.5,offsetY:4.7,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_svullnad_mild",kind:"checkbox",anchorText:"Svullnad?",pageIndex:2,placement:{offsetX:190.8,offsetY:5.4,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_svullnad_moderate",kind:"checkbox",anchorText:"Svullnad?",pageIndex:2,placement:{offsetX:252.1,offsetY:6,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_svullnad_severe",kind:"checkbox",anchorText:"Svullnad?",pageIndex:2,placement:{offsetX:314.1,offsetY:6.7,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_muskelsvaghet_none",kind:"checkbox",anchorText:"Muskelsvaghet?",pageIndex:2,placement:{offsetX:127.2,offsetY:4.9,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_muskelsvaghet_mild",kind:"checkbox",anchorText:"Muskelsvaghet?",pageIndex:2,placement:{offsetX:190.6,offsetY:5.6,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_muskelsvaghet_moderate",kind:"checkbox",anchorText:"Muskelsvaghet?",pageIndex:2,placement:{offsetX:251.2,offsetY:5.6,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_muskelsvaghet_severe",kind:"checkbox",anchorText:"Muskelsvaghet?",pageIndex:2,placement:{offsetX:313.2,offsetY:6.9,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_lasningar_knaled_none",kind:"checkbox",anchorText:"Lsningar i knled?",anchorAlternatives:["Lasningar i knaled?"],pageIndex:2,placement:{offsetX:126.6,offsetY:4.7,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_lasningar_knaled_mild",kind:"checkbox",anchorText:"Lsningar i knled?",anchorAlternatives:["Lasningar i knaled?"],pageIndex:2,placement:{offsetX:191.2,offsetY:6,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_lasningar_knaled_moderate",kind:"checkbox",anchorText:"Lsningar i knled?",anchorAlternatives:["Lasningar i knaled?"],pageIndex:2,placement:{offsetX:252.6,offsetY:6,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_lasningar_knaled_severe",kind:"checkbox",anchorText:"Lsningar i knled?",anchorAlternatives:["Lasningar i knaled?"],pageIndex:2,placement:{offsetX:313.9,offsetY:7.3,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_besvar_sta_kna_ner_huk_none",kind:"checkbox",anchorText:"Besvr med att st p kn/ner p huk7",anchorAlternatives:["Besvr med att st p kn/ner p huk?"],pageIndex:2,placement:{offsetX:127.2,offsetY:4.8,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_besvar_sta_kna_ner_huk_mild",kind:"checkbox",anchorText:"Besvr med att st p kn/ner p huk7",anchorAlternatives:["Besvr med att st p kn/ner p huk?"],pageIndex:2,placement:{offsetX:190.6,offsetY:5.5,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_besvar_sta_kna_ner_huk_moderate",kind:"checkbox",anchorText:"Besvr med att st p kn/ner p huk7",anchorAlternatives:["Besvr med att st p kn/ner p huk?"],pageIndex:2,placement:{offsetX:251.9,offsetY:5.5,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_besvar_sta_kna_ner_huk_severe",kind:"checkbox",anchorText:"Besvr med att st p kn/ner p huk7",anchorAlternatives:["Besvr med att st p kn/ner p huk?"],pageIndex:2,placement:{offsetX:314.6,offsetY:6.8,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_medication_never",kind:"checkbox",anchorText:"Tar du vrkmedicin for knbesvren?",anchorAlternatives:["Tar du vrkmedicin fr knbesvren?"],pageIndex:2,placement:{offsetX:127.5,offsetY:4.4,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_medication_sometimes",kind:"checkbox",anchorText:"Tar du vrkmedicin for knbesvren?",anchorAlternatives:["Tar du vrkmedicin fr knbesvren?"],pageIndex:2,placement:{offsetX:190.1,offsetY:5.8,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_medication_often",kind:"checkbox",anchorText:"Tar du vrkmedicin for knbesvren?",anchorAlternatives:["Tar du vrkmedicin fr knbesvren?"],pageIndex:2,placement:{offsetX:252.8,offsetY:5.8,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_medication_always",kind:"checkbox",anchorText:"Tar du vrkmedicin for knbesvren?",anchorAlternatives:["Tar du vrkmedicin fr knbesvren?"],pageIndex:2,placement:{offsetX:314.8,offsetY:6.4,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q3_medication_which",anchorText:"Omja_ vilken medicin?",anchorAlternatives:["Om ja, vilken medicin?"],textKind:"long",pageIndex:2,placement:{offsetX:62.57,offsetY:3.44,width:429.99999999999994,lineHeight:10,maxLines:1,fontSize:7}},{id:"q4_numbness_none",kind:"checkbox",anchorText:"Har du besvr med k'anselbortfall?",anchorAlternatives:["Har du besvr med knselbortfall?","4. Har du besvr med knselbortfall?"],pageIndex:2,placement:{offsetX:118.4,offsetY:-4.1,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q4_numbness_mild",kind:"checkbox",anchorText:"Har du besvr med k'anselbortfall?",anchorAlternatives:["Har du besvr med knselbortfall?","4. Har du besvr med knselbortfall?"],pageIndex:2,placement:{offsetX:181.7,offsetY:-3.5,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q4_numbness_moderate",kind:"checkbox",anchorText:"Har du besvr med k'anselbortfall?",anchorAlternatives:["Har du besvr med knselbortfall?","4. Har du besvr med knselbortfall?"],pageIndex:2,placement:{offsetX:243,offsetY:-3.5,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q4_numbness_severe",kind:"checkbox",anchorText:"Har du besvr med k'anselbortfall?",anchorAlternatives:["Har du besvr med knselbortfall?","4. Har du besvr med knselbortfall?"],pageIndex:2,placement:{offsetX:305.7,offsetY:-2.1,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q4_numbness_where",anchorText:"I vilket/vilka omrden har du knselbortfall7",anchorAlternatives:["I vilket/vilka omrden har du knselbortfall?"],pageIndex:2,textKind:"long",placement:{offsetX:0,offsetY:0,width:360,lineHeight:N6,maxLines:4,fontSize:D6}},{id:"q5_reduced_mobility_no",kind:"checkbox",anchorText:"Har du ftt frsmrad rrlighet p grund av olycksfallet?",anchorAlternatives:["Har du fatt frsmrad rorlighet pa grund av olycksfallet","Har du ftt frsmrad rrlighet"],pageIndex:3,placement:{offsetX:119.4,offsetY:6,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q5_reduced_mobility_yes",kind:"checkbox",anchorText:"Har du ftt frsmrad rrlighet p grund av olycksfallet?",anchorAlternatives:["Har du fatt frsmrad rorlighet pa grund av olycksfallet","Har du ftt frsmrad rrlighet"],pageIndex:3,placement:{offsetX:145.4,offsetY:6,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q6_daily_activities_no",kind:"checkbox",anchorText:"Har din frmga att utfra dagliga",anchorAlternatives:["aktiviteter/hushllsarbeten","Har din formaga att utfora dagliga","aktiviteter/hushallsarbeten"],pageIndex:3,placement:{offsetX:118.7,offsetY:2.4,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q6_daily_activities_yes",kind:"checkbox",anchorText:"Har din frmga att utfra dagliga",anchorAlternatives:["aktiviteter/hushllsarbeten","Har din formaga att utfora dagliga","aktiviteter/hushallsarbeten"],pageIndex:3,placement:{offsetX:144.7,offsetY:3.1,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q6_daily_activities_how",anchorText:"Vardagssysslor",anchorAlternatives:["Vardagssysslor Har din frmga att utfra dagliga","Vardagssysslor Har din formaga att utfora dagliga"],textKind:"long",pageIndex:3,placement:{offsetX:180.07,offsetY:6.27,width:302,lineHeight:10,maxLines:2,fontSize:8.5}},{id:"q7_leisure_no",kind:"checkbox",anchorText:"Har din frmga att utfra fritids",anchorAlternatives:["aktiviteter frndrats p grund","Har din formaga att utfora fritids","aktiviteter forandrats pa grund"],pageIndex:3,placement:{offsetX:119.6,offsetY:2.6,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q7_leisure_yes",kind:"checkbox",anchorText:"Har din frmga att utfra fritids",anchorAlternatives:["aktiviteter frndrats p grund","Har din formaga att utfora fritids","aktiviteter forandrats pa grund"],pageIndex:3,placement:{offsetX:145,offsetY:1.9,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q7_leisure_how",anchorText:"Fritid",anchorAlternatives:["Fritid Har din frmga att utfra fritids","Fritid Har din formaga att utfora fritids"],textKind:"long",pageIndex:3,placement:{offsetX:178.31,offsetY:5.74,width:304.66666666666663,lineHeight:10,maxLines:2,fontSize:8.5}},{id:"q8_work_no",kind:"checkbox",anchorText:"Har din frmga att utfra arbete",anchorAlternatives:["ndrats p grund av olycksfallet","Har din formaga att utfora arbete","andrats pa grund av olycksfallet"],pageIndex:3,placement:{offsetX:119.6,offsetY:2.5,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q8_work_yes",kind:"checkbox",anchorText:"Har din frmga att utfra arbete",anchorAlternatives:["ndrats p grund av olycksfallet","Har din formaga att utfora arbete","andrats pa grund av olycksfallet"],pageIndex:3,placement:{offsetX:144.3,offsetY:2.5,width:10,lineHeight:10,maxLines:1,fontSize:10}},{id:"q8_work_how",anchorText:"Arbete",anchorAlternatives:["Arbete Har din frmga att utfra arbete","Arbete Har din formaga att utfora arbete"],textKind:"long",pageIndex:3,placement:{offsetX:179.64,offsetY:7.63,width:302,lineHeight:10,maxLines:2,fontSize:8.5}},{id:"other_information",anchorText:"Ovriga upplysningar",anchorAlternatives:["vriga upplysningar"],textKind:"long",pageIndex:3,placement:{offsetX:4.2,offsetY:-7.57,width:489.3333333333333,lineHeight:10,maxLines:8,fontSize:8.5}},{id:"signature_date",anchorText:"Underskrift av den frskrade",anchorAlternatives:["Underskrift av den forsakrade"],textKind:"short",pageIndex:3,placement:{offsetX:3.53,offsetY:-15.91,width:116.66666666666667,lineHeight:12,maxLines:1,fontSize:7}},{id:"signature_name",anchorText:"Namnteckning",textKind:"short",pageIndex:3,placement:{offsetX:1.96,offsetY:-3.29,width:179.33333333333334,lineHeight:12,maxLines:1,fontSize:7}},{id:"signature_name_clarification",anchorText:"Namnfrtydligande",anchorAlternatives:["Namnfortydligande"],textKind:"short",pageIndex:3,placement:{offsetX:2.39,offsetY:-1.29,width:177.33333333333337,lineHeight:12,maxLines:1,fontSize:7}}]},XA=i=>i.lineHeight===BA&&i.fontSize===zA?"short":i.lineHeight===N6&&i.fontSize===D6?"long":i.lineHeight===da.medium.lineHeight&&i.fontSize===da.medium.fontSize?"medium":i.lineHeight===da.note.lineHeight&&i.fontSize===da.note.fontSize?"note":"long";qA.regions.map(i=>{if(i.kind==="checkbox")return i;const e=i.textKind??XA(i.placement);return i.textKind,{...i,textKind:e,placement:OA(i.placement,e)}});const S1={insurerId:"lf",variantId:"lf_knaskada_v1",description:"Lnsfrskringar Skaraborg  Intyg knskada (LF10831 utg 01) v1",regions:[{id:"insured_name",anchorSpec:{primary:["Namn"],requiredNearby:["Personnummer","Skadedatum","Skadenummer"],optionalNearby:["Yrke"],proximity:{maxDx:1600,maxDy:120}},textKind:"short",placement:{offsetX:1.238958333333306,offsetY:-4.400000000000205,width:180.66666666666669,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:0,nx:.11861384128584222,ny:.23351387305207164,nw:.3035394265232975,nh:.014253135689851768}},{id:"insured_personnummer",anchorSpec:{primary:["Namn"],requiredNearby:["Personnummer","Skadedatum","Skadenummer"],optionalNearby:["Yrke"],proximity:{maxDx:1600,maxDy:120}},textKind:"short",placement:{offsetX:187.23895833333336,offsetY:-4.400000000000205,width:118.66666666666666,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:0,nx:.43111384128584235,ny:.23351387305207164,nw:.1993727598566308,nh:.014253135689851768}},{id:"injury_date",anchorSpec:{primary:["Namn"],requiredNearby:["Personnummer","Skadedatum","Skadenummer"],optionalNearby:["Yrke"],proximity:{maxDx:1600,maxDy:120}},textKind:"short",placement:{offsetX:311.23895833333324,offsetY:-5.066666666666833,width:57.33333333333337,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:0,nx:.6394471746191754,ny:.23430571392373,nw:.09632616487455203,nh:.014253135689851768}},{id:"claim_number",anchorSpec:{primary:["Namn"],requiredNearby:["Personnummer","Skadedatum","Skadenummer"],optionalNearby:["Yrke"],proximity:{maxDx:1600,maxDy:120}},textKind:"short",placement:{offsetX:373.2389583333333,offsetY:-4.400000000000205,width:117.33333333333331,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:0,nx:.7436138412858422,ny:.23351387305207164,nw:.19713261648745514,nh:.014253135689851768}},{id:"occupation",anchorText:"Yrke Skadan avser",textKind:"short",placement:{offsetX:.17549499999998375,offsetY:41.122849999999744,width:492.66666666666663,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:0,nx:.11637369791666666,ny:.26439566704675044,nw:.8277329749103941,nh:.014253135689851768}},{id:"injury_side_left",kind:"checkbox",anchorText:"Skadan avser l: Vnster kn D Hger kn",placement:{offsetX:-6.7126149999999996,offsetY:3.818313333333208,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.3302654406351164,ny:.3072094075337019}},{id:"injury_side_right",kind:"checkbox",anchorText:"Skadan avser l: Vnster kn D Hger kn",placement:{offsetX:55.954051666666686,offsetY:5.818313333333208,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43441887813532637,ny:.3048337997047438}},{id:"q1_prev_injury_no",kind:"checkbox",anchorText:"1. Har du tidigare skadat eller haft besvr i samma ben",placement:{offsetX:119.265625,offsetY:-1.2133333333333667,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.3302654406351164,ny:.3246305316127282}},{id:"q1_prev_injury_yes",kind:"checkbox",anchorText:"1. Har du tidigare skadat eller haft besvr i samma ben",placement:{offsetX:144.59895833333334,offsetY:-1.8800000000001091,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.3728227591835893,ny:.32542240088904767}},{id:"q1_prev_injury_where_when",anchorText:"1. Har du tidigare skadat eller haft besvr i samma ben",anchorAlternatives:["Om Ja. nr och var behandlades du fr de besvren?"],textKind:"long",placement:{offsetX:.9989583333333769,offsetY:-8.015000000000214,width:304.66666666666663,lineHeight:10,maxLines:2,fontSize:8.5},templatePlacement:{templatePageIndex:0,nx:.43111384128584235,ny:.33016794944887895,nw:.5118727598566307,nh:.023755226149752947}},{id:"q2_further_treatment_no",kind:"checkbox",anchorText:"2 r det aktuellt med ytterligare behandling eller operation av din skada",placement:{offsetX:119.265625,offsetY:3.6666666666666288,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.33138537007060254,ny:.36580773398133604}},{id:"q2_further_treatment_yes",kind:"checkbox",anchorText:"2 r det aktuellt med ytterligare behandling eller operation av din skada",placement:{offsetX:144.59895833333334,offsetY:3.6666666666666288,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.3739426886190755,ny:.36501586470501657}},{id:"q2_further_treatment_where_when",anchorText:"2 r det aktuellt med ytterligare behandling eller operation av din skada",anchorAlternatives:["Om Ja. nr och var?"],textKind:"long",placement:{offsetX:1.6656250000000057,offsetY:-10.601666666666802,width:304,lineHeight:10,maxLines:2,fontSize:8.5},templatePlacement:{templatePageIndex:0,nx:.43223391297043007,ny:.37371919739009263,nw:.510752688172043,nh:.023755226149752947}},{id:"q3_promenader_none",kind:"checkbox",anchorText:"Smrtor vid promenader?",anchorAlternatives:["Smartor vid promenader?"],placement:{offsetX:127.9525,offsetY:4.702857142856999,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.33138537007060254,ny:.4695426091791746}},{id:"q3_promenader_mild",kind:"checkbox",anchorText:"Smrtor vid promenader?",anchorAlternatives:["Smartor vid promenader?"],placement:{offsetX:190.23821428571426,offsetY:5.845714285714166,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.4366587370062987,ny:.4687507399028552}},{id:"q3_promenader_moderate",kind:"checkbox",anchorText:"Smrtor vid promenader?",anchorAlternatives:["Smartor vid promenader?"],placement:{offsetX:251.9525,offsetY:6.417142857142721,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5396922450710225,ny:.4671670013502165}},{id:"q3_promenader_severe",kind:"checkbox",anchorText:"Smrtor vid promenader?",anchorAlternatives:["Smartor vid promenader?"],placement:{offsetX:313.6667857142857,offsetY:6.9885714285712766,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6449656120067186,ny:.4671670013502165}},{id:"q3_gang_trappor_none",kind:"checkbox",anchorText:"Gng i trappor?",anchorAlternatives:["Gang i trappor?"],placement:{offsetX:127.14107142857142,offsetY:4.554285714285584,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.33138537007060254,ny:.4822125176002847}},{id:"q3_gang_trappor_mild",kind:"checkbox",anchorText:"Gng i trappor?",anchorAlternatives:["Gang i trappor?"],placement:{offsetX:189.42678571428573,offsetY:5.125714285714139,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43553880757081254,ny:.4814206483239653}},{id:"q3_gang_trappor_moderate",kind:"checkbox",anchorText:"Gng i trappor?",anchorAlternatives:["Gang i trappor?"],placement:{offsetX:251.7125,offsetY:6.268571428571249,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5396922450710225,ny:.4806287790476459}},{id:"q3_gang_trappor_severe",kind:"checkbox",anchorText:"Gng i trappor?",anchorAlternatives:["Gang i trappor?"],placement:{offsetX:313.42678571428576,offsetY:6.839999999999861,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6438456825712325,ny:.4798369097713266}},{id:"q3_gang_skog_mark_none",kind:"checkbox",anchorText:"Gng i skog och mark?",anchorAlternatives:["Gang i skog och mark?"],placement:{offsetX:127.7125,offsetY:4.7371428571427145,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.33138537007060254,ny:.4956742952977141}},{id:"q3_gang_skog_mark_mild",kind:"checkbox",anchorText:"Gng i skog och mark?",anchorAlternatives:["Gang i skog och mark?"],placement:{offsetX:189.42678571428573,offsetY:5.30857142857127,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43553880757081254,ny:.4948824260213947}},{id:"q3_gang_skog_mark_moderate",kind:"checkbox",anchorText:"Gng i skog och mark?",anchorAlternatives:["Gang i skog och mark?"],placement:{offsetX:252.28392857142856,offsetY:5.879999999999882,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5396922450710225,ny:.4940905567450754}},{id:"q3_gang_skog_mark_severe",kind:"checkbox",anchorText:"Gng i skog och mark?",anchorAlternatives:["Gang i skog och mark?"],placement:{offsetX:313.9982142857143,offsetY:6.451428571428437,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6438456825712325,ny:.493298687468756}},{id:"q3_aktivitet_springa_none",kind:"checkbox",anchorText:"Smartor vid aktivitet som att springa?",anchorAlternatives:["Smrtor vid aktivitet som att springa?"],placement:{offsetX:127.7125,offsetY:4.5885714285712424,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.33138537007060254,ny:.5091360729951435}},{id:"q3_aktivitet_springa_mild",kind:"checkbox",anchorText:"Smartor vid aktivitet som att springa?",anchorAlternatives:["Smrtor vid aktivitet som att springa?"],placement:{offsetX:189.42678571428573,offsetY:5.1599999999998545,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43441887813532637,ny:.5083442037188242}},{id:"q3_aktivitet_springa_moderate",kind:"checkbox",anchorText:"Smartor vid aktivitet som att springa?",anchorAlternatives:["Smrtor vid aktivitet som att springa?"],placement:{offsetX:252.28392857142856,offsetY:6.302857142856965,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5408121745065086,ny:.5067604651661854}},{id:"q3_aktivitet_springa_severe",kind:"checkbox",anchorText:"Smartor vid aktivitet som att springa?",anchorAlternatives:["Smrtor vid aktivitet som att springa?"],placement:{offsetX:313.42678571428576,offsetY:6.302857142856965,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6438456825712325,ny:.5067604651661854}},{id:"q3_smartor_efter_aktivitet_none",kind:"checkbox",anchorText:"Smartor efter aktivitet?",anchorAlternatives:["Smrtor efter aktivitet?"],placement:{offsetX:127.95249999999999,offsetY:4.679999999999836,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.3302654406351164,ny:.522597850692573}},{id:"q3_smartor_efter_aktivitet_mild",kind:"checkbox",anchorText:"Smartor efter aktivitet?",anchorAlternatives:["Smrtor efter aktivitet?"],placement:{offsetX:189.6667857142857,offsetY:6.394285714285559,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43441887813532637,ny:.5210141121399342}},{id:"q3_smartor_efter_aktivitet_moderate",kind:"checkbox",anchorText:"Smartor efter aktivitet?",anchorAlternatives:["Smrtor efter aktivitet?"],placement:{offsetX:252.52392857142854,offsetY:5.822857142856947,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5408121745065086,ny:.5210141121399342}},{id:"q3_smartor_efter_aktivitet_severe",kind:"checkbox",anchorText:"Smartor efter aktivitet?",anchorAlternatives:["Smrtor efter aktivitet?"],placement:{offsetX:314.23821428571426,offsetY:6.394285714285559,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6438456825712325,ny:.5210141121399342}},{id:"q3_vark_vid_vila_none",kind:"checkbox",anchorText:"Vrk vid vila? (inte belastningsrelaterat)",anchorAlternatives:["Vrk vid vila?"],placement:{offsetX:128.1925,offsetY:5.102857142856919,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.33138537007060254,ny:.5352677591136831}},{id:"q3_vark_vid_vila_mild",kind:"checkbox",anchorText:"Vrk vid vila? (inte belastningsrelaterat)",anchorAlternatives:["Vrk vid vila?"],placement:{offsetX:190.47821428571427,offsetY:5.674285714285531,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43553880757081254,ny:.5360596283900024}},{id:"q3_vark_vid_vila_moderate",kind:"checkbox",anchorText:"Vrk vid vila? (inte belastningsrelaterat)",anchorAlternatives:["Vrk vid vila?"],placement:{offsetX:252.1925,offsetY:6.245714285714087,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5396922450710225,ny:.5344758898373637}},{id:"q3_vark_vid_vila_severe",kind:"checkbox",anchorText:"Vrk vid vila? (inte belastningsrelaterat)",anchorAlternatives:["Vrk vid vila?"],placement:{offsetX:315.0496428571428,offsetY:7.388571428571197,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6449656120067186,ny:.5336840205610444}},{id:"q3_stord_nattsomn_none",kind:"checkbox",anchorText:"Stord natts'omn?",anchorAlternatives:["Strd nattsmn?"],placement:{offsetX:127.04964285714284,offsetY:4.86285714285691,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.33138537007060254,ny:.5487295368111126}},{id:"q3_stord_nattsomn_mild",kind:"checkbox",anchorText:"Stord natts'omn?",anchorAlternatives:["Strd nattsmn?"],placement:{offsetX:190.47821428571427,offsetY:5.434285714285522,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43553880757081254,ny:.5479376675347931}},{id:"q3_stord_nattsomn_moderate",kind:"checkbox",anchorText:"Stord natts'omn?",anchorAlternatives:["Strd nattsmn?"],placement:{offsetX:252.1925,offsetY:6.577142857142633,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5408121745065086,ny:.5487295368111126}},{id:"q3_stord_nattsomn_severe",kind:"checkbox",anchorText:"Stord natts'omn?",anchorAlternatives:["Strd nattsmn?"],placement:{offsetX:313.9067857142857,offsetY:7.148571428571188,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6449656120067186,ny:.5471457982584738}},{id:"q3_stelhet_domningar_none",kind:"checkbox",anchorText:"Stelhet/domningar?",placement:{offsetX:127.95249999999997,offsetY:4.142857142856883,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.3302654406351164,ny:.5637750530611807}},{id:"q3_stelhet_domningar_mild",kind:"checkbox",anchorText:"Stelhet/domningar?",placement:{offsetX:190.23821428571426,offsetY:5.857142857142605,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43553880757081254,ny:.562191314508542}},{id:"q3_stelhet_domningar_moderate",kind:"checkbox",anchorText:"Stelhet/domningar?",placement:{offsetX:251.9525,offsetY:5.857142857142605,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5408121745065086,ny:.562191314508542}},{id:"q3_stelhet_domningar_severe",kind:"checkbox",anchorText:"Stelhet/domningar?",placement:{offsetX:314.23821428571426,offsetY:6.428571428571161,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6438456825712325,ny:.5613994452322225}},{id:"q3_ostadighet_none",kind:"checkbox",anchorText:"Ostadighet?",placement:{offsetX:127.95249999999997,offsetY:5.045714285714041,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.33138537007060254,ny:.5772368307586102}},{id:"q3_ostadighet_mild",kind:"checkbox",anchorText:"Ostadighet?",placement:{offsetX:190.23821428571426,offsetY:5.617142857142596,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43553880757081254,ny:.5756530922059714}},{id:"q3_ostadighet_moderate",kind:"checkbox",anchorText:"Ostadighet?",placement:{offsetX:252.52392857142854,offsetY:6.1885714285711515,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5408121745065086,ny:.5756530922059714}},{id:"q3_ostadighet_severe",kind:"checkbox",anchorText:"Ostadighet?",placement:{offsetX:314.8096428571428,offsetY:6.7599999999997635,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6438456825712325,ny:.5740693536533327}},{id:"q3_svullnad_none",kind:"checkbox",anchorText:"Svullnad?",placement:{offsetX:127.62107142857138,offsetY:4.897142857142569,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.3302654406351164,ny:.5899067391797201}},{id:"q3_svullnad_mild",kind:"checkbox",anchorText:"Svullnad?",placement:{offsetX:189.9067857142857,offsetY:5.468571428571124,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43553880757081254,ny:.5899067391797201}},{id:"q3_svullnad_moderate",kind:"checkbox",anchorText:"Svullnad?",placement:{offsetX:252.76392857142852,offsetY:6.039999999999736,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5408121745065086,ny:.5891148699034009}},{id:"q3_svullnad_severe",kind:"checkbox",anchorText:"Svullnad?",placement:{offsetX:315.04964285714277,offsetY:7.182857142856847,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6449656120067186,ny:.5883230006270814}},{id:"q3_muskelsvaghet_none",kind:"checkbox",anchorText:"Muskelsvaghet?",placement:{offsetX:127.95249999999997,offsetY:4.988571428571106,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.33138537007060254,ny:.604160386153469}},{id:"q3_muskelsvaghet_mild",kind:"checkbox",anchorText:"Muskelsvaghet?",placement:{offsetX:190.23821428571426,offsetY:4.988571428571106,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43553880757081254,ny:.6033685168771497}},{id:"q3_muskelsvaghet_moderate",kind:"checkbox",anchorText:"Muskelsvaghet?",placement:{offsetX:251.9525,offsetY:6.131428571428273,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5396922450710225,ny:.6033685168771497}},{id:"q3_muskelsvaghet_severe",kind:"checkbox",anchorText:"Muskelsvaghet?",placement:{offsetX:313.6667857142857,offsetY:7.2742857142854405,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6449656120067186,ny:.6033685168771497}},{id:"q3_lasningar_knaled_none",kind:"checkbox",anchorText:"Lsningar i knled?",anchorAlternatives:["Lasningar i knaled?"],placement:{offsetX:127.95249999999997,offsetY:5.319999999999709,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.3302654406351164,ny:.6192059024035373}},{id:"q3_lasningar_knaled_mild",kind:"checkbox",anchorText:"Lsningar i knled?",anchorAlternatives:["Lasningar i knaled?"],placement:{offsetX:190.23821428571426,offsetY:5.319999999999709,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43553880757081254,ny:.6168302945745792}},{id:"q3_lasningar_knaled_moderate",kind:"checkbox",anchorText:"Lsningar i knled?",anchorAlternatives:["Lasningar i knaled?"],placement:{offsetX:251.9525,offsetY:6.462857142856819,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5385723156355363,ny:.6168302945745792}},{id:"q3_lasningar_knaled_severe",kind:"checkbox",anchorText:"Lsningar i knled?",anchorAlternatives:["Lasningar i knaled?"],placement:{offsetX:314.23821428571426,offsetY:7.034285714285431,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6449656120067186,ny:.6160384252982597}},{id:"q3_besvar_sta_kna_ner_huk_none",kind:"checkbox",anchorText:"Besvr med att st p kn/ner p huk7",anchorAlternatives:["Besvr med att st p kn/ner p huk?"],placement:{offsetX:127.9525,offsetY:4.691428571428446,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.33250529950608865,ny:.6318758108246473}},{id:"q3_besvar_sta_kna_ner_huk_mild",kind:"checkbox",anchorText:"Besvr med att st p kn/ner p huk7",anchorAlternatives:["Besvr med att st p kn/ner p huk?"],placement:{offsetX:190.23821428571426,offsetY:5.262857142857001,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43553880757081254,ny:.631083941548328}},{id:"q3_besvar_sta_kna_ner_huk_moderate",kind:"checkbox",anchorText:"Besvr med att st p kn/ner p huk7",anchorAlternatives:["Besvr med att st p kn/ner p huk?"],placement:{offsetX:251.9525,offsetY:5.834285714285613,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5396922450710225,ny:.6295002029956892}},{id:"q3_besvar_sta_kna_ner_huk_severe",kind:"checkbox",anchorText:"Besvr med att st p kn/ner p huk7",anchorAlternatives:["Besvr med att st p kn/ner p huk?"],placement:{offsetX:314.23821428571426,offsetY:6.4057142857141685,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6438456825712325,ny:.6295002029956892}},{id:"q3_medication_never",kind:"checkbox",anchorText:"Tar du vrkmedicin for knbesvren?",anchorAlternatives:["Tar du vrkmedicin fr knbesvren?"],placement:{offsetX:127.62107142857141,offsetY:4.725714285714162,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.3302654406351164,ny:.6722611439169357}},{id:"q3_medication_sometimes",kind:"checkbox",anchorText:"Tar du vrkmedicin for knbesvren?",anchorAlternatives:["Tar du vrkmedicin fr knbesvren?"],placement:{offsetX:190.47821428571427,offsetY:5.297142857142717,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.4366587370062987,ny:.6714692746406163}},{id:"q3_medication_often",kind:"checkbox",anchorText:"Tar du vrkmedicin for knbesvren?",anchorAlternatives:["Tar du vrkmedicin fr knbesvren?"],placement:{offsetX:252.1925,offsetY:5.297142857142717,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5408121745065086,ny:.6714692746406163}},{id:"q3_medication_always",kind:"checkbox",anchorText:"Tar du vrkmedicin for knbesvren?",anchorAlternatives:["Tar du vrkmedicin fr knbesvren?"],placement:{offsetX:314.4782142857143,offsetY:5.297142857142717,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6449656120067186,ny:.6706774053642969}},{id:"q3_medication_which",anchorText:"Omja_ vilken medicin?",anchorAlternatives:["Om ja, vilken medicin?"],textKind:"long",placement:{offsetX:63.38107142857142,offsetY:1.0364285714284165,width:427.42857142857144,lineHeight:10,maxLines:2,fontSize:8.5},templatePlacement:{templatePageIndex:0,nx:.22301927323348691,ny:.6905686661779878,nw:.7181259600614439,nh:.023755226149752947}},{id:"q4_numbness_none",kind:"checkbox",anchorText:"Har du besvr med k'anselbortfall?",anchorAlternatives:["Har du besvr med knselbortfall?","4. Har du besvr med knselbortfall?"],placement:{offsetX:118.50107142857141,offsetY:-3.5485714285715346,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.3302654406351164,ny:.7411537709567216}},{id:"q4_numbness_mild",kind:"checkbox",anchorText:"Har du besvr med k'anselbortfall?",anchorAlternatives:["Har du besvr med knselbortfall?","4. Har du besvr med knselbortfall?"],placement:{offsetX:181.35821428571427,offsetY:-3.5485714285715346,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.4366587370062987,ny:.7403619016804023}},{id:"q4_numbness_moderate",kind:"checkbox",anchorText:"Har du besvr med k'anselbortfall?",anchorAlternatives:["Har du besvr med knselbortfall?","4. Har du besvr med knselbortfall?"],placement:{offsetX:243.64392857142855,offsetY:-2.977142857142951,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5408121745065086,ny:.7395700324040828}},{id:"q4_numbness_severe",kind:"checkbox",anchorText:"Har du besvr med k'anselbortfall?",anchorAlternatives:["Har du besvr med knselbortfall?","4. Har du besvr med knselbortfall?"],placement:{offsetX:305.35821428571427,offsetY:-2.405714285714396,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6449656120067186,ny:.7387781631277635}},{id:"q4_numbness_where",anchorText:"I vilket/vilka omrden har du knselbortfall7",anchorAlternatives:["I vilket/vilka omrden har du knselbortfall?"],placement:{offsetX:0,offsetY:0,width:360,lineHeight:10,maxLines:4,fontSize:8.5},textKind:"long",templatePlacement:{templatePageIndex:0,nx:.32499999999999996,ny:.7707620676548841,nw:.6048387096774193,nh:.047510452299505894}},{id:"q5_reduced_mobility_no",kind:"checkbox",anchorText:"Har du ftt frsmrad rrlighet p grund av olycksfallet?",anchorAlternatives:["Har du fatt frsmrad rorlighet pa grund av olycksfallet","Har du ftt frsmrad rrlighet"],placement:{offsetX:119.25535714285714,offsetY:5.388571428571254,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3336252289415748,ny:.08627787944059521}},{id:"q5_reduced_mobility_yes",kind:"checkbox",anchorText:"Har du ftt frsmrad rrlighet p grund av olycksfallet?",anchorAlternatives:["Har du fatt frsmrad rorlighet pa grund av olycksfallet","Har du ftt frsmrad rrlighet"],placement:{offsetX:144.96964285714284,offsetY:5.959999999999809,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.37730247692553387,ny:.08469414088795642}},{id:"q6_daily_activities_no",kind:"checkbox",anchorText:"Har din frmga att utfra dagliga",anchorAlternatives:["aktiviteter/hushllsarbeten","Har din formaga att utfora dagliga","aktiviteter/hushallsarbeten"],placement:{offsetX:119.2553571428572,offsetY:2.4399999999997135,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.33250529950608865,ny:.3040419304284245}},{id:"q6_daily_activities_yes",kind:"checkbox",anchorText:"Har din frmga att utfra dagliga",anchorAlternatives:["aktiviteter/hushllsarbeten","Har din formaga att utfora dagliga","aktiviteter/hushallsarbeten"],placement:{offsetX:144.96964285714293,offsetY:2.4399999999997135,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3761825474900477,ny:.3040419304284245}},{id:"q6_daily_activities_how",anchorText:"Vardagssysslor",anchorAlternatives:["Vardagssysslor Har din frmga att utfra dagliga","Vardagssysslor Har din formaga att utfora dagliga"],textKind:"long",placement:{offsetX:176.96964285714296,offsetY:.46499999999969077,width:306.8571428571428,lineHeight:10,maxLines:2,fontSize:8.5},templatePlacement:{templatePageIndex:1,nx:.4303925451228879,ny:.306412723299126,nw:.5155529953917048,nh:.023755226149752947}},{id:"q7_leisure_no",kind:"checkbox",anchorText:"Har din frmga att utfra fritids",anchorAlternatives:["aktiviteter frndrats p grund","Har din formaga att utfora fritids","aktiviteter forandrats pa grund"],placement:{offsetX:119.49535714285722,offsetY:2.382857142856892,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3336252289415748,ny:.3452191327970321}},{id:"q7_leisure_yes",kind:"checkbox",anchorText:"Har din frmga att utfra fritids",anchorAlternatives:["aktiviteter frndrats p grund","Har din formaga att utfora fritids","aktiviteter forandrats pa grund"],placement:{offsetX:145.7810714285715,offsetY:2.382857142856892,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3761825474900477,ny:.34601100207335145}},{id:"q7_leisure_how",anchorText:"Fritid",anchorAlternatives:["Fritid Har din frmga att utfra fritids","Fritid Har din formaga att utfora fritids"],textKind:"long",placement:{offsetX:178.35250000000008,offsetY:.40785714285686936,width:304,lineHeight:10,maxLines:2,fontSize:8.5},templatePlacement:{templatePageIndex:1,nx:.43231266801075263,ny:.3478146888744096,nw:.510752688172043,nh:.023755226149752947}},{id:"q8_work_no",kind:"checkbox",anchorText:"Har din frmga att utfra arbete",anchorAlternatives:["ndrats p grund av olycksfallet","Har din formaga att utfora arbete","andrats pa grund av olycksfallet"],placement:{offsetX:119.49535714285715,offsetY:2.6571428571426168,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.33250529950608865,ny:.38639633516563976}},{id:"q8_work_yes",kind:"checkbox",anchorText:"Har din frmga att utfra arbete",anchorAlternatives:["ndrats p grund av olycksfallet","Har din formaga att utfora arbete","andrats pa grund av olycksfallet"],placement:{offsetX:145.20964285714285,offsetY:2.6571428571426168,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.37730247692553387,ny:.3871882044419592}},{id:"q8_work_how",anchorText:"Arbete",anchorAlternatives:["Arbete Har din frmga att utfra arbete","Arbete Har din formaga att utfora arbete"],textKind:"long",placement:{offsetX:179.49535714285713,offsetY:1.2535714285711492,width:303.42857142857144,lineHeight:10,maxLines:2,fontSize:8.5},templatePlacement:{templatePageIndex:1,nx:.43423279089861744,ny:.3878592129554218,nw:.5097926267281105,nh:.023755226149752947}},{id:"other_information",anchorText:"Ovriga upplysningar",anchorAlternatives:["vriga upplysningar"],textKind:"long",placement:{offsetX:3.198214285714286,offsetY:-13.08928571428595,width:489.7142857142857,lineHeight:10,maxLines:9,fontSize:8.5},templatePlacement:{templatePageIndex:1,nx:.12029269873271889,ny:.4462291972091004,nw:.8227726574500768,nh:.10689851767388826}},{id:"signature_date",anchorText:"Underskrift av den frskrade",anchorAlternatives:["Underskrift av den forsakrade"],textKind:"short",placement:{offsetX:4.341071428571425,offsetY:-17.097142857143126,width:116.57142857142857,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:1,nx:.12221282162058371,ny:.6003624368789707,nw:.19585253456221197,nh:.014253135689851768}},{id:"signature_name",anchorText:"Namnteckning",textKind:"short",placement:{offsetX:1.2922916666666708,offsetY:-4.960000000000321,width:180.00000000000003,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:1,nx:.3291873179883512,ny:.5993443557582671,nw:.3024193548387097,nh:.014253135689851768}},{id:"signature_name_clarification",anchorText:"Namnfrtydligande",anchorAlternatives:["Namnfortydligande"],textKind:"short",placement:{offsetX:1.5753571428571718,offsetY:-5.817142857143153,width:178.28571428571428,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:1,nx:.13934031778033798,ny:.26569881088125136,nw:.2995391705069124,nh:.014253135689851768}}],templateSha256:"1862ca88230d09f69a8d2055d085b24f910ca65fc620101c0d93575dc2ffedd0"},YA={...S1,variantId:"lf_knaskada_v1_gbg",description:"Lnsfrskringar Gteborg och Bohusln  Intyg knskada v1"},UA={...S1,variantId:"lf_knaskada_v1_ostgota",description:"Lnsfrskringar stgta  Intyg knskada v1"},VA={...S1,variantId:"lf_knaskada_v1_skane",description:"Lnsfrskringar Skne  Intyg knskada v1"},$A={insurerId:"lf",variantId:"lf_axelskada_v1",description:"LF  Intyg axelskada (v1)",regions:[{id:"insured_name",anchorText:"Namn",textKind:"short",placement:{offsetX:-201.054375,offsetY:69.9466666666666,width:184,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:1,nx:.10293283770161289,ny:.14720321804130249,nw:.30913978494623656,nh:.014253135689851768}},{id:"insured_personnummer",anchorText:"Personnummer",textKind:"short",placement:{offsetX:.5989583333333712,offsetY:-7.520000000000209,width:93.99999999999997,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:1,nx:.4243934111783154,ny:.14799505891296102,nw:.15793010752688166,nh:.014253135689851768}},{id:"injury_date",anchorText:"Skadedatum",textKind:"short",placement:{offsetX:.7056250000000546,offsetY:-7.520000000000209,width:84,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:1,nx:.5935242355510753,ny:.14799505891296102,nw:.1411290322580645,nh:.014253135689851768}},{id:"claim_number",anchorText:"Skadenummer",textKind:"short",placement:{offsetX:-.014374999999972715,offsetY:-8.186666666666838,width:120.66666666666663,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:1,nx:.74473391297043,ny:.1487868997846194,nw:.2027329749103942,nh:.014253135689851768}},{id:"injury_side_right",kind:"checkbox",anchorText:"Hger axel",placement:{offsetX:23.665625000000063,offsetY:-6.70666666666682,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3683898269489247,ny:.20746230837450916}},{id:"injury_side_left",kind:"checkbox",anchorText:"Vnster axel",placement:{offsetX:18.492291666666745,offsetY:-7.3733333333334485,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.47703678035394265,ny:.20825414924616756}},{id:"handedness_right",kind:"checkbox",anchorText:"Hgerhnt",placement:{offsetX:18.812291666666738,offsetY:-7.3733333333334485,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.5812034470206093,ny:.20825414924616756}},{id:"handedness_left",kind:"checkbox",anchorText:"Vnster-hnt",placement:{offsetX:23.53229166666671,offsetY:-7.3733333333334485,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.7189722642249103,ny:.20825414924616756}},{id:"q1_prev_injury_no",kind:"checkbox",anchorText:"haft besvr i samma arm",placement:{offsetX:141.025625,offsetY:15.159999999999854,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.33814789146505375,ny:.22567464842265314}},{id:"q1_prev_injury_yes",kind:"checkbox",anchorText:"haft besvr i samma arm",placement:{offsetX:172.35895833333333,offsetY:15.159999999999854,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.390791260640681,ny:.22567464842265314}},{id:"q1_prev_injury_where_when",anchorText:"axel/annbge/handled",textKind:"long",placement:{offsetX:134.78562499999998,offsetY:2.038333333333185,width:368,lineHeight:10,maxLines:2,fontSize:8.5},templatePlacement:{templatePageIndex:1,nx:.32806724630376344,ny:.2549430666413279,nw:.6182795698924731,nh:.023755226149752947}},{id:"q2_neck_issue_no",kind:"checkbox",anchorText:"2. Har du tidigare haft besvr frn nacke, halsrygg",placement:{offsetX:143.45229166666667,offsetY:3.7199999999998,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.34262817820340496,ny:.29456480425693665}},{id:"q2_neck_issue_yes",kind:"checkbox",anchorText:"2. Har du tidigare haft besvr frn nacke, halsrygg",placement:{offsetX:174.785625,offsetY:3.7199999999998,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.39527154737903225,ny:.29456480425693665}},{id:"q2_neck_issue_where_when",anchorText:"nacke, halsrygg",textKind:"long",placement:{offsetX:135.21229166666666,offsetY:-6.735000000000241,width:368.66666666666674,lineHeight:10,maxLines:2,fontSize:8.5},templatePlacement:{templatePageIndex:1,nx:.3291873179883512,ny:.32066585898897776,nw:.6193996415770611,nh:.023755226149752947}},{id:"q3_further_treatment_no",kind:"checkbox",anchorText:"3. r det aktuellt med ytterligare behandling av din skada",placement:{offsetX:146.11895833333335,offsetY:14.706666666666592,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3471084649417563,ny:.35078550614468523}},{id:"q3_further_treatment_yes",kind:"checkbox",anchorText:"3. r det aktuellt med ytterligare behandling av din skada",placement:{offsetX:177.45229166666667,offsetY:15.373333333333221,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3997518341173835,ny:.34999366527302683}},{id:"q3_further_treatment_where_when",anchorText:"3. r det aktuellt med ytterligare behandling av din skada",textKind:"long",placement:{offsetX:136.78562499999998,offsetY:2.064999999999827,width:364.66666666666663,lineHeight:10,maxLines:2,fontSize:8.5},templatePlacement:{templatePageIndex:1,nx:.3314274613575269,ny:.36580078867350835,nw:.612679211469534,nh:.023755226149752947}},{id:"q4_fully_recovered_no",kind:"checkbox",anchorText:"4. r du fullt terstlld efter skadan",placement:{offsetX:146.11895833333335,offsetY:3.506666666666547,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3471084649417563,ny:.40542252628911707}},{id:"q4_fully_recovered_yes",kind:"checkbox",anchorText:"4. r du fullt terstlld efter skadan",placement:{offsetX:184.11895833333335,offsetY:4.1733333333332325,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.4109525509632616,ny:.4046306854174586}},{id:"q5_vark_i_vila_none",kind:"checkbox",anchorText:"Vrk i vila?",placement:{offsetX:122.03995833333336,offsetY:3.2866666666665765,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3639095402105735,ny:.5432028379576842}},{id:"q5_vark_i_vila_mild",kind:"checkbox",anchorText:"Vrk i vila?",placement:{offsetX:179.37329166666672,offsetY:3.953333333333262,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.46023570508512546,ny:.5424109970860257}},{id:"q5_vark_i_vila_moderate",kind:"checkbox",anchorText:"Vrk i vila?",placement:{offsetX:244.03995833333335,offsetY:3.2866666666665765,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.5688826584901433,ny:.5432028379576842}},{id:"q5_vark_i_vila_severe",kind:"checkbox",anchorText:"Vrk i vila?",placement:{offsetX:316.03995833333335,offsetY:3.2866666666665765,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.6898504004256272,ny:.5432028379576842}},{id:"q5_somn_none",kind:"checkbox",anchorText:"Smnstrande vrk?",placement:{offsetX:121.6990714285714,offsetY:4.245428571428533,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3641483054915514,ny:.569446706846935}},{id:"q5_somn_mild",kind:"checkbox",anchorText:"Smnstrande vrk?",placement:{offsetX:178.84192857142853,offsetY:3.673999999999978,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.46015444988479254,ny:.5701254275940708}},{id:"q5_somn_moderate",kind:"checkbox",anchorText:"Smnstrande vrk?",placement:{offsetX:242.84192857142853,offsetY:4.245428571428533,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.5676813316052227,ny:.569446706846935}},{id:"q5_somn_severe",kind:"checkbox",anchorText:"Smnstrande vrk?",placement:{offsetX:314.8419285714285,offsetY:3.102571428571366,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.6886490735407065,ny:.5708041483412066}},{id:"q5_anstrangning_none",kind:"checkbox",anchorText:"Vrk efter anstrngning?",placement:{offsetX:120.02007142857134,offsetY:4.942857142857122,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3641483054915514,ny:.5972742574795028}},{id:"q5_anstrangning_mild",kind:"checkbox",anchorText:"Vrk efter anstrngning?",placement:{offsetX:177.7343571428571,offsetY:4.371428571428567,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.46111451132872505,ny:.5979529782266385}},{id:"q5_anstrangning_moderate",kind:"checkbox",anchorText:"Vrk efter anstrngning?",placement:{offsetX:242.30578571428566,offsetY:5.514285714285734,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.5696014544930875,ny:.5965955367323669}},{id:"q5_anstrangning_severe",kind:"checkbox",anchorText:"Vrk efter anstrngning?",placement:{offsetX:314.8772142857142,offsetY:4.371428571428567,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.6915292578725037,ny:.5979529782266385}},{id:"q5_svaghet_none",kind:"checkbox",anchorText:"Svaghet i armen?",placement:{offsetX:119.87149999999993,offsetY:5.217142857142846,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3651083669354838,ny:.6237443666177989}},{id:"q5_svaghet_mild",kind:"checkbox",anchorText:"Svaghet i armen?",placement:{offsetX:177.01435714285708,offsetY:4.074285714285736,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.46111451132872505,ny:.6251018081120705}},{id:"q5_svaghet_moderate",kind:"checkbox",anchorText:"Svaghet i armen?",placement:{offsetX:241.58578571428563,offsetY:4.074285714285736,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.5696014544930875,ny:.6251018081120705}},{id:"q5_svaghet_severe",kind:"checkbox",anchorText:"Svaghet i armen?",placement:{offsetX:314.72864285714275,offsetY:4.645714285714291,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.6924893193164362,ny:.6244230873649347}},{id:"q5_stelhet_none",kind:"checkbox",anchorText:"Stelhet i axeln?",placement:{offsetX:122.60192857142852,offsetY:3.6651428571428255,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3660684283794163,ny:.6522506379975024}},{id:"q5_stelhet_mild",kind:"checkbox",anchorText:"Stelhet i axeln?",placement:{offsetX:179.1733571428571,offsetY:3.6651428571428255,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.46111451132872505,ny:.6522506379975024}},{id:"q5_stelhet_moderate",kind:"checkbox",anchorText:"Stelhet i axeln?",placement:{offsetX:243.74478571428565,offsetY:3.6651428571428255,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.5696014544930875,ny:.6522506379975024}},{id:"q5_stelhet_severe",kind:"checkbox",anchorText:"Stelhet i axeln?",placement:{offsetX:316.88764285714274,offsetY:3.6651428571428255,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.6924893193164361,ny:.6522506379975024}},{id:"q5_medication_never",kind:"checkbox",anchorText:"Tar du vrkmedicin fr axelbesvren?",placement:{offsetX:116.92292857142851,offsetY:-8.0047142857143,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3593479982718894,ny:.7486289840907858}},{id:"q5_medication_sometimes",kind:"checkbox",anchorText:"Tar du vrkmedicin fr axelbesvren?",placement:{offsetX:176.92292857142849,offsetY:-8.0047142857143,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.46015444988479254,ny:.7486289840907858}},{id:"q5_medication_often",kind:"checkbox",anchorText:"Tar du vrkmedicin fr axelbesvren?",placement:{offsetX:241.4943571428571,offsetY:-7.4332857142857165,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.5686413930491552,ny:.74795026334365}},{id:"q5_medication_always",kind:"checkbox",anchorText:"Tar du vrkmedicin fr axelbesvren?",placement:{offsetX:313.4943571428571,offsetY:-8.576142857142855,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.689609134984639,ny:.7493077048379215}},{id:"q5_medication_which",anchorText:"Om ja, vilken medicin",textKind:"short",placement:{offsetX:99.63995833333328,offsetY:7.74666666666667,width:265.33333333333337,lineHeight:12,maxLines:2,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.33030738967293904,ny:.7712530089953126,nw:.44578853046594985,nh:.028506271379703536}},{id:"q6_daily_activities_no",kind:"checkbox",anchorText:"6. Har din frmga att utfra hushllsarbeten pverkats?",placement:{offsetX:149.73535714285714,offsetY:15.99428571428561,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3535876296082949,ny:.8270212303849706}},{id:"q6_daily_activities_yes",kind:"checkbox",anchorText:"6. Har din frmga att utfra hushllsarbeten pverkats?",placement:{offsetX:180.5925,offsetY:15.99428571428561,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.40543094758064513,ny:.8270212303849706}},{id:"q6_daily_activities_how",anchorText:"Vardagssysslor",textKind:"long",placement:{offsetX:138.35995833333328,offsetY:-12.308333333333309,width:364,lineHeight:10,maxLines:4,fontSize:8.5},templatePlacement:{templatePageIndex:1,nx:.3336676047267025,ny:.8472400386418346,nw:.6115591397849461,nh:.047510452299505894}},{id:"q7_leisure_no",kind:"checkbox",anchorText:"7. Har dina fritidsaktiviteter pverkats av skadan?",placement:{offsetX:149.64392857142857,offsetY:15.148571428571245,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:2,nx:.3526275681643625,ny:.0956996253461477}},{id:"q7_leisure_yes",kind:"checkbox",anchorText:"7. Har dina fritidsaktiviteter pverkats av skadan?",placement:{offsetX:179.35821428571427,offsetY:15.148571428571245,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:2,nx:.40255076324884786,ny:.0956996253461477}},{id:"q7_leisure_how",anchorText:"Fritid",textKind:"long",placement:{offsetX:135.025625,offsetY:2.4116666666665196,width:368.66666666666663,lineHeight:10,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:2,nx:.32806724630376344,ny:.1108280279994933,nw:.6193996415770608,nh:.011877613074876473}},{id:"q8_work_no",kind:"checkbox",anchorText:"8. ndrad arbetssituation p grund av axelskadan?",placement:{offsetX:149.6439285714286,offsetY:15.685714285714198,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:2,nx:.3526275681643626,ny:.13981647390997456}},{id:"q8_work_yes",kind:"checkbox",anchorText:"8. ndrad arbetssituation p grund av axelskadan?",placement:{offsetX:181.0725,offsetY:15.685714285714198,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:2,nx:.40543094758064513,ny:.13981647390997456}},{id:"q8_work_how",anchorText:"Arbete",textKind:"long",placement:{offsetX:138.17229166666667,offsetY:-13.428333333333399,width:365.33333333333337,lineHeight:10,maxLines:4,fontSize:8.5},templatePlacement:{templatePageIndex:1,nx:.33335398465501787,ny:.8753662264031421,nw:.6137992831541219,nh:.047510452299505894}},{id:"q9_hygiene_no",kind:"checkbox",anchorText:"9. Har du p grund av axelskadan besvr med att skta din personliga hygien?",placement:{offsetX:144.7410714285714,offsetY:38.97714285714267,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:2,nx:.34398701516897073,ny:.21990552207199882}},{id:"q9_hygiene_yes",kind:"checkbox",anchorText:"9. Har du p grund av axelskadan besvr med att skta din personliga hygien?",placement:{offsetX:178.4553571428571,offsetY:38.97714285714267,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:2,nx:.400630640360983,ny:.21990552207199882}},{id:"q9_hygiene_how",anchorText:"Personlig hygien",textKind:"long",placement:{offsetX:136.59895833333334,offsetY:-11.748333333333449,width:366.66666666666663,lineHeight:10,maxLines:2,fontSize:8.5},templatePlacement:{templatePageIndex:2,nx:.33030738967293904,ny:.2391062492081592,nw:.6160394265232974,nh:.023755226149752947}},{id:"q10_mobility_no",kind:"checkbox",anchorText:"10. Har din frmga att lyfta armen pverkats vsentligt av skadan?",placement:{offsetX:148.5925,offsetY:15.639999999999873,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:2,nx:.35166750672043007,ny:.30406689471683784}},{id:"q10_mobility_yes",kind:"checkbox",anchorText:"10. Har din frmga att lyfta armen pverkats vsentligt av skadan?",placement:{offsetX:180.5925,offsetY:15.639999999999873,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:2,nx:.40543094758064513,ny:.30406689471683784}},{id:"q10_mobility_how",anchorText:"Rrelsefrmga",textKind:"long",placement:{offsetX:137.505625,offsetY:-12.76166666666677,width:366,lineHeight:10,maxLines:3,fontSize:8.5},templatePlacement:{templatePageIndex:2,nx:.3314274613575269,ny:.3238332224756114,nw:.6149193548387096,nh:.03563283922462942}},{id:"other_information",anchorText:"vriga upplysningar",textKind:"long",placement:{offsetX:3.958958333333335,offsetY:-12.76166666666677,width:502.6666666666667,lineHeight:10,maxLines:9,fontSize:8.5},templatePlacement:{templatePageIndex:2,nx:.10181276601702509,ny:.7585538610160903,nw:.8445340501792115,nh:.10689851767388826}},{id:"signature_date",anchorText:"Datum",textKind:"short",placement:{offsetX:-.12104166666666316,offsetY:-8.266666666666765,width:129.33333333333331,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:1,nx:.4405224434363799,ny:.24010198910426972,nw:.2172939068100358,nh:.014253135689851768}},{id:"signature_name",anchorText:"Namnteckning",textKind:"short",placement:{offsetX:0,offsetY:0,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:3,nx:.3314516129032258,ny:.1017198783732421,nw:.20161290322580644,nh:.014253135689851768}},{id:"signature_block",anchorText:"Underskrift av den frskrade",textKind:"long",placement:{offsetX:0,offsetY:0,width:120,lineHeight:12,maxLines:3,fontSize:10},templatePlacement:{templatePageIndex:2,nx:.09516129032258064,ny:.8904884074496389,nw:.20161290322580644,nh:.042759407069555305}}],templateSha256:"988146d0358f047294a213ab0a623ed7a0d39345297f07a09e34ff8c5a250f3f"},GA={insurerId:"lf_skaraborg",variantId:"lf_skaraborg_knaskada_v1",description:"Lnsfrskringar Skaraborg  Intyg knskada (LF10831 utg 01) v1",regions:[{id:"insured_name",anchorSpec:{primary:["Namn"],requiredNearby:["Personnummer","Skadedatum","Skadenummer"],optionalNearby:["Yrke"],proximity:{maxDx:1600,maxDy:120}},textKind:"short",placement:{offsetX:1.238958333333306,offsetY:-4.400000000000205,width:170.66666666666669,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:0,nx:.13825878859024848,ny:.2493596351129725,nw:.286701935484449,nh:.01425364697374882}},{id:"insured_personnummer",anchorSpec:{primary:["Namn"],requiredNearby:["Personnummer","Skadedatum","Skadenummer"],optionalNearby:["Yrke"],proximity:{maxDx:1600,maxDy:120}},textKind:"short",placement:{offsetX:187.23895833333336,offsetY:-4.400000000000205,width:114,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:0,nx:.43168030068761426,ny:.24856776583665302,nw:.19150793346812803,nh:.01425364697374882}},{id:"injury_date",anchorSpec:{primary:["Namn"],requiredNearby:["Personnummer","Skadedatum","Skadenummer"],optionalNearby:["Yrke"],proximity:{maxDx:1600,maxDy:120}},textKind:"short",placement:{offsetX:311.23895833333324,offsetY:-5.066666666666833,width:52.57142857142861,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:0,nx:.6326001411303076,ny:.24879401420131578,nw:.08831443548404908,nh:.01425364697374882}},{id:"claim_number",anchorSpec:{primary:["Namn"],requiredNearby:["Personnummer","Skadedatum","Skadenummer"],optionalNearby:["Yrke"],proximity:{maxDx:1600,maxDy:120}},textKind:"short",placement:{offsetX:373.2389583333333,offsetY:-4.400000000000205,width:112.00000000000006,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:0,nx:.7295540322595353,ny:.24811526910732776,nw:.18814814516166972,nh:.01425364697374882}},{id:"occupation",anchorText:"Yrke Skadan avser",textKind:"short",placement:{offsetX:.17549499999998375,offsetY:41.122849999999744,width:462.2857142857142,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:0,nx:.1391912298389903,ny:.2759438179608374,nw:.7765910685499526,nh:.01425364697374882}},{id:"injury_side_left",kind:"checkbox",anchorText:"Skadan avser l: Vnster kn D Hger kn",placement:{offsetX:-6.7126149999999996,offsetY:3.818313333333208,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.34077852822649346,ny:.3176527039864023}},{id:"injury_side_right",kind:"checkbox",anchorText:"Skadan avser l: Vnster kn D Hger kn",placement:{offsetX:55.954051666666686,offsetY:5.818313333333208,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.4386923588718522,ny:.31697395889241425}},{id:"q1_prev_injury_no",kind:"checkbox",anchorText:"1. Har du tidigare skadat eller haft besvr i samma ben",placement:{offsetX:119.265625,offsetY:-1.2133333333333667,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.33981858871036247,ny:.33462133133610333}},{id:"q1_prev_injury_yes",kind:"checkbox",anchorText:"1. Har du tidigare skadat eller haft besvr i samma ben",placement:{offsetX:144.59895833333334,offsetY:-1.8800000000001091,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.38013604838786313,ny:.3339425862421152}},{id:"q1_prev_injury_where_when",anchorText:"1. Har du tidigare skadat eller haft besvr i samma ben",anchorAlternatives:["Om Ja. nr och var behandlades du fr de besvren?"],textKind:"long",placement:{offsetX:.9989583333333769,offsetY:-8.015000000000214,width:289.71428571428567,lineHeight:10,maxLines:2,fontSize:8.5},templatePlacement:{templatePageIndex:0,nx:.42909296371054245,ny:.34103971463112764,nw:.4866893346784005,nh:.023756078289581366}},{id:"q2_further_treatment_no",kind:"checkbox",anchorText:"2 r det aktuellt med ytterligare behandling eller operation av din skada",placement:{offsetX:119.265625,offsetY:3.6666666666666288,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.34077852822649346,ny:.37330980169342154}},{id:"q2_further_treatment_yes",kind:"checkbox",anchorText:"2 r det aktuellt med ytterligare behandling eller operation av din skada",placement:{offsetX:144.59895833333334,offsetY:3.6666666666666288,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.38205592742012506,ny:.3726310565994335}},{id:"q2_further_treatment_where_when",anchorText:"2 r det aktuellt med ytterligare behandling eller operation av din skada",anchorAlternatives:["Om Ja. nr och var?"],textKind:"long",placement:{offsetX:1.6656250000000057,offsetY:-10.601666666666802,width:285.14285714285717,lineHeight:10,maxLines:2,fontSize:8.5},templatePlacement:{templatePageIndex:0,nx:.4338926612911973,ny:.380406930082434,nw:.4790098185493528,nh:.023756078289581366}},{id:"q3_promenader_none",kind:"checkbox",anchorText:"Smrtor vid promenader?",anchorAlternatives:["Smartor vid promenader?"],placement:{offsetX:127.9525,offsetY:4.702857142856999,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.34077852822649346,ny:.4703703501337111}},{id:"q3_promenader_mild",kind:"checkbox",anchorText:"Smrtor vid promenader?",anchorAlternatives:["Smartor vid promenader?"],placement:{offsetX:190.23821428571426,offsetY:5.845714285714166,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43965229838798314,ny:.46969160503972307}},{id:"q3_promenader_moderate",kind:"checkbox",anchorText:"Smrtor vid promenader?",anchorAlternatives:["Smartor vid promenader?"],placement:{offsetX:251.9525,offsetY:6.417142857142721,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5385260685494727,ny:.46901285994573505}},{id:"q3_promenader_severe",kind:"checkbox",anchorText:"Smrtor vid promenader?",anchorAlternatives:["Smartor vid promenader?"],placement:{offsetX:313.6667857142857,offsetY:6.9885714285712766,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6364398991948315,ny:.46833411485174703}},{id:"q3_gang_trappor_none",kind:"checkbox",anchorText:"Gng i trappor?",anchorAlternatives:["Gang i trappor?"],placement:{offsetX:127.14107142857142,offsetY:4.554285714285584,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.34077852822649346,ny:.48258776182549584}},{id:"q3_gang_trappor_mild",kind:"checkbox",anchorText:"Gng i trappor?",anchorAlternatives:["Gang i trappor?"],placement:{offsetX:189.42678571428573,offsetY:5.125714285714139,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.4386923588718522,ny:.48258776182549584}},{id:"q3_gang_trappor_moderate",kind:"checkbox",anchorText:"Gng i trappor?",anchorAlternatives:["Gang i trappor?"],placement:{offsetX:251.7125,offsetY:6.268571428571249,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5375661290333418,ny:.48190901673150777}},{id:"q3_gang_trappor_severe",kind:"checkbox",anchorText:"Gng i trappor?",anchorAlternatives:["Gang i trappor?"],placement:{offsetX:313.42678571428576,offsetY:6.839999999999861,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6354799596787005,ny:.48123027163751975}},{id:"q3_gang_skog_mark_none",kind:"checkbox",anchorText:"Gng i skog och mark?",anchorAlternatives:["Gang i skog och mark?"],placement:{offsetX:127.7125,offsetY:4.7371428571427145,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.34077852822649346,ny:.4961626637052566}},{id:"q3_gang_skog_mark_mild",kind:"checkbox",anchorText:"Gng i skog och mark?",anchorAlternatives:["Gang i skog och mark?"],placement:{offsetX:189.42678571428573,offsetY:5.30857142857127,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.4386923588718522,ny:.49548391861126856}},{id:"q3_gang_skog_mark_moderate",kind:"checkbox",anchorText:"Gng i skog och mark?",anchorAlternatives:["Gang i skog och mark?"],placement:{offsetX:252.28392857142856,offsetY:5.879999999999882,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5375661290333418,ny:.49480517351728054}},{id:"q3_gang_skog_mark_severe",kind:"checkbox",anchorText:"Gng i skog och mark?",anchorAlternatives:["Gang i skog och mark?"],placement:{offsetX:313.9982142857143,offsetY:6.451428571428437,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6354799596787005,ny:.4941264284232924}},{id:"q3_aktivitet_springa_none",kind:"checkbox",anchorText:"Smartor vid aktivitet som att springa?",anchorAlternatives:["Smrtor vid aktivitet som att springa?"],placement:{offsetX:127.7125,offsetY:4.5885714285712424,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.33981858871036247,ny:.5077013303030532}},{id:"q3_aktivitet_springa_mild",kind:"checkbox",anchorText:"Smartor vid aktivitet som att springa?",anchorAlternatives:["Smrtor vid aktivitet som att springa?"],placement:{offsetX:189.42678571428573,offsetY:5.1599999999998545,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43965229838798314,ny:.5070225852090652}},{id:"q3_aktivitet_springa_moderate",kind:"checkbox",anchorText:"Smartor vid aktivitet som att springa?",anchorAlternatives:["Smrtor vid aktivitet som att springa?"],placement:{offsetX:252.28392857142856,offsetY:6.302857142856965,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5375661290333418,ny:.5063438401150772}},{id:"q3_aktivitet_springa_severe",kind:"checkbox",anchorText:"Smartor vid aktivitet som att springa?",anchorAlternatives:["Smrtor vid aktivitet som att springa?"],placement:{offsetX:313.42678571428576,offsetY:6.302857142856965,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6364398991948315,ny:.5077013303030532}},{id:"q3_smartor_efter_aktivitet_none",kind:"checkbox",anchorText:"Smartor efter aktivitet?",anchorAlternatives:["Smrtor efter aktivitet?"],placement:{offsetX:127.95249999999999,offsetY:4.679999999999836,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.34077852822649346,ny:.520597487088826}},{id:"q3_smartor_efter_aktivitet_mild",kind:"checkbox",anchorText:"Smartor efter aktivitet?",anchorAlternatives:["Smrtor efter aktivitet?"],placement:{offsetX:189.6667857142857,offsetY:6.394285714285559,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43965229838798314,ny:.5199187419948379}},{id:"q3_smartor_efter_aktivitet_moderate",kind:"checkbox",anchorText:"Smartor efter aktivitet?",anchorAlternatives:["Smrtor efter aktivitet?"],placement:{offsetX:252.52392857142854,offsetY:5.822857142856947,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5385260685494727,ny:.5199187419948379}},{id:"q3_smartor_efter_aktivitet_severe",kind:"checkbox",anchorText:"Smartor efter aktivitet?",anchorAlternatives:["Smrtor efter aktivitet?"],placement:{offsetX:314.23821428571426,offsetY:6.394285714285559,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6373998387109625,ny:.5192399969008499}},{id:"q3_vark_vid_vila_none",kind:"checkbox",anchorText:"Vrk vid vila? (inte belastningsrelaterat)",anchorAlternatives:["Vrk vid vila?"],placement:{offsetX:128.1925,offsetY:5.102857142856919,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.33981858871036247,ny:.5341723889685868}},{id:"q3_vark_vid_vila_mild",kind:"checkbox",anchorText:"Vrk vid vila? (inte belastningsrelaterat)",anchorAlternatives:["Vrk vid vila?"],placement:{offsetX:190.47821428571427,offsetY:5.674285714285531,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.4386923588718522,ny:.5341723889685868}},{id:"q3_vark_vid_vila_moderate",kind:"checkbox",anchorText:"Vrk vid vila? (inte belastningsrelaterat)",anchorAlternatives:["Vrk vid vila?"],placement:{offsetX:252.1925,offsetY:6.245714285714087,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5375661290333418,ny:.5328148987806107}},{id:"q3_vark_vid_vila_severe",kind:"checkbox",anchorText:"Vrk vid vila? (inte belastningsrelaterat)",anchorAlternatives:["Vrk vid vila?"],placement:{offsetX:315.0496428571428,offsetY:7.388571428571197,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6364398991948315,ny:.5321361536866226}},{id:"q3_stord_nattsomn_none",kind:"checkbox",anchorText:"Stord natts'omn?",anchorAlternatives:["Strd nattsmn?"],placement:{offsetX:127.04964285714284,offsetY:4.86285714285691,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.33981858871036247,ny:.5470685457543595}},{id:"q3_stord_nattsomn_mild",kind:"checkbox",anchorText:"Stord natts'omn?",anchorAlternatives:["Strd nattsmn?"],placement:{offsetX:190.47821428571427,offsetY:5.434285714285522,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43965229838798314,ny:.5457110555663834}},{id:"q3_stord_nattsomn_moderate",kind:"checkbox",anchorText:"Stord natts'omn?",anchorAlternatives:["Strd nattsmn?"],placement:{offsetX:252.1925,offsetY:6.577142857142633,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5375661290333418,ny:.5463898006603715}},{id:"q3_stord_nattsomn_severe",kind:"checkbox",anchorText:"Stord natts'omn?",anchorAlternatives:["Strd nattsmn?"],placement:{offsetX:313.9067857142857,offsetY:7.148571428571188,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6373998387109625,ny:.5450323104723954}},{id:"q3_stelhet_domningar_none",kind:"checkbox",anchorText:"Stelhet/domningar?",placement:{offsetX:127.95249999999997,offsetY:4.142857142856883,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.34077852822649346,ny:.5599647025401322}},{id:"q3_stelhet_domningar_mild",kind:"checkbox",anchorText:"Stelhet/domningar?",placement:{offsetX:190.23821428571426,offsetY:5.857142857142605,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.4406122379041141,ny:.5586072123521562}},{id:"q3_stelhet_domningar_moderate",kind:"checkbox",anchorText:"Stelhet/domningar?",placement:{offsetX:251.9525,offsetY:5.857142857142605,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5385260685494727,ny:.5586072123521562}},{id:"q3_stelhet_domningar_severe",kind:"checkbox",anchorText:"Stelhet/domningar?",placement:{offsetX:314.23821428571426,offsetY:6.428571428571161,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6373998387109625,ny:.5579284672581681}},{id:"q3_ostadighet_none",kind:"checkbox",anchorText:"Ostadighet?",placement:{offsetX:127.95249999999997,offsetY:5.045714285714041,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.34077852822649346,ny:.572860859325905}},{id:"q3_ostadighet_mild",kind:"checkbox",anchorText:"Ostadighet?",placement:{offsetX:190.23821428571426,offsetY:5.617142857142596,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43965229838798314,ny:.5715033691379289}},{id:"q3_ostadighet_moderate",kind:"checkbox",anchorText:"Ostadighet?",placement:{offsetX:252.52392857142854,offsetY:6.1885714285711515,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5375661290333418,ny:.5708246240439409}},{id:"q3_ostadighet_severe",kind:"checkbox",anchorText:"Ostadighet?",placement:{offsetX:314.8096428571428,offsetY:6.7599999999997635,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6354799596787005,ny:.5701458789499528}},{id:"q3_svullnad_none",kind:"checkbox",anchorText:"Svullnad?",placement:{offsetX:127.62107142857138,offsetY:4.897142857142569,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.34077852822649346,ny:.5843995259237016}},{id:"q3_svullnad_mild",kind:"checkbox",anchorText:"Svullnad?",placement:{offsetX:189.9067857142857,offsetY:5.468571428571124,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43965229838798314,ny:.5850782710176897}},{id:"q3_svullnad_moderate",kind:"checkbox",anchorText:"Svullnad?",placement:{offsetX:252.76392857142852,offsetY:6.039999999999736,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5385260685494727,ny:.5843995259237016}},{id:"q3_svullnad_severe",kind:"checkbox",anchorText:"Svullnad?",placement:{offsetX:315.04964285714277,offsetY:7.182857142856847,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6373998387109625,ny:.5830420357357256}},{id:"q3_muskelsvaghet_none",kind:"checkbox",anchorText:"Muskelsvaghet?",placement:{offsetX:127.95249999999997,offsetY:4.988571428571106,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.34077852822649346,ny:.5986531728974505}},{id:"q3_muskelsvaghet_mild",kind:"checkbox",anchorText:"Muskelsvaghet?",placement:{offsetX:190.23821428571426,offsetY:4.988571428571106,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43965229838798314,ny:.5979744278034624}},{id:"q3_muskelsvaghet_moderate",kind:"checkbox",anchorText:"Muskelsvaghet?",placement:{offsetX:251.9525,offsetY:6.131428571428273,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5375661290333418,ny:.5972956827094744}},{id:"q3_muskelsvaghet_severe",kind:"checkbox",anchorText:"Muskelsvaghet?",placement:{offsetX:313.6667857142857,offsetY:7.2742857142854405,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6364398991948315,ny:.5966169376154864}},{id:"q3_lasningar_knaled_none",kind:"checkbox",anchorText:"Lsningar i knled?",anchorAlternatives:["Lasningar i knaled?"],placement:{offsetX:127.95249999999997,offsetY:5.319999999999709,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.34077852822649346,ny:.6115493296832232}},{id:"q3_lasningar_knaled_mild",kind:"checkbox",anchorText:"Lsningar i knled?",anchorAlternatives:["Lasningar i knaled?"],placement:{offsetX:190.23821428571426,offsetY:5.319999999999709,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43965229838798314,ny:.6108705845892352}},{id:"q3_lasningar_knaled_moderate",kind:"checkbox",anchorText:"Lsningar i knled?",anchorAlternatives:["Lasningar i knaled?"],placement:{offsetX:251.9525,offsetY:6.462857142856819,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5375661290333418,ny:.6101918394952471}},{id:"q3_lasningar_knaled_severe",kind:"checkbox",anchorText:"Lsningar i knled?",anchorAlternatives:["Lasningar i knaled?"],placement:{offsetX:314.23821428571426,offsetY:7.034285714285431,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6364398991948315,ny:.609513094401259}},{id:"q3_besvar_sta_kna_ner_huk_none",kind:"checkbox",anchorText:"Besvr med att st p kn/ner p huk7",anchorAlternatives:["Besvr med att st p kn/ner p huk?"],placement:{offsetX:127.9525,offsetY:4.691428571428446,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.34077852822649346,ny:.624445486468996}},{id:"q3_besvar_sta_kna_ner_huk_mild",kind:"checkbox",anchorText:"Besvr med att st p kn/ner p huk7",anchorAlternatives:["Besvr med att st p kn/ner p huk?"],placement:{offsetX:190.23821428571426,offsetY:5.262857142857001,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.4386923588718522,ny:.6237667413750079}},{id:"q3_besvar_sta_kna_ner_huk_moderate",kind:"checkbox",anchorText:"Besvr med att st p kn/ner p huk7",anchorAlternatives:["Besvr med att st p kn/ner p huk?"],placement:{offsetX:251.9525,offsetY:5.834285714285613,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5375661290333418,ny:.62308799628102}},{id:"q3_besvar_sta_kna_ner_huk_severe",kind:"checkbox",anchorText:"Besvr med att st p kn/ner p huk7",anchorAlternatives:["Besvr med att st p kn/ner p huk?"],placement:{offsetX:314.23821428571426,offsetY:6.4057142857141685,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6354799596787005,ny:.6217305060930438}},{id:"q3_medication_never",kind:"checkbox",anchorText:"Tar du vrkmedicin for knbesvren?",anchorAlternatives:["Tar du vrkmedicin fr knbesvren?"],placement:{offsetX:127.62107142857141,offsetY:4.725714285714162,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.34077852822649346,ny:.6624552117323262}},{id:"q3_medication_sometimes",kind:"checkbox",anchorText:"Tar du vrkmedicin for knbesvren?",anchorAlternatives:["Tar du vrkmedicin fr knbesvren?"],placement:{offsetX:190.47821428571427,offsetY:5.297142857142717,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.43965229838798314,ny:.6624552117323262}},{id:"q3_medication_often",kind:"checkbox",anchorText:"Tar du vrkmedicin for knbesvren?",anchorAlternatives:["Tar du vrkmedicin fr knbesvren?"],placement:{offsetX:252.1925,offsetY:5.297142857142717,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5375661290333418,ny:.661776466638338}},{id:"q3_medication_always",kind:"checkbox",anchorText:"Tar du vrkmedicin for knbesvren?",anchorAlternatives:["Tar du vrkmedicin fr knbesvren?"],placement:{offsetX:314.4782142857143,offsetY:5.297142857142717,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6354799596787005,ny:.660418976450362}},{id:"q3_medication_which",anchorText:"Omja_ vilken medicin?",anchorAlternatives:["Om ja, vilken medicin?"],textKind:"long",placement:{offsetX:63.38107142857142,offsetY:1.0364285714284165,width:402.8571428571429,lineHeight:10,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:0,nx:.2419047580650038,ny:.6790547714371711,nw:.6767573588723321,nh:.011878039144790683}},{id:"q4_numbness_none",kind:"checkbox",anchorText:"Har du besvr med k'anselbortfall?",anchorAlternatives:["Har du besvr med knselbortfall?","4. Har du besvr med knselbortfall?"],placement:{offsetX:118.50107142857141,offsetY:-3.5485714285715346,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.34077852822649346,ny:.727954113302172}},{id:"q4_numbness_mild",kind:"checkbox",anchorText:"Har du besvr med k'anselbortfall?",anchorAlternatives:["Har du besvr med knselbortfall?","4. Har du besvr med knselbortfall?"],placement:{offsetX:181.35821428571427,offsetY:-3.5485714285715346,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.4386923588718522,ny:.7265966231141959}},{id:"q4_numbness_moderate",kind:"checkbox",anchorText:"Har du besvr med k'anselbortfall?",anchorAlternatives:["Har du besvr med knselbortfall?","4. Har du besvr med knselbortfall?"],placement:{offsetX:243.64392857142855,offsetY:-2.977142857142951,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5375661290333418,ny:.7259178780202077}},{id:"q4_numbness_severe",kind:"checkbox",anchorText:"Har du besvr med k'anselbortfall?",anchorAlternatives:["Har du besvr med knselbortfall?","4. Har du besvr med knselbortfall?"],placement:{offsetX:305.35821428571427,offsetY:-2.405714285714396,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6364398991948315,ny:.7252391329262197}},{id:"q4_numbness_where",anchorText:"I vilket/vilka omrden har du knselbortfall7",anchorAlternatives:["I vilket/vilka omrden har du knselbortfall?"],placement:{offsetX:0,offsetY:0,width:360,lineHeight:10,maxLines:4,fontSize:8.5},textKind:"long",templatePlacement:{templatePageIndex:0,nx:.32499999999999996,ny:.7707620676548841,nw:.6048387096774193,nh:.047510452299505894}},{id:"q5_reduced_mobility_no",kind:"checkbox",anchorText:"Har du ftt frsmrad rrlighet p grund av olycksfallet?",anchorAlternatives:["Har du fatt frsmrad rorlighet pa grund av olycksfallet","Har du ftt frsmrad rrlighet"],placement:{offsetX:119.25535714285714,offsetY:5.388571428571254,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3417384677426244,ny:.10859921503808627}},{id:"q5_reduced_mobility_yes",kind:"checkbox",anchorText:"Har du ftt frsmrad rrlighet p grund av olycksfallet?",anchorAlternatives:["Har du fatt frsmrad rorlighet pa grund av olycksfallet","Har du ftt frsmrad rrlighet"],placement:{offsetX:144.96964285714284,offsetY:5.959999999999809,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.38301586693625606,ny:.10927796013207429}},{id:"q6_daily_activities_no",kind:"checkbox",anchorText:"Har din frmga att utfra dagliga",anchorAlternatives:["aktiviteter/hushllsarbeten","Har din formaga att utfora dagliga","aktiviteter/hushallsarbeten"],placement:{offsetX:119.2553571428572,offsetY:2.4399999999997135,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3426984072587554,ny:.3149377236104501}},{id:"q6_daily_activities_yes",kind:"checkbox",anchorText:"Har din frmga att utfra dagliga",anchorAlternatives:["aktiviteter/hushllsarbeten","Har din formaga att utfora dagliga","aktiviteter/hushallsarbeten"],placement:{offsetX:144.96964285714293,offsetY:2.4399999999997135,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.38301586693625606,ny:.3156164687044382}},{id:"q6_daily_activities_how",anchorText:"Vardagssysslor",anchorAlternatives:["Vardagssysslor Har din frmga att utfra dagliga","Vardagssysslor Har din formaga att utfora dagliga"],textKind:"long",placement:{offsetX:176.96964285714296,offsetY:.46499999999969077,width:288.00000000000006,lineHeight:10,maxLines:2,fontSize:8.5},templatePlacement:{templatePageIndex:1,nx:.4338926612911973,ny:.31592614615357023,nw:.4838095161300077,nh:.023756078289581366}},{id:"q7_leisure_no",kind:"checkbox",anchorText:"Har din frmga att utfra fritids",anchorAlternatives:["aktiviteter frndrats p grund","Har din formaga att utfora fritids","aktiviteter forandrats pa grund"],placement:{offsetX:119.49535714285722,offsetY:2.382857142856892,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3417384677426244,ny:.3543049390617564}},{id:"q7_leisure_yes",kind:"checkbox",anchorText:"Har din frmga att utfra fritids",anchorAlternatives:["aktiviteter frndrats p grund","Har din formaga att utfora fritids","aktiviteter forandrats pa grund"],placement:{offsetX:145.7810714285715,offsetY:2.382857142856892,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.38397580645238705,ny:.3543049390617564}},{id:"q7_leisure_how",anchorText:"Fritid",anchorAlternatives:["Fritid Har din frmga att utfra fritids","Fritid Har din formaga att utfora fritids"],textKind:"long",placement:{offsetX:178.35250000000008,offsetY:.40785714285686936,width:287.42857142857144,lineHeight:10,maxLines:2,fontSize:8.5},templatePlacement:{templatePageIndex:1,nx:.4358125403234593,ny:.35461461651088844,nw:.4828495766138767,nh:.023756078289581366}},{id:"q8_work_no",kind:"checkbox",anchorText:"Har din frmga att utfra arbete",anchorAlternatives:["ndrats p grund av olycksfallet","Har din formaga att utfora arbete","andrats pa grund av olycksfallet"],placement:{offsetX:119.49535714285715,offsetY:2.6571428571426168,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3417384677426244,ny:.3929934094190747}},{id:"q8_work_yes",kind:"checkbox",anchorText:"Har din frmga att utfra arbete",anchorAlternatives:["ndrats p grund av olycksfallet","Har din formaga att utfora arbete","andrats pa grund av olycksfallet"],placement:{offsetX:145.20964285714285,offsetY:2.6571428571426168,width:10,lineHeight:10,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.38301586693625606,ny:.39231466432508666}},{id:"q8_work_how",anchorText:"Arbete",anchorAlternatives:["Arbete Har din frmga att utfra arbete","Arbete Har din formaga att utfora arbete"],textKind:"long",placement:{offsetX:179.49535714285713,offsetY:1.2535714285711492,width:287.42857142857144,lineHeight:10,maxLines:2,fontSize:8.5},templatePlacement:{templatePageIndex:1,nx:.4358125403234593,ny:.39330308686820664,nw:.4828495766138767,nh:.023756078289581366}},{id:"other_information",anchorText:"Ovriga upplysningar",anchorAlternatives:["vriga upplysningar"],textKind:"long",placement:{offsetX:3.198214285714286,offsetY:-13.08928571428595,width:464.00000000000006,lineHeight:10,maxLines:8,fontSize:8.5},templatePlacement:{templatePageIndex:1,nx:.13823129032285933,ny:.450317674763202,nw:.7794708870983458,nh:.09502431315832546}},{id:"signature_date",anchorText:"Underskrift av den frskrade",anchorAlternatives:["Underskrift av den forsakrade"],textKind:"short",placement:{offsetX:4.341071428571425,offsetY:-17.097142857143126,width:111.42857142857142,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.14111110887125222,ny:.5981441140769594,nw:.18718820564553865,nh:.01425364697374882}},{id:"signature_name",anchorText:"Namnteckning",textKind:"short",placement:{offsetX:1.2922916666666708,offsetY:-4.960000000000321,width:170.2857142857143,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:1,nx:.33789870967810054,ny:.5984834866239535,nw:.28606197580702836,nh:.01425364697374882}},{id:"signature_name_clarification",anchorText:"Namnfrtydligande",anchorAlternatives:["Namnfortydligande"],textKind:"short",placement:{offsetX:1.5753571428571718,offsetY:-5.817142857143153,width:167.4285714285714,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:1,nx:.6354799596787005,ny:.5998409768119295,nw:.2812622782263734,nh:.01425364697374882}}],templateSha256:"1862ca88230d09f69a8d2055d085b24f910ca65fc620101c0d93575dc2ffedd0"},WA={insurerId:"lf_ostgota",variantId:"lf_ostgota_axelskada_v1",description:"LF  Intyg axelskada (v1)",regions:[{id:"insured_name",anchorText:"Namn",textKind:"short",placement:{offsetX:-201.054375,offsetY:69.9466666666666,width:179.33333333333334,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:0,nx:.11250041157406752,ny:.15671092978360515,nw:.30126101814576867,nh:.01425364697374882}},{id:"insured_personnummer",anchorText:"Personnummer",textKind:"short",placement:{offsetX:.5989583333333712,offsetY:-7.520000000000209,width:91.33333333333334,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:0,nx:.4260806535101836,ny:.15829466833624384,nw:.15343033266159967,nh:.01425364697374882}},{id:"injury_date",anchorText:"Skadedatum",textKind:"short",placement:{offsetX:.7056250000000546,offsetY:-7.520000000000209,width:82.66666666666669,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:0,nx:.5895903510911584,ny:.1590865376125633,nw:.13887125000028,nh:.01425364697374882}},{id:"claim_number",anchorText:"Skadenummer",textKind:"short",placement:{offsetX:-.014374999999972715,offsetY:-8.186666666666838,width:117.33333333333331,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:0,nx:.7385409660108135,ny:.1590865376125633,nw:.19710758064555864,nh:.01425364697374882}},{id:"injury_side_right",kind:"checkbox",anchorText:"Hger axel",placement:{offsetX:23.665625000000063,offsetY:-6.70666666666682,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.37344397004233554,ny:.21618031243519045}},{id:"injury_side_left",kind:"checkbox",anchorText:"Vnster axel",placement:{offsetX:18.492291666666745,offsetY:-7.3733333333334485,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.4775974075425455,ny:.21618031243519045}},{id:"handedness_right",kind:"checkbox",anchorText:"Hgerhnt",placement:{offsetX:18.812291666666738,offsetY:-7.3733333333334485,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5795109861717832,ny:.21618031243519045}},{id:"handedness_left",kind:"checkbox",anchorText:"Vnster-hnt",placement:{offsetX:23.53229166666671,offsetY:-7.3733333333334485,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.7139025184301186,ny:.21697218171150978}},{id:"q1_prev_injury_no",kind:"checkbox",anchorText:"haft besvr i samma arm",placement:{offsetX:141.025625,offsetY:15.159999999999854,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.3432058752842101,ny:.23360143651421672}},{id:"q1_prev_injury_yes",kind:"checkbox",anchorText:"haft besvr i samma arm",placement:{offsetX:172.35895833333333,offsetY:15.159999999999854,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.394722629316572,ny:.23360143651421672}},{id:"q1_prev_injury_where_when",anchorText:"axel/annbge/handled",textKind:"long",placement:{offsetX:134.78562499999998,offsetY:2.038333333333185,width:359.33333333333326,lineHeight:10,maxLines:3,fontSize:8.5},templatePlacement:{templatePageIndex:0,nx:.3331265103648349,ny:.26366277391649123,nw:.6036419657270233,nh:.03563411743437205}},{id:"q2_neck_issue_no",kind:"checkbox",anchorText:"2. Har du tidigare haft besvr frn nacke, halsrygg",placement:{offsetX:143.45229166666667,offsetY:3.7199999999998,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.3476855930261546,ny:.30091032500136405}},{id:"q2_neck_issue_yes",kind:"checkbox",anchorText:"2. Har du tidigare haft besvr frn nacke, halsrygg",placement:{offsetX:174.785625,offsetY:3.7199999999998,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.3992023470585165,ny:.30011845572504453}},{id:"q2_neck_issue_where_when",anchorText:"nacke, halsrygg",textKind:"long",placement:{offsetX:135.21229166666666,offsetY:-6.735000000000241,width:356.66666666666663,lineHeight:10,maxLines:2,fontSize:8.5},templatePlacement:{templatePageIndex:0,nx:.3331265103648349,ny:.3262204467457221,nw:.5991622479850789,nh:.023756078289581366}},{id:"q3_further_treatment_no",kind:"checkbox",anchorText:"3. r det aktuellt med ytterligare behandling av din skada",placement:{offsetX:146.11895833333335,offsetY:14.706666666666592,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.3521653107680991,ny:.3547574357910817}},{id:"q3_further_treatment_yes",kind:"checkbox",anchorText:"3. r det aktuellt med ytterligare behandling av din skada",placement:{offsetX:177.45229166666667,offsetY:15.373333333333221,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.40256213536497487,ny:.3547574357910817}},{id:"q3_further_treatment_where_when",anchorText:"3. r det aktuellt med ytterligare behandling av din skada",textKind:"long",placement:{offsetX:136.78562499999998,offsetY:2.064999999999827,width:355.33333333333337,lineHeight:10,maxLines:2,fontSize:8.5},templatePlacement:{templatePageIndex:0,nx:.33536636923580715,ny:.37294073404856554,nw:.5969223891141067,nh:.023756078289581366}},{id:"q4_fully_recovered_no",kind:"checkbox",anchorText:"4. r du fullt terstlld efter skadan",placement:{offsetX:146.11895833333335,offsetY:3.506666666666547,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.3521653107680991,ny:.40702080802816076}},{id:"q4_fully_recovered_yes",kind:"checkbox",anchorText:"4. r du fullt terstlld efter skadan",placement:{offsetX:184.11895833333335,offsetY:4.1733333333332325,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.4148813591553223,ny:.4078126773044802}},{id:"q5_vark_i_vila_none",kind:"checkbox",anchorText:"Vrk i vila?",placement:{offsetX:122.03995833333336,offsetY:3.2866666666665765,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.36784432286490487,ny:.5416385850024552}},{id:"q5_vark_i_vila_mild",kind:"checkbox",anchorText:"Vrk i vila?",placement:{offsetX:179.37329166666672,offsetY:3.953333333333262,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.46079846601025354,ny:.5424304542787746}},{id:"q5_vark_i_vila_moderate",kind:"checkbox",anchorText:"Vrk i vila?",placement:{offsetX:244.03995833333335,offsetY:3.2866666666665765,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5671917623814359,ny:.5416385850024552}},{id:"q5_vark_i_vila_severe",kind:"checkbox",anchorText:"Vrk i vila?",placement:{offsetX:316.03995833333335,offsetY:3.2866666666665765,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6847843531074794,ny:.5424304542787746}},{id:"q5_somn_none",kind:"checkbox",anchorText:"Smnstrande vrk?",placement:{offsetX:121.6990714285714,offsetY:4.245428571428533,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.36784432286490487,ny:.5685621403973141}},{id:"q5_somn_mild",kind:"checkbox",anchorText:"Smnstrande vrk?",placement:{offsetX:178.84192857142853,offsetY:3.673999999999978,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.4619183954457397,ny:.5685621403973141}},{id:"q5_somn_moderate",kind:"checkbox",anchorText:"Smnstrande vrk?",placement:{offsetX:242.84192857142853,offsetY:4.245428571428533,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5649519035104635,ny:.5693540096736335}},{id:"q5_somn_severe",kind:"checkbox",anchorText:"Smnstrande vrk?",placement:{offsetX:314.8419285714285,offsetY:3.102571428571366,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6847843531074794,ny:.5693540096736335}},{id:"q5_anstrangning_none",kind:"checkbox",anchorText:"Vrk efter anstrngning?",placement:{offsetX:120.02007142857134,offsetY:4.942857142857122,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.368964252300391,ny:.5946938265158536}},{id:"q5_anstrangning_mild",kind:"checkbox",anchorText:"Vrk efter anstrngning?",placement:{offsetX:177.7343571428571,offsetY:4.371428571428567,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.46365078629125733,ny:.595485695792173}},{id:"q5_anstrangning_moderate",kind:"checkbox",anchorText:"Vrk efter anstrngning?",placement:{offsetX:242.30578571428566,offsetY:5.514285714285734,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5694316212524081,ny:.5946938265158536}},{id:"q5_anstrangning_severe",kind:"checkbox",anchorText:"Vrk efter anstrngning?",placement:{offsetX:314.8772142857142,offsetY:4.371428571428567,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6870242119784516,ny:.595485695792173}},{id:"q5_svaghet_none",kind:"checkbox",anchorText:"Svaghet i armen?",placement:{offsetX:119.87149999999993,offsetY:5.217142857142846,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.368964252300391,ny:.6208255126343931}},{id:"q5_svaghet_mild",kind:"checkbox",anchorText:"Svaghet i armen?",placement:{offsetX:177.01435714285708,offsetY:4.074285714285736,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.46303832488122587,ny:.6208255126343931}},{id:"q5_svaghet_moderate",kind:"checkbox",anchorText:"Svaghet i armen?",placement:{offsetX:241.58578571428563,offsetY:4.074285714285736,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5694316212524081,ny:.6224092511870318}},{id:"q5_svaghet_severe",kind:"checkbox",anchorText:"Svaghet i armen?",placement:{offsetX:314.72864285714275,offsetY:4.645714285714291,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6870242119784516,ny:.6216173819107125}},{id:"q5_stelhet_none",kind:"checkbox",anchorText:"Stelhet i axeln?",placement:{offsetX:122.60192857142852,offsetY:3.6651428571428255,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.36784432286490487,ny:.6485409373055713}},{id:"q5_stelhet_mild",kind:"checkbox",anchorText:"Stelhet i axeln?",placement:{offsetX:179.1733571428571,offsetY:3.6651428571428255,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.4619183954457397,ny:.6485409373055713}},{id:"q5_stelhet_moderate",kind:"checkbox",anchorText:"Stelhet i axeln?",placement:{offsetX:243.74478571428565,offsetY:3.6651428571428255,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5683116918169219,ny:.6493328065818907}},{id:"q5_stelhet_severe",kind:"checkbox",anchorText:"Stelhet i axeln?",placement:{offsetX:316.88764285714274,offsetY:3.6651428571428255,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6870242119784516,ny:.6485409373055713}},{id:"q5_medication_never",kind:"checkbox",anchorText:"Tar du vrkmedicin fr axelbesvren?",placement:{offsetX:116.92292857142851,offsetY:-8.0047142857143,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.36336460512296037,ny:.7411896426349387}},{id:"q5_medication_sometimes",kind:"checkbox",anchorText:"Tar du vrkmedicin fr axelbesvren?",placement:{offsetX:176.92292857142849,offsetY:-8.0047142857143,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.46079846601025354,ny:.7419815119112582}},{id:"q5_medication_often",kind:"checkbox",anchorText:"Tar du vrkmedicin fr axelbesvren?",placement:{offsetX:241.4943571428571,offsetY:-7.4332857142857165,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.5671917623814359,ny:.7427733811875774}},{id:"q5_medication_always",kind:"checkbox",anchorText:"Tar du vrkmedicin fr axelbesvren?",placement:{offsetX:313.4943571428571,offsetY:-8.576142857142855,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.6836644236719932,ny:.7427733811875774}},{id:"q5_medication_which",anchorText:"Om ja, vilken medicin",textKind:"short",placement:{offsetX:99.63995833333328,offsetY:7.74666666666667,width:227.99999999999997,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:0,nx:.3364862986712933,ny:.7632827954442494,nw:.383015866936256,nh:.01425364697374882}},{id:"q6_daily_activities_no",kind:"checkbox",anchorText:"6. Har din frmga att utfra hushllsarbeten pverkats?",placement:{offsetX:149.73535714285714,offsetY:15.99428571428561,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.35776495794552976,ny:.8180009624379185}},{id:"q6_daily_activities_yes",kind:"checkbox",anchorText:"6. Har din frmga att utfra hushllsarbeten pverkats?",placement:{offsetX:180.5925,offsetY:15.99428571428561,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:0,nx:.40928171197789165,ny:.8195847009905571}},{id:"q6_daily_activities_how",anchorText:"Vardagssysslor",textKind:"long",placement:{offsetX:138.35995833333328,offsetY:-12.308333333333309,width:354,lineHeight:10,maxLines:4,fontSize:8.5},templatePlacement:{templatePageIndex:0,nx:.3364862986712933,ny:.8401436070769991,nw:.5946825302431343,nh:.04751215657916273}},{id:"q7_leisure_no",kind:"checkbox",anchorText:"7. Har dina fritidsaktiviteter pverkats av skadan?",placement:{offsetX:149.64392857142857,offsetY:15.148571428571245,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.35776495794552976,ny:.10611048302679682}},{id:"q7_leisure_yes",kind:"checkbox",anchorText:"7. Har dina fritidsaktiviteter pverkats av skadan?",placement:{offsetX:179.35821428571427,offsetY:15.148571428571245,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.40816178254240554,ny:.10690235230311615}},{id:"q7_leisure_how",anchorText:"Fritid",textKind:"long",placement:{offsetX:135.025625,offsetY:2.4116666666665196,width:352,lineHeight:10,maxLines:2,fontSize:8.5},templatePlacement:{templatePageIndex:1,nx:.3364862986712933,ny:.12350191200796116,nw:.591322741936676,nh:.023756078289581366}},{id:"q8_work_no",kind:"checkbox",anchorText:"8. ndrad arbetssituation p grund av axelskadan?",placement:{offsetX:149.6439285714286,offsetY:15.685714285714198,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.35776495794552976,ny:.15045516250068194}},{id:"q8_work_yes",kind:"checkbox",anchorText:"8. ndrad arbetssituation p grund av axelskadan?",placement:{offsetX:181.0725,offsetY:15.685714285714198,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.40816178254240554,ny:.1512470317770014}},{id:"q8_work_how",anchorText:"Arbete",textKind:"long",placement:{offsetX:138.17229166666667,offsetY:-13.428333333333399,width:354,lineHeight:10,maxLines:4,fontSize:8.5},templatePlacement:{templatePageIndex:1,nx:.33536636923580715,ny:.1694303300344851,nw:.5946825302431343,nh:.04751215657916273}},{id:"q9_hygiene_no",kind:"checkbox",anchorText:"9. Har du p grund av axelskadan besvr med att skta din personliga hygien?",placement:{offsetX:144.7410714285714,offsetY:38.97714285714267,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.3488055224616407,ny:.22885022085630047}},{id:"q9_hygiene_yes",kind:"checkbox",anchorText:"9. Har du p grund av axelskadan besvr med att skta din personliga hygien?",placement:{offsetX:178.4553571428571,offsetY:38.97714285714267,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.40480199423594715,ny:.22885022085630047}},{id:"q9_hygiene_how",anchorText:"Personlig hygien",textKind:"long",placement:{offsetX:136.59895833333334,offsetY:-11.748333333333449,width:355.33333333333326,lineHeight:10,maxLines:3,fontSize:8.5},templatePlacement:{templatePageIndex:1,nx:.3364862986712933,ny:.24703351911378427,nw:.5969223891141066,nh:.03563411743437205}},{id:"q10_mobility_no",kind:"checkbox",anchorText:"10. Har din frmga att lyfta armen pverkats vsentligt av skadan?",placement:{offsetX:148.5925,offsetY:15.639999999999873,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.35664502851004365,ny:.3088290177645578}},{id:"q10_mobility_yes",kind:"checkbox",anchorText:"10. Har din frmga att lyfta armen pverkats vsentligt av skadan?",placement:{offsetX:180.5925,offsetY:15.639999999999873,width:120,lineHeight:12,maxLines:1,fontSize:10},templatePlacement:{templatePageIndex:1,nx:.40816178254240554,ny:.3096208870408771}},{id:"q10_mobility_how",anchorText:"Rrelsefrmga",textKind:"long",placement:{offsetX:137.505625,offsetY:-12.76166666666677,width:356.66666666666674,lineHeight:10,maxLines:4,fontSize:8.5},templatePlacement:{templatePageIndex:1,nx:.33536636923580715,ny:.3278041852983609,nw:.599162247985079,nh:.04751215657916273}},{id:"other_information",anchorText:"vriga upplysningar",textKind:"long",placement:{offsetX:3.958958333333335,offsetY:-12.76166666666677,width:488.66666666666663,lineHeight:10,maxLines:8,fontSize:8.5},templatePlacement:{templatePageIndex:1,nx:.11250041157406752,ny:.752246117405548,nw:.8209082762113323,nh:.09502431315832546}},{id:"signature_date",anchorText:"Datum",textKind:"short",placement:{offsetX:-.12104166666666316,offsetY:-8.266666666666765,width:126,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:2,nx:.11474027044503977,ny:.1235316071058231,nw:.21166666330687833,nh:.01425364697374882}},{id:"signature_name",anchorText:"Namnteckning",textKind:"short",placement:{offsetX:0,offsetY:0,width:356,lineHeight:12,maxLines:1,fontSize:7},templatePlacement:{templatePageIndex:2,nx:.3398460869777517,ny:.12234380319134404,nw:.5980423185495928,nh:.01425364697374882}},{id:"signature_block",anchorText:"Underskrift av den frskrade",textKind:"long",placement:{offsetX:0,offsetY:0,width:120,lineHeight:12,maxLines:3,fontSize:10},templatePlacement:{templatePageIndex:2,nx:.09516129032258064,ny:.8904884074496389,nw:.20161290322580644,nh:.042759407069555305}}],templateSha256:"79b7f486daae3380dc3a11f5dbe2ad2b9e2c0ca31c0194ecfbabe9964c053e31"},KA={insurerId:"trygghansa",variantId:"trygghansa_hand_fingerskada_v1",description:"Trygg-Hansa  Besvrsbeskrivning hand/fingerskada (v1)",regions:[{id:"insured_name",anchorText:"insured_name",kind:"text",textKind:"medium",templatePlacement:{templatePageIndex:0,nx:.12481963536441494,ny:.14491207756644633,nw:.6014021068560511,nh:.013065843059269751},placement:{offsetX:0,offsetY:0,width:358,lineHeight:11,maxLines:1,fontSize:7}},{id:"injury_date",anchorText:"injury_date",kind:"text",textKind:"short",templatePlacement:{templatePageIndex:0,nx:.7407808248817858,ny:.14887142394804329,nw:.2071869455649339,nh:.01425364697374882},placement:{offsetX:0,offsetY:0,width:123.33333333333337,lineHeight:12,maxLines:1,fontSize:7}},{id:"insured_occupation",anchorText:"insured_occupation",kind:"text",textKind:"medium",templatePlacement:{templatePageIndex:0,nx:.12257977649344269,ny:.1805461950008184,nw:.6036419657270233,nh:.013065843059269751},placement:{offsetX:0,offsetY:0,width:359.3333333333333,lineHeight:11,maxLines:1,fontSize:7}},{id:"insured_personnummer",anchorText:"insured_personnummer",kind:"text",textKind:"short",templatePlacement:{templatePageIndex:0,nx:.7351811777043552,ny:.18529741065873467,nw:.2127865927423645,nh:.01425364697374882},placement:{offsetX:0,offsetY:0,width:126.66666666666669,lineHeight:12,maxLines:1,fontSize:7.5}},{id:"injured_hand",anchorText:"injured_hand",kind:"text",textKind:"medium",templatePlacement:{templatePageIndex:0,nx:.12145984705795655,ny:.21618031243519045,nw:.20046736895201706,nh:.013065843059269751},placement:{offsetX:0,offsetY:0,width:119.33333333333333,lineHeight:11,maxLines:1,fontSize:7}},{id:"handedness",anchorText:"handedness",kind:"text",textKind:"medium",templatePlacement:{templatePageIndex:0,nx:.33200658092934876,ny:.21855592026414858,nw:.1937477923391003,nh:.013065843059269751},placement:{offsetX:0,offsetY:0,width:115.33333333333334,lineHeight:11,maxLines:1,fontSize:7}},{id:"treatment_completed",anchorText:"treatment_completed",kind:"text",textKind:"short",templatePlacement:{templatePageIndex:0,nx:.5347138087523381,ny:.21974372417862764,nw:.4121340322588954,nh:.01425364697374882},placement:{offsetX:0,offsetY:0,width:245.33333333333331,lineHeight:12,maxLines:1,fontSize:7}},{id:"care_first_visit_when_where",anchorText:"care_first_visit_when_where",kind:"text",textKind:"long",templatePlacement:{templatePageIndex:0,nx:.12145984705795655,ny:.2502009962190617,nw:.8231481350823048,nh:.011878039144790683},placement:{offsetX:0,offsetY:0,width:490.00000000000006,lineHeight:10,maxLines:1,fontSize:7}},{id:"care_last_visit_when_where",anchorText:"care_last_visit_when_where",kind:"text",textKind:"long",templatePlacement:{templatePageIndex:0,nx:.12033991762247044,ny:.2874188522060726,nw:.8287477822597352,nh:.011878039144790683},placement:{offsetX:0,offsetY:0,width:493.3333333333333,lineHeight:10,maxLines:1,fontSize:7}},{id:"previous_injury_description",anchorText:"previous_injury_description",kind:"text",textKind:"note",templatePlacement:{templatePageIndex:0,nx:.12145984705795655,ny:.3223699823896191,nw:.8253879939532769,nh:.011878039144790683},placement:{offsetX:0,offsetY:0,width:491.3333333333333,lineHeight:10,maxLines:1,fontSize:7}},{id:"accident_description",anchorText:"accident_description",kind:"text",textKind:"note",templatePlacement:{templatePageIndex:0,nx:.1270594942353872,ny:.36117157692926866,nw:.790670181453207,nh:.17817058717186024},placement:{offsetX:0,offsetY:0,width:470.6666666666667,lineHeight:10,maxLines:15,fontSize:8}},{id:"current_symptoms_description",anchorText:"current_symptoms_description",kind:"text",textKind:"note",templatePlacement:{templatePageIndex:0,nx:.12593956479990107,ny:.5805193664697367,nw:.7850705342757763,nh:.24943882204060436},placement:{offsetX:0,offsetY:0,width:467.33333333333337,lineHeight:10,maxLines:21,fontSize:8}},{id:"diff_haircare_none",anchorText:"diff_haircare_none",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.5022358551232403,ny:.13145029986901685},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_haircare_light",anchorText:"diff_haircare_light",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.6332675990751174,ny:.13145029986901685},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_haircare_hard",anchorText:"diff_haircare_hard",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.75981962528505,ny:.13145029986901685},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_haircare_impossible",anchorText:"diff_haircare_impossible",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.8863716514949824,ny:.13065843059269752},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_handwriting_none",anchorText:"diff_handwriting_none",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.5011159256877542,ny:.15520637815859822},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_handwriting_light",anchorText:"diff_handwriting_light",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.6332675990751174,ny:.15520637815859822},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_handwriting_hard",anchorText:"diff_handwriting_hard",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.75981962528505,ny:.15520637815859822},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_handwriting_impossible",anchorText:"diff_handwriting_impossible",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.8874915809304688,ny:.1559982474349177},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_keyboard_none",anchorText:"diff_keyboard_none",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.5011159256877542,ny:.17817058717186024},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_keyboard_light",anchorText:"diff_keyboard_light",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.6332675990751174,ny:.1789624564481796},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_keyboard_hard",anchorText:"diff_keyboard_hard",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.7609395547205361,ny:.1789624564481796},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_keyboard_impossible",anchorText:"diff_keyboard_impossible",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.8874915809304688,ny:.1789624564481796},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_buttons_none",anchorText:"diff_buttons_none",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.5022358551232403,ny:.20271853473776094},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_buttons_light",anchorText:"diff_buttons_light",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.6332675990751174,ny:.2035104040140804},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_buttons_hard",anchorText:"diff_buttons_hard",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.75981962528505,ny:.2035104040140804},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_buttons_impossible",anchorText:"diff_buttons_impossible",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.8863716514949824,ny:.2035104040140804},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_cutlery_none",anchorText:"diff_cutlery_none",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.5011159256877542,ny:.22726648230366178},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_cutlery_light",anchorText:"diff_cutlery_light",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.6343875285106035,ny:.22726648230366178},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_cutlery_hard",anchorText:"diff_cutlery_hard",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.75981962528505,ny:.22726648230366178},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_cutlery_impossible",anchorText:"diff_cutlery_impossible",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.8863716514949824,ny:.2280583515799811},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_toilet_none",anchorText:"diff_toilet_none",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.49999599625226815,ny:.2518144298695625},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_toilet_light",anchorText:"diff_toilet_light",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.6332675990751174,ny:.2518144298695625},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_toilet_hard",anchorText:"diff_toilet_hard",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.75981962528505,ny:.25260629914588184},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_toilet_impossible",anchorText:"diff_toilet_impossible",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.8863716514949824,ny:.25260629914588184},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_washing_none",anchorText:"diff_washing_none",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.5011159256877542,ny:.2763623774354632},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_washing_light",anchorText:"diff_washing_light",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.6343875285106035,ny:.2763623774354632},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_washing_hard",anchorText:"diff_washing_hard",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.75981962528505,ny:.2763623774354632},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_washing_impossible",anchorText:"diff_washing_impossible",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.8863716514949824,ny:.2771542467117827},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_toothbrushing_none",anchorText:"diff_toothbrushing_none",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.5022358551232403,ny:.30011845572504453},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_toothbrushing_light",anchorText:"diff_toothbrushing_light",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.6332675990751174,ny:.30091032500136405},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_toothbrushing_hard",anchorText:"diff_toothbrushing_hard",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.75981962528505,ny:.30091032500136405},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_toothbrushing_impossible",anchorText:"diff_toothbrushing_impossible",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.8863716514949824,ny:.30091032500136405},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_fryingpan_none",anchorText:"diff_fryingpan_none",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.5011159256877542,ny:.32466640329094537},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_fryingpan_light",anchorText:"diff_fryingpan_light",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.6332675990751174,ny:.32466640329094537},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_fryingpan_hard",anchorText:"diff_fryingpan_hard",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.7609395547205361,ny:.32545827256726473},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_fryingpan_impossible",anchorText:"diff_fryingpan_impossible",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.8863716514949824,ny:.32545827256726473},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_milkcarton_none",anchorText:"diff_milkcarton_none",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.5011159256877542,ny:.34842248158052674},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_milkcarton_light",anchorText:"diff_milkcarton_light",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.6332675990751174,ny:.3492143508568461},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_milkcarton_hard",anchorText:"diff_milkcarton_hard",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.75981962528505,ny:.3492143508568461},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"diff_milkcarton_impossible",anchorText:"diff_milkcarton_impossible",kind:"checkbox",templatePlacement:{templatePageIndex:1,nx:.8863716514949824,ny:.3492143508568461},placement:{offsetX:0,offsetY:0,width:12,lineHeight:12,maxLines:1,fontSize:12}},{id:"sensation_reduced_description",anchorText:"sensation_reduced_description",kind:"text",textKind:"note",templatePlacement:{templatePageIndex:1,nx:.1315392119773317,ny:.40234877929787644,nw:.8018694758080682,nh:.05939019572395342},placement:{offsetX:0,offsetY:0,width:477.3333333333333,lineHeight:10,maxLines:5,fontSize:8}},{id:"touch_feels_normal_description",anchorText:"touch_feels_normal_description",kind:"text",textKind:"note",templatePlacement:{templatePageIndex:1,nx:.1315392119773317,ny:.48866253041668867,nw:.7985096875016098,nh:.05939019572395342},placement:{offsetX:0,offsetY:0,width:475.3333333333333,lineHeight:10,maxLines:5,fontSize:8}},{id:"pinprick_pain_normal_description",anchorText:"pinprick_pain_normal_description",kind:"text",textKind:"note",templatePlacement:{templatePageIndex:1,nx:.12817942367087332,ny:.5741844122591816,nw:.799629616937096,nh:.05939019572395342},placement:{offsetX:0,offsetY:0,width:476.00000000000006,lineHeight:10,maxLines:5,fontSize:8}},{id:"identify_objects_without_looking_description",anchorText:"identify_objects_without_looking_description",kind:"text",textKind:"note",templatePlacement:{templatePageIndex:1,nx:.12929935310635945,ny:.6581225555490358,nw:.800749546372582,nh:.05939019572395342},placement:{offsetX:0,offsetY:0,width:476.66666666666663,lineHeight:10,maxLines:5,fontSize:8}},{id:"other_information",anchorText:"other_information",kind:"text",textKind:"note",templatePlacement:{templatePageIndex:1,nx:.1270594942353872,ny:.7412688295625707,nw:.8041093346790406,nh:.05939019572395342},placement:{offsetX:0,offsetY:0,width:478.6666666666667,lineHeight:10,maxLines:5,fontSize:8}},{id:"signature_place",anchorText:"signature_place",kind:"text",textKind:"medium",templatePlacement:{templatePageIndex:2,nx:.12369970592892883,ny:.7736562829640332,nw:.32365960685549117,nh:.013065843059269751},placement:{offsetX:0,offsetY:0,width:192.66666666666663,lineHeight:11,maxLines:1,fontSize:7}},{id:"signature_date",anchorText:"signature_date",kind:"text",textKind:"short",templatePlacement:{templatePageIndex:2,nx:.12145984705795655,ny:.8100030827470928,nw:.3270193951619496,nh:.01425364697374882},placement:{offsetX:0,offsetY:0,width:194.66666666666669,lineHeight:12,maxLines:1,fontSize:10}},{id:"signature_name_clarification",anchorText:"signature_name_clarification",kind:"text",textKind:"medium",templatePlacement:{templatePageIndex:2,nx:.4596785365747675,ny:.7760318907929914,nw:.4894091633074382,nh:.013065843059269751},placement:{offsetX:0,offsetY:0,width:291.3333333333333,lineHeight:11,maxLines:1,fontSize:7}},{id:"signature_text",anchorText:"signature_text",kind:"text",textKind:"medium",templatePlacement:{templatePageIndex:2,nx:.4585586071392813,ny:.8084985311220859,nw:.487169304436466,nh:.013065843059269751},placement:{offsetX:0,offsetY:0,width:290,lineHeight:11,maxLines:1,fontSize:7}}],templateSha256:"bbb34f67a6a38c581bd096feb886a07302cc86f0b0b116e6fc5b4778523ac4d8"};function Aa(i){return{...i,regions:i.regions.map(e=>{const{pageIndex:t,...n}=e;if(n.anchorSpec&&n.anchorText){const{anchorText:s,...r}=n;return r}return n})}}const Zo=[{id:"trygghansa_hand_fingerskada_v1",insurerId:"trygghansa",schemaId:"trygghansa_hand_fingerskada_v1",label:"Trygg-Hansa  Besvrsbeskrivning hand/fingerskada (v1)",variantId:"trygghansa_hand_fingerskada_v1",layout:Aa(KA),templatePath:"/fixtures/forms/lf/lf-knaskada-v1-template.pdf"},{id:"lf_skaraborg_knaskada_v1",insurerId:"lf_skaraborg",schemaId:"lf_knaskada_v1",label:"LF Skaraborg  Intyg knskada (v1)",variantId:"lf_skaraborg_knaskada_v1",layout:Aa(GA),templatePath:"/fixtures/forms/lf/lf-knaskada-v1-template.pdf"},{id:"lf_ostgota_axelskada_v1",insurerId:"lf_ostgota",schemaId:"lf_axelskada_v1",label:"LF stgta  Intyg axelskada (v1)",variantId:"lf_ostgota_axelskada_v1",layout:Aa(WA),templatePath:"/fixtures/forms/lf/lf-axelskada-v1-template.pdf"},{id:"lf_knaskada_v1",insurerId:"lf",schemaId:"lf_knaskada_v1",label:"LF  Intyg knskada (v1)",variantId:"lf_knaskada_v1",layout:Aa(S1),templatePath:"/fixtures/forms/lf/lf-knaskada-v1-template.pdf"},{id:"lf_knaskada_v1_gbg",insurerId:"lf",schemaId:"lf_knaskada_v1",label:"LF  Intyg knskada (Gteborg & Bohusln)",variantId:"lf_knaskada_v1_gbg",layout:Aa(YA),templatePath:"/fixtures/forms/lf/lf-knaskada-v1-gbg-template.pdf"},{id:"lf_knaskada_v1_ostgota",insurerId:"lf",schemaId:"lf_knaskada_v1",label:"LF  Intyg knskada (stgta)",variantId:"lf_knaskada_v1_ostgota",layout:Aa(UA),templatePath:"/fixtures/forms/lf/lf-knaskada-v1-ostgota-template.pdf"},{id:"lf_knaskada_v1_skane",insurerId:"lf",schemaId:"lf_knaskada_v1",label:"LF  Intyg knskada (Skne)",variantId:"lf_knaskada_v1_skane",layout:Aa(VA),templatePath:"/fixtures/forms/lf/lf-knaskada-v1-skane-template.pdf"},{id:"lf_axelskada_v1",insurerId:"lf",schemaId:"lf_axelskada_v1",label:"LF  Intyg axelskada (v1)",variantId:"lf_axelskada_v1",layout:Aa($A),templatePath:"/fixtures/forms/lf/lf-axelskada-v1-template.pdf"}],qn=["none","mild","moderate","severe","unknown"],QA=[{id:"insured_name",label:"Namn",type:"string",maxLength:80},{id:"insured_personnummer",label:"Personnummer",type:"string",maxLength:20},{id:"injury_date",label:"Skadedatum",type:"string",maxLength:20},{id:"claim_number",label:"Skadenummer",type:"string",maxLength:40},{id:"occupation",label:"Yrke",type:"string",maxLength:120},{id:"injury_side",label:"Skadan avser (vnster/hger/bda)",type:"enum",enumValues:["left","right","both","unknown"]},{id:"q1_prev_injury.had_previous_injury",label:"Tidigare skada/besvr i samma ben (ja/nej)",type:"boolean"},{id:"q1_prev_injury.description_where_when",label:"Om ja, nr/var behandlades du?",questionText:"Om du haft skada/besvr i samma ben: ange nr och var du behandlades.",type:"string",maxLength:400,mode:"verbatim_copy"},{id:"q2_further_treatment.has_further_treatment",label:"Behvs ytterligare behandling/operation? (ja/nej)",type:"boolean"},{id:"q2_further_treatment.description_where_when",label:"Om ja, nr/var?",questionText:"Om du behver eller har genomgtt ytterligare behandling/operation: ange nr och var.",type:"string",maxLength:400,mode:"verbatim_copy"},{id:"q3_symptoms.promenader",label:"Smrtor vid promenader",type:"enum",enumValues:[...qn]},{id:"q3_symptoms.gang_trappor",label:"Smrtor vid gng i trappor",type:"enum",enumValues:[...qn]},{id:"q3_symptoms.gang_skog_mark",label:"Smrtor vid gng i kuperad terrng/skogsmark",type:"enum",enumValues:[...qn]},{id:"q3_symptoms.aktivitet_springa",label:"Smrtor vid aktivitet/springa",type:"enum",enumValues:[...qn]},{id:"q3_symptoms.smartor_efter_aktivitet",label:"kade besvr/smrta efter aktivitet",type:"enum",enumValues:[...qn]},{id:"q3_symptoms.vark_vid_vila",label:"Vrk vid vila",type:"enum",enumValues:[...qn]},{id:"q3_symptoms.stord_nattsomn",label:"Strd nattsmn",type:"enum",enumValues:[...qn]},{id:"q3_symptoms.stelhet_domningar",label:"Stelhet/domningar",type:"enum",enumValues:[...qn]},{id:"q3_symptoms.ostadighet",label:"Ostadighet",type:"enum",enumValues:[...qn]},{id:"q3_symptoms.svullnad",label:"Svullnad",type:"enum",enumValues:[...qn]},{id:"q3_symptoms.muskelsvaghet",label:"Muskelsvaghet",type:"enum",enumValues:[...qn]},{id:"q3_symptoms.lasningar_knaled",label:"Lsningar i knled",type:"enum",enumValues:[...qn]},{id:"q3_symptoms.besvar_sta_kna_ner_huk",label:"Besvr att st p kn/g ner p huk",type:"enum",enumValues:[...qn]},{id:"q3_medication.frequency",label:"Tar du vrkmedicin? (frekvens)",type:"enum",enumValues:["never","sometimes","often","always","unknown"]},{id:"q3_medication.which",label:"Vilken vrkmedicin?",questionText:"Om ja, vilken vrkmedicin tar du?",type:"string",maxLength:200,mode:"verbatim_copy"},{id:"q4_numbness.severity",label:"Knselbortfall  svrighetsgrad",type:"enum",enumValues:[...qn]},{id:"q4_numbness.where",label:"Var har du knselbortfall?",questionText:"I vilket/vilka omrden har du knselbortfall?",type:"string",maxLength:400,mode:"verbatim_copy"},{id:"q5_reduced_mobility.has_issue",label:"Frsmrad rrlighet (ja/nej)",type:"boolean"},{id:"q6_daily_activities.has_issue",label:"Frndrad frmga dagliga aktiviteter (ja/nej)",type:"boolean"},{id:"q6_daily_activities.description",label:"Om ja, hur? (vardag)",questionText:"Beskriv hur dina dagliga aktiviteter (t.ex. hushllsarbete) r pverkade av besvren.",type:"string",maxLength:400,mode:"verbatim_copy"},{id:"q7_leisure.has_issue",label:"Frndrad frmga fritidsaktiviteter (ja/nej)",type:"boolean"},{id:"q7_leisure.description",label:"Om ja, hur? (fritid)",questionText:"Beskriv hur dina fritidsaktiviteter r pverkade av besvren.",type:"string",maxLength:400,mode:"verbatim_copy"},{id:"q8_work.has_issue",label:"Frndrad arbetsfrmga (ja/nej)",type:"boolean"},{id:"q8_work.description",label:"Om ja, hur? (arbete)",questionText:"Beskriv hur din arbetsfrmga eller dina arbetsuppgifter r pverkade av besvren.",type:"string",maxLength:400,mode:"verbatim_copy"},{id:"other_information",label:"vriga upplysningar",questionText:"Ange vriga upplysningar som du vill lgga till.",type:"string",maxLength:800,mode:"verbatim_copy"},{id:"signature_date",label:"Underskrift  datum",type:"string",maxLength:40},{id:"signature_name",label:"Underskrift  namn",type:"string",maxLength:120},{id:"signature_name_clarification",label:"Underskrift  namnfrtydligande",type:"string",maxLength:120}],JA=new Map([["q1_prev_injury.description_where_when","q1_prev_injury_where_when"],["q2_further_treatment.description_where_when","q2_further_treatment_where_when"],["q3_medication.which","q3_medication_which"],["q4_numbness.where","q4_numbness_where"],["q6_daily_activities.description","q6_daily_activities_how"],["q7_leisure.description","q7_leisure_how"],["q8_work.description","q8_work_how"]]);function ZA(i){return JA.get(i)??i.replace(/\./g,"_")}const Pu=["none","mild","moderate","severe","unknown"],e9=[{id:"insured_name",label:"Namn",type:"string",maxLength:80},{id:"insured_personnummer",label:"Personnummer",type:"string",maxLength:20},{id:"injury_date",label:"Skadedatum",type:"string",maxLength:20},{id:"claim_number",label:"Skadenummer",type:"string",maxLength:40},{id:"injury_side",label:"Skadan avser (vnster/hger/bda)",type:"enum",enumValues:["left","right","both","unknown"]},{id:"q1_prev_injury.had_previous_injury",label:"Tidigare skada/besvr i samma arm (ja/nej)",type:"boolean"},{id:"q1_prev_injury.description_where_when",label:"Om ja, nr/var behandlades du?",type:"string",maxLength:400,mode:"verbatim_copy"},{id:"q2_neck_issue.has_issue",label:"Tidigare besvr frn nacke/halsrygg (ja/nej)",type:"boolean"},{id:"q2_neck_issue.description",label:"Om ja, nr/var behandlades du?",type:"string",maxLength:400,mode:"verbatim_copy"},{id:"q3_further_treatment.has_further_treatment",label:"Behvs ytterligare behandling/operation? (ja/nej)",type:"boolean"},{id:"q3_further_treatment.description_where_when",label:"Om ja, nr/var?",type:"string",maxLength:400,mode:"verbatim_copy"},{id:"q4_fully_recovered.is_fully_recovered",label:"r du fullt terstlld? (ja/nej)",type:"boolean"},{id:"q5_symptoms.vark_i_vila",label:"Vrk i vila",type:"enum",enumValues:[...Pu]},{id:"q5_symptoms.somn",label:"Smn",type:"enum",enumValues:[...Pu]},{id:"q5_symptoms.anstrangning",label:"Vid anstrngning",type:"enum",enumValues:[...Pu]},{id:"q5_symptoms.svaghet",label:"Svaghet",type:"enum",enumValues:[...Pu]},{id:"q5_symptoms.stelhet",label:"Stelhet",type:"enum",enumValues:[...Pu]},{id:"q5_medication.frequency",label:"Tar du vrkmedicin? (frekvens)",type:"enum",enumValues:["never","sometimes","often","always","unknown"]},{id:"q5_medication.which",label:"Vilken vrkmedicin?",type:"string",maxLength:200,mode:"verbatim_copy"},{id:"q6_daily_activities.has_issue",label:"Hushllssysslor  pverkan (ja/nej)",type:"boolean"},{id:"q6_daily_activities.description",label:"Om ja, hur? (hushll)",type:"string",maxLength:400,mode:"verbatim_copy"},{id:"q7_leisure.has_issue",label:"Fritid  pverkan (ja/nej)",type:"boolean"},{id:"q7_leisure.description",label:"Om ja, hur? (fritid)",type:"string",maxLength:400,mode:"verbatim_copy"},{id:"q8_work.has_issue",label:"Arbete  pverkan (ja/nej)",type:"boolean"},{id:"q8_work.description",label:"Om ja, hur? (arbete)",type:"string",maxLength:400,mode:"verbatim_copy"},{id:"q9_hygiene.has_issue",label:"Personlig hygien  pverkan (ja/nej)",type:"boolean"},{id:"q9_hygiene.description",label:"Om ja, hur? (hygien)",type:"string",maxLength:400,mode:"verbatim_copy"},{id:"q10_mobility.has_issue",label:"Rrelsefrmga  pverkan (ja/nej)",type:"boolean"},{id:"q10_mobility.description",label:"Om ja, hur? (rrelsefrmga)",type:"string",maxLength:400,mode:"verbatim_copy"},{id:"other_information",label:"vriga upplysningar",type:"string",maxLength:800,mode:"verbatim_copy"},{id:"signature_date",label:"Underskrift  datum",type:"string",maxLength:40},{id:"signature_name",label:"Underskrift  namn",type:"string",maxLength:120},{id:"signature_name_clarification",label:"Underskrift  namnfrtydligande",type:"string",maxLength:120}],t9=new Map([["q1_prev_injury.description_where_when","q1_prev_injury_where_when"],["q2_neck_issue.description","q2_neck_issue_where_when"],["q3_further_treatment.description_where_when","q3_further_treatment_where_when"],["q5_medication.which","q5_medication_which"],["q6_daily_activities.description","q6_daily_activities_how"],["q7_leisure.description","q7_leisure_how"],["q8_work.description","q8_work_how"],["q9_hygiene.description","q9_hygiene_how"],["q10_mobility.description","q10_mobility_how"]]);function n9(i){return t9.get(i)??i.replace(/\./g,"_")}const i9={insurerId:"lf",variantId:"lf_axelskada_v1",title:"LF  Intyg axelskada (v1)",questions:[{id:"insured_name",label:"Namn",kind:"text",options:[{id:"value",label:"Svar",pdfFieldId:"insured_name",maxCharacters:80}]},{id:"insured_personnummer",label:"Personnummer",kind:"text",options:[{id:"value",label:"Svar",pdfFieldId:"insured_personnummer",maxCharacters:20}]},{id:"injury_date",label:"Skadedatum",kind:"text",options:[{id:"value",label:"Svar",pdfFieldId:"injury_date",maxCharacters:10}]},{id:"claim_number",label:"Skadenummer",kind:"text",options:[{id:"value",label:"Svar",pdfFieldId:"claim_number",maxCharacters:30}]},{id:"injury_side",label:"Skadan avser",kind:"single_choice",section:"Inledning",options:[{id:"left",label:"Vnster axel",pdfFieldId:"injury_side_left",maxCharacters:1},{id:"right",label:"Hger axel",pdfFieldId:"injury_side_right",maxCharacters:1}]},{id:"handedness",label:"Hgerhnt / Vnsterhnt",kind:"single_choice",section:"Inledning",options:[{id:"right",label:"Hgerhnt",pdfFieldId:"handedness_right",maxCharacters:1},{id:"left",label:"Vnsterhnt",pdfFieldId:"handedness_left",maxCharacters:1}]},{id:"q1_prev_injury",label:"1. Har du tidigare skadat/haft besvr i samma arm?",kind:"yes_no",section:"Bakgrund",options:[{id:"no",label:"Nej",pdfFieldId:"q1_prev_injury_no",maxCharacters:1},{id:"yes",label:"Ja",pdfFieldId:"q1_prev_injury_yes",maxCharacters:1}],subQuestions:[{id:"q1_prev_injury_where_when",label:"Om ja, nr/var behandlades du?",kind:"textarea",pdfFieldId:"q1_prev_injury_where_when",maxCharacters:250}]},{id:"q2_neck_issue",label:"2. Har du tidigare haft besvr frn nacke/halsrygg?",kind:"yes_no",section:"Bakgrund",options:[{id:"no",label:"Nej",pdfFieldId:"q2_neck_issue_no",maxCharacters:1},{id:"yes",label:"Ja",pdfFieldId:"q2_neck_issue_yes",maxCharacters:1}],subQuestions:[{id:"q2_neck_issue_where_when",label:"Om ja, nr/var behandlades du?",kind:"textarea",pdfFieldId:"q2_neck_issue_where_when",maxCharacters:250}]},{id:"q3_further_treatment",label:"3. r det aktuellt med ytterligare behandling/operation av din skada?",kind:"yes_no",section:"Bakgrund",options:[{id:"no",label:"Nej",pdfFieldId:"q3_further_treatment_no",maxCharacters:1},{id:"yes",label:"Ja",pdfFieldId:"q3_further_treatment_yes",maxCharacters:1}],subQuestions:[{id:"q3_further_treatment_where_when",label:"Om ja, nr/var?",kind:"textarea",pdfFieldId:"q3_further_treatment_where_when",maxCharacters:250}]},{id:"q4_fully_recovered",label:"4. r du fullt terstlld efter skadan?",kind:"yes_no",section:"Bakgrund",options:[{id:"no",label:"Nej",pdfFieldId:"q4_fully_recovered_no",maxCharacters:1},{id:"yes",label:"Ja",pdfFieldId:"q4_fully_recovered_yes",maxCharacters:1}]},{id:"q5_vark_i_vila",label:"5. Vrk i vila",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q5_vark_i_vila_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q5_vark_i_vila_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q5_vark_i_vila_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q5_vark_i_vila_severe",maxCharacters:1}]},{id:"q5_somn",label:"5. Smnstrande vrk",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q5_somn_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q5_somn_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q5_somn_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q5_somn_severe",maxCharacters:1}]},{id:"q5_anstrangning",label:"5. Vrk efter anstrngning",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q5_anstrangning_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q5_anstrangning_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q5_anstrangning_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q5_anstrangning_severe",maxCharacters:1}]},{id:"q5_svaghet",label:"5. Svaghet i armen",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q5_svaghet_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q5_svaghet_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q5_svaghet_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q5_svaghet_severe",maxCharacters:1}]},{id:"q5_stelhet",label:"5. Stelhet i axeln",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q5_stelhet_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q5_stelhet_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q5_stelhet_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q5_stelhet_severe",maxCharacters:1}]},{id:"q5_medication",label:"Tar du vrkmedicin?",kind:"single_choice",section:"Subjektiva besvr",options:[{id:"never",label:"Aldrig",pdfFieldId:"q5_medication_never",maxCharacters:1},{id:"sometimes",label:"Ibland",pdfFieldId:"q5_medication_sometimes",maxCharacters:1},{id:"often",label:"Ofta",pdfFieldId:"q5_medication_often",maxCharacters:1},{id:"always",label:"Alltid",pdfFieldId:"q5_medication_always",maxCharacters:1}],subQuestions:[{id:"q5_medication_which",label:"Vilken vrkmedicin?",kind:"text",pdfFieldId:"q5_medication_which",maxCharacters:200}]},{id:"q6_daily_activities",label:"6. Har din frmga att utfra hushllsarbeten pverkats?",kind:"yes_no",section:"Funktion",options:[{id:"no",label:"Nej",pdfFieldId:"q6_daily_activities_no",maxCharacters:1},{id:"yes",label:"Ja",pdfFieldId:"q6_daily_activities_yes",maxCharacters:1}],subQuestions:[{id:"q6_daily_activities_how",label:"Om ja, p vilket stt?",kind:"textarea",pdfFieldId:"q6_daily_activities_how",maxCharacters:400}]},{id:"q7_leisure",label:"7. Har dina fritidsaktiviteter pverkats av skadan?",kind:"yes_no",section:"Funktion",options:[{id:"no",label:"Nej",pdfFieldId:"q7_leisure_no",maxCharacters:1},{id:"yes",label:"Ja",pdfFieldId:"q7_leisure_yes",maxCharacters:1}],subQuestions:[{id:"q7_leisure_how",label:"Om ja, p vilket stt?",kind:"textarea",pdfFieldId:"q7_leisure_how",maxCharacters:400}]},{id:"q8_work",label:"8. ndrad arbetssituation p grund av axelskadan?",kind:"yes_no",section:"Funktion",options:[{id:"no",label:"Nej",pdfFieldId:"q8_work_no",maxCharacters:1},{id:"yes",label:"Ja",pdfFieldId:"q8_work_yes",maxCharacters:1}],subQuestions:[{id:"q8_work_how",label:"Om ja, p vilket stt?",kind:"textarea",pdfFieldId:"q8_work_how",maxCharacters:400}]},{id:"q9_hygiene",label:"9. Har du besvr med att skta din personliga hygien?",kind:"yes_no",section:"Funktion",options:[{id:"no",label:"Nej",pdfFieldId:"q9_hygiene_no",maxCharacters:1},{id:"yes",label:"Ja",pdfFieldId:"q9_hygiene_yes",maxCharacters:1}],subQuestions:[{id:"q9_hygiene_how",label:"Om ja, p vilket stt?",kind:"textarea",pdfFieldId:"q9_hygiene_how",maxCharacters:400}]},{id:"q10_mobility",label:"10. Har din frmga att lyfta armen pverkats vsentligt av skadan?",kind:"yes_no",section:"Funktion",options:[{id:"no",label:"Nej",pdfFieldId:"q10_mobility_no",maxCharacters:1},{id:"yes",label:"Ja",pdfFieldId:"q10_mobility_yes",maxCharacters:1}],subQuestions:[{id:"q10_mobility_how",label:"Om ja, p vilket stt?",kind:"textarea",pdfFieldId:"q10_mobility_how",maxCharacters:400}]},{id:"other_information",label:"vriga upplysningar",kind:"textarea",section:"vrigt",options:[{id:"value",label:"Svar",pdfFieldId:"other_information",maxCharacters:800}]},{id:"signature_date",label:"Underskrift  datum",kind:"text",section:"Underskrift",options:[{id:"value",label:"Svar",pdfFieldId:"signature_date",maxCharacters:40}]},{id:"signature_name",label:"Underskrift  namn",kind:"text",section:"Underskrift",options:[{id:"value",label:"Svar",pdfFieldId:"signature_name",maxCharacters:120}]},{id:"signature_block",label:"Underskrift av den frskrade (textflt)",kind:"textarea",section:"Underskrift",options:[{id:"value",label:"Svar",pdfFieldId:"signature_block",maxCharacters:400}]}]},s9={insurerId:"lf",variantId:"lf_knaskada_v1",title:"LF  Intyg knskada (v1)",questions:[{id:"insured_name",label:"Namn",kind:"text",options:[{id:"value",label:"Svar",pdfFieldId:"insured_name",maxCharacters:80}]},{id:"insured_personnummer",label:"Personnummer",kind:"text",options:[{id:"value",label:"Svar",pdfFieldId:"insured_personnummer",maxCharacters:20}]},{id:"injury_date",label:"Skadedatum",kind:"text",options:[{id:"value",label:"Svar",pdfFieldId:"injury_date",maxCharacters:10}]},{id:"claim_number",label:"Skadenummer",kind:"text",options:[{id:"value",label:"Svar",pdfFieldId:"claim_number",maxCharacters:30}]},{id:"occupation",label:"Yrke",kind:"text",options:[{id:"value",label:"Svar",pdfFieldId:"occupation",maxCharacters:80}]},{id:"injury_side",label:"Skadan avser",kind:"single_choice",section:"Inledning",options:[{id:"left",label:"Vnster kn",pdfFieldId:"injury_side_left",maxCharacters:1},{id:"right",label:"Hger kn",pdfFieldId:"injury_side_right",maxCharacters:1}]},{id:"q1_prev_injury",label:"1. Har du tidigare skadat/haft besvr i samma ben?",kind:"yes_no",section:"Bakgrund",options:[{id:"no",label:"Nej",pdfFieldId:"q1_prev_injury_no",maxCharacters:1},{id:"yes",label:"Ja",pdfFieldId:"q1_prev_injury_yes",maxCharacters:1}],subQuestions:[{id:"q1_prev_injury_where_when",label:"Om ja, nr och var behandlades du fr de besvren?",kind:"textarea",pdfFieldId:"q1_prev_injury_where_when",maxCharacters:250}]},{id:"q2_further_treatment",label:"2. r det aktuellt med ytterligare behandling eller operation av din skada?",kind:"yes_no",section:"Bakgrund",options:[{id:"no",label:"Nej",pdfFieldId:"q2_further_treatment_no",maxCharacters:1},{id:"yes",label:"Ja",pdfFieldId:"q2_further_treatment_yes",maxCharacters:1}],subQuestions:[{id:"q2_further_treatment_where_when",label:"Om ja, nr och var?",kind:"textarea",pdfFieldId:"q2_further_treatment_where_when",maxCharacters:250}]},{id:"q3_promenader",label:"3. Smrtor vid promenader?",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q3_promenader_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q3_promenader_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q3_promenader_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q3_promenader_severe",maxCharacters:1}]},{id:"q3_gang_trappor",label:"3. Gng i trappor?",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q3_gang_trappor_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q3_gang_trappor_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q3_gang_trappor_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q3_gang_trappor_severe",maxCharacters:1}]},{id:"q3_gang_skog_mark",label:"3. Gng i skog och mark?",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q3_gang_skog_mark_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q3_gang_skog_mark_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q3_gang_skog_mark_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q3_gang_skog_mark_severe",maxCharacters:1}]},{id:"q3_aktivitet_springa",label:"3. Smrtor vid aktivitet som att springa?",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q3_aktivitet_springa_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q3_aktivitet_springa_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q3_aktivitet_springa_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q3_aktivitet_springa_severe",maxCharacters:1}]},{id:"q3_smartor_efter_aktivitet",label:"3. Smrtor efter aktivitet?",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q3_smartor_efter_aktivitet_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q3_smartor_efter_aktivitet_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q3_smartor_efter_aktivitet_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q3_smartor_efter_aktivitet_severe",maxCharacters:1}]},{id:"q3_vark_vid_vila",label:"3. Vrk vid vila?",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q3_vark_vid_vila_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q3_vark_vid_vila_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q3_vark_vid_vila_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q3_vark_vid_vila_severe",maxCharacters:1}]},{id:"q3_stord_nattsomn",label:"3. Strd nattsmn?",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q3_stord_nattsomn_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q3_stord_nattsomn_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q3_stord_nattsomn_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q3_stord_nattsomn_severe",maxCharacters:1}]},{id:"q3_stelhet_domningar",label:"3. Stelhet/domningar?",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q3_stelhet_domningar_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q3_stelhet_domningar_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q3_stelhet_domningar_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q3_stelhet_domningar_severe",maxCharacters:1}]},{id:"q3_ostadighet",label:"3. Ostadighet?",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q3_ostadighet_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q3_ostadighet_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q3_ostadighet_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q3_ostadighet_severe",maxCharacters:1}]},{id:"q3_svullnad",label:"3. Svullnad?",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q3_svullnad_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q3_svullnad_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q3_svullnad_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q3_svullnad_severe",maxCharacters:1}]},{id:"q3_muskelsvaghet",label:"3. Muskelsvaghet?",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q3_muskelsvaghet_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q3_muskelsvaghet_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q3_muskelsvaghet_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q3_muskelsvaghet_severe",maxCharacters:1}]},{id:"q3_lasningar_knaled",label:"3. Lsningar i knled?",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q3_lasningar_knaled_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q3_lasningar_knaled_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q3_lasningar_knaled_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q3_lasningar_knaled_severe",maxCharacters:1}]},{id:"q3_besvar_sta_kna_ner_huk",label:"3. Besvr med att st p kn/ner p huk?",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q3_besvar_sta_kna_ner_huk_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q3_besvar_sta_kna_ner_huk_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q3_besvar_sta_kna_ner_huk_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q3_besvar_sta_kna_ner_huk_severe",maxCharacters:1}]},{id:"q3_medication",label:"Tar du vrkmedicin fr knbesvren?",kind:"single_choice",section:"Subjektiva besvr",options:[{id:"never",label:"Aldrig",pdfFieldId:"q3_medication_never",maxCharacters:1},{id:"sometimes",label:"Ibland",pdfFieldId:"q3_medication_sometimes",maxCharacters:1},{id:"often",label:"Ofta",pdfFieldId:"q3_medication_often",maxCharacters:1},{id:"always",label:"Alltid",pdfFieldId:"q3_medication_always",maxCharacters:1}],subQuestions:[{id:"q3_medication_which",label:"Om ja, vilken medicin?",kind:"text",pdfFieldId:"q3_medication_which",maxCharacters:200}]},{id:"q4_numbness",label:"4. Har du besvr med knselbortfall?",kind:"severity_scale_0_3",section:"Subjektiva besvr",options:[{id:"none",label:"Inga besvr",pdfFieldId:"q4_numbness_none",maxCharacters:1},{id:"mild",label:"Ltta besvr",pdfFieldId:"q4_numbness_mild",maxCharacters:1},{id:"moderate",label:"Besvrligt",pdfFieldId:"q4_numbness_moderate",maxCharacters:1},{id:"severe",label:"Mycket besvrligt",pdfFieldId:"q4_numbness_severe",maxCharacters:1}],subQuestions:[{id:"q4_numbness_where",label:"I vilket/vilka omrden har du knselbortfall?",kind:"textarea",pdfFieldId:"q4_numbness_where",maxCharacters:400}]},{id:"q5_reduced_mobility",label:"5. Har du ftt frsmrad rrlighet p grund av olycksfallet?",kind:"yes_no",section:"Funktion",options:[{id:"no",label:"Nej",pdfFieldId:"q5_reduced_mobility_no",maxCharacters:1},{id:"yes",label:"Ja",pdfFieldId:"q5_reduced_mobility_yes",maxCharacters:1}]},{id:"q6_daily_activities",label:"6. Har din frmga att utfra dagliga aktiviteter/hushllsarbeten frndrats?",kind:"yes_no",section:"Funktion",options:[{id:"no",label:"Nej",pdfFieldId:"q6_daily_activities_no",maxCharacters:1},{id:"yes",label:"Ja",pdfFieldId:"q6_daily_activities_yes",maxCharacters:1}],subQuestions:[{id:"q6_daily_activities_how",label:"Om ja, p vilket stt?",kind:"textarea",pdfFieldId:"q6_daily_activities_how",maxCharacters:400}]},{id:"q7_leisure",label:"7. Har din frmga att utfra fritidsaktiviteter frndrats p grund av skadan?",kind:"yes_no",section:"Funktion",options:[{id:"no",label:"Nej",pdfFieldId:"q7_leisure_no",maxCharacters:1},{id:"yes",label:"Ja",pdfFieldId:"q7_leisure_yes",maxCharacters:1}],subQuestions:[{id:"q7_leisure_how",label:"Om ja, p vilket stt?",kind:"textarea",pdfFieldId:"q7_leisure_how",maxCharacters:400}]},{id:"q8_work",label:"8. Har din frmga att utfra arbete ndrats p grund av olycksfallet?",kind:"yes_no",section:"Funktion",options:[{id:"no",label:"Nej",pdfFieldId:"q8_work_no",maxCharacters:1},{id:"yes",label:"Ja",pdfFieldId:"q8_work_yes",maxCharacters:1}],subQuestions:[{id:"q8_work_how",label:"Om ja, p vilket stt?",kind:"textarea",pdfFieldId:"q8_work_how",maxCharacters:400}]},{id:"other_information",label:"vriga upplysningar",kind:"textarea",section:"vrigt",options:[{id:"value",label:"Svar",pdfFieldId:"other_information",maxCharacters:800}]},{id:"signature_date",label:"Underskrift  Datum",kind:"text",section:"Underskrift",options:[{id:"value",label:"Svar",pdfFieldId:"signature_date",maxCharacters:20}]},{id:"signature_name",label:"Underskrift  Namnteckning",kind:"text",section:"Underskrift",options:[{id:"value",label:"Svar",pdfFieldId:"signature_name",maxCharacters:120}]},{id:"signature_name_clarification",label:"Underskrift  Namnfrtydligande",kind:"text",section:"Underskrift",options:[{id:"value",label:"Svar",pdfFieldId:"signature_name_clarification",maxCharacters:120}]}]};function r9(i,e){{if(e.startsWith("lf_knaskada_v1"))return"lf_knaskada_v1";if(e.startsWith("lf_axelskada_v1"))return"lf_axelskada_v1"}return e}const a9=[s9,i9];function Jb(i,e){const t=r9(i,e);return a9.find(n=>n.insurerId===i&&n.variantId===t)}function Zb(i){const e=[];return i.questions.forEach(t=>{var n,s;(n=t.options)==null||n.forEach(r=>{e.push({id:r.pdfFieldId,label:`${t.label}  ${r.label}`})}),(s=t.subQuestions)==null||s.forEach(r=>{e.push({id:r.pdfFieldId,label:r.label})})}),e}const o9=[{id:"insured_name",label:"Den skadades namn",kind:"text",textKind:"short",required:!0,maxChars:80},{id:"injury_date",label:"Skadedag",kind:"date",required:!0},{id:"insured_occupation",label:"Yrke/sysselsttning",kind:"text",textKind:"short",required:!1,maxChars:80},{id:"insured_personnummer",label:"Personnummer",kind:"text",textKind:"short",required:!0,maxChars:20},{id:"injured_hand",label:"Vilken hand r skadad?",kind:"text",textKind:"short",required:!1,maxChars:40,verbatim:!0},{id:"handedness",label:"Hger/vnsterhnt eller bdhnt?",kind:"text",textKind:"short",required:!1,maxChars:40,verbatim:!0},{id:"treatment_completed",label:"r du frdigbehandlad?",kind:"text",textKind:"short",required:!1,maxChars:20,verbatim:!0},{id:"care_first_visit_when_where",label:"Nr och var skte du vrd frsta gngen pga. skadan?",kind:"text",textKind:"long",required:!1,maxChars:400,verbatim:!0},{id:"care_last_visit_when_where",label:"Nr och var skedde sista vrdbesket pga. skadan?",kind:"text",textKind:"long",required:!1,maxChars:400,verbatim:!0},{id:"previous_injury_description",label:"Har du tidigare skadat denna eller andra armen/handen?",kind:"text",textKind:"long",required:!1,maxChars:600,verbatim:!0},{id:"accident_description",label:"Beskriv olycksfallet. Vad hnde?",kind:"text",textKind:"long",required:!1,maxChars:2e3,verbatim:!0},{id:"current_symptoms_description",label:"Beskriv med egna ord de besvr du nu har p.g.a. skadan?",kind:"text",textKind:"long",required:!1,maxChars:2e3,verbatim:!0},{id:"diff_haircare_none",label:"Hrvrd  Inga besvr",kind:"checkbox",group:"diff_haircare",required:!1},{id:"diff_haircare_light",label:"Hrvrd  Ltta besvr",kind:"checkbox",group:"diff_haircare",required:!1},{id:"diff_haircare_hard",label:"Hrvrd  Besvrligt",kind:"checkbox",group:"diff_haircare",required:!1},{id:"diff_haircare_impossible",label:"Hrvrd  Omjligt",kind:"checkbox",group:"diff_haircare",required:!1},{id:"diff_handwriting_none",label:"Skriva fr hand  Inga besvr",kind:"checkbox",group:"diff_handwriting",required:!1},{id:"diff_handwriting_light",label:"Skriva fr hand  Ltta besvr",kind:"checkbox",group:"diff_handwriting",required:!1},{id:"diff_handwriting_hard",label:"Skriva fr hand  Besvrligt",kind:"checkbox",group:"diff_handwriting",required:!1},{id:"diff_handwriting_impossible",label:"Skriva fr hand  Omjligt",kind:"checkbox",group:"diff_handwriting",required:!1},{id:"diff_keyboard_none",label:"Skriva p tangentbord  Inga besvr",kind:"checkbox",group:"diff_keyboard",required:!1},{id:"diff_keyboard_light",label:"Skriva p tangentbord  Ltta besvr",kind:"checkbox",group:"diff_keyboard",required:!1},{id:"diff_keyboard_hard",label:"Skriva p tangentbord  Besvrligt",kind:"checkbox",group:"diff_keyboard",required:!1},{id:"diff_keyboard_impossible",label:"Skriva p tangentbord  Omjligt",kind:"checkbox",group:"diff_keyboard",required:!1},{id:"diff_buttons_none",label:"Knppa knappar  Inga besvr",kind:"checkbox",group:"diff_buttons",required:!1},{id:"diff_buttons_light",label:"Knppa knappar  Ltta besvr",kind:"checkbox",group:"diff_buttons",required:!1},{id:"diff_buttons_hard",label:"Knppa knappar  Besvrligt",kind:"checkbox",group:"diff_buttons",required:!1},{id:"diff_buttons_impossible",label:"Knppa knappar  Omjligt",kind:"checkbox",group:"diff_buttons",required:!1},{id:"diff_cutlery_none",label:"Hantera matbestick  Inga besvr",kind:"checkbox",group:"diff_cutlery",required:!1},{id:"diff_cutlery_light",label:"Hantera matbestick  Ltta besvr",kind:"checkbox",group:"diff_cutlery",required:!1},{id:"diff_cutlery_hard",label:"Hantera matbestick  Besvrligt",kind:"checkbox",group:"diff_cutlery",required:!1},{id:"diff_cutlery_impossible",label:"Hantera matbestick  Omjligt",kind:"checkbox",group:"diff_cutlery",required:!1},{id:"diff_toilet_none",label:"Toalettbesk  Inga besvr",kind:"checkbox",group:"diff_toilet",required:!1},{id:"diff_toilet_light",label:"Toalettbesk  Ltta besvr",kind:"checkbox",group:"diff_toilet",required:!1},{id:"diff_toilet_hard",label:"Toalettbesk  Besvrligt",kind:"checkbox",group:"diff_toilet",required:!1},{id:"diff_toilet_impossible",label:"Toalettbesk  Omjligt",kind:"checkbox",group:"diff_toilet",required:!1},{id:"diff_washing_none",label:"Tvttning  Inga besvr",kind:"checkbox",group:"diff_washing",required:!1},{id:"diff_washing_light",label:"Tvttning  Ltta besvr",kind:"checkbox",group:"diff_washing",required:!1},{id:"diff_washing_hard",label:"Tvttning  Besvrligt",kind:"checkbox",group:"diff_washing",required:!1},{id:"diff_washing_impossible",label:"Tvttning  Omjligt",kind:"checkbox",group:"diff_washing",required:!1},{id:"diff_toothbrushing_none",label:"Tandborstning  Inga besvr",kind:"checkbox",group:"diff_toothbrushing",required:!1},{id:"diff_toothbrushing_light",label:"Tandborstning  Ltta besvr",kind:"checkbox",group:"diff_toothbrushing",required:!1},{id:"diff_toothbrushing_hard",label:"Tandborstning  Besvrligt",kind:"checkbox",group:"diff_toothbrushing",required:!1},{id:"diff_toothbrushing_impossible",label:"Tandborstning  Omjligt",kind:"checkbox",group:"diff_toothbrushing",required:!1},{id:"diff_fryingpan_none",label:"Hantera en stekpanna  Inga besvr",kind:"checkbox",group:"diff_fryingpan",required:!1},{id:"diff_fryingpan_light",label:"Hantera en stekpanna  Ltta besvr",kind:"checkbox",group:"diff_fryingpan",required:!1},{id:"diff_fryingpan_hard",label:"Hantera en stekpanna  Besvrligt",kind:"checkbox",group:"diff_fryingpan",required:!1},{id:"diff_fryingpan_impossible",label:"Hantera en stekpanna  Omjligt",kind:"checkbox",group:"diff_fryingpan",required:!1},{id:"diff_milkcarton_none",label:"Ta en full mjlkfrpackning och hlla upp i ett glas  Inga besvr",kind:"checkbox",group:"diff_milkcarton",required:!1},{id:"diff_milkcarton_light",label:"Ta en full mjlkfrpackning och hlla upp i ett glas  Ltta besvr",kind:"checkbox",group:"diff_milkcarton",required:!1},{id:"diff_milkcarton_hard",label:"Ta en full mjlkfrpackning och hlla upp i ett glas  Besvrligt",kind:"checkbox",group:"diff_milkcarton",required:!1},{id:"diff_milkcarton_impossible",label:"Ta en full mjlkfrpackning och hlla upp i ett glas  Omjligt",kind:"checkbox",group:"diff_milkcarton",required:!1},{id:"sensation_reduced_description",label:"Besvras du av ndrad/nedsatt knsel?",kind:"text",textKind:"long",required:!1,maxChars:800,verbatim:!0},{id:"touch_feels_normal_description",label:"Knns berring normalt?",kind:"text",textKind:"long",required:!1,maxChars:500,verbatim:!0},{id:"pinprick_pain_normal_description",label:"Knner du smrta, t.ex. nlstick normalt?",kind:"text",textKind:"long",required:!1,maxChars:500,verbatim:!0},{id:"identify_objects_without_looking_description",label:"Kan du identifiera freml med knseln utan att titta p dem?",kind:"text",textKind:"long",required:!1,maxChars:800,verbatim:!0},{id:"other_information",label:"vriga upplysningar",kind:"text",textKind:"long",required:!1,maxChars:1200,verbatim:!0},{id:"signature_place",label:"Ort",kind:"text",textKind:"short",required:!1,maxChars:60},{id:"signature_date",label:"Datum",kind:"date",required:!1},{id:"signature_name_clarification",label:"Namnfrtydligande",kind:"text",textKind:"short",required:!1,maxChars:80},{id:"signature_text",label:"Namnteckning (om maskinskrift anvnds)",kind:"text",textKind:"short",required:!1,maxChars:80}],Tu=100;function l9(){const i=new Map;for(const n of QA){const s=ZA(n.id),r=n.maxLength??Tu;i.set(s,{id:s,label:n.label,maxLength:r,inferredTextKind:Qd(r)})}for(const n of e9){const s=n9(n.id),r=n.maxLength??Tu;i.set(s,{id:s,label:n.label,maxLength:r,inferredTextKind:Qd(r)})}for(const n of o9){const s=n.kind==="checkbox"?1:n.kind==="date"?10:n.maxChars??Tu;i.set(n.id,{id:n.id,label:n.label,maxLength:s,inferredTextKind:Qd(s)})}const e=Jb("lf","lf_knaskada_v1");e&&Zb(e).forEach(s=>{const r=i.get(s.id);if(r)i.set(s.id,{...r,label:s.label});else{const o=Tu;i.set(s.id,{id:s.id,label:s.label,maxLength:o,inferredTextKind:Qd(o)})}});const t=Jb("lf","lf_axelskada_v1");return t&&Zb(t).forEach(s=>{const r=i.get(s.id);if(r)i.set(s.id,{...r,label:s.label});else{const o=Tu;i.set(s.id,{id:s.id,label:s.label,maxLength:o,inferredTextKind:Qd(o)})}}),i}const d9={" ":278,"!":278,'"':355,"#":556,$:556,"%":889,"&":667,"'":191,"(":333,")":333,"*":389,"+":584,",":278,"-":333,".":278,"/":278,0:556,1:556,2:556,3:556,4:556,5:556,6:556,7:556,8:556,9:556,":":278,";":278,"<":584,"=":584,">":584,"?":556,"@":1015,A:667,B:667,C:722,D:722,E:667,F:611,G:778,H:722,I:278,J:500,K:667,L:556,M:833,N:722,O:778,P:667,Q:778,R:722,S:667,T:611,U:722,V:667,W:944,X:667,Y:667,Z:611,a:556,b:556,c:500,d:556,e:556,f:278,g:556,h:556,i:222,j:222,k:500,l:222,m:833,n:556,o:556,p:556,q:556,r:333,s:500,t:278,u:556,v:500,w:722,x:500,y:500,z:500,:556,:556,:556,:667,:667,:778},c9=556;function H6(i,e){let t=0;for(const n of i)t+=d9[n]??c9;return t/1e3*e}function N0(i,e,t,n){const s=i.split(/\s+/).filter(Boolean),r=[];let o="",l=!1;for(const d of s){const c=o?`${o} ${d}`:d;if(H6(c,e)<=t){o=c;continue}if(r.length+1>=n){const u=h9(c,e,t);r.push(u),l=!0,o="";break}r.push(o),o=d}return o&&(r.length<n?r.push(o):l=!0),{lines:r,truncated:l,fitsInBox:!l}}function h9(i,e,t){const n="...";let s=i;for(;s.length>0&&H6(`${s}${n}`,e)>t;)s=s.slice(0,-1);return`${s}${n}`}const u9={knee:"Kn",shoulder:"Axel",back:"Rygg",neck:"Nacke",hip:"Hft",hand:"Hand",foot:"Fot",other:"Annat"};async function f9(i){const e=await crypto.subtle.digest("SHA-256",i);return Array.from(new Uint8Array(e)).map(t=>t.toString(16).padStart(2,"0")).join("")}var i3,s3;const p9=((i3=Zo.find(i=>i.id==="lf_skaraborg_knaskada_v1"))==null?void 0:i3.id)??((s3=Zo[0])==null?void 0:s3.id)??"lf_knaskada_v1",fx="lf_knaskada_v1",m9=7,g9="M",j6=i=>g9.repeat(Math.max(i,1)),x9=(i,e)=>{const t=e.get(i),n=(t==null?void 0:t.maxLength)??100,s=((t==null?void 0:t.label)||i.replace(/_/g," ")).trim()||i;return(s+" ").repeat(Math.ceil(n/Math.max(s.length+1,1))).slice(0,n)},v9=i=>{const e=i.textKind||"long",{paddingX:t,paddingY:n}=qy(e),s=(i.placement.lineHeight-i.placement.fontSize)/2,r=e==="long"?.35:.3,o=Math.max(s,i.placement.fontSize*r),l=i.placement.offsetX-t,d=i.placement.offsetX+i.placement.width+t,c=i.placement.offsetY+o+n,h=i.placement.lineHeight*i.placement.maxLines+2*n,u=c-h;return{left:l,right:d,top:c,bottom:u,width:d-l,height:h}},px=i=>{const e=Math.min(i.startX,i.endX),t=Math.max(i.startX,i.endX),n=Math.min(i.startY,i.endY),s=Math.max(i.startY,i.endY);return{left:e,right:t,bottom:n,top:s,width:t-e,height:s-n}},y9=(i,e)=>{const t=da[e],{paddingX:n,paddingY:s}=qy(e),r=Math.max(0,i.width-2*n),o=Math.max(1,Math.floor((i.height-2*s)/t.lineHeight)),l=t.fontSize,d=t.lineHeight,c=i.left+n,h=(d-l)/2,f=Math.max(h,l*(e==="long"?.35:.3));let m;if(e==="short"){const b=d*o,v=i.height,S=Math.max(s,(v-b)/2);m=i.top-S-f}else m=i.top-s-f;return{width:r,maxLines:o,fontSize:l,lineHeight:d,paddingX:n,paddingY:s,originX:c,originY:m}},e3=(i,e,t)=>{const n=y9(i,e),s=j6(t);let r=n.fontSize,o=N0(s,r,n.width,n.maxLines).fitsInBox;for(;!o&&r>m9;)r-=.5,o=N0(s,r,n.width,n.maxLines).fitsInBox;return{...n,fontSize:r,textKind:e}},mx=i=>i.map(e=>{const t=e.textKind||"long",n=v9(e),s=da[t]??da.long,{paddingY:r}=qy(t),o=e.placement.lineHeight??s.lineHeight,l=e.placement.fontSize??s.fontSize,d=e.placement.maxLines??Math.max(1,Math.floor((n.height-2*r)/o));return{fieldId:e.fieldId,pageIndex:e.pageIndex,box:n,placement:{originX:e.placement.offsetX,originY:e.placement.offsetY,width:e.placement.width,lineHeight:o,maxLines:d,fontSize:l,textKind:t}}}),_9=()=>{var i_,s_,r_,a_,o_,l_,d_,c_,h_,u_;const i=M.useRef(null),e=M.useRef(null),t=M.useRef(null),n=M.useRef(null),s=M.useRef(null),r=M.useRef(new Map),o=M.useMemo(()=>{var P;try{return((P=new URLSearchParams(window.location.search).get("formId"))==null?void 0:P.trim())||""}catch{return""}},[]),[l,d]=M.useState([]),[c,h]=M.useState([]),[u,f]=M.useState("catalog"),[m,b]=M.useState(""),[v,S]=M.useState(""),[g,k]=M.useState(""),[w,A]=M.useState(fx),T=M.useMemo(()=>new Set(c.map(P=>P.id)),[c]),I=M.useMemo(()=>Zo.filter(P=>!T.has(P.id)),[T]),C=M.useMemo(()=>{const P=new Map;return I.forEach(E=>{const z=E.schemaId??E.variantId,Y=P.get(z)??[];Y.push(E),P.set(z,Y)}),Array.from(P.entries())},[I]),L=M.useMemo(()=>{const P=new Set;return c.forEach(E=>{E.isActive&&E.insurerId===m&&P.add(E.bodyPart)}),Array.from(P).sort()},[c,m]),F=M.useMemo(()=>c.filter(P=>P.isActive&&P.insurerId===m&&P.bodyPart===v).slice().sort((P,E)=>(P.title+(P.variantLabel??"")).localeCompare(E.title+(E.variantLabel??""),"sv")),[c,m,v]),D=M.useMemo(()=>F.find(E=>E.id===g)??F[0]??null,[F,g]),j=M.useMemo(()=>u==="legacy"?w:D!=null&&D.id&&Zo.some(P=>P.id===D.id)?D.id:p9,[u,w,D]),N=M.useMemo(()=>Zo.find(P=>P.id===j)??Zo[0],[j]);M.useEffect(()=>{let P=!1;return(async()=>{var E,z,Y;try{const U=await fetch(He("/api/catalog/all"));if(!U.ok)return;const K=await U.json(),Pe=Array.isArray(K.insurers)?K.insurers:[],be=Array.isArray(K.forms)?K.forms:[];if(P)return;d(Pe),h(be);const et=!!(o&&Zo.some(Te=>Te.id===o));if(!o||!et){const Te=((E=Pe[0])==null?void 0:E.id)??"",oi=Te?Array.from(new Set(be.filter(Fs=>Fs.isActive&&Fs.insurerId===Te).map(Fs=>Fs.bodyPart))).sort()[0]??"":"",fu=Te&&oi?((z=be.find(Fs=>Fs.isActive&&Fs.insurerId===Te&&Fs.bodyPart===oi))==null?void 0:z.id)??"":"";b(Te),S(oi),k(fu),f("catalog");return}if(be.some(Te=>Te.id===o)){const Te=be.find(oi=>oi.id===o)??null;b((Te==null?void 0:Te.insurerId)??((Y=Pe[0])==null?void 0:Y.id)??""),S((Te==null?void 0:Te.bodyPart)??""),k((Te==null?void 0:Te.id)??""),f("catalog")}else A(o),f("legacy")}catch{P||(d([]),h([]),f("legacy"))}})(),()=>{P=!0}},[]),M.useEffect(()=>{u==="catalog"&&!m&&l.length>0&&b(l[0].id)},[u,m,l]),M.useEffect(()=>{if(u==="catalog"&&m){if(L.length===0){S(""),k("");return}(!v||!L.includes(v))&&S(L[0])}},[u,m,v,L]),M.useEffect(()=>{if(u!=="catalog")return;const P=(D==null?void 0:D.id)??"";P&&P!==g&&k(P)},[u,D,g]);const[ie,R]=M.useState(N.layout),[X,q]=M.useState(He(N.templatePath)),[G,H]=M.useState("catalog"),[W,se]=M.useState(null),[J,ae]=M.useState(2),[de,st]=M.useState(1.5),[Ue,vt]=M.useState({width:0,height:0}),[Re,Oe]=M.useState([]),[ce,Hi]=M.useState(null),[si,Es]=M.useState(!1),[fr,lu]=M.useState(!1),[ri,Ed]=M.useState("anchor"),[yt,Ld]=M.useState(null),[Md,du]=M.useState(!1),[Uo,Tm]=M.useState("long"),[$t,pr]=M.useState(null),[Ls,ka]=M.useState([]),[cu,A1]=M.useState(new Map),[mr,gr]=M.useState([]),[hu,Im]=M.useState(!1),[Fd,Cm]=M.useState(!1),[Em,Rd]=M.useState(null),[$,pe]=M.useState(!1),[ye,we]=M.useState(null),[Mt,Pt]=M.useState(new Map),ai=M.useRef(new Map),[Cn,wa]=M.useState(!1),[Dd,Me]=M.useState(null),[Tt,_t]=M.useState(null),[Ft,rt]=M.useState(!1),[Ke,Nd]=M.useState(null),[Lm,Wy]=M.useState(!0),[xr,Ky]=M.useState(0),[P1,uu]=M.useState(!1),[Qy,Vo]=M.useState(null),[Jy,T1]=M.useState(null),Hd=M.useMemo(()=>l9(),[]),I1=M.useMemo(()=>new Map(ie.regions.map(P=>[P.id,P])),[ie]),Mm=ie.templateSha256,Zy=Ke&&Ke.status!=="missing"?(i_=Ke.template)==null?void 0:i_.sha256:void 0,z6=!!(Mm&&Zy&&Mm!==Zy),$o=Ke&&Ke.status!=="missing"?(s_=Ke.template)==null?void 0:s_.pageCount:void 0,jd=M.useMemo(()=>{const P=new Map;for(const U of ie.regions){const K=U.templatePlacement;if(!K||typeof K.templatePageIndex!="number")continue;const Pe=P.get(K.templatePageIndex)??[];Pe.push(U.id),P.set(K.templatePageIndex,Pe)}const E=Array.from(P.entries()).map(([U,K])=>({page:U,count:K.length,regionIds:K})).sort((U,K)=>U.page-K.page),z=E.length?Math.max(...E.map(U=>U.page)):void 0,Y=typeof $o=="number"?E.flatMap(U=>U.regionIds.map(K=>({id:K,page:U.page}))).filter(U=>U.page>=$o):[];return{pages:E,maxIndex:z,outOfBounds:Y,outOfBoundsSample:Y.slice(0,10).map(U=>`${U.id}@${U.page}`)}},[ie,$o]);M.useEffect(()=>{R(N.layout),q(He(N.templatePath)),H("catalog"),se(null),Nd(null),Wy(!0),Hi(null),Oe([]),ka([]),gr([]),pr(null),Im(!1),Cm(!1),Rd(null),we(null),Pt(new Map),pe(!1),Me(null),_t(null),wa(!1),Ky(0),Vo(null),T1(null),uu(!1),t.current=null,s.current=null},[N,j]),M.useEffect(()=>{t.current=null,s.current=null,se(null),Rd(null),we(null),Pt(new Map),pe(!1),Me(null),_t(null),wa(!1)},[X]),M.useEffect(()=>{let P=!1;return(async()=>{var E,z;try{const Y=new URLSearchParams({insurerId:N.insurerId,variantId:N.variantId}),U=await fetch(He(`/api/templates?${Y.toString()}`));if(!U.ok)return;const K=await U.json(),Pe=!!((E=K.config)!=null&&E.allowCatalogFallback),be=Array.isArray(K.entries)&&K.entries[0]?K.entries[0]:null;if(P)return;Wy(Pe),Nd(be),be&&be.status!=="missing"&&((z=be.template)!=null&&z.templateId)?(q(He(`/api/templates/${be.template.templateId}/download`)),H("canonical")):Pe?(q(He(N.templatePath)),H("catalog")):(q(""),H("none"))}catch{P||(Nd(null),q(He(N.templatePath)),H("catalog"))}})(),()=>{P=!0}},[N.insurerId,N.variantId,N.templatePath]);const ct=ce?I1.get(ce):void 0,Od=ce?Hd.get(ce):void 0,Fm=(ct==null?void 0:ct.textKind)??(Od==null?void 0:Od.inferredTextKind),C1=Fm??Uo,e_=ce?cu.get(ce):void 0,B6=!!(ct&&!ct.textKind),Ms=ce?mr.find(P=>P.fieldId===ce&&P.pageIndex===J):void 0,le=ce?Mt.get(ce):void 0;M.useEffect(()=>{if(!le||le.status!=="found")return;const P=le.matchedAnchorBox.pageIndex;Number.isFinite(P)&&P!==J&&ae(P)},[le,J]),M.useEffect(()=>{let P=!1;return(async()=>{if(X)try{if(!t.current||s.current!==X){const Rt=R6.getDocument(X);t.current=await Rt.promise,s.current=X}const E=t.current;if(!E)return;const z=r.current.get(X);if(z)P||se({...z,source:G});else try{const Rt=await E.getData(),Te={sha256:await f9(Rt),pageCount:E.numPages};r.current.set(X,Te),P||se({...Te,source:G})}catch{P||se(null)}const Y=await E.getPage(J+1),U=Y.getViewport({scale:de});if(P)return;n.current=U;const K=i.current,Pe=e.current;if(!K)return;const be=K.getContext("2d");if(!be)return;K.height=U.height,K.width=U.width,vt({width:U.width,height:U.height}),Pe&&(Pe.style.width=`${U.width}px`,Pe.style.height=`${U.height}px`);const et={canvasContext:be,viewport:U};await Y.render(et).promise,Rd(null)}catch(E){console.error("Failed to load or render PDF",{templateUrl:X,err:E}),P||Rd("Kunde inte ladda PDF-mallen. Kontrollera /fixtures-URL och servern.")}})(),()=>{P=!0}},[J,de,X,G]);const t_=async()=>{if(!X)return;const P=`${N.insurerId}/${N.variantId}:${X}`,E=ai.current.get(P);if(E){Pt(E),we(null);return}pe(!0),we(null);try{const z=await fetch(X).then(et=>{if(!et.ok)throw new Error(`Failed to fetch template PDF (${et.status})`);return et.blob()}),Y=new FormData;Y.append("insurerId",N.insurerId),Y.append("variantId",N.variantId),Y.append("templatePdf",z,"template.pdf");const U=await fetch(He("/api/inspector/resolve-anchors"),{method:"POST",body:Y});if(!U.ok){const et=await U.text();throw new Error(et||`Resolve anchors failed (${U.status})`)}const K=await U.json(),Pe=Array.isArray(K==null?void 0:K.results)?K.results:[],be=new Map(Pe.map(et=>[et.regionId,et]));ai.current.set(P,be),Pt(be)}catch(z){we((z==null?void 0:z.message)??"Failed to resolve anchors")}finally{pe(!1)}},q6=async()=>{if(!(!N||!X)){wa(!0),Me(null);try{const P=await fetch(X);if(!P.ok)throw new Error(`Failed to fetch current PDF (${P.status})`);const E=await P.blob(),z=new FormData;z.append("insurerId",N.insurerId),z.append("variantId",N.variantId),z.append("debugKeypoints",Ft?"true":"false"),z.append("targetPdf",E,"target.pdf");const Y=await fetch(He("/api/inspector/visual-align-debug"),{method:"POST",body:z});if(!Y.ok){const K=await Y.text();throw new Error(K||`Request failed (${Y.status})`)}const U=await Y.json();_t(U)}catch(P){Me((P==null?void 0:P.message)??"Failed to run visual alignment debug"),_t(null)}finally{wa(!1)}}};M.useEffect(()=>{t_()},[X,N.insurerId,N.variantId]),M.useEffect(()=>{Fm&&Tm(Fm)},[Fm,ce]),M.useEffect(()=>{pr(Ms||null)},[Ms,ce,J]),M.useEffect(()=>{const P=new Map;ie.regions.forEach(E=>{if(E.kind==="checkbox")return;const z=Hd.get(E.id),Y=(z==null?void 0:z.maxLength)??100,U=E.textKind??(z==null?void 0:z.inferredTextKind)??Qd(Y),K=j6(Y),Pe=N0(K,E.placement.fontSize,E.placement.width,E.placement.maxLines);P.set(E.id,{worstCaseOverflows:!Pe.fitsInBox,maxLength:Y,textKind:U})}),A1(P)},[Hd,ie]),M.useEffect(()=>{if(!N)return;let P=!1;return(async()=>{try{const E=await fetch(He(`/api/inspector/placements?insurerId=${N.insurerId}&variantId=${N.variantId}`));if(!E.ok)throw new Error(`Failed to load placements: ${E.status}`);const z=await E.json();if(!Array.isArray(z)||P)return;gr(mx(z))}catch(E){console.error("Failed to load persisted placements",E),gr([])}finally{P||Im(!0)}})(),()=>{P=!0}},[N]),M.useEffect(()=>{if(!N)return;let P=!1;return(async()=>{try{const E=await fetch(He(`/api/inspector/clicks?insurerId=${N.insurerId}&variantId=${N.variantId}`));if(!E.ok)throw new Error(`Failed to load clicks: ${E.status}`);const z=await E.json();if(!Array.isArray(z)||P)return;ka(z)}catch(E){console.error("Failed to load persisted clicks",E),ka([])}finally{P||Cm(!0)}})(),()=>{P=!0}},[N]);const E1=P=>{if(!i.current||!n.current)return null;const E=i.current.getBoundingClientRect(),z=P.clientX-E.left,Y=P.clientY-E.top,[U,K]=n.current.convertToPdfPoint(z,Y);return{pdfX:U,pdfY:K}},X6=P=>{if(ri!=="anchor"||!ce)return;const E=E1(P);E&&(Oe(z=>[...z.filter(U=>!(U.fieldId===ce&&U.pageIndex===J)),{fieldId:ce,pageIndex:J,pdfX:E.pdfX,pdfY:E.pdfY}]),ka(z=>[...z.filter(U=>!(U.fieldId===ce&&U.pageIndex===J)),{fieldId:ce,pageIndex:J,pdfX:E.pdfX,pdfY:E.pdfY}]),console.log("CLICK",{fieldId:ce,pageIndex:J,pdfX:E.pdfX,pdfY:E.pdfY}))},Y6=P=>{if(ri!=="boundingBox"||!ce)return;const E=E1(P);E&&(Ld({startX:E.pdfX,startY:E.pdfY,endX:E.pdfX,endY:E.pdfY,pageIndex:J}),du(!0),pr(null))},U6=P=>{if(!Md||ri!=="boundingBox")return;const E=E1(P);E&&Ld(z=>z&&{...z,endX:E.pdfX,endY:E.pdfY})},V6=()=>{if(!Md||!yt||!ce)return;du(!1);const P=px(yt),E=Hd.get(ce),z=(E==null?void 0:E.maxLength)??400,Y=e3(P,C1,z),U={fieldId:ce,pageIndex:yt.pageIndex,box:P,placement:Y};pr(U),gr(K=>[...K.filter(be=>!(be.fieldId===ce&&be.pageIndex===yt.pageIndex)),U]),Ld(null)},$6=()=>{Ld(null),pr(null)},G6=()=>{if(!ce)return;const P=Hd.get(ce),E=(P==null?void 0:P.maxLength)??400,z=yt&&yt.pageIndex===J?px(yt):Ms==null?void 0:Ms.box;if(!z)return;const Y=e3(z,C1,E),U={fieldId:ce,pageIndex:J,box:z,placement:Y};pr(U),gr(K=>[...K.filter(be=>!(be.fieldId===ce&&be.pageIndex===J)),U])},W6=async()=>{if(N)try{const P=async U=>{const K=await fetch(He(U),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({insurerId:N.insurerId,variantId:N.variantId})});if(!K.ok)throw new Error(`Request failed with status ${K.status}`);return K};let E;try{E=await P("/api/qa/preview-from-placements")}catch(U){console.warn("Preview QA failed, falling back to layout QA",U),E=await P("/api/qa/generate-qa-pdf")}const z=await E.blob(),Y=URL.createObjectURL(z);window.open(Y,"_blank")}catch(P){console.error("QA PDF generation failed",P),alert("Failed to generate QA PDF. Check server logs for details.")}},K6=async()=>{if(N)try{const P=await fetch(He(`/api/layouts/${N.insurerId}/${N.variantId}/calibrate`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({clicks:n_,placements:Rm})});if(!P.ok){const E=await P.text();throw new Error(`Calibration failed (${P.status}): ${E}`)}alert("Layout calibrated and persisted. Reload to see updated overlays.")}catch(P){console.error("Layout calibration failed",P),alert("Failed to calibrate layout. See console for details.")}},Q6=async()=>{if(N){if(!Number.isFinite(xr)||!Number.isInteger(xr)){Vo("Delta must be an integer");return}if(xr===0){Vo("Delta is 0 (no change)");return}uu(!0),Vo(null);try{const P=await fetch(He("/api/inspector/rebase-pages"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({insurerId:N.insurerId,variantId:N.variantId,delta:xr})}),E=await P.json().catch(()=>null);if(!P.ok)throw new Error((E==null?void 0:E.error)||`Rebase failed (${P.status})`);const z=Array.isArray(E==null?void 0:E.placements)?E.placements:[],Y=Array.isArray(E==null?void 0:E.clicks)?E.clicks:[];gr(mx(z)),ka(Y),E!=null&&E.layout&&typeof E.layout=="object"&&Array.isArray(E.layout.regions)&&R(E.layout),T1(typeof(E==null?void 0:E.backupId)=="string"?E.backupId:null)}catch(P){Vo(P.message)}finally{uu(!1)}}},J6=async()=>{if(N){uu(!0),Vo(null);try{const P=await fetch(He("/api/inspector/rebase-pages/undo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({insurerId:N.insurerId,variantId:N.variantId})}),E=await P.json().catch(()=>null);if(!P.ok)throw new Error((E==null?void 0:E.error)||`Undo failed (${P.status})`);const z=Array.isArray(E==null?void 0:E.placements)?E.placements:[],Y=Array.isArray(E==null?void 0:E.clicks)?E.clicks:[];gr(mx(z)),ka(Y),E!=null&&E.layout&&typeof E.layout=="object"&&Array.isArray(E.layout.regions)&&R(E.layout),T1(typeof(E==null?void 0:E.restoredBackupId)=="string"?E.restoredBackupId:null)}catch(P){Vo(P.message)}finally{uu(!1)}}},Z6=(r_=n.current)!=null&&r_.convertToViewportPoint&&Ue.width>0?Ls.filter(P=>P.pageIndex===J).map(P=>{const[E,z]=n.current.convertToViewportPoint(P.pdfX,P.pdfY),Y=I1.get(P.fieldId),U=(Y==null?void 0:Y.kind)??"text";return{...P,viewX:E,viewY:z,kind:U}}):[],n_=M.useMemo(()=>Ls.map(({fieldId:P,pageIndex:E,pdfX:z,pdfY:Y})=>({fieldId:P,pageIndex:E,pdfX:z,pdfY:Y})),[Ls]),Rm=M.useMemo(()=>mr.map(P=>({fieldId:P.fieldId,pageIndex:P.pageIndex,textKind:P.placement.textKind,placement:{offsetX:P.placement.originX,offsetY:P.placement.originY,width:P.placement.width,lineHeight:P.placement.lineHeight,maxLines:P.placement.maxLines,fontSize:P.placement.fontSize}})),[mr]);M.useEffect(()=>{if(!hu||!N)return;const P=new AbortController,E=setTimeout(()=>{fetch(He(`/api/inspector/placements?insurerId=${N.insurerId}&variantId=${N.variantId}`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Rm),signal:P.signal}).catch(z=>{console.error("Failed to persist placements",z)})},600);return()=>{clearTimeout(E),P.abort()}},[Rm,hu,N]),M.useEffect(()=>{if(!Fd||!N)return;const P=new AbortController,E=setTimeout(()=>{fetch(He(`/api/inspector/clicks?insurerId=${N.insurerId}&variantId=${N.variantId}`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ls),signal:P.signal}).catch(z=>{console.error("Failed to persist clicks",z)})},600);return()=>{clearTimeout(E),P.abort()}},[Ls,Fd,N]);const e4=(()=>{var z;if(!((z=n.current)!=null&&z.convertToViewportPoint))return[];const P=n.current.scale??de;return($t&&$t.pageIndex===J?[...mr.filter(Y=>!(Y.fieldId===$t.fieldId&&Y.pageIndex===$t.pageIndex)),$t]:mr).filter(Y=>Y.pageIndex===J).flatMap(Y=>{const U=I1.get(Y.fieldId);if((U==null?void 0:U.kind)==="checkbox")return[];const K=Y.placement,Pe=x9(Y.fieldId,Hd);return N0(Pe,K.fontSize,K.width,K.maxLines).lines.map((et,Rt)=>{const Te=K.originY-Rt*K.lineHeight,[oi,fu]=n.current.convertToViewportPoint(K.originX,Te);return{key:`${Y.fieldId}-${Y.pageIndex}-line-${Rt}-${Y===$t?"suggestion":"saved"}`,fieldId:Y.fieldId,line:et,viewX:oi,viewY:fu,widthPx:K.width*P,fontSizePx:K.fontSize*P,lineHeightPx:K.lineHeight*P,isSelected:ce===Y.fieldId,isSuggestion:Y===$t}})})})(),zd=yt&&yt.pageIndex===J&&((a_=n.current)!=null&&a_.convertToViewportPoint)?(()=>{const P=px(yt),[E,z]=n.current.convertToViewportPoint(P.left,P.top),[Y,U]=n.current.convertToViewportPoint(P.right,P.bottom),K=Math.min(E,Y),Pe=Math.min(z,U),be=Math.abs(Y-E),et=Math.abs(U-z),Rt=ce?cu.get(ce):void 0,Te=Rt!=null&&Rt.worstCaseOverflows?"#dc3545":"#28a745";return{left:K,top:Pe,width:be,height:et,borderColor:Te}})():null;return y.jsxs("div",{style:{display:"flex",height:"100vh",fontFamily:"Inter, system-ui, sans-serif"},children:[y.jsxs("div",{style:{width:360,padding:16,background:"#2c3e50",borderRight:"1px solid #1a252f",overflowY:"auto"},children:[y.jsx("h3",{style:{marginTop:0,marginBottom:20,fontSize:18,color:"#ecf0f1"},children:"Anchored layout inspector"}),y.jsx("div",{style:{marginBottom:8,fontSize:12,color:"#e74c3c"},children:Em||""}),y.jsxs("div",{style:{marginBottom:16},children:[y.jsx("label",{style:{display:"block",marginBottom:6,fontSize:12,fontWeight:600,color:"#bdc3c7",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Frskringsbolag"}),y.jsxs("select",{value:m,disabled:u!=="catalog"||l.length===0,onChange:P=>{b(P.target.value),S(""),k("")},style:{width:"100%",padding:"8px 10px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,fontSize:14,background:"rgba(255,255,255,0.1)",color:"#ecf0f1"},children:[l.length===0&&y.jsx("option",{value:m||"",children:m||""}),l.map(P=>y.jsx("option",{value:P.id,children:P.displayName},P.id))]}),y.jsx("label",{style:{display:"block",marginTop:12,marginBottom:6,fontSize:12,fontWeight:600,color:"#bdc3c7",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Kroppsdel / Intyg"}),y.jsxs("select",{value:v,disabled:u!=="catalog"||!m||L.length===0,onChange:P=>{S(P.target.value),k("")},style:{width:"100%",padding:"8px 10px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,fontSize:14,background:"rgba(255,255,255,0.1)",color:"#ecf0f1"},children:[L.length===0&&y.jsx("option",{value:"",children:""}),L.map(P=>y.jsx("option",{value:P,children:u9[P]??P},P))]}),u==="catalog"&&D&&y.jsxs("div",{style:{marginTop:8,fontSize:12,color:"rgba(255,255,255,0.72)"},children:[y.jsxs("div",{children:["formId:"," ",y.jsx("code",{style:{background:"rgba(0,0,0,0.3)",padding:"2px 6px",borderRadius:3},children:D.id})]}),y.jsxs("div",{style:{marginTop:4},children:["schemaId:"," ",y.jsx("code",{style:{background:"rgba(0,0,0,0.3)",padding:"2px 6px",borderRadius:3},children:D.schemaId})]})]}),y.jsxs("div",{style:{marginTop:12,paddingTop:12,borderTop:"1px solid rgba(255,255,255,0.14)"},children:[y.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center",fontSize:12,color:"rgba(255,255,255,0.8)"},children:[y.jsx("input",{type:"checkbox",checked:u==="legacy",onChange:P=>f(P.target.checked?"legacy":"catalog")}),"Visa legacy (felskning)"]}),u==="legacy"&&y.jsxs(y.Fragment,{children:[y.jsx("div",{style:{marginTop:8,fontSize:12,color:"rgba(255,255,255,0.68)",lineHeight:1.4},children:"Legacy layouts are kept for backwards compatibility. Prefer catalog forms above."}),y.jsxs("select",{value:w,onChange:P=>A(P.target.value),style:{width:"100%",marginTop:8,padding:"8px 10px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,fontSize:14,background:"rgba(255,255,255,0.1)",color:"#ecf0f1"},children:[C.length===0&&y.jsx("option",{value:fx,children:fx}),C.map(([P,E])=>y.jsx("optgroup",{label:P,children:E.map(z=>y.jsx("option",{value:z.id,children:z.label},z.id))},P))]})]})]})]}),y.jsxs("div",{style:{marginBottom:16,padding:12,background:"rgba(0,0,0,0.18)",border:"1px solid rgba(255,255,255,0.18)",borderRadius:8},children:[y.jsx("div",{style:{marginBottom:6,fontSize:12,fontWeight:600,color:"#bdc3c7",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Canonical template"}),y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",gap:10},children:[y.jsx("div",{style:{fontSize:13,color:"#ecf0f1"},children:Ke?Ke.status==="set"?" Set":Ke.status==="inherited"?` Inherited from ${Ke.inheritedFromVariantId}`:Lm?" Missing (using catalog fixture)":" Missing (upload in Templates tab)":"Checking..."}),y.jsx("a",{href:"/?tab=templates",style:{fontSize:12,color:"#86c5ff",textDecoration:"none"},children:"Open Templates tab"})]}),Ke&&Ke.status!=="missing"&&Ke.template&&y.jsxs("div",{style:{marginTop:8,fontSize:12,color:"rgba(255,255,255,0.78)"},children:[y.jsxs("div",{children:["Pages: ",Ke.template.pageCount,"  SHA:"," ",y.jsxs("code",{style:{background:"rgba(0,0,0,0.3)",padding:"2px 6px",borderRadius:3},children:[Ke.template.sha256.slice(0,12),""]})]}),G==="uploaded"&&W&&y.jsxs("div",{style:{marginTop:6},children:["Target upload: ",W.pageCount," pages  SHA:"," ",y.jsxs("code",{style:{background:"rgba(0,0,0,0.3)",padding:"2px 6px",borderRadius:3},children:[W.sha256.slice(0,12),""]})]}),y.jsxs("div",{style:{marginTop:10,padding:"8px 10px",borderRadius:8,background:"rgba(0,0,0,0.22)",border:"1px solid rgba(255,255,255,0.16)"},children:[y.jsx("div",{style:{fontWeight:700,marginBottom:6,color:"#ecf0f1"},children:"TemplatePlacement pages"}),jd.pages.length===0?y.jsx("div",{style:{fontSize:12,color:"rgba(255,255,255,0.7)"},children:"No `templatePlacement` data found in this layout yet."}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{fontSize:12,color:"rgba(255,255,255,0.75)"},children:["Max template page index:"," ",y.jsx("code",{style:{background:"rgba(0,0,0,0.3)",padding:"2px 6px",borderRadius:3},children:jd.maxIndex??""})]}),y.jsx("div",{style:{marginTop:8,display:"grid",gridTemplateColumns:"1fr auto",gap:"6px 10px",alignItems:"baseline"},children:jd.pages.map(P=>{const E=typeof $o=="number"?P.page>=$o:!1;return y.jsxs("div",{style:{display:"contents"},children:[y.jsxs("div",{style:{color:E?"#f8d7da":"rgba(255,255,255,0.82)"},children:["Page"," ",y.jsx("code",{style:{background:"rgba(0,0,0,0.3)",padding:"2px 6px",borderRadius:3},children:P.page})]}),y.jsxs("div",{style:{textAlign:"right",color:E?"#f8d7da":"rgba(255,255,255,0.75)"},children:[P.count," regions ",E?" (out of bounds)":""]})]},P.page)})}),typeof $o=="number"&&jd.outOfBounds.length>0&&y.jsxs("div",{style:{marginTop:10,padding:"8px 10px",borderRadius:8,background:"rgba(231, 76, 60, 0.14)",border:"1px solid rgba(231, 76, 60, 0.3)"},children:[y.jsxs("div",{style:{fontWeight:700,marginBottom:4,color:"#f8d7da"},children:["Out of bounds: ",jd.outOfBounds.length," regions (canonical has ",$o," pages)"]}),y.jsxs("div",{style:{fontSize:12,color:"rgba(255,255,255,0.8)",lineHeight:1.4},children:["Sample:"," ",y.jsx("code",{style:{background:"rgba(0,0,0,0.3)",padding:"2px 6px",borderRadius:3},children:jd.outOfBoundsSample.join(", ")||""})]})]})]})]}),Mm&&y.jsxs("div",{style:{marginTop:6},children:["Layout SHA:"," ",y.jsxs("code",{style:{background:"rgba(0,0,0,0.3)",padding:"2px 6px",borderRadius:3},children:[Mm.slice(0,12),""]})]}),z6&&y.jsxs("div",{style:{marginTop:8,padding:"8px 10px",borderRadius:8,background:"rgba(231, 76, 60, 0.18)",border:"1px solid rgba(231, 76, 60, 0.35)",color:"#f8d7da"},children:[y.jsx("div",{style:{fontWeight:700,marginBottom:4},children:"SHA mismatch"}),y.jsx("div",{style:{fontSize:12,lineHeight:1.4},children:"Generate will fail until you either rebase pages (if cover pages changed) and then calibrate this layout against the current canonical template."})]})]})]}),y.jsxs("div",{style:{marginBottom:16,padding:12,background:"rgba(0,0,0,0.18)",border:"1px solid rgba(255,255,255,0.18)",borderRadius:8},children:[y.jsx("div",{style:{marginBottom:6,fontSize:12,fontWeight:600,color:"#bdc3c7",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Page offset (migration)"}),y.jsxs("div",{style:{display:"flex",gap:8,alignItems:"flex-end"},children:[y.jsxs("label",{style:{flex:1,color:"rgba(255,255,255,0.78)"},children:["Shift all placements by",y.jsx("br",{}),y.jsx("input",{type:"number",min:-10,max:10,step:1,value:xr,onChange:P=>Ky(Number(P.target.value)),style:{width:"100%",padding:"8px 10px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,fontSize:14,background:"rgba(255,255,255,0.1)",color:"#ecf0f1"}})]}),y.jsx("button",{type:"button",onClick:Q6,disabled:P1||!hu||!Fd||xr===0,style:{padding:"9px 12px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,background:xr===0?"rgba(255,255,255,0.08)":"#f39c12",color:"#1a252f",cursor:xr===0?"not-allowed":"pointer",fontWeight:700},title:"Shifts saved placements/clicks (useful when canonical PDF gained/lost cover pages)",children:P1?"Applying...":"Apply shift"})]}),y.jsxs("div",{style:{marginTop:8,fontSize:12,color:"rgba(255,255,255,0.75)",lineHeight:1.4},children:["This will shift ",y.jsx("strong",{children:mr.length})," placements and ",y.jsx("strong",{children:Ls.length})," clicks by"," ",y.jsx("strong",{children:xr})," pages."]}),Jy&&y.jsxs("div",{style:{marginTop:8,fontSize:12,color:"rgba(255,255,255,0.75)"},children:["Backup saved: ",y.jsx("code",{style:{background:"rgba(0,0,0,0.3)",padding:"2px 6px",borderRadius:3},children:Jy})," ",y.jsx("button",{type:"button",onClick:J6,disabled:P1,style:{marginLeft:8,padding:"6px 10px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,background:"rgba(255,255,255,0.12)",color:"#ecf0f1",cursor:"pointer",fontSize:12,fontWeight:600},children:"Undo"})]}),Qy&&y.jsx("div",{style:{marginTop:8,fontSize:12,color:"#f1948a"},children:Qy})]}),y.jsxs("div",{style:{marginBottom:16},children:[y.jsx("label",{style:{display:"block",marginBottom:6,fontSize:12,fontWeight:600,color:"#bdc3c7",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Page index"}),y.jsx("input",{type:"number",min:0,value:J,onChange:P=>ae(Number(P.target.value)),style:{width:"100%",padding:"8px 10px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,fontSize:14,background:"rgba(255,255,255,0.1)",color:"#ecf0f1"}})]}),y.jsxs("div",{style:{marginBottom:16},children:[y.jsxs("label",{style:{display:"block",marginBottom:6,fontSize:12,fontWeight:600,color:"#bdc3c7",textTransform:"uppercase",letterSpacing:"0.5px"},children:["Zoom (",de.toFixed(2),"x)"]}),y.jsx("input",{type:"range",min:.5,max:3,step:.25,value:de,onChange:P=>st(Number(P.target.value)),style:{width:"100%"}})]}),y.jsxs("div",{style:{marginBottom:16},children:[y.jsx("div",{style:{marginBottom:6,fontSize:12,fontWeight:600,color:"#bdc3c7",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Mall (PDF)"}),y.jsx("div",{style:{display:"flex",gap:8,marginBottom:8},children:y.jsx("button",{type:"button",onClick:()=>{var P;if(Ke&&Ke.status!=="missing"&&((P=Ke.template)!=null&&P.templateId)){q(He(`/api/templates/${Ke.template.templateId}/download`)),H("canonical");return}if(Lm){q(N.templatePath),H("catalog");return}q(""),H("none")},style:{flex:1,padding:"8px 10px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,background:"rgba(255,255,255,0.1)",color:"#ecf0f1",cursor:"pointer"},children:"Anvnd standard-mall"})}),y.jsx("input",{type:"file",accept:"application/pdf",onChange:P=>{var Y;const E=(Y=P.target.files)==null?void 0:Y[0];if(!E)return;const z=URL.createObjectURL(E);q(z),H("uploaded")},style:{width:"100%",padding:"8px 10px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,background:"rgba(255,255,255,0.05)",color:"#ecf0f1"}})]}),y.jsxs("div",{style:{marginBottom:16},children:[y.jsx("div",{style:{marginBottom:8,fontSize:12,fontWeight:600,color:"#bdc3c7",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Editor Mode"}),y.jsxs("label",{style:{display:"block",padding:"10px 12px",marginBottom:8,background:ri==="anchor"?"#3498db":"rgba(255,255,255,0.1)",border:ri==="anchor"?"2px solid #3498db":"1px solid rgba(255,255,255,0.2)",borderRadius:6,cursor:"pointer",fontSize:14,color:"#ecf0f1"},children:[y.jsx("input",{type:"radio",name:"editorMode",value:"anchor",checked:ri==="anchor",onChange:()=>Ed("anchor"),style:{marginRight:8,verticalAlign:"middle"}}),y.jsx("span",{style:{verticalAlign:"middle"},children:"Anchor mode"})]}),y.jsxs("label",{style:{display:"block",padding:"10px 12px",background:ri==="boundingBox"?"#3498db":"rgba(255,255,255,0.1)",border:ri==="boundingBox"?"2px solid #3498db":"1px solid rgba(255,255,255,0.2)",borderRadius:6,cursor:"pointer",fontSize:14,color:"#ecf0f1"},children:[y.jsx("input",{type:"radio",name:"editorMode",value:"boundingBox",checked:ri==="boundingBox",onChange:()=>Ed("boundingBox"),style:{marginRight:8,verticalAlign:"middle"}}),y.jsx("span",{style:{verticalAlign:"middle"},children:"Bounding box mode"})]})]}),y.jsx("div",{style:{marginBottom:16},children:y.jsxs("label",{style:{display:"block",padding:"10px 12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,cursor:"pointer",fontSize:14,color:"#ecf0f1"},children:[y.jsx("input",{type:"checkbox",checked:si,onChange:P=>Es(P.target.checked),style:{marginRight:8,verticalAlign:"middle"}}),y.jsx("span",{style:{verticalAlign:"middle"},children:"Show checkbox labels on canvas"})]})}),y.jsx("div",{style:{marginBottom:16},children:y.jsxs("label",{style:{display:"block",padding:"10px 12px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,cursor:"pointer",fontSize:14,color:"#ecf0f1"},children:[y.jsx("input",{type:"checkbox",checked:fr,onChange:P=>lu(P.target.checked),style:{marginRight:8,verticalAlign:"middle"}}),y.jsx("span",{style:{verticalAlign:"middle"},children:"Show anchors (declared)"})]})}),y.jsxs("div",{style:{marginBottom:16},children:[y.jsx("div",{style:{marginBottom:8,fontSize:12,fontWeight:600,color:"#bdc3c7",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Visual alignment (debug)"}),y.jsxs("label",{style:{display:"block",padding:"10px 12px",marginBottom:8,background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,cursor:"pointer",fontSize:14,color:"#ecf0f1"},children:[y.jsx("input",{type:"checkbox",checked:Ft,onChange:P=>rt(P.target.checked),style:{marginRight:8,verticalAlign:"middle"}}),y.jsx("span",{style:{verticalAlign:"middle"},children:"Show keypoint matches (slow)"})]}),y.jsx("button",{type:"button",onClick:q6,disabled:Cn,style:{width:"100%",padding:"8px 10px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,background:"rgba(255,255,255,0.08)",color:"#ecf0f1",cursor:Cn?"not-allowed":"pointer",fontSize:12},children:Cn?"Aligning":"Run visual alignment overlay"}),Dd&&y.jsxs("div",{style:{marginTop:8,padding:"6px 8px",borderRadius:6,background:"rgba(231,76,60,0.2)",border:"1px solid rgba(231,76,60,0.35)",fontSize:12},children:["Visual alignment failed: ",Dd]}),Tt&&y.jsxs("div",{style:{marginTop:10},children:[y.jsxs("div",{style:{fontSize:12,color:"rgba(255,255,255,0.8)"},children:[y.jsx("strong",{children:"DPI:"})," ",Tt.result.dpi," ",y.jsxs("span",{style:{opacity:.75},children:["(pages: ",Tt.result.pages.length,", errors: ",Tt.result.errors.length,")"]})]}),Tt.result.errors.length>0&&y.jsxs("div",{style:{marginTop:8,fontSize:12,color:"rgba(255,255,255,0.75)"},children:[y.jsx("strong",{children:"Errors:"}),y.jsxs("ul",{style:{marginTop:6,paddingLeft:18},children:[Tt.result.errors.slice(0,3).map((P,E)=>y.jsxs("li",{children:[y.jsx("code",{children:P.code}),": ",P.message]},`${P.code}-${E}`)),Tt.result.errors.length>3&&y.jsxs("li",{children:["and ",Tt.result.errors.length-3," more"]})]})]}),y.jsx("div",{style:{marginTop:10,display:"grid",gap:10},children:Tt.result.pages.map(P=>y.jsxs("div",{style:{padding:10,borderRadius:8,border:"1px solid rgba(255,255,255,0.18)",background:"rgba(0,0,0,0.18)"},children:[y.jsxs("div",{style:{fontSize:12,color:"rgba(255,255,255,0.85)",marginBottom:8},children:[y.jsxs("strong",{children:["Template page ",P.templatePageIndex]}),"  ",y.jsxs("strong",{children:["Target page ",P.targetPageIndex]})," ",y.jsxs("span",{style:{opacity:.75},children:["(",P.alignment.method,", inliers ",P.alignment.score.inliers,", err ",P.alignment.score.medianReprojErrorPx.toFixed(2),"px)"]}),!P.alignment.cornerCheck.ok&&y.jsxs("div",{style:{marginTop:4,color:"rgba(255,255,255,0.75)"},children:[y.jsx("strong",{children:"Corner check:"})," ",P.alignment.cornerCheck.reason??"failed"]})]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8},children:[y.jsxs("div",{children:[y.jsx("div",{style:{fontSize:11,color:"rgba(255,255,255,0.7)",marginBottom:4},children:"Template"}),y.jsx("img",{style:{width:"100%",borderRadius:6,display:"block"},src:`data:image/png;base64,${P.templatePngB64}`})]}),y.jsxs("div",{children:[y.jsx("div",{style:{fontSize:11,color:"rgba(255,255,255,0.7)",marginBottom:4},children:"Target"}),y.jsx("img",{style:{width:"100%",borderRadius:6,display:"block"},src:`data:image/png;base64,${P.targetPngB64}`})]}),y.jsxs("div",{children:[y.jsx("div",{style:{fontSize:11,color:"rgba(255,255,255,0.7)",marginBottom:4},children:"Overlay"}),y.jsx("img",{style:{width:"100%",borderRadius:6,display:"block"},src:`data:image/png;base64,${P.overlayPngB64}`})]})]}),Ft&&P.matchesPngB64&&y.jsxs("div",{style:{marginTop:10},children:[y.jsx("div",{style:{fontSize:11,color:"rgba(255,255,255,0.7)",marginBottom:4},children:"Keypoint matches"}),y.jsx("img",{style:{width:"100%",borderRadius:6,display:"block"},src:`data:image/png;base64,${P.matchesPngB64}`})]})]},`${P.templatePageIndex}-${P.targetPageIndex}`))})]})]}),y.jsxs("div",{style:{marginBottom:16},children:[y.jsx("div",{style:{marginBottom:8,fontSize:12,fontWeight:600,color:"#bdc3c7",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Select field"}),y.jsx("ul",{style:{maxHeight:320,overflowY:"auto",listStyle:"none",padding:0,margin:0},children:ie.regions.map(P=>{var Y,U,K;const E=cu.get(P.id),z=E==null?void 0:E.worstCaseOverflows;return y.jsx("li",{children:y.jsxs("button",{style:{border:ce===P.id?"2px solid #3498db":"1px solid rgba(255,255,255,0.2)",width:"100%",textAlign:"left",padding:"8px 10px",marginBottom:6,background:z?"#f39c12":ce===P.id?"#3498db":"rgba(255,255,255,0.1)",cursor:"pointer",borderRadius:6,display:"flex",alignItems:"center",gap:8,fontSize:13,fontFamily:"Inter, system-ui, sans-serif",color:"#ecf0f1"},onClick:()=>Hi(P.id),children:[z&&y.jsx("span",{title:"May overflow",children:""}),y.jsxs("span",{style:{flex:1},children:[y.jsx("div",{children:P.id}),fr&&y.jsxs("div",{style:{marginTop:4,fontSize:11,color:"rgba(255,255,255,0.75)",lineHeight:1.35},children:[y.jsxs("div",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:[y.jsx("span",{style:{color:"rgba(255,255,255,0.6)"},children:"Anchor:"})," ",P.anchorSpec?`primary: ${((Y=P.anchorSpec.primary)==null?void 0:Y.join("  "))??""}`:P.anchorText]}),((K=(U=P.anchorSpec)==null?void 0:U.requiredNearby)==null?void 0:K.length)>0&&y.jsxs("div",{style:{color:"rgba(255,255,255,0.65)"},children:[y.jsx("span",{style:{color:"rgba(255,255,255,0.6)"},children:"Required:"})," ",P.anchorSpec.requiredNearby.join("  ")]}),Array.isArray(P.anchorAlternatives)&&P.anchorAlternatives.length>0&&y.jsxs("div",{style:{color:"rgba(255,255,255,0.65)"},children:[y.jsx("span",{style:{color:"rgba(255,255,255,0.6)"},children:"Alts:"})," ",P.anchorAlternatives.join("  ")]})]})]})]})},P.id)})})]}),ce&&y.jsxs("div",{style:{marginBottom:16,padding:12,background:"rgba(0,0,0,0.2)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:8},children:[y.jsx("div",{style:{fontWeight:600,marginBottom:10,fontSize:12,color:"#bdc3c7",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Field details"}),y.jsxs("div",{style:{fontSize:13,color:"#ecf0f1",marginBottom:12},children:[y.jsxs("div",{style:{marginBottom:6},children:[y.jsx("strong",{children:"Kind:"})," ",(ct==null?void 0:ct.kind)??"text"]}),y.jsxs("div",{style:{marginBottom:6},children:[y.jsx("strong",{children:"Preset:"})," ",C1,B6&&y.jsx("span",{style:{color:"#f39c12",marginLeft:8,fontSize:12},children:"No preset set  using inferred default"})]}),Od&&y.jsxs("div",{style:{marginBottom:6},children:[y.jsx("strong",{children:"Max length:"})," ",Od.maxLength,y.jsx("div",{style:{color:"#bdc3c7",marginTop:4,fontSize:12},children:Od.label})]}),e_&&e_.worstCaseOverflows&&y.jsx("div",{style:{color:"#fff",marginTop:8,padding:"6px 8px",background:"#e74c3c",borderRadius:4,fontSize:12},children:" Worst-case text may overflow this box."})]}),(ct==null?void 0:ct.anchorText)&&y.jsxs("div",{style:{fontSize:13,color:"#ecf0f1",marginBottom:12},children:[y.jsx("div",{style:{fontWeight:600,marginBottom:10,fontSize:12,color:"#bdc3c7",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Anchors"}),y.jsxs("div",{style:{marginBottom:6},children:[y.jsx("strong",{children:"Declared:"})," ",ct.anchorText??""]}),ct.anchorSpec&&y.jsxs("div",{style:{marginBottom:6,color:"#bdc3c7"},children:[y.jsx("strong",{children:"Spec:"})," ","primary: ",((o_=ct.anchorSpec.primary)==null?void 0:o_.join("  "))??"",Array.isArray(ct.anchorSpec.requiredNearby)&&ct.anchorSpec.requiredNearby.length>0&&y.jsxs("div",{style:{marginTop:4},children:[y.jsx("strong",{children:"Required:"})," ",ct.anchorSpec.requiredNearby.join("  ")]})]}),Array.isArray(ct.anchorAlternatives)&&ct.anchorAlternatives.length>0&&y.jsxs("div",{style:{marginBottom:6,color:"#bdc3c7"},children:[y.jsx("strong",{children:"Alternatives:"})," ",ct.anchorAlternatives.join("  ")]}),y.jsxs("div",{style:{marginTop:10},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[y.jsxs("div",{style:{fontSize:12,color:"#bdc3c7"},children:[y.jsx("strong",{children:"Matched:"})," ",(le==null?void 0:le.status)==="found"?`${le.matchedAnchorText} (page ${le.matchedAnchorBox.pageIndex})`:(le==null?void 0:le.status)==="not_found"?"Anchor not found on this PDF":""]}),y.jsx("button",{type:"button",onClick:t_,disabled:$,style:{padding:"6px 8px",borderRadius:6,border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.08)",color:"#ecf0f1",cursor:$?"not-allowed":"pointer",fontSize:12},children:$?"Resolving":"Resolve now"})]}),(le==null?void 0:le.status)==="found"&&typeof le.score=="number"&&y.jsxs("div",{style:{marginTop:6,fontSize:12,color:"rgba(255,255,255,0.75)"},children:[y.jsx("strong",{children:"Score:"})," ",le.score.toFixed(1)]}),(le==null?void 0:le.status)==="not_found"&&le.reason&&y.jsxs("div",{style:{marginTop:6,fontSize:12,color:"rgba(255,255,255,0.75)"},children:[y.jsx("strong",{children:"Reason:"})," ",le.reason,Array.isArray(le.missingRequired)&&le.missingRequired.length>0&&y.jsxs("div",{style:{marginTop:4,color:"rgba(255,255,255,0.7)"},children:[y.jsx("strong",{children:"Missing:"})," ",le.missingRequired.join("  ")]})]}),(le==null?void 0:le.status)==="found"&&Array.isArray(le.tokenMatches)&&le.tokenMatches.length>0&&y.jsxs("div",{style:{marginTop:8,fontSize:12,color:"rgba(255,255,255,0.75)"},children:[y.jsx("strong",{children:"Token matches:"}),y.jsx("div",{style:{marginTop:6,display:"grid",gap:4},children:le.tokenMatches.map((P,E)=>y.jsxs("div",{style:{display:"flex",gap:6},children:[y.jsx("span",{style:{width:62,color:"rgba(255,255,255,0.6)"},children:P.role}),y.jsx("span",{style:{flex:1,color:"rgba(255,255,255,0.85)"},children:P.phrase})]},`${P.role}-${E}`))})]}),ye&&y.jsxs("div",{style:{marginTop:8,padding:"6px 8px",borderRadius:6,background:"rgba(231,76,60,0.2)",border:"1px solid rgba(231,76,60,0.35)",fontSize:12},children:["Failed to resolve anchors: ",ye]})]})]}),y.jsxs("div",{style:{marginBottom:12},children:[y.jsx("label",{style:{display:"block",marginBottom:6,fontSize:12,fontWeight:600,color:"#bdc3c7"},children:"Text preset"}),y.jsxs("select",{value:Uo,onChange:P=>Tm(P.target.value),disabled:(ct==null?void 0:ct.kind)==="checkbox",style:{width:"100%",padding:"8px 10px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,fontSize:13,background:"rgba(255,255,255,0.1)",color:"#ecf0f1"},children:[y.jsx("option",{value:"short",children:"Short (10pt)  names, dates"}),y.jsx("option",{value:"medium",children:"Medium (9pt)  short textboxes"}),y.jsx("option",{value:"long",children:"Long (8.5pt)  Q1Q8 boxes"}),y.jsx("option",{value:"note",children:"Note (8pt)  long notes"})]})]}),y.jsxs("div",{style:{display:"flex",gap:8},children:[y.jsx("button",{onClick:G6,disabled:!yt&&!Ms,style:{flex:1,padding:"8px 12px",border:"none",borderRadius:6,background:yt||Ms?"#3498db":"rgba(255,255,255,0.2)",color:yt||Ms?"#fff":"rgba(255,255,255,0.5)",cursor:yt||Ms?"pointer":"not-allowed",fontSize:13,fontWeight:500},children:"Auto-fit font"}),y.jsx("button",{onClick:$6,disabled:!yt,style:{flex:1,padding:"8px 12px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,background:yt?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.05)",color:yt?"#ecf0f1":"rgba(255,255,255,0.5)",cursor:yt?"pointer":"not-allowed",fontSize:13,fontWeight:500},children:"Clear box"})]}),$t&&$t.fieldId===ce&&y.jsxs("div",{style:{marginTop:12,padding:10,background:"rgba(46, 204, 113, 0.2)",border:"1px solid rgba(46, 204, 113, 0.4)",borderRadius:6},children:[y.jsx("div",{style:{fontWeight:600,marginBottom:6,fontSize:12,color:"#2ecc71"},children:"Suggested placement"}),y.jsx("pre",{style:{background:"rgba(0,0,0,0.3)",padding:10,borderRadius:4,maxHeight:200,overflowY:"auto",fontSize:11,margin:0,border:"1px solid rgba(255,255,255,0.2)",color:"#ecf0f1"},children:`textKind: ${$t.placement.textKind}
placement: {
  offsetX: ${$t.placement.originX.toFixed(2)},
  offsetY: ${$t.placement.originY.toFixed(2)},
  width: ${$t.placement.width.toFixed(2)},
  lineHeight: ${$t.placement.lineHeight},
  maxLines: ${$t.placement.maxLines},
  fontSize: ${$t.placement.fontSize}
}`})]})]}),y.jsxs("div",{style:{marginBottom:16},children:[y.jsx("div",{style:{marginBottom:8,fontSize:12,fontWeight:600,color:"#bdc3c7",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Calibrate"}),y.jsx("button",{onClick:K6,style:{width:"100%",padding:"10px 12px",border:"none",borderRadius:6,background:"#27ae60",color:"#fff",cursor:"pointer",fontSize:14,fontWeight:500},children:"Calibrate & persist layout"}),y.jsxs("p",{style:{fontSize:12,color:"#bdc3c7",marginTop:8,lineHeight:1.5},children:["Uses current clicks + boxes for ",y.jsxs("code",{style:{background:"rgba(0,0,0,0.3)",padding:"2px 6px",borderRadius:3},children:["insurerId=",N.insurerId]})," /"," ",y.jsxs("code",{style:{background:"rgba(0,0,0,0.3)",padding:"2px 6px",borderRadius:3},children:["variantId=",N.variantId]}),"."]})]}),y.jsxs("div",{style:{marginBottom:16},children:[y.jsx("div",{style:{marginBottom:8,fontSize:12,fontWeight:600,color:"#bdc3c7",textTransform:"uppercase",letterSpacing:"0.5px"},children:"QA"}),y.jsx("button",{onClick:W6,style:{width:"100%",padding:"10px 12px",border:"none",borderRadius:6,background:"#3498db",color:"#fff",cursor:"pointer",fontSize:14,fontWeight:500},children:"Generate QA PDF (max-length)"})]}),y.jsxs("div",{style:{marginBottom:16},children:[y.jsx("div",{style:{marginBottom:8,fontSize:12,fontWeight:600,color:"#bdc3c7",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Placements"}),y.jsx("pre",{style:{fontSize:11,maxHeight:240,overflowY:"auto",background:"rgba(0,0,0,0.3)",padding:10,borderRadius:6,border:"1px solid rgba(255,255,255,0.2)",margin:0,color:"#ecf0f1"},children:JSON.stringify(Rm,null,2)}),y.jsxs("p",{style:{fontSize:12,color:"#bdc3c7",marginTop:8,lineHeight:1.5},children:["Auto-saved to ",y.jsxs("code",{style:{background:"rgba(0,0,0,0.3)",padding:"2px 6px",borderRadius:3},children:["tmp/",N.insurerId,"-",N.variantId,"-placements.json"]}),"."]})]}),y.jsxs("div",{style:{marginBottom:16},children:[y.jsx("div",{style:{marginBottom:8,fontSize:12,fontWeight:600,color:"#bdc3c7",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Clicks"}),y.jsx("pre",{style:{fontSize:11,maxHeight:240,overflowY:"auto",background:"rgba(0,0,0,0.3)",padding:10,borderRadius:6,border:"1px solid rgba(255,255,255,0.2)",margin:0,color:"#ecf0f1"},children:JSON.stringify(n_,null,2)}),y.jsx("p",{style:{fontSize:12,color:"#bdc3c7",marginTop:8,lineHeight:1.5},children:"Included in the Calibrate request; export is shown here for reference/backups."})]})]}),y.jsx("div",{style:{flex:1,overflow:"auto",background:"#f8f8f8"},children:y.jsxs("div",{style:{position:"relative",width:Ue.width||"100%",height:Ue.height||"100%",margin:"0 auto"},children:[y.jsx("canvas",{ref:i,onClick:X6,onMouseDown:Y6,onMouseMove:U6,onMouseUp:V6,style:{cursor:ce?ri==="boundingBox"?"crosshair":"pointer":"default",display:"block",width:Ue.width||"100%",height:Ue.height||"auto"}}),y.jsxs("div",{ref:e,style:{position:"absolute",top:0,left:0,pointerEvents:"none"},children:[Z6.map(P=>{const E=P.kind==="checkbox",z=ce===P.fieldId,Y=!E||z||si;return y.jsxs(m3.Fragment,{children:[y.jsx("div",{style:{position:"absolute",left:P.viewX-3,top:P.viewY-3,width:6,height:6,borderRadius:"50%",border:"2px solid #ff4d4f",background:z?"#ff4d4f":"transparent",boxShadow:"0 0 0 1px #fff"}}),Y&&y.jsx("div",{style:{position:"absolute",left:P.viewX+8,top:P.viewY-14,fontSize:10,color:"#ff4d4f",background:"rgba(255,255,255,0.9)",padding:"1px 4px",borderRadius:3,border:"1px solid rgba(255,77,79,0.4)",whiteSpace:"nowrap",pointerEvents:"none"},children:P.fieldId})]},`${P.fieldId}-${P.pageIndex}`)}),e4.map(P=>y.jsx("div",{style:{position:"absolute",left:P.viewX,top:P.viewY-P.fontSizePx,width:P.widthPx,fontSize:P.fontSizePx,lineHeight:`${P.lineHeightPx}px`,color:P.isSuggestion?"#1f618d":"#2c3e50",opacity:P.isSuggestion?.85:.7,background:"rgba(255,255,255,0.6)",padding:"1px 2px",borderRadius:3,fontWeight:500,whiteSpace:"pre",pointerEvents:"none",border:P.isSelected?"1px solid rgba(31,97,141,0.6)":"1px solid rgba(44,62,80,0.2)"},children:P.line},P.key)),((l_=n.current)==null?void 0:l_.convertToViewportPoint)&&mr.filter(P=>P.pageIndex===J).map(P=>{const[E,z]=n.current.convertToViewportPoint(P.box.left,P.box.top),[Y,U]=n.current.convertToViewportPoint(P.box.right,P.box.bottom),K=Math.min(E,Y),Pe=Math.min(z,U),be=Math.abs(Y-E),et=Math.abs(U-z),Rt=ce===P.fieldId;return y.jsx("div",{style:{position:"absolute",left:K,top:Pe,width:be,height:et,border:`2px solid ${Rt?"#ff4d4f":"#28a745"}`,background:"rgba(0,0,0,0.03)"}},`${P.fieldId}-${P.pageIndex}`)}),((d_=n.current)==null?void 0:d_.convertToViewportPoint)&&(le==null?void 0:le.status)==="found"&&le.matchedAnchorBox.pageIndex===J&&(()=>{const{x:P,y:E,width:z,height:Y}=le.matchedAnchorBox,[U,K]=n.current.convertToViewportPoint(P,E),[Pe,be]=n.current.convertToViewportPoint(P+z,E-Y),et=Math.min(U,Pe),Rt=Math.min(K,be),Te=Math.abs(Pe-U),oi=Math.abs(be-K);return y.jsx("div",{style:{position:"absolute",left:et,top:Rt,width:Te,height:oi,border:"2px solid #8e44ad",background:"rgba(142,68,173,0.08)",boxShadow:"0 0 0 1px rgba(255,255,255,0.5)"}},`anchor-${le.regionId}-${J}`)})(),((c_=n.current)==null?void 0:c_.convertToViewportPoint)&&(le==null?void 0:le.status)==="found"&&((h_=le.clusterBox)==null?void 0:h_.pageIndex)===J&&(()=>{const{left:P,right:E,top:z,bottom:Y}=le.clusterBox,[U,K]=n.current.convertToViewportPoint(P,z),[Pe,be]=n.current.convertToViewportPoint(E,Y),et=Math.min(U,Pe),Rt=Math.min(K,be),Te=Math.abs(Pe-U),oi=Math.abs(be-K);return y.jsx("div",{style:{position:"absolute",left:et,top:Rt,width:Te,height:oi,border:"2px dashed rgba(142,68,173,0.9)",background:"rgba(142,68,173,0.05)",boxShadow:"0 0 0 1px rgba(255,255,255,0.35)",pointerEvents:"none"}},`cluster-${le.regionId}-${J}`)})(),((u_=n.current)==null?void 0:u_.convertToViewportPoint)&&(le==null?void 0:le.status)==="found"&&Array.isArray(le.tokenMatches)&&le.tokenMatches.filter(P=>P.box.pageIndex===J).map((P,E)=>{const z=P.role==="primary"?"#f1c40f":P.role==="required"?"#3498db":P.role==="optional"?"#2ecc71":"#e67e22",{x:Y,y:U,width:K,height:Pe}=P.box,[be,et]=n.current.convertToViewportPoint(Y,U),[Rt,Te]=n.current.convertToViewportPoint(Y+K,U-Pe),oi=Math.min(be,Rt),fu=Math.min(et,Te),Fs=Math.abs(Rt-be),t4=Math.abs(Te-et);return y.jsx("div",{style:{position:"absolute",left:oi,top:fu,width:Fs,height:t4,border:`2px solid ${z}`,background:`${z}18`,pointerEvents:"none"}},`token-${le.regionId}-${E}-${J}`)}),zd&&y.jsx("div",{style:{position:"absolute",left:zd.left,top:zd.top,width:zd.width,height:zd.height,border:`2px solid ${zd.borderColor}`,background:"rgba(0,0,0,0.05)"}})]})]})})]})},t3={knee:"Kn",shoulder:"Axel",back:"Rygg",neck:"Nacke",hip:"Hft",hand:"Hand",foot:"Fot",other:"Annat"};function b9(i){try{return new Date(i).toLocaleString()}catch{return i}}function k9(){var ie;const[i,e]=M.useState([]),[t,n]=M.useState([]),[s,r]=M.useState(""),[o,l]=M.useState(""),[d,c]=M.useState([]),[h,u]=M.useState([]),[f,m]=M.useState(null),[b,v]=M.useState(!1),[S,g]=M.useState(null),[k,w]=M.useState(!1),A=M.useMemo(()=>t.filter(R=>R.isActive),[t]),T=M.useMemo(()=>new Map(i.map(R=>[R.id,R])),[i]),I=M.useMemo(()=>new Map(d.map(R=>[R.formId,R])),[d]),C=M.useMemo(()=>{const R=new Set;for(const X of A)X.insurerId===s&&R.add(X.bodyPart);return Array.from(R).sort()},[A,s]),L=M.useMemo(()=>A.find(R=>R.insurerId===s&&R.bodyPart===o)??null,[A,s,o]),F=M.useMemo(()=>L?I.get(L.id)??null:null,[L,I]);M.useEffect(()=>{let R=!1;return(async()=>{var X;try{const q=await fetch(He("/api/catalog/all"));if(!q.ok)throw new Error(`Failed to load catalog (${q.status})`);const G=await q.json(),H=Array.isArray(G.insurers)?G.insurers:[],W=Array.isArray(G.forms)?G.forms:[];if(R)return;e(H),n(W);const se=((X=H[0])==null?void 0:X.id)??"";r(J=>J||se)}catch(q){R||g(q.message)}})(),()=>{R=!0}},[]),M.useEffect(()=>{if(s){if(C.length===0){l("");return}(!o||!C.includes(o))&&l(C[0])}},[s,o,C]);const D=async()=>{const R=await fetch(He("/api/templates/status"));if(!R.ok)throw new Error(`Failed to load template status (${R.status})`);const X=await R.json();c(Array.isArray(X.items)?X.items:[])},j=async()=>{const R=await fetch(He("/api/templates"));if(!R.ok)throw new Error(`Failed to load legacy templates (${R.status})`);const X=await R.json();u(Array.isArray(X.entries)?X.entries:[])};M.useEffect(()=>{D().catch(R=>g(R.message))},[]),M.useEffect(()=>{k&&j().catch(R=>g(R.message))},[k]);const N=async()=>{if(!(!L||!f)){v(!0),g(null);try{const R=new FormData;R.append("formId",L.id),R.append("pdf",f);const X=await fetch(He("/api/templates/upload"),{method:"POST",body:R});if(!X.ok){const q=await X.json().catch(()=>null);throw new Error((q==null?void 0:q.error)||`Upload failed: ${X.status}`)}m(null),await D()}catch(R){g(R.message)}finally{v(!1)}}};return y.jsxs("div",{className:"app",children:[y.jsx("h1",{children:"Mallar"}),y.jsx("p",{className:"subhead",children:"Ladda upp och hantera kanoniska (blank/official) PDF:er som anvnds fr visuell alignment. Endast formulr i katalogen visas."}),y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"row",style:{gap:12,alignItems:"flex-end"},children:[y.jsxs("label",{children:["Frskringsbolag",y.jsx("br",{}),y.jsxs("select",{value:s,onChange:R=>{r(R.target.value),l("")},children:[i.length===0&&y.jsx("option",{value:"",children:s||""}),i.map(R=>y.jsx("option",{value:R.id,children:R.displayName},R.id))]})]}),y.jsxs("label",{children:["Kroppsdel",y.jsx("br",{}),y.jsxs("select",{value:o,onChange:R=>l(R.target.value),disabled:!s||C.length===0,children:[C.length===0&&y.jsx("option",{value:"",children:""}),C.map(R=>y.jsx("option",{value:R,children:t3[R]??R},R))]})]}),y.jsx("div",{style:{flex:1}}),y.jsxs("label",{children:["Canonical PDF",y.jsx("br",{}),y.jsx("input",{type:"file",accept:"application/pdf",onChange:R=>{var X;return m(((X=R.target.files)==null?void 0:X[0])??null)}})]}),y.jsx("button",{type:"button",onClick:N,disabled:b||!f,children:b?"Uploading...":"Upload / Replace"})]}),S&&y.jsx("div",{className:"error",children:S}),L&&y.jsxs("div",{style:{marginTop:14,fontSize:14},children:[y.jsxs("div",{children:[y.jsx("strong",{children:"Form:"})," ",((ie=T.get(L.insurerId))==null?void 0:ie.displayName)??L.insurerId," "," ",L.title]}),y.jsxs("div",{style:{marginTop:6},children:[y.jsx("strong",{children:"formId:"})," ",y.jsx("code",{children:L.id})]}),y.jsxs("div",{style:{marginTop:6},children:[y.jsx("strong",{children:"Status:"})," ",(F==null?void 0:F.canonical.status)==="present"?" Set":" Missing"]}),(F==null?void 0:F.canonical.status)==="present"&&F.canonical.sha256&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{marginTop:6},children:[y.jsx("strong",{children:"Pages:"})," ",F.canonical.pageCount]}),y.jsxs("div",{children:[y.jsx("strong",{children:"Uploaded:"})," ",F.canonical.uploadedAt?b9(F.canonical.uploadedAt):""]}),y.jsxs("div",{children:[y.jsx("strong",{children:"SHA:"})," ",y.jsxs("code",{children:[F.canonical.sha256.slice(0,12),""]})]}),y.jsx("div",{style:{marginTop:8},children:y.jsx("a",{href:He(`/api/templates/${F.canonical.templateId}/download`),target:"_blank",rel:"noreferrer",children:"Download canonical PDF"})})]})]})]}),y.jsxs("div",{className:"panel",children:[y.jsx("div",{className:"badge",children:"Alla formulr (katalog)"}),y.jsx("div",{style:{overflowX:"auto",background:"rgba(27, 41, 60, 0.04)",border:"1px solid rgba(226, 232, 240, 0.9)",borderRadius:10,padding:10},children:y.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13,color:"#1a202c"},children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{style:{textAlign:"left",padding:"8px 6px",color:"#4a5568",borderBottom:"1px solid rgba(226, 232, 240, 0.9)"},children:"Frskringsbolag"}),y.jsx("th",{style:{textAlign:"left",padding:"8px 6px",color:"#4a5568",borderBottom:"1px solid rgba(226, 232, 240, 0.9)"},children:"Kroppsdel"}),y.jsx("th",{style:{textAlign:"left",padding:"8px 6px",color:"#4a5568",borderBottom:"1px solid rgba(226, 232, 240, 0.9)"},children:"formId"}),y.jsx("th",{style:{textAlign:"left",padding:"8px 6px",color:"#4a5568",borderBottom:"1px solid rgba(226, 232, 240, 0.9)"},children:"Status"})]})}),y.jsx("tbody",{children:A.map(R=>{var q;const X=I.get(R.id);return y.jsxs("tr",{style:{cursor:"pointer"},onClick:()=>{r(R.insurerId),l(R.bodyPart),window.scrollTo({top:0,behavior:"smooth"})},children:[y.jsx("td",{style:{padding:"6px",borderBottom:"1px solid rgba(226, 232, 240, 0.75)"},children:((q=T.get(R.insurerId))==null?void 0:q.displayName)??R.insurerId}),y.jsx("td",{style:{padding:"6px",color:"#4a5568",borderBottom:"1px solid rgba(226, 232, 240, 0.75)"},children:t3[R.bodyPart]??R.bodyPart}),y.jsx("td",{style:{padding:"6px",color:"#4a5568",borderBottom:"1px solid rgba(226, 232, 240, 0.75)"},children:y.jsx("code",{children:R.id})}),y.jsx("td",{style:{padding:"6px",borderBottom:"1px solid rgba(226, 232, 240, 0.75)"},children:(X==null?void 0:X.canonical.status)==="present"?"":""})]},R.id)})})]})}),y.jsxs("div",{style:{marginTop:12},children:[y.jsxs("label",{style:{display:"flex",gap:8,alignItems:"center",fontSize:12,color:"rgba(0,0,0,0.75)"},children:[y.jsx("input",{type:"checkbox",checked:k,onChange:R=>w(R.target.checked)}),"Visa legacy (felskning)"]}),k&&y.jsxs("div",{style:{marginTop:10},children:[y.jsx("div",{style:{fontSize:12,color:"rgba(0,0,0,0.65)",marginBottom:8},children:"Legacy list is read-only and may include internal/obsolete entries."}),y.jsx("div",{style:{overflowX:"auto"},children:y.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12,color:"#1a202c"},children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{style:{textAlign:"left",padding:"8px 6px",color:"#4a5568",borderBottom:"1px solid rgba(226, 232, 240, 0.9)"},children:"Label"}),y.jsx("th",{style:{textAlign:"left",padding:"8px 6px",color:"#4a5568",borderBottom:"1px solid rgba(226, 232, 240, 0.9)"},children:"insurerId"}),y.jsx("th",{style:{textAlign:"left",padding:"8px 6px",color:"#4a5568",borderBottom:"1px solid rgba(226, 232, 240, 0.9)"},children:"variantId"}),y.jsx("th",{style:{textAlign:"left",padding:"8px 6px",color:"#4a5568",borderBottom:"1px solid rgba(226, 232, 240, 0.9)"},children:"Status"})]})}),y.jsx("tbody",{children:h.map(R=>y.jsxs("tr",{children:[y.jsx("td",{style:{padding:"6px",borderBottom:"1px solid rgba(226, 232, 240, 0.75)"},children:R.label}),y.jsx("td",{style:{padding:"6px",color:"#4a5568",borderBottom:"1px solid rgba(226, 232, 240, 0.75)"},children:y.jsx("code",{children:R.insurerId})}),y.jsx("td",{style:{padding:"6px",color:"#4a5568",borderBottom:"1px solid rgba(226, 232, 240, 0.75)"},children:y.jsx("code",{children:R.variantId})}),y.jsx("td",{style:{padding:"6px",borderBottom:"1px solid rgba(226, 232, 240, 0.75)"},children:R.status==="set"?"":R.status==="inherited"?" (inherited)":""})]},`${R.insurerId}:${R.variantId}`))})]})})]})]})]})]})}const O6=new URLSearchParams(window.location.search),w9=O6.get("mode"),lg=O6.get("tab")||w9||"convert",S9=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="[::1]",Zu=S9||!1;let Ar=lg==="inspector"||lg==="templates"||lg==="convert"?lg:"convert";!Zu&&(Ar==="inspector"||Ar==="templates")&&(Ar="convert",window.history.replaceState(null,"","/?tab=convert"));function gx({tab:i,active:e,label:t}){return y.jsx("a",{className:`tab${e?" active":""}`,href:`/?tab=${i}`,children:t})}function A9(){return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"tabs",children:[y.jsx(gx,{tab:"convert",active:Ar==="convert",label:"Convert"}),Zu?y.jsx(gx,{tab:"inspector",active:Ar==="inspector",label:"Layout Inspector"}):null,Zu?y.jsx(gx,{tab:"templates",active:Ar==="templates",label:"Templates"}):null]}),Zu&&Ar==="inspector"?y.jsx(_9,{}):null,Zu&&Ar==="templates"?y.jsx(k9,{}):null,Ar==="convert"?y.jsx(RA,{}):null]})}xx.createRoot(document.getElementById("root")).render(y.jsx(m3.StrictMode,{children:y.jsx(A9,{})}));
